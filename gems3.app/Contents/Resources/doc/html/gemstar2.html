<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <meta name="GENERATOR"
 content="Mozilla/4.72 [en] (Win98; I) [Netscape]">
  <title>GEMS Getting Started Manual (2)</title>
  <meta name="description" content="Version 2.0.0-PSI">
</head>
<body>
<h1><img src="gems1.png" height="48" width="48"> <b><font
 color="#000099"><font size="+2"> </font></font></b><font
 color="#000066">GEM-Selektor version 2-PSI</font></h1>
<p><font face="Helvetica, Arial, sans-serif"><a
 href="gemstart.html#END_GEMSTART">To PREVIOUS part (gemstart.html)</a></font>
</p>
<p><font face="Helvetica, Arial, sans-serif"><a href="gemstart.html">Table
of Contents</a> <br>
</font> </p>
<p> </p>
<h2><font face="Helvetica, Arial, sans-serif"> Getting Started Manual
(Continued)</font></h2>
<p><font face="Helvetica, Arial, sans-serif">&lt;under construction&gt;
<br>
</font> </p>
<p><font face="Helvetica, Arial, sans-serif">To be completed in version
2.2&nbsp;</font> </p>
<hr size="2" width="100%">
<h2><a name="GSM_IRREVER_PROCESS"></a><font
 face="Helvetica, Arial, sans-serif">4.&nbsp; Simulation of
Irreversible Processes</font></h2>
<p><font face="Helvetica, Arial, sans-serif"> Many geochemical modeling
problems
require calculation of a series of equilibrium states to simulate <a
 href="glossary.html#DT_irreversible">irreversible chemical
mass-transfer</a><a href="glossary.html#DT_titration_direct">titration</a>,
mixing, <a href="glossary.html#DT_dissolution">incongruent dissolution</a>,
<a href="glossary.html#DT_sequential_reactors">"sequential reactors"</a>,
etc. Often, scores to hundreds of equilibria must be computed in one
such "process simulation".&nbsp; <br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif"> Doing this by creating
single system <a href="glossary.html#DT_CSD">CSD</a>s, calculating and
examining equilibria <a href="gemstart.html#GSM_SINGLE_EQSTAT">as
described previously</a>, would be a rather time-consuming, inefficient
and boring job, especially when the process simulation is to be
controlled by a certain regular change of temperature, pressure, or
bulk composition of the system. Process Simulators of the GEM-Selektor
(implemented in the <a href="gm_proces.html">Process</a> module and
record type) can greatly facilitate and accelerate this work - from
telling the program what to change in the CSD from one equilibrium
point to another, up to sampling, plotting and exporting relevant
results.<br>
</font> </p>
<p><font face="Helvetica, Arial, sans-serif">In this section, we will
create some Process Simulators within the "Carbonat" modelling project.
<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Firstly, we will plot the
aqueous speciation of calcium as it depends on the CO<sub>2</sub>
&nbsp;addition in the closed system in presence of Portlandite Ca(OH)<sub>2</sub>
and Calcite CaCO<sub>3</sub> solid phases. This can be done in a
"direct titration" process, also convenient for plotting redox changes
upon addition of a reductant (or oxidant) to the closed system (shown
on an example of adding carbon to the aqueous solution with Fe-Mn
oxides). <br>
</font> </p>
<p><font face="Helvetica, Arial, sans-serif">Secondly, we will plot the
aqueous speciation as function of pH in presence of calcite in the open
system. As pH cannot be set directly as an input parameter of the GEM
algorithm, we will have to adjust pH by adding acid (HCl) or base
(NaOH). The best way
to obtain nice graphs is to perform a series of the so-called "inverse
titrations"
(where the program itself looks for an addition of acid or base for
obtaining
a prescribed value of calculated pH). Later on, the sequence of inverse
titration
points can easily be converted into a (much faster) direct titration
simulation.
<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Finally, we will learn how
to set up and run the Process Simulator in a "sequential reactor"
mode.&nbsp;</font></p>
<p> <br>
&nbsp; <br>
</p>
<h3><a name="GSM_PARENT_SYSEQ"></a><font
 face="Helvetica, Arial, sans-serif">4.1. Creating a Parent System
Definition</font></h3>
<p><font face="Helvetica, Arial, sans-serif">To create a Process
Simulator, you first have to create its "parent" <a
 href="gm_syseq.html">SysEq record</a> containing an initial <a
 href="gems_bcc.html">CSD</a> and <a href="gems_sys.html">equilibrium
speciation</a>. The <a href="gm_proces.html">Process</a> module will
then automatically "clone" and modify the "parent" SysEq record and run
BCC and IPM calculations, according to the input values of Process
iterators and the process simulation math script.<br>
&nbsp; <br>
So, start the GEM-Selektor (if necesary) and open the "Carbonat"
project. Open the "Single Thermodynamic System" dialog and create a new
system </font><big><tt>"Carbonat:G:CO2titrP:0:0:1:25:0:"</tt></big><font
 face="Helvetica, Arial, sans-serif">. Comment it as </font><big><tt>"Parent
for CO2 titration of water-portlandite system"</tt></big> <font
 face="Helvetica, Arial, sans-serif">and give the following recipe for
the bulk composition: 1 kg water, 0.001 g O<sub>2</sub>, 0.1 mol Ca(OH)<sub>2</sub>
and 1e-6 mol CO<sub>2</sub>, then calculate BCC (let the program turn
off &nbsp; </font><big><tt>Na,Cl,Fe,Mn</tt></big> <font
 face="Helvetica, Arial, sans-serif">and</font> <big><tt>Nit</tt></big>
<font face="Helvetica, Arial, sans-serif">Independent Components) and
compute the
equilibrium state. If you experience problems in setting up the system
(it
should take some 1 minute), then read again about</font> <font
 face="Helvetica, Arial, sans-serif"><a
 href="gemstart.html#GSM_CREATE_SYSTEM_1">how to create a single system
definition</a>. Your should have calculated pH =&nbsp; 12.47 and only </font><big><tt>"aq_gen"</tt></big><font
 face="Helvetica, Arial, sans-serif"> and </font><big><tt>"Portlandite"</tt></big>
<font face="Helvetica, Arial, sans-serif">phases present at equilibrium
in non-zero amounts. </font><br>
&nbsp; <br>
<font face="Helvetica, Arial, sans-serif"> The parent system for
creating a new Process Simulator is, in principle, ready. We can check
now how much CO<sub>2</sub> should be added to convert all portlandite
into calcite and get pCO<sub>2</sub> close to 1 bar. "Clone" the
currently active SysEq record by changing the fourth field of the
record key, say, to "9" and add 0.1 mole of CO<sub>2</sub> to the bulk
conposition, then calculate the
equilibrium. Now, portlandite is gone, we have almost 0.1 mole of</font>
<big><tt>"Calcite"</tt></big> <font face="Helvetica, Arial, sans-serif">present,
but still no gas phase and pH = 9.9 (you can expand the</font> <big><tt>"gas_gen"</tt></big>
<font face="Helvetica, Arial, sans-serif">phase and see that fugacity
of CO<sub>2</sub> (log(activity) = -6.18 is still very low). Thus,
change the CO<sub>2</sub> addition to 0.3 moles and run GEM IPM again.
This time, you should get 0.1565 moles of the gas phase, pH = 6.0 and
fugacity of CO<sub>2</sub> close to 1. So, the titration can be stopped
at about 0.3 moles of added CO<sub>2</sub>. You can delete the trial
SysEq record now, if you wish.&nbsp;</font> </p>
<p><br>
</p>
<h3><a name="GSM_SET_PROCESS_SIM"></a><font
 face="Helvetica, Arial, sans-serif">4.2.&nbsp; Setting up a Process
Simulator</font></h3>
<p><font face="Helvetica, Arial, sans-serif">From the "GEM Modelling
Project" dialog, click on a "Process Simulation (Process)" button. This
will bring you a (still empty) "Process" module window. Select "Create"
from the "Record" menu to create your first <a
 href="file:///C:/GEMS2test/program/doc/html/gm_proces.html">Process
definition</a> record.&nbsp; You will see a dialog window entitled
"SysEq: Please, select a parent system for a new Process" with a list
of <a href="file:///C:/GEMS2test/program/doc/html/gm_syseq.html">SysEq
records</a> available in the </font><big><tt>"Carbonat"</tt></big> <font
 face="Helvetica, Arial, sans-serif">profile.&nbsp; Click on the</font>
<big><tt>"Carbonat:G:CO2titr:0:0:1:25:0:"</tt></big>&nbsp;<font
 face="Helvetica, Arial, sans-serif"> record key (to mark/select it)
and press </font><font face="Helvetica, Arial, sans-serif" size="-1">"Ok"</font><font
 face="Helvetica, Arial, sans-serif"> to proceed. <br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Now, a small "Process:
Please, enter a new key" dialog appears with the last two lines
containing asterisks</font> <big><tt>'*'</tt></big><font
 face="Helvetica, Arial, sans-serif"> in two
fields added below to the above-mentioned record key. Replace</font>
<tt><big>'*'</big> </tt><font face="Helvetica, Arial, sans-serif">with&nbsp;</font>
<big><tt>'S'</tt></big> <font face="Helvetica, Arial, sans-serif">in
the last field, to indicate that the process will change bulk
composition independently of calculated equilibrium parameters. In a
field above
(previous-to-last one), type e.g.</font> <big><tt>"AddCO2toPort"</tt></big>
<font face="Helvetica, Arial, sans-serif">as a process simulator
identifier
(because several processes can be defined using the same parent SysEq
record). Press</font> <big><tt>"Ok"</tt></big> <font
 face="Helvetica, Arial, sans-serif"> when finished. </font><span
 style="font-family: helvetica,arial,sans-serif;"><br>
</span></p>
<p><span style="font-family: helvetica,arial,sans-serif;">This will get
you to a "Setup to Create Process" dialog with two pages: </span><span
 style="font-family: helvetica,arial,sans-serif;"> "Process simulation
types" and "Dimensions and graphics". This time, there is nothing to
change on the first page, so switch to the second one "Dimensions and
graphics". Change the first field (number of SysEq records to be
generated) to 31 and the
third field (number of sampled data lines on the graph) to 3. </span><font
 face="Helvetica, Arial, sans-serif">The idea here is to collect
calculated values of log Ca<sub>AQ</sub>, log <i>f</i>CO<sub>2</sub>
and&nbsp; -pH
at each of 31 simulation points and plot them. 31 points are necessary
to
discretize an interval of CO<sub>2</sub> additions from 1e-6 to 0.3 mol
with
a step of 0.01 mol).&nbsp; <br>
&nbsp;<br>
Press "Ok" when ready. &nbsp;A Page 1 of the "Process" window will
appear; as usual, fill out the first two comment fields e.g. as shown
below.&nbsp;</font></p>
<p><span style="font-family: helvetica,arial,sans-serif;">&nbsp; </span><tt><big>"Titration
of portlandite-water system with CO2"<br>
&nbsp;"Example 2 from GEMS Getting Started tutorial"</big></tt><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"><b><a
 name="GSM_SET_PROC_ITER"></a>How to set up iterators in your first
Process Simulator. </b><br>
</span> <span style="font-family: helvetica,arial,sans-serif;"><br>
The first iterator <a href="gm_proces.html#iTm_0"><big><tt>iTm</tt></big></a>
defines how the program will number the generated system definitions
(CSD). If we start with CSD #1000 and will produce 31 points, then we
will end up with a CSD #1300 at increment 10. &nbsp;So, we should set
&nbsp;<big><tt>iTm</tt></big> &nbsp;to these values 1000, 1300 and 10
(from top to bottom). <br>
<br>
Pressure (1 bar) and temperature (25 C) will be kept constant, so there
is nothing to change in the <a href="gm_proces.html#iP_0"><big><tt>iP</tt></big></a>
and <a href="gm_proces.html#iTC_0"><big><tt>iTC</tt></big></a>
iterators. The <a href="gm_proces.html#iNv_0"><big><tt>iNv</tt></big></a>
iterator
should usually be set the same as the last field of the "parent" SysEq
record
key, i.e. left as 1, 1, 0 in this case. <br>
<br>
The<b> </b><a href="gm_proces.html#iNu_0"><big><tt>iNu</tt></big></a>
iterator should usually contain the range ( 0 to 0.3 mol) and the
linear
increment (0.01 mol) for additions the titrant, in our case, CO<sub>2</sub>
to bulk composition of the parent system. &nbsp;So, set <big><tt>iNu</tt></big>
to 0, 0.3 and 0.01. <br>
<br>
After you have set the iterators, what remains is to write up the
process simulation and the data sampling <a href="gmscript.html">math
scripts</a>.&nbsp;</span> <br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"></span></p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_MATH_SCRIPT"></a><font
 face="Helvetica, Arial, sans-serif">4.3. Writing Process Simulation
Math Script&nbsp;</font></h3>
<p><span style="font-family: helvetica,arial,sans-serif;"> A&nbsp;large
(still empty) field at the bottom of "Page 1" of the "Process" window
should
contain a math script that tells the program what and how to change
during
the process simulation. To facilitate writing of such scripts, the GEMS
code
is provided with the <a href="gm_sdref.html">"Template script library"</a>,
accessible via the "Help" "Scripts..." menu command or the <big><tt>F3</tt></big>
keystroke. <br>
</span></p>
<p><span style="font-family: helvetica,arial,sans-serif;">In the case
of
present example, the simulation script must change step-by-step the
addition
of CO<sub>2</sub> to bulk composition of the "parent" system. The
easiest
way to do it is to use <a href="gm_proces.html#cNu"><big><tt>cNu</tt></big></a>
- a work cell connected to the <big><tt>iNu</tt></big> process
iterator.
When the process simulator runs, it first sets <big><tt>cNu</tt></big>
equal
to <big><tt>iNu[0]</tt></big> and then automatically increments the <big><tt>cNu</tt></big>
cell by&nbsp; <big><tt>iNu[2]</tt></big></span><span
 style="font-family: helvetica,arial,sans-serif;"> value until it
becomes greater than</span><span
 style="font-family: helvetica,arial,sans-serif;"><big><tt> iNu[1]</tt></big>,
or the maximum total number of steps (31 in this case) is reached. So,
for now, the following simple script will do the requested job: <br>
</span></p>
<blockquote><big><tt>$ Check if not zero</tt></big><br>
  <big><tt>cNu =: ( cNu? cNu: 1e-6 );</tt></big><br>
  <big><tt>$ Store for plotting</tt></big><br>
  <big><tt>modC[J] =: cNu;</tt></big><br>
  <big><tt>$ Change composition of J-th system </tt></big><br>
  <big><tt>xa_[{CO2}] =: cNu;</tt></big><br>
  <big><tt>$ End </tt></big><br>
</blockquote>
<p><big><font face="Helvetica, Arial, sans-serif"><small>Lines
beggining
with "$" are comments. The first operator checks if cNu contains zero
(the
first simulation point in our case) and, if so, replaces it by 1e-6
(mol)
in order to prevent the program from eliminating carbon and its species
from
the CSD. The second operator stores additions of CO<sub>2</sub> in J-th
simulation point for the subsequent plotting of results (the </small></font><small><big><tt>J</tt></big>
<font face="Helvetica, Arial, sans-serif">index is changed
automatically
by the program, starting from 0).</font>&nbsp; <font
 face="Helvetica, Arial, sans-serif"> Finally, the last operator sets
the value contained in</font> <big><tt>cNu</tt></big><font
 face="Helvetica, Arial, sans-serif"> for the J-th CSD into the</font> <a
 href="gems_bcc.html#xa_"><big><tt>xa_</tt></big></a> <font
 face="Helvetica, Arial, sans-serif">vector for PCO quantities, visible
on the "Compos" page of "System" window. We used the same input vector
previously, to add directly 1000 g H<sub>2</sub>O, 0.1 mol Ca(OH)<sub>2</sub>
and so
on. <br>
</font></small></big></p>
<p><big><small><font face="Helvetica, Arial, sans-serif">Now, you can
copy the above script and paste it into the</font> <big><tt>P_expr</tt></big>
<font face="Helvetica, Arial, sans-serif">field on Page 1 of the
"Process"
window. Alternatively,&nbsp; you can type the script right there, or
edit
it any time when this Process record is loaded. </font><br>
</small></big></p>
<p><big><tt><br>
</tt></big></p>
<h3><a name="GSM_SET_PROSIM_SAMPLING"></a><font
 face="Helvetica, Arial, sans-serif">4.4. Setting Process Data Sampling</font>&nbsp;</h3>
<p><font face="Helvetica, Arial, sans-serif">There is a convenient
option to run the process simulation and simultaneously plot some
results. We strongly recommend using it, as also intended in this
example. You will need to write another math script (see Page 2 of the
Process window) that will be executed at each simulation step after the
process simulation math script and the
GEM IPM calculation of an equilibrium state. At the beginning, this may
seem
a bit complicated, but after some exercises you will see how much
freedom
the math scripts give you in picking up relevant results out of a vast
amount of calculated numbers. <br>
</font> <br>
</p>
<h4> <a name="GSM_PROSAMPLE_MATH_SCRIPT"></a><font
 face="Helvetica, Arial, sans-serif">4.4.1. Writing Process Data
Sampling Math Script</font></h4>
<p> <span style="font-family: helvetica,arial,sans-serif;">To
facilitate writing of math scripts, the GEMS code is provided with the
"Template script library", accessible via the "Help" "Scripts..." menu
command or the <big><tt>F3</tt></big> keystroke. Press <big><tt>F3</tt></big>
to see the "...Select an appropriate script" dialog</span><span
 style="font-family: helvetica,arial,sans-serif;"> and double-click
there on </span><span style="font-family: helvetica,arial,sans-serif;">a&nbsp;
"<big><tt>mscript-plot-aqueous:0001:proces:</tt></big>" record key in
the
appearing list.</span><span
 style="font-family: helvetica,arial,sans-serif;"> This will open a
SDref window;</span><span
 style="font-family: helvetica,arial,sans-serif;"> &nbsp;the template
script itself is visible on Page 2 of this window (scroll down
to end of the text).&nbsp; </span></p>
<p><span style="font-family: helvetica,arial,sans-serif;"> Read the
comments, then mark the script (with left mouse key pressed) as shown
above, and
press &nbsp;<big><tt>Ctrl-C</tt></big> &nbsp;to take it into clipboard.
Then switch back to Page 2 of the Process window and paste (<big><tt>Ctrl-V</tt></big>)
the text into the <a href="gm_proces.html#pgExpr"><big><tt>pgExpr</tt></big></a>
field. Edit the script; its final appearance should be like this: </span><br>
</p>
<blockquote><big><tt>$ Abscissa: additions of CO2 in millimoles</tt></big><br>
  <big><tt>xp[J] =: modC[J]*1000; </tt></big><br>
  <big><tt>yp[J][0] =: lgm_t[{Ca}];</tt></big><br>
  <big><tt>yp[J][1] =: lga[{CO2}];</tt></big><br>
  <big><tt>yp[J][2] =: 0 - pH;</tt></big><br>
  <big><tt>$ End<br>
  </tt></big></blockquote>
<p><span style="font-family: helvetica,arial,sans-serif;"> The <a
 href="gm_proces.html#xp"><big><tt>xp</tt></big></a> and <a
 href="gm_proces.html#yp"><big><tt>yp</tt></big></a> arrays (where the
results will be collected) are accessible on the "Graph" page of the
Process window.&nbsp; The <big><tt><a href="gems_sys.html#lgm_t">lgm_t</a>,<a
 href="gems_sys.html#lga">lga</a> </tt><small>and</small><tt> <a
 href="gm_proces.html#pH">pH</a></tt></big> data objects can be seen on
pages of the EqDemo window that can be opened by </span><small><font
 face="Helvetica, Arial, sans-serif" size="+1"><small>clicking the </small></font></small><font
 size="+1"><small><font face="Helvetica, Arial, sans-serif"> "Detailed
results" <img src="ordertool.png" alt="Show Eqstat button" height="24"
 width="24"> &nbsp; toolbar</font></small></font><span
 style="font-family: helvetica,arial,sans-serif;"> button on the
"Single
Termodynamic System" dialog. &nbsp;Writing <big><tt>"0 - pH"</tt></big>
instead
of <big><tt>"-pH"</tt></big> is required by the syntax of GEMS math
scripts.
&nbsp;<br>
<br>
You are now ready to run the Process simulator.</span><br>
<br>
</p>
<h4><a name="GSM_RUN_PROSAMPLE"></a><font
 face="Helvetica, Arial, sans-serif">4.4.2. Running Process Simulation
with Data Sampling</font></h4>
<p><span style="font-family: helvetica,arial,sans-serif;">Press the
"Calculate record data" <img
 src="file:///C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/kcalc.png"
 alt="b-calc" height="22" width="22"> &nbsp; toolbar button, confirm
saving the Process record to database,
and, for the first time only, answer "No" to an appearing question
about
using the graphics during calculations. <br>
</span></p>
<span style="font-family: helvetica,arial,sans-serif;">When the process
simulation is finished (as indicated on the title line of the Process
window), switch to the "Graph" page to see a table with sampled data: </span>
<p><br>
</p>
<p><br>
<br>
</p>
<h4> <a name="GSM_PLOT_PROSAMPLE"></a><font
 face="Helvetica, Arial, sans-serif">4.4.3. Examining, Plotting and
Printing Sampled Results</font></h4>
<p> <span style="font-family: helvetica,arial,sans-serif;"> Edit names
of the abscissa and ordinate columns as shown above (according to the
data sampling script), and press the "Plot data on graph dialog" <img
 src="file:///C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/xpaint.png"
 alt="b-plot" height="22" width="27"> &nbsp; toolbar button when ready.
Confirm saving of the Process database record, and you will see the
graph as shown below.&nbsp;</span><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"> Even though
the graph already looks not too bad, it is advisable to adjust colors
and axis scales. <br>
Click on the "Customize" button and get in the following dialog:&nbsp;</span><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;">Change the
axis intervals, as well as colours and symbols on the plot lines, as
shown above. To change the color, click on a button to the left of the
legend name (e.g. -pH) and get into a line/symbol setup dialog: </span><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">There, you can change
colors, symbols, symbol size (0 - no symbols) and line size (0 - no
line). Click "Ok" when finished to get back to the Customize dialog.
There, click on the "Apply" button to see changes on the plot.&nbsp; </font>
</p>
<p><font face="Helvetica, Arial, sans-serif">Close the Customize dialog
when ready. Now, you can drag and drop with mouse the legend names onto
the plot surface. The plot will look like this:&nbsp;<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">You can also click on the
"Fragment" button to see an enlarged part of the diagram (you will have
to drag-and-drop legend names again). </font><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">This graph is not yet
perfect; it would look nicer if -pe is plotted instead of pe. This is
very easy to change. Close the graph and switch to Page 2 of the
Process window. In the </font><big><tt>pgExpr</tt></big> <font
 face="Helvetica, Arial, sans-serif">field, change the last line
&nbsp;to:&nbsp;<br>
</font></p>
<p><big><tt>yp[J][4] =: 0 - pe;&nbsp;</tt></big><font
 face="Helvetica, Arial, sans-serif"><br>
</font></p>
<font face="Helvetica, Arial, sans-serif"> Now, click on the </font><span
 style="font-family: helvetica,arial,sans-serif;">"Calculate record
data" <img
 src="file:///C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/kcalc.png"
 alt="b-calc" height="22" width="22"> &nbsp; toolbar button</span><font
 face="Helvetica, Arial, sans-serif"> to run the Process simulation
again,
confirm saving the Process record to database, and press "Yes" to use
the
graphic window during simulation. This time, newly calculated results
(-pe
instead of pe) will be plotted one-by-one as scattered symbols. When
the
simulation run is finished, you will see a plot like this: </font>
<p><font face="Helvetica, Arial, sans-serif"> To retain newly
calculated
results, close the graph dialog and open it again (while saving the
Process
record to database). Then customise the axis intervals, drag and drop
legend
labels on the plot, and press the "Save image" button to save the graph
as
e.g. a PNG graphic file. When you insert that file into e.g. a Word
document,
it will look there as follows: </font><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">More can be done by
constructing a GtDemo data sampler using SysEq records already
generated in the Process simulation. <br>
You can also "clone" the Process record and easily modify it, as
described in more detail in the Process module manual. </font><br>
</p>
<p><br>
</p>
<h4><a name="GSM_PROFIT_RUN"></a><font
 face="Helvetica, Arial, sans-serif">4.4.4. Running Process Simulation
in Graphic Fitting Mode</font></h4>
<p><font face="Helvetica, Arial, sans-serif">&lt;To be provided
later&gt;</font><font face="Helvetica, Arial, sans-serif"><br>
</font></p>
<p><big><tt></tt></big></p>
<p><br>
</p>
<p><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><tt><br>
<br>
<br>
</tt></p>
<p><tt>&nbsp;<br>
</tt></p>
<p><tt>&nbsp;"Solubility of (Ca,Sr)CO3 as f(X_Sr) at 20 g/L"</tt> <br>
&nbsp; <tt>"Expanding Example 10 from PHREEQC2 users guide"</tt></p>
<p><br>
Below, there is a line of switches which control
operation and data structure of the Process module; click on each
to read tool tips. It's the right moment to think again what the
process simulator must do. <br>
&nbsp; </p>
<p>To see the effect of bulk solid composition on equilibrium
solubility of
Ca and Sr and mole fraction of (Ca,Sr)CO<sub>3</sub> phase(s) at ca. 20
g/L
S/W ratio, we need to "mix"&nbsp; <i>nu</i>&nbsp;&nbsp; grams of CaCO<sub>3</sub>
with (20 - <i>nu </i>) grams of SrCO<sub>3</sub>, incrementing <i>nu</i>&nbsp;
from, say, 0 to 20 with a 1 g step which gives
21 points in total. The rest of the system definitions can be left
the same as in the parent system, because solubility of mixed carbonate
will not exceed a few millimolal, e.g. significant change of S/W ratio
is not likely to occur. The Process module generates new SysEq records
by duplicating ("cloning") the parent system, and then applies
necessary changes to these new records. <br>
&nbsp; </p>
<p>In our (pretty simple) case, it is sufficient to switch off (i.e.,
put minus instead of plus) <tt>PePsts[0,1]</tt> because temperature
and pressure will be kept fixed, but make sure that <tt>PePsts[0,2]</tt>
is on since bulk composition will be changed, and <tt>PePsts[0,4] </tt>is
on - to save the newly created SysEq records to database. <tt>PePsts[0,10]</tt>&nbsp;
must be on because we will provide a math script for modifying bulk
compositions. Put also a minus in <tt>PePvv[0,10]</tt> to always use
the automatic Simplex initial approximation in <a
 href="file:///C:/GEMS2test/program/doc/html/gems_ipm.html">GEM IPM</a>
calculations. Then proceed to the leftmost counter <tt>Ntxi</tt> and
set there 21 (points to be generated). You may also put&nbsp; 1 into
<tt>PePdim[0,4]</tt> to set one bibliographic reference. Check the
switches
once more and press <tt>"Ok"</tt>. <br>
&nbsp; </p>
<p>Now, you see <tt>Page 1</tt> of the "Process" window with the
record key and the name of the process simulator, but with several
empty
fields, including a multi-line text editor field <tt>P_expr</tt>.&nbsp;
Many variants of the process simulation can be set up using one or more
of three-number column "iterators"&nbsp; <tt>iTm, iNv, iP, iTC, iV,
iTau, ipXi, iNu, ipH, ipe</tt>. Each of those has the following
structure: <br>
&nbsp; </p>
<dl>
  <dd> <tt>&lt;iterator_name&gt;[0]&nbsp; start (initial) value</tt></dd>
  <dd> <tt>&lt;iterator_name&gt;[1]&nbsp; limiting value</tt></dd>
  <dd> <tt>&lt;iterator_name&gt;[2]&nbsp; increment (0 - keep at start
value)</tt></dd>
</dl>
<p><br>
The Process module has also one work cell for each iterator, named <tt>cTm</tt>
(for <tt>iTm</tt> iterator), <tt>cNv</tt> (for <tt>iNv</tt>) and so
on; you can see all these work cells on <tt>Page 2</tt> of the
"Process" window. Contents of the work cells can be changed on every
iteration of the Process Simulator, either
automatically using the start and increment values from the respective
iterator, or by the user-defined math script (see below). The first
five
iterators&nbsp; <tt>iTm, iNv, iP, iTC, </tt>and<tt> iV </tt>are
used&nbsp;
by the program automatically to increment respectively the <tt>cTm,
cNv, cP, cTC, </tt>and<tt> cV </tt>work cells and from these generate
the last five fields of newly-created&nbsp; <a
 href="file:///C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_SysEq">SysEq
record keys</a>.&nbsp; Other iterators are not incremented
automatically and may be used only in the Process math scripts
expressions to
set work variables, such as <tt>cNu</tt>. The full list of iterators,
work cells and other data objects related to the Process Simulators,
which can be used in math scripts, is available in the <a
 href="file:///C:/GEMS2test/program/doc/html/g_useref.html">user's
reference</a> and in the <a
 href="file:///C:/GEMS2test/program/doc/html/gm_proces.html">Process
module documentation</a> files. <br>
&nbsp; </p>
<p>In the&nbsp; <tt>iTm</tt>&nbsp; iterator, it makes sense to put an
increment larger than 1 (at best, 5 or 10) if the process simulation
will change the total bulk composition of the system. The SysEq records
generated by the Process Simulator will then be numbered like 1000,
1010, 1020, ... - this leaves you a possibility of producing more
points in the most interesting parts of the batch sequence later on
(e.g., obtain better resolution near the redox barrier). Please, keep
in mind that the process step counter <tt>Ntxi</tt> has a priority
over iterators - the simulation is finished when <tt>Ntxi</tt> points
are computed, regardless of which limiting values in the iterators are
not yet
reached. <br>
&nbsp; </p>
<p>Now, let us come back to setting the iterator values. First of all,
we need to set constant pressure (1 bar) and temperature (25 <sup>o</sup>C).
To do it, select the&nbsp; <tt>iP</tt>&nbsp; column and put 1 into the
first cell (start value), 1 into second one (end value), and 0 into
third one (increment). Likewise, set the <tt>iTC</tt> column for fixed
25 <sup>o</sup>C. In the <tt>iTm</tt> column, set 1000 in the first,
1200 in second, and 10 in the third cell; this will generate SysEq
records with 1000, 1010, 1020, ..., 1190, 1200 CSD (<u>c</u>hemical <u>s</u>ystem
<u>d</u>efinition) variant numbers in the fourth field of the <a
 href="file:///C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_SysEq">SysEq
record key</a>. Finally, set 0 in the first, 20 in&nbsp; second, and 1
in third cells of the<tt> iNu</tt> column, to be used as an
iterator for a master variable&nbsp; <tt>cNu</tt>&nbsp; in the <a
 href="file:///C:/GEMS2test/program/doc/html/gm_proces.html#P_expr">Process
math script</a>. <br>
&nbsp; </p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_MATH_SCRIPT"></a>4.3. Writing Process
Simulation Math Script&nbsp;</h3>
<p>This knowledge must be sufficient for us to write a necessary <a
 href="file:///C:/GEMS2test/program/doc/html/gmscript.html">math script</a>.
It has to assign current <tt>cNu</tt> value to number of grams of
strontianite ( <tt>xd_[{strontianite}]</tt> ) and <tt>20 - cNu</tt>
to number of grams of aragonite ( <tt>xd_[{aragonite}]</tt>) - see how
we specified 10 grams of each in our <a
 href="file:///C:/GEMS2test/program/doc/html/gemstart.html#SIDEBAR_1">previous</a>
<br>
<tt>"Default:G:CaSrCO3SS:1:0:1:25:0:"</tt> system definition! The math
script must look like this: <br>
&nbsp; </p>
<blockquote><tt>$ Changing Sr/Ca ratio in solid on iteration</tt> <br>
  <tt>cNu =: iNu[0] + J * iNu[2];</tt> <br>
  <tt>xd_[\J{aragonite}] =: 20 - cNu;</tt> <br>
  <tt>xd_[{strontianite}] =: cNu;</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
Enter it into the <tt>P_expr </tt>field on <tt>Page 1</tt> of the
"Process" window (you can also drag mouse to select the text in the
Help browser window, then press <tt>Ctrl-c</tt>, click on the <tt>P_expr
</tt>field and press <tt>Ctrl-v</tt>). In this script: <br>
&nbsp; </p>
<blockquote><tt>'$'</tt>&nbsp; character starts a comment line; <br>
  <tt>J</tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is an
internally changed Process iteration index; <br>
Expression&nbsp; <tt>cNu =: iNu[0] + J * iNu[2];</tt> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
increments<tt> cNu</tt> from 0 to 20 by 1; <br>
Expression&nbsp; <tt>xd_[\J{aragonite}] =: 20 - cNu;</tt> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
assigns 20, 19, ..., 1, 0 grams to the <tt>xd_</tt> vector cell <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for the first occurrence of <tt>aragonite</tt> in the species list.</blockquote>
<br>
The <tt>"\J"</tt> switch tells the program to look for the index
of&nbsp; <tt>aragonite</tt> in the Profile species name list (such
switches will be obsolete in the next version of GEMS). Before
simulations, the DC index is determined and substituted against the
species name (e.g., <tt>xd_[238]</tt>). As some species can be added
or removed to/from the profile later on, writing indices directly into <a
 href="file:///C:/GEMS2test/program/doc/html/gmscript.html">math scripts</a>
would create incompatibility problems; that is why name preprocessing
has been implemented in GEM-Selektor.&nbsp; Now the Process Simulator
is ready to run. <br>
<p>&nbsp;<br>
</p>
<h3><a name="GSM_PROSIM_RUN"></a>4.4. Running the Process (Batch) GEM
IPM Calculations</h3>
<p> After editing of the process definition fields is finished, press
the&nbsp;<tt> "Calculate"</tt> button or <tt>"Record" "Calculate"</tt>
menu commands to start simulation. You will be asked to save the
Process record to database (to be able to recover it if something goes
wrong with calculations).&nbsp; If the Process math script
contains syntax errors, you may be asked to fix them before the program
can proceed. In our numerical example, you will get warnings that
the program finds more than one "aragonite" and "strontianite" - a
consequence of having two mixed carbonate phases with the same end
member names (two copies of solid solution phase definition are needed
to
simulate phase separation). Just take the first ones and proceed with
calculations. <br>
&nbsp; </p>
<p>During calculations, the "IPM Minimization Progress"&nbsp; dialog is
normally visible, showing the currently processed SysEq record key.
Calculations may take some time if the system is large or the process
simulator generates hundreds of points (depending on computer
performance). When all equilibria are computed, you will see a message
"Process calculation finished OK" in the status line of the "Process: "
window. Press "<tt>Accept</tt>" button, then close the "Process" window
(with save), and proceed with analyzing the results. <br>
&nbsp; </p>
<p>The simplest (but less convenient)&nbsp; way is to examine each
generated equilibrium state (stored in a SysEq record) separately, as a
single system, as described in <a
 href="file:///C:/GEMS2test/program/doc/html/gemstart.html#3_1_4_exam_results">Section
3.1.4</a>. Go into the&nbsp; "Single thermodynamic system" dialog and
press the "Load..." button. In the appearing list, you should
see many entries for the "<tt>CaSrCO3SS</tt>" system, numbered 1000,
1010, 1020 and so on - generated by our process simulator. Click on
(select) any of them - for instance, 1050 - and press "Ok", then open
the "EqDemo" window.&nbsp; There you will see that two carbonate solid
solutions of different compositions are present, with mole fractions
of end members just on the solvus edges, so the system looks pretty
much the same as&nbsp; <tt>"Default:G:CaSrCO3SS:1:0:1:25:0:" </tt>(<a
 href="file:///C:/GEMS2test/program/doc/html/gemstart.html#SIDEBAR_1">end
of Section 3.2</a>). <br>
&nbsp; </p>
<p>Within the miscibility gap, all equilibria (numbered 1010 to 1080)
will have the same pH and solubility values, only masses of two mixed
phases will differ. Clearly, 4-6 points in this composition region
would be enough; there are only 1 and 2 points left for the one-phase
regions, - quite insufficient to produce complete diagrams. Luckily, in
GEM-Selektor it's easy enough to improve the math script in the Process
simulator definition. Let us try - close the "EqDemo" window and the
"Single Thermodynamic System" dialog, and go back to the "Process"
window. Load there our previously created Process definition record <tt>"Default:G:CaSrCO3SS:0:0:1:25:0:CaSr_r20gL:S:<font
 size="+1">"</font></tt><font size="+1">.</font> <br>
&nbsp; </p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_RESULTS"></a>4.5. Examining Process Simulation
Results</h3>
<p> <br>
</p>
<h3><a name="GSM_INVERSE_TITR"></a>4.6. Setting Process Simulator to
Perform an Inverse Titration Sequence</h3>
<p> &nbsp;<br>
<br>
</p>
<h3> <a name="GSM_PROCESS_MORE"></a>4.7. More About Process Simulations<br>
</h3>
<p> </p>
<p> </p>
<p> </p>
<p><br>
</p>
<p><br>
</p>
<h3><a name="GSM_GTDEMO_SAMPLER"></a>5. Using Graphic/Tabulation Data
Samplers (GtDemo)</h3>
<p><br>
</p>
<h4><a name="GSM_CREATE_GTDEMO"></a>5.1. Creating a GtDemo Sampler&nbsp;</h4>
<p> <br>
</p>
<h4><a name="GSM_GTDEMO_MATH_SCRIPT"></a>5.2. Writing a GtDemo Math
Script</h4>
<p> <br>
</p>
<h4><a name="GSM_RUN_GTDEMO"></a>5.3. Sampling Process Results and
Plotting Graphs</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_EMPIRICAL"></a>5.4. Adding and Plotting Empirical
Data</h4>
<p> <br>
</p>
<h4><a name="GSM_GTDEMO_PRINT"></a>5.5. Printing Sampled Results using
Print Scripts</h4>
<p> </p>
<p> </p>
<p><br>
</p>
<p><br>
<br>
</p>
<h4> 3.2.3 Setting up a GtDemo data sampler</h4>
<p><br>
When many equilibrium states are calculated using the Process
definition to simulate titrations, reaction progress models,
evaporation or temperature/ pressure changes, it is impractical to
print out all the results, pick up and plot them by hand. To facilitate
this crucial step in the interpretation of modeling results, a
special facility is included into GEM-Selektor code.&nbsp; The facility
is called a "GtDemo data sampler" module, which collects the numerical
data by reading records according to a pre-defined sequence of record
keys from the GEMS database. <br>
&nbsp; </p>
<p>Data to extract and to recalculate can be specified in a <a
 href="file:///C:/GEMS2test/program/doc/html/gmscript.html">math script</a>
text inside GtDemo definition.&nbsp; As in the case of <a
 href="file:///C:/GEMS2test/program/doc/html/gm_proces.html">Process
simulator</a>, the GtDemo math script is automatically translated and
run every time when the GtDemo module reads a record from the database.
As
a rule, the math script stores any sampled and (optionally)
re-calculated data into GtDemo abscissa vector <tt>x0</tt> and table
(matrix)
object <tt>y0</tt> (up to 20 columns). These data objects are
displayed
on a "GtDemo" window page; can be printed into a text file for
subsequent export to worksheets or&nbsp; high-quality presentation
software;
or plotted directly in a Graph Dialog window. <br>
&nbsp; </p>
<p>Graphs can be customized, zoomed and printed. A sequence of
(user-defined) empirical data points can be kept in the GtDemo record
(optional <tt>xE</tt> and <tt>yE</tt> arrays), shown&nbsp; on the
graph together with the sampled (calculated) data, which is very
convenient for fitting thermodynamic model parameters to experimental
data. Any
number of GtDemo records can be created for sampling different
information from the same set of GEM-Selektor database records. <br>
&nbsp; </p>
<p>To create a <a
 href="file:///C:/GEMS2test/program/doc/html/gm_gtdemo.html">GtDemo
data
sampler</a>, press the <tt>"Data Sampling and Plotting (GtDemo)"</tt>
button in the "Computation of Geochemical Equilibrium Models" dialog.
In the&nbsp; (empty) "GtDemo" window, as usual, select <tt>"Record"
"Create"</tt> menu commands. A small "GtDemo: Please, enter a new key"
will appear with five edit lines according to the <a
 href="file:///C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_GtDemo">GtDemo
record format</a>. <br>
&nbsp; </p>
<p>The first field already contains profile name (<tt>Default</tt>).
The second
field shows what record type (database module) will be sampled, type <tt>"SysEq"</tt>
here. The third field codes thew type of GtDemo sampler, enter <tt>"GT"</tt>
for now. The fourth field contains an identification number, type 0
there
(many GtDemo records can be created for the same list of sampled
records).
The fifth field is the name of GtDemo sampler (up to 16 characters),
type
<tt>"CaSrCO3SS_aq". </tt>Press <tt>"Ok"</tt> when ready. You will see
a list
of database record types; click on "SysEq" to select it, and press <tt>"Ok"</tt>
to proceed. This will show the familiar "Reorganization of Data Fields"
dialog;
to create the first record, press <tt>"Clear all"</tt> button. <br>
&nbsp; </p>
<p>In the appearing "GtDemo: Remake parameters" dialog, first type in <tt>GDname</tt>
and <tt>GDcom</tt> fields as follows: <br>
&nbsp; </p>
<p><tt>Solubility of Ca and Sr at equilibrium with (Ca,Sr)CO3 SS</tt> <br>
<tt>as function of bulk solid X(Sr) at S/W = 20 g/L</tt> <br>
&nbsp; </p>
<p>The idea is to plot total dissolved calcium and strontium (molal) as
function of total mole fraction of Sr in solid phases (i.e. in binary
system). As experimental data in [<a
 href="file:///C:/GEMS2test/program/doc/html/g_litref.html#%5B1987PLU/BUS%5D">1987PLU/BUS</a>]
does not discriminate between Ca and Sr, we will also plot a
Ca+Sr line and will compare it with some experimental points. So,
in total we have 3 plots and need 3 columns in the <tt>y0</tt> table
and, say, 7 experimental points and 1 column in the <tt>yE</tt> table.
To set this up, find the <tt>gDimXY[0,1]</tt> cell and enter 3 there,
then enter 7 and 1 into <tt>gDimEf[0,0]</tt> and <tt>gDimEf[0,1]</tt>,
respectively, and turn on (<tt>'+'</tt>) the <tt>GDps[0,0]</tt> flag.
Press <tt>"Ok"</tt> when finished. <br>
&nbsp; </p>
<p>A small "Set template" dialog will appear, just press <tt>"Ok"</tt>
for now. You will see a list of SysEq record keys with a title "
Marking record keys for data extraction". With left mouse clicks,
select all <tt>CaSrCO3SS</tt>&nbsp; record keys numbered from <tt>1000</tt>
to <tt>1200</tt> (as they were set up in the Process definition).
Selected lines in the list are indicated by dark background color.
Press <tt>"Ok"</tt> when ready. You will see the "GtDemo" window (<tt>Page
1</tt>) with empty single- and multi-line editor fields. The largest
one is called <tt>gExpr</tt>, it must contain a <tt>GtDemo</tt> <a
 href="file:///C:/GEMS2test/program/doc/html/gmscript.html">math script</a>,
written, in principle, in a similar way as that in the <a
 href="file:///C:/GEMS2test/program/doc/html/gm_proces.html">Process
simulator</a> definition. <tt>gX_Nam</tt> and <tt>gY_Nam</tt> fields
may contain names of abscissa and ordinate axis, respectively (in our
case <tt>"X_Sr"</tt>&nbsp; and <tt>"log_m"</tt>). The <tt>gLnam</tt>
list contains identifiers for the plot lines (columns in the <tt>y0</tt>
array), in case of
our example, enter <tt>"Ca_aq", "Sr_aq"</tt> and <tt>"Ca+Sr"</tt>;
likewise, the <tt>gLnamE</tt> object identifies (plots of) the
empirical
data that the user has entered into columns of the optional <tt>yE</tt>
array (<tt>"Ca+Sr_E"</tt>). <br>
&nbsp; </p>
<p>Now, it's time to write the math script; in GtDemo definition, it
must contain assignments such as <tt>x0[jR] =: ...... ;&nbsp;
y0[jR][0] =: ....; y0[jR][1] =: ...;&nbsp; ......</tt>&nbsp; Such
operators will put sampled data into lines of the <tt>x0</tt> and <tt>y0</tt>
arrays. In most cases, it is sufficient to describe only how one record
should be sampled using the <tt>jR</tt> index variable which is
automatically changed from 0 to <tt>gDimXY[0,0] </tt>(total number of
sampled records) upon GtDemo module execution. On the right side of
assignment operators, you can use any (indexed) <a
 href="file:///C:/GEMS2test/program/doc/html/g_useref.html">data object
labels</a> which refer to meaningful numerical data existing at present
in GEM-Selektor program memory. These labels are seen on any module
page screen forms (e.g., "EqDemo") or window status lines. <br>
&nbsp; </p>
<p>For our example (Ca-Sr carbonate SSAS system), the following script
will do the job: <br>
&nbsp; </p>
<blockquote><tt>$ Determine Sr mole fraction in solid</tt> <br>
  <tt>x0[jR] =: ( b[\i{Sr}] - bXa[0][{Sr}] ) /</tt> <br>
  <tt>&nbsp; ( b[{Sr}] - bXa[0][{Sr}] + b[{Ca}] - bXa[0][{Ca}] );</tt> <br>
  <tt>$ Collect total dissolved Ca and Sr in log
molal</tt> <br>
  <tt>y0[jR][0] =: lgm_t[{Ca}];</tt> <br>
  <tt>y0[jR][1] =: lgm_t[{Sr}];</tt> <br>
  <tt>$ Calculate log of sum of dissolved Ca and
Sr</tt> <br>
  <tt>y0[jR][2] =: lg( 10^lgm_t[{Ca}] + 10^lgm_t[{Sr}] );</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
You can see the contents of data objects&nbsp; <tt>b&nbsp;</tt>
and&nbsp; <tt>lgm_t</tt> in the "EqDemo" window, page <tt>EqIC</tt>
and the bXa&nbsp; data object - in the "Multi" window, page <tt>Phas D</tt>.
Both are accessible from the "Single Thermodynamic System" dialog,
buttons <tt>"Dual solution..."</tt> and <tt>"Details for experts"</tt>,
respectively. Every time when a new SysEq record is loaded by the
GtDemo module, the script will be executed, the <tt>jR</tt> index
automatically incremented, and the next record loaded from the
database. Enter the script (or copy it using clipboard) into <tt>gExpr</tt>
editor field on <tt>Page 1</tt> of the "GtDemo" window and press the <tt>"Calculate"</tt>
icon or <tt>"Record" "Calculate"</tt> menu commands (save the GtDemo
record to database upon warning). <br>
&nbsp; </p>
<p>If there were no syntax errors in the math script, the program will
silently spend some seconds for loading SysEq records one-by-one and
calculating the data. Finally, the "GtDemo" window title will show a
message "Calculation finished OK". Now, we can examine and plot the
results; to do it, select <tt>Page 2</tt> of rhe "GtDemo" window.
There
you will see <tt>x0</tt> and <tt>y0</tt> arrays filled with sampled
numbers, as well as <tt>xE </tt>and <tt>yE</tt> columns still
containing
zeros. From the <tt>"Record"</tt> menu, the <tt>"Print"</tt> item
exports data to ASCII print files, and the <tt>"Plot"</tt> item opens
the Graph Dialog window where <tt>y0</tt> and <tt>yE</tt> columns are
plotted as lines (or scattered symbols, or both) against the <tt>x0
(xE)</tt> abscissa. <br>
&nbsp; </p>
<p>Select the <tt>"Record" "Plot"</tt> menu commands. You will be
prompted to save the GtDemo record to database (it is always wise to do
it).&nbsp; A graph window entitled as the "GDname" line appears. You
can see what each line means in the "Legend" on the right side. A The <tt>"Fragment"
</tt>button will display an enlarged fragment of the graph. A <tt>"Print..."</tt>
button sends the plot window contents to standard printing device (in
this version, may still be under construction). Line thickness, color
and symbols can be customized in the Legend Dialog which appears on
pressing the <tt>"Customize..."</tt> button on the graph. There you
can set up scales for abscissa and ordinates, select axis type (the
number of grid lines), define size and position of zoomed fragment, and
set symbol shape, size and color, as well as
line thickness and color, for each ordinate. The <tt>"Background"</tt>
button lets you specify a background color for the graph (not saved
with
other contents of GtDemo record in this version). <br>
&nbsp; </p>
<p>If you have entered some experimental data into <tt>xE</tt> and <tt>yE</tt>
arrays, their symbols and colors can be customized separately on the
Legend dialog. For capturing a ready GtDemo graph window into <tt>*.jpg</tt>,
<tt>*.png</tt> or other graphic file formats, we
recommend using a <tt>ksnapshot</tt> utility program (a Linux KDE
application) or Win32 <tt>Alt-PrtSc</tt> key combination to send the
picture to clipboard, from where it can be inserted into an image
editor (e.g., Microsoft(R) Photo Editor). <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_2_5_export_results"></a>3.2.5 Exporting sampled results</h4>
<p><br>
To export data sampled by a GtDemo definition, open the "GtDemo"
window, load a record of interest, and select <tt>"Record" "Print"</tt>
commands from the menu. You will have to answer questions such as which
format (tabular or plain text) to use, and whether to print math script
together with the data. Then a standard "File selection" dialog appears
where you can enter the file name and choose the directory path to save
the file. This ASCII file can then be edited using any standard text
editor and imported into Microsoft(R) Excel
or other commercial presentation programs. We are going to provide
output filters for exporting data into some important formats in the
future versions of GEM-Selektor. <br>
&nbsp; </p>
<p>Let us return to our numerical example - (Ca,Sr)CO<sub>3</sub> SSAS
system, - and examine the plot of aqueous solubility data in more
details. Please, open the "GtDemo" window, load the previously created
record keyed "<tt>Default:SysEq:GT:0:CaSrCO3SS_aq:"</tt>, and
plot it (<tt>"Record" "Plot"</tt> menu commands). We see on the plot
that Sr_aq steeply increases from less than 1e-7 to about 1e-3 molal
at 1e-6 &lt; <i>X</i> (Sr) &lt; 0.005 and then Sr_aq and Ca_aq remain
constant along the miscibility gap where compositions of both solid
solution phases are fixed at the spinodal mole fractions up to <i>X</i>
(Sr) = 0.86. At higher mole fractions of Sr in the solid, Sr_aq
increases
up to the solubility of pure strontianite (4.5 mmolal) while Ca_aq goes
below 1e-6 molal. <br>
&nbsp; </p>
<p>Let us see how the calculated total dissolved Ca+Sr fit with the
experimental data of Plummer and Busenberg [<a
 href="file:///C:/GEMS2test/program/doc/html/g_litref.html#%5B1987PLU/BUS%5D">1987PLU/BUS</a>].
To save time, enter into <tt>xE</tt> and <tt>yE</tt> columns on <tt>Page
2</tt> of the "GtDemo" window only seven points from their Table 4 for
25 <sup>o</sup>C at nearly one bar p(CO<sub>2</sub>): <br>
&nbsp; <br>
&nbsp;
<table border="3" cellpadding="3" cellspacing="3">
  <tbody>
    <tr>
      <td><tt>X(Sr),xE</tt></td>
      <td><tt>0.0083</tt></td>
      <td><tt>0.114</tt></td>
      <td><tt>0.411</tt></td>
      <td><tt>0.565</tt></td>
      <td><tt>0.859</tt></td>
      <td><tt>0.925</tt></td>
      <td><tt>0.998</tt></td>
    </tr>
    <tr>
      <td><tt>Solubility</tt></td>
      <td><tt>10.81</tt></td>
      <td><tt>11.58</tt></td>
      <td><tt>10.57</tt></td>
      <td><tt>8.72</tt></td>
      <td><tt>5.56</tt></td>
      <td><tt>5.13</tt></td>
      <td><tt>4.72</tt></td>
    </tr>
    <tr>
      <td><tt>log(solub.),yE</tt></td>
      <td><tt>-1.966</tt></td>
      <td><tt>-1.936</tt></td>
      <td><tt>-1.976</tt></td>
      <td><tt>-2.059</tt></td>
      <td><tt>-2.255</tt></td>
      <td><tt>-2.290</tt></td>
      <td><tt>-2.326</tt></td>
    </tr>
  </tbody>
</table>
</p>
<p>When ready, save the record to database and plot the data again (<tt>"Record"
"Plot"</tt>). Customize the graph (make scattered symbols of size 5,
line type 0 for the experimental points). The experimentally determined
total solubilities are significantly less than our model predictions at
total 0.6 &lt; <i>X</i> (Sr) &lt; 0.9, implying either inhibition of
phase separation in this region or insufficient equilibration time in
the experiments. <br>
&nbsp; </p>
<p>It is now interesting to see how compositions of both solid solution
phases change with total <i>X</i> (Sr) in solid. It is easy - we just
have to "clone"&nbsp; the previously created GtDemo record and change
some parts in the sampler definition. In the "Record" menu, select <tt>"Save
as"</tt> , change the record key to "<tt>Default:SysEq:GT:1:CaSrCO3SS_sx:"</tt>,
press <tt>"Ok"</tt> and then select <tt>"Record" "Remake"</tt> menu
item. Select "SysEq" in the appearing list, press <tt>"Ok"</tt> and
again <tt>"Remake"</tt> button. Now we need four lines for mole
fractions of two end members in two phases, and we will not plot any
experimental points. So, find the <tt>gDimXY[0,1]</tt> cell and enter
6 there, then enter zeros into <tt>gDimEf[0,0]</tt> and <tt>gDimEf[0,1]
</tt>fields, and turn off (to <tt>'-'</tt>) the <tt>GDps[0,0]</tt>
flag. Press <tt>"Ok"</tt> when finished. The record key template and
list of SysEq record keys appear again, all the keys are already
selected, simply press <tt>"Ok"</tt>. In the "GtDemo" window, change
GDname field to: <br>
&nbsp; </p>
<blockquote><tt>Mole fractions of Ca and Sr end members in SS phases</tt></blockquote>
<p><br>
Put <tt>"Mol fr."</tt> to <tt>gY_Nam</tt> field.
Six entries in <tt>gLnam</tt> list can be changed to <tt>"X1Ca",
"X1Sr", "X2Ca", "X2Sr", "mX1,g", "mX2,g". </tt>There are many
ways to write a math script for picking up mole fractions of solid
solution end members; here is just one of them, in tune with the
previous
script: <br>
&nbsp; </p>
<blockquote><tt>$ Determine total Sr mole fraction % in solid</tt> <br>
  <tt>x0[jR] =: ( b[\i{Sr}] - bXa[0][{Sr}] ) *100 /</tt> <br>
  <tt>&nbsp; ( b[{Sr}] - bXa[0][{Sr}] + b[{Ca}] - bXa[0][{Ca}] );</tt> <br>
  <tt>$ Collect % mole fractions of Ca and Sr in
SS phases</tt> <br>
  <tt>y0[jR][0] =: Wxx[\j{oxygen}+1]*100;</tt> <br>
  <tt>y0[jR][1] =: Wxx[{oxygen}+2]*100;</tt> <br>
  <tt>y0[jR][2] =: Wxx[{oxygen}+3]*100;</tt> <br>
  <tt>y0[jR][3] =: Wxx[{oxygen}+4]*100;</tt> <br>
  <tt>$ Masses of SS phases in grams</tt> <br>
  <tt>y0[jR][4] =: phM[2];</tt> <br>
  <tt>y0[jR][5] =: phM[3];</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
<tt>Wxx</tt> is the data vector containing calculated mole fractions
for species in multi-component phases. The <tt>oxygen</tt> gas stays
in the DC list just before aragonite end member of the first solid
solution phase, and this name is used in the script
to avoid warnings that there are two species named "<tt>aragonite</tt>".
<tt>phM</tt> is a vector containing masses of phases (see <tt>EqPh</tt>
page of "EqDemo" window). Put this script into <tt>gExpr</tt> field
(remove old contents before) and run the data sampler by clicking on
the <tt>"Calculate"</tt> icon. When finished, plot the data and
customize the graph (assign different colors to lines, adjust the grid
and so on). <br>
&nbsp; </p>
<p>Take a look first at the <tt>"mX1,g" </tt>and<tt> "mX2,g"</tt>
lines showing amounts of Ca-strontianite and Sr-aragonite phases,
respectively. Both phases co-exist in a wide region of total <i>X</i>
(Sr)&nbsp; values from 0.5 to 86 %, where the quantity of the first one
increases and that of the second one decreases, while mole fractions of
end-member remain fixed (i.e. fill out a miscibility gap at very low Sr
content in aragonite and ca. 14% CaCO<sub>3</sub> in strontianite).
At&nbsp; <i>X</i> (Sr) = 86%, the Sr-aragonite phase disappears and
mole fractions of end-members in Ca-strontianite change linearly
towards composition
of pure strontianite; quantity of this phase now practically remains
constant. <br>
&nbsp; <br>
</p>
<p><br>
</p>
<h2><a name="GSM_EXTEND_PROJECT"></a>6. Extending Modelling Project
Database</h2>
<p><br>
</p>
<h3><a name="GSM_DATA_OVERRIDE"></a>6.1. Overriding Database Records
for Species
and Phases</h3>
<p><br>
</p>
<h3><a name="GSM_ADD_SPECIES"></a>6.2. Adding New Dependent Components
(Species)</h3>
<p><br>
</p>
<h4><a name="GSM_ADD_DCOMP"></a>6.2.1. Adding DComp Records</h4>
<p><br>
</p>
<h4><a name="GSM_SET_BIBLIOREF"></a>6.2.2. Setting Up a Bibliography
Reference</h4>
<p> <br>
</p>
<h4><a name="GSM_ADD_REACDC"></a>6.2.3. Adding ReacDC Records&nbsp;</h4>
<p><br>
</p>
<h4><a name="GSM_RUN_RTPARM"></a>6.2.4. Tabulating T,P Corrections for
Thermodynamic Data (RTParm Records)&nbsp;</h4>
<p><br>
</p>
<h4><a name="GSM_RTPARM_MATH_SCRIPT"></a>6.2.5. Modifying a RTParm
Print Script</h4>
<p> </p>
<p> </p>
<p><br>
</p>
<h3><a name="GSM_ADD_PHASE"></a>6.3. Adding New Phase Definitions</h3>
<p><br>
</p>
<h4><a name="GSM_ADD_SINGLE"></a>6.3.1. Creating a Single-Component
Phase Record</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_IDEAL"></a>6.3.2. Creating an Ideal Solution Phase
Record</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_NONIDEAL"></a>6.3.3. Creating a Non-Ideal Solution
Phase Record</h4>
<p><br>
</p>
<h4><a name="GSM_PHASE_MATH_SCRIPT"></a>6.3.4. Writing Math Script for
a Non-Ideal
Mixing Model</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_SORPTION"></a>6.3.5. Creating a Sorption Phase
Record </h4>
<p><br>
</p>
<h3><a name="GSM_ADD_COMPOS"></a>6.4. Adding New PCO (Compos) Records</h3>
<p><br>
</p>
<h3><a name="GSM_GEMS_DB_MORE"></a>6.5. More About Management of GEMS
Databases</h3>
<p> <br>
</p>
<h2><a name="GSM_PROJECT_EXTEND"></a>7. &nbsp;Extending the Modelling
Project</h2>
<p><br>
</p>
<h3><a name="GSM_ELEMENTS_DIALOG"></a>7.1. ElementsDialog Options</h3>
<p><br>
</p>
<h3><a name="GSM_PROJECT_COPY"></a>7.2. Copying Records from GEMS
Kernel Database</h3>
<p> <br>
</p>
<h3><a name="GSM_EQSTAT_RERUN"></a>7.3. Re-running already calculated
equilibria</h3>
<p><br>
</p>
<h3><a name="GSM_PROJECTS_MORE"></a>7.4. More About Modelling Projects</h3>
<p><br>
</p>
<h2><a name="GSM_MOD_SORPTION"></a>8. Modelling Systems with Sorption
Phases</h2>
<p><br>
</p>
<h3>8.1.&nbsp;</h3>
<p><br>
</p>
<h3>8.2.&nbsp;</h3>
<p><br>
</p>
<h2><a name="GSM_HOWTO_PROCEED"></a>9. How to Proceed&nbsp;</h2>
<p> </p>
<p> </p>
<p><br>
</p>
<br>
<h3> <a name="3_3_extend_tdbase"></a>3.3 Extending Thermodynamic
Database</h3>
<p><br>
What to do if you have reached a conclusion that an aqueous complex or
solid phase are missing in the system profile you worked with? Or
you do not like some thermodynamic data in the GEM-Selektor kernel
database and want to replace them? These situations are very typical in
geochemical modelling and may sometimes need a lot of effort to be
resolved. <br>
&nbsp; </p>
<p>In GEM-Selektor, it is easy to do thermodynamic database extensions
and make them available to your system profile, although this requires
some understanding on how the thermodynamic database is organized and
maintained. You may skip the following five paragraphs if you are
already familiar with GEMS thermodynamic data framework. <br>
&nbsp; </p>
<blockquote><a name="TDB_OVERVIEW"></a>The GEM-Selektor thermodynamic
database has four levels of data, kept in the IComp, DComp, ReacDC, and
Phase
record types (chains). The <a href="gm_icomp.html">IComp</a> chain
contains
records defining Independent Components (IC), or stoichiometry units,
which form a common stoichiometry basis for expressing&nbsp;
composition
of chemical systems and species. The IComp symbols (mainly chemical
elements
and charge), and only them, can be used in writing&nbsp; <a
 href="g_useref.html#FORMULA">chemical formulae</a>&nbsp; of&nbsp;
thermodynamic&nbsp; species, or Dependent Components (DC), which are
stored in&nbsp; <a href="gm_dcomp.html">DComp</a>&nbsp; or&nbsp; <a
 href="gm_reacdc.html">ReacDC</a>&nbsp; database records. DC formulae
are automatically processed for calculation of the species molar mass,
formula charge, checking consistency of thermodynamic data, and
producing stoichiometry matrices for calculation of chemical
equilibria. In addition, IComp records contain default valence numbers
of elements to simplify chemical formulae, as well as values of
absolute entropy of elements, needed for conversions between standard
molar Gibbs energy, enthalpy and entropy of chemical species. <br>
&nbsp;
  <p>DComp records keep the formulae and standard state thermodynamic
properties of solid, gas, liquid and aqueous species (DC) in
"thermochemical" format. Namely, it includes the standard molar
properties (or standard partial molal properties) at reference pressure
and temperature: Gibbs energy <i>G<sup>o</sup></i>&nbsp; and enthalpy <i>H<sup>o</sup>&nbsp;</i>
of formation from IC (chemical elements) at standard states, absolute
entropy <i>S<sup>o</sup>&nbsp;</i> and molar volume <i>V<sup>o</sup></i>
. Optionally, the <a href="gm_dcomp.html">DComp</a> records may
contain
vectors of empirical <i>Cp<sup>o</sup> </i>= <i>f </i>(<i>T </i>),
  <i>V<sup>o</sup> </i>= <i>f </i>(<i>T,P</i> ), equation -of -
state coefficients etc., necessary for <a href="theortdb.html">calculation
of
standard thermodynamic properties at elevated pressures and temperatures</a>.
All the numbers contained in DComp records refer to the stoichiometry
of
this particular species, rather than to its reaction with other
species.
In other words, data in different DComp records are connected only
through
IC stoichiometries of species and information kept in IComp records. <br>
&nbsp; </p>
  <p><a href="gm_reacdc.html">ReacDC</a> records are used for defining
thermodynamic properties of aqueous and surface complexes and minerals
for which thermochemical data are not available or too uncertain. For
such species, only log<i>K</i>&nbsp; of the dissolution, association or
surface complexation reaction is
usually known (often predicted at 25 <sup>o</sup>C or other
temperatures).
Thus, a ReacDC record describes the reaction and its properties (and
also <i>T,P</i>&nbsp; dependence of&nbsp; log<i>K</i> ). Because GEM
algorithms cannot use reactions and stability constants directly for
calculation of equilibria, ReacDC record also provides a full set of
standard
(partial molal) thermodynamic properties for a "new" species, computed
from the properties of the reaction and that of all other species
involved
in the reaction. The "new", reaction-defined compound, actually, gives
a name to the reaction and to the ReacDC <a href="#P3324">record key</a>.
Thermodynamic properties of this compound are automatically maintained
consistent
(to that of other species involved into the reaction) at all
temperatures
and pressures. The "involved" species must already exist in the
database
as either <a href="#P33D3">DComp</a> or other ReacDC records: a given
ReacDC
definition can refer to other ReacDC records (but not to itself), thus
forming
a "reaction chain" (up to seven levels of recursion are supported). Any
reaction
chain always terminates with a reaction which refers to DComp records
only.
Several&nbsp; <a href="theortdb.html">methods of calculation</a> of
thermodynamic
properties of reaction-defined species at elevated&nbsp; <i>T,P&nbsp; </i>are
available in GEM-Selektor. ReacDC module is a unique feature
of GEMS, to our knowledge, not yet available in full elsewhere.
Accordingly,
the GEM-Selektor database is the first in a sense that thermochemical
data and reactions are used together for any kind of geochemical
modelling
and data consistency is automatically maintained. <br>
&nbsp; </p>
  <p><a href="gm_phase.html">Phase</a> definition records put together
links to input data from both DComp and ReacDC record types. Design of
GEM-Selektor requires that each (even a single- component) phase to be
taken into
calculation of equilibrium states must be&nbsp; described in a separate
  <a href="gm_phase.html">Phase</a> record, with (unique) phase name
appearing in the <a href="#P3326">Phase record key</a>. <a
 href="gm_dcomp.html">DComp</a> or <a href="gm_reacdc.html">ReacDC</a>
definitions do not contain all information for defining structure and
behavior
of the single- or multi-component phases. In fact, any data describing
the non-ideal mixing behavior of end-members is valid for a particular
model of phase only, and alternative representations are often
possible. The flexible Phase data structure permits formulation of a
large variety of crystalline and dispersed, liquid and gaseous,
adsorption and ion-exchange ideal or non-ideal phases which may occur
in different (geo)chemical systems. Please, note that <a
 href="gm_profil.html">System Profiles</a> in GEMS are
constructed from Phase definitions, i.e. the profile cannot "see" any
DComp
or ReacDC records which are not referred to by at least one Phase
record
accessible to the profile. <br>
&nbsp; </p>
  <p>What does it mean "accessible"? In GEM-Selektor, every database
chain consists of several files, usually located in two places: a
"kernel
database" and a "user's profile" directories. The write-protected
"kernel
database" directory contains IComp, DComp, ReacDC and Phase database
files with more or less "standard" thermodynamic data for major and
many
minor chemical elements; is supplied and installed together with GEMS
program and help files. The user's profile directory is automatically
created
when the user creates a new system profile for his/her modelling
applications;
this is the only place where all the input data provided by the user
and
calculation results can be stored. Any time, the database file can be
linked
in or out of the current database configuration of GEM-Selektor. When a
file is linked in, all the records it contains become "visible" for the
user and the program in record key lists. Accordingly, these records
become
"invisible" and inaccessible after the file has been linked out. New
database
files can be any time created by the user in his profile directory and
linked in, if necessary.</p>
</blockquote>
<p>Although the GEM-Selektor kernel thermodynamic database can be used
for solving many various geochemical problems (see <a
 href="g_tutor.html">Tutorial</a>), almost every study involving
thermodynamic modeling, sooner or later, faces a problem of
inconsistency or incompleteness of thermodynamic data. It is therefore
necessary to have convenient tools to handle the data, check and match
them, and incorporate into equilibria calculations. The tradition,
however, is such that most of modeling codes contain files with
thermodynamic data from published databases but still no tools to work
with the data (except using them for speciation calculations). <br>
&nbsp; </p>
<p>There are some specialized codes such as SUPCRT92 [<a
 href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>] which handle
the thermodynamic database, calculate user-specified reactions, plot
them on diagrams, but they cannot calculate equilibria in
multi-component systems. Moreover, most of speciation programs based on
the Law of Mass Action (LMA) algorithm (like PHREEQC2 [<a
 href="g_litref.html#%5B1999PAR/APP%5D">1999PAR/APP</a>] or MINTEQA2
[1991ALL/BRO] use thermodynamic data exclusively in the form of
reaction equilibrium constants <i>K</i>&nbsp; for the "product"
species plus dependences of <i>K</i>&nbsp;&nbsp; on temperature and/or
pressure. Thermochemical data must be recalculated first into log<i>K</i>&nbsp;&nbsp;
values (e.g., as in EQ3/6&nbsp; [1992WOL]) to be used in such codes.
There are, however, special utility programs PMATCH [1989PEA/AVI] and
PM2SEL
[1999DMY/KUL] which can help in checking the internal consistency
of&nbsp;
thermodynamic data and convert it into different formats. <br>
&nbsp; </p>
<p>Programs based on GEM algorithms (e.g., ChemGeo, GIBBS,
GEM-Selektor), on the contrary, accept only the standard partial
molar(molal) values of Gibbs energy for all species <i>g<sup>o </sup></i>(<i>T,P&nbsp;
</i>), so any data represented as log<i>K</i> (<i>T,P&nbsp; </i>) must
first
be converted to <i>g<sup>o </sup></i>(<i>T,P&nbsp; </i>) values
before
usage in GEM modeling calculations. In this case, it is not easy to
extend
thermodynamic database with consistent data for some new components if
their thermochemical properties are not known. Hence, the structure of
GEM-Selektor database has been designed to help in overcoming these
difficulties.
<br>
&nbsp; <br>
&nbsp; </p>
<blockquote>Example? Diagram?</blockquote>
<p>When you press the "<tt>Thermodynamic Database</tt>" button on
GEM-Selektor Main dialog, you will see a "Thermodynamic Database"
dialog window with six large buttons for accessing the <a
 href="gm_icomp.html">IComp</a>,
<a href="gm_dcomp.html">DComp</a>, <a href="gm_reacdc.html">ReacDC</a>,
<a href="gm_rtparm.html">RTparm</a>, <a href="gm_compos.html">Phase</a>
and <a href="gm_compos.html">Compos</a> module windows, described in
the corresponding manuals. The respective six database chains contain
records with all
the input data necessary for building GEM chemical models, linked
together
into the System Profile ("Default" in this exercise). Part of database
files in each chain belongs to the kernel database which you can use
but
not modify; another part belongs to your own "Default" profile
directory;
all extensions and changes you make can be stored there and only there.
In other words, the kernel database will remain unaffected by your
personal
modifications of thermodynamic data, and your own work will retain
compatibility
with system profiles created by other GEMS users. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_1_override_data"></a>3.3.1 Overriding data in kernel
database</h4>
&nbsp;
<p>&nbsp; </p>
<p>A typical case (especially for experienced modellers) is when the
user refuses&nbsp; thermodynamic data for some species or minerals
provided in the kernel database, but the corresponding records cannot
be changed because they are write-protected. Of course, you could
create a new DComp or ReacDC records with different names for those
species and type in your favorite numbers; after the system profile is
open next time, you should
not forget to switch off the "primarily provided" species from the
SysEq
selection lists. But GEM- Selektor offers&nbsp; a far more elegant way
-
<i>an override mechanism of record selection, </i>which applies to
lists
of record keys in ReacDC, Phase, and Profile/SysEq data structures
only.
<br>
&nbsp; <br>
&nbsp; </p>
<blockquote>In the GEMS database, structurized <a href="gdb_rkey.html">record
key formats</a> are supported.&nbsp; For instance, <a
 href="gm_dcomp.html">DComp</a> and <a href="gm_reacdc.html">ReacDC</a>
record key formats are identical and include four fields - phase state,
group, species name, and comment (data set code). The primary idea of
these formats was to keep long lists of DC record keys in a
well-structurized way as the database chain index is alphabetically
sorted, so that aqueous species are first, gases next, and minerals at
the end. Within aqueous species list, the group name (second field)
usually refers to metal cation or ligand, so all complexes of a given
metal are conveniently held together in the lists. Actually, the
species name is the most important because it may appear
in the (case sensitive) <a href="gmscript.html">math scripts.</a>&nbsp;
The fourth field serves to indicate the original data set from where
the data were taken and (optionally) grade of their uncertainty.</blockquote>
<p><a name="OVERRIDE"></a>The <b><i>override mechanism</i></b>&nbsp;
consists in that the last field of the record key is actually ignored
when the records are loaded during processing of the lists of record
keys in&nbsp; ReacDC, Phase and Profile/SysEq data structures. So, when
the program
finds more than one&nbsp; record with the same record key fields except
the last one,&nbsp; it simply takes in a record keyed alphabetically
the
first and ignores others; no warnings are issued. <br>
&nbsp; </p>
<p>Let us check how the override mechanism works using a celestite (SrSO<sub>4</sub>)
example. From the "Thermodynamic Database" dialog, press the <tt>"Dependent
Components (DComp)" </tt>button. In appearing "DComp" window, click
on the "Show" icon (first from the left) and in the list, select the
line <tt>s:SrSO:celestite:rs:</tt>&nbsp; and press <tt>"Ok"</tt>. You
will see the DComp record for celestite from GEMS kernel database which
contains
data from the USGS dataset [<a href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>]&nbsp;
(indicated by&nbsp; <tt>rs</tt>&nbsp; in the last record key field).
The drawback of this data is absence of <i>Cp<sup>o</sup></i> = <i>f </i>(<i>T
</i>) coefficients and heat capacity value at 25 <sup>o</sup>C (check
on <tt>Page 2</tt> of "DComp" window), thus making temperature
extrapolation impossible. Fortunately, data for celestite is also
available from the SUPCRT92 database [<a
 href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>] with
Majer-Kelly coefficients valid up to 1500 K (both data are compared
below in J/mol): <br>
&nbsp; <br>
&nbsp; <br>
&nbsp;
<table border="1" cols="3" width="73%">
  <tbody>
    <tr>
      <td>Property of celestite</td>
      <td>&nbsp;[<a href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>]&nbsp;</td>
      <td>[<a href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>]</td>
    </tr>
    <tr>
      <td><i>G<sup>o</sup><sub>298&nbsp;&nbsp; </sub></i>J/mol</td>
      <td>-1339600</td>
      <td>-1340700</td>
    </tr>
    <tr>
      <td><i>H<sup>o</sup><sub>298&nbsp;&nbsp; </sub></i>J/mol</td>
      <td>-1453200</td>
      <td>-1453100</td>
    </tr>
    <tr>
      <td><i>S<sup>o</sup><sub>298&nbsp;&nbsp;&nbsp; </sub></i>J/K/mol</td>
      <td>117.0</td>
      <td>117.152</td>
    </tr>
    <tr>
      <td><i>V<sup>o</sup><sub>298</sub></i> , J/bar</td>
      <td>4.625</td>
      <td>4.625</td>
    </tr>
    <tr>
      <td><i>Cp<sup>o</sup><sub>298&nbsp; </sub></i>J/K/mol</td>
      <td>0</td>
      <td>107.8</td>
    </tr>
    <tr>
      <td><i>a<sub>0</sub></i></td>
      <td>0</td>
      <td>91.2112</td>
    </tr>
    <tr>
      <td><i>a<sub>1</sub></i></td>
      <td>0</td>
      <td>0.05565</td>
    </tr>
    <tr>
      <td><i>a<sub>2</sub></i></td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<br>
&nbsp; </p>
<p>The SUPCRT92 data for celestite originate from a compilation by
H.Helgeson and others [1978HEL/DEL]; it allows for temperature
extrapolation and provides ca. 0.2 p<i>K</i> unit lower solubility of
celestite at 25 <sup>o</sup>C, compared to the data from [<a
 href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>], as seen from
the difference in values of&nbsp; <i>G<sup>o</sup><sub>298</sub></i> .
<br>
&nbsp; </p>
<p>To use SUPCRT92 data for celestite in equilibria calculations,
select
<tt>"Record" "Save As"</tt> menu commands in order to create a new <a
 href="gm_dcomp.html">DComp</a> record with identical first three key
fields and an alphabetically higher fourth field. A small dialog
entitled "DComp: Insert new record keyed" appears, with the&nbsp; <tt>s:SrSO:celestite:rs3:
</tt>record key disassembled into four editor lines. Change only the
last (fourth) line from&nbsp; <tt>"rs3"</tt> to <tt>"h78"</tt> (or
any other alphabetically preceding value) and press <tt>"Ok"</tt>.&nbsp;
You will see a selection list entitled "Choose database file to put a
record..." with DComp database file names, currently linked to GEMS.
Select a&nbsp; <tt>dcomp.Default </tt>file (other files belong to the
kernel database and are write-protected) and press <tt>"Ok"</tt>. <br>
&nbsp; </p>
<p>Now, the DComp window appears again with previous contents, but
under
different record key. Enter data from the above table (right column)
into
<tt>Page 1</tt> there (heat capacity coefficients and their validity
temperature
interval into <tt>Page 2</tt>). Change reference in dSDref field on <tt>Page
1</tt> to <tt>"Helgeson_ea:1978:pap:".</tt> Press <tt>"Calculate"</tt>
icon
(or <tt>F9</tt>). A small dialog with a question "Calculate standard
values
..." appears; press<tt> "Yes"</tt> - this will check consistency of
standard
properties and calculate <i>Cp<sup>o</sup><sub>298</sub></i> value for
celestite
from the Majer-Kelly coefficients that you entered on <tt>Page 2</tt>.
If
this value is not 107.83 then the <i>Cp<sup>o</sup></i> = <i>f </i>(<i>T
</i>) coefficients were not entered correctly; if so then check numbers
entered on <tt>Page 2</tt> and&nbsp; repeat calculation. Press <tt>"Save"</tt>
icon when finished. You can also perform data restoration and
consistency checks; for instance, put "Empty" value (`) into the <tt>H0d[0]</tt>
cell and press <tt>"Calculate"</tt> button. <br>
&nbsp; <br>
&nbsp; </p>
<p>Upon the next calculation, any reference to celestite in ReacDC,
Phase records and Profile/SysEq structures will operate with your new
data
for celestite, without any furtner reconfiguration. <br>
&nbsp; </p>
<p>A little bit more complicated change is needed when you wish to
replace <a href="gm_dcomp.html">DComp</a> data for a mineral but you
have only reaction logK and can create <a href="gm_reacdc.html">ReacDC</a>
record only. This requires to override <a href="gm_phase.html">Phase</a>
definition which refers to this species: just copy it (using a "Record"
"Save as"
menu command) with alphabetically higher last record key field into
your
<tt>phase.&lt;profilename&gt;.pdb</tt> file (). Then remake new phase
definition so that it would point to your own ReacDC record. Done! <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_2_insert_new"></a>3.3.2 Inserting new species and
phases</h4>
<p><br>
Second typical (and not so rare) case is that, after some modeling
sessions, you have reached a conclusion that a mineral and/or an
aqueous complex,&nbsp; which in reality most probably define measured
metal concentrations, are missing from your modeling system. There is
nothing unusual - no thermodynamic database is complete, not even the
GEM-Selektor kernel database. It is more important to have effiicient
tools for extending your database and system formulations. Such tools
are at your disposal! <br>
&nbsp; </p>
<p>The simplest case is adding aqueous or gaseous species if your <a
 href="gm_profil.html">system profile</a> uses default (automatically
assembled during opening of the profile) aqueous and gas phases. All
you have to do is to collect thermodynamic data and create missing <a
 href="gm_dcomp.html">DComp</a> and/or <a href="gm_reacdc.html">ReacDC</a>
records in database extension files in your profile directory. We
recommend keeping up with the style of record keys used in the kernel
database. These new species will be taken into all your SysEq
definitions when
you select the "Computation of Equilibria" mode and open your profile
next time (press "Ok" on warnings about detection of your newly
inserted
species). <br>
&nbsp; </p>
<p>Please, do not forget to re-calculate all equilibria already stored
in SysEq records in your profile! The program automatically updates
indexation in <a href="gm_syseq.html">SysEq</a> records after some
species were
excluded or added from/to the system profile, but it cannot decide in
which cases these species can affect modelling results, so this is left
to your discretion. <br>
&nbsp; </p>
<p>If you wish to add mineral phases to your system, first check
whether
the respective DComp records are available in the kernel database -
Phase
definitions are provided there only for the most commonly used
minerals.
If this is the case, simply create missing <a href="gm_phase.html">Phase
definition</a> records. If not - then create <a href="gm_dcomp.html">DComp</a>
or <a href="gm_reacdc.html">ReacDC</a> record, enter thermodynamic
data,
and save the record in one of the database extension files in your
profile
directory (best is to load some of the existing records and use them as
templates
by applying "Record" "Save As" menu command). Then&nbsp; create a new
Phase record (single- or multi-component phases) and remake it to point
to the new DC record. New phases and components will be automatically
inserted into System Profile lists upon the next opening of the
profile. Do not forget to recalculate those <a href="gm_syseq.html">SysEq</a>
records (system definitions) in which you deem the new phases to be
stable! <br>
&nbsp; </p>
<p>One important remark about non-aqueous and non-gaseous phases and
their components: the system profile is assembled by picking up all
records available in the current Phase database chain (with due regard
to the
override mechanism). Only those <a href="gm_dcomp.html">DComp</a> and
<a href="gm_reacdc.html">ReacDC</a> records will be selected that are
referred to in <a href="gm_phase.html">Phase</a> records. This means
that some species or minerals in your database extension may not be
used in equilibria calculations if you (on purpose or by chance) did
not include them into Phase record lists. <br>
&nbsp; </p>
<p>Creating definitions of single component condensed phases is by far
the simplest task because such a definition does not include any math
script equations and refers only to one species (the system profile <a
 href="#OVERRIDE">override mechanism</a> applies for loading
DComp/ReacDC data referred to in <a href="gm_phase.html">Phase
definitions</a>). In a Remake configuration window which comes after
you have specified the
new <a href="gdb_rkey.html#dbm_Phase">Phase record key</a>, check that
<tt>"NNNNNN"</tt> is entered into<tt> p_solt</tt>&nbsp; fields with <a
 href="g_useref.html#NONIDTYPES">codes for non-ideality phase types;</a>&nbsp;
either of <tt>"l", "s"</tt> or <tt>"d"</tt> code stays in the <tt>Ph_Ps[0,0]</tt><a
 href="g_useref.html#PHASETYPES">phase class field</a>, and press "Ok".
Then select one species from DComp or ReacDC record lists that appear
later. Type in the phase name and check that <tt>"O"</tt> (single
component) code is present in the <tt>PhDCC</tt> (species class)
field. Finally, save the new phase definition record into one of your
profile extension database files. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_3_check_trends"></a>3.3.3 Checking T,P trends for
new species</h4>
<p><br>
When thermodynamic data are entered into <a href="gm_dcomp.html">Dcomp</a>
records, or new <a href="gm_reacdc.html">ReacDC</a> definitions are
constructed, misprints
and errors can be introduced. Some of them are automatically detected
by Dcomp and ReacDC modules, i.e. such errors incomplete or
inconsistent standard state data, wrong formula stoichiometry,
incorrect charge; the corresponding diagnostic messages are then
issued. Some other errors can be detected only when a series of
thermodynamic data for varying <i>T,P</i>&nbsp;&nbsp; is computed and
plotted on graphs. Thus, the RTparm module and window
screen forms are provided for facilitating the process of
"debugging"&nbsp;
thermodynamic data and their <i>T,P</i>&nbsp;&nbsp; dependencies for
individual species. <a href="gm_rtparm.html">RTparm</a> module takes
input data from Dcomp or ReacDC record with the four first fields same
as in the <a href="gdb_rkey.html#dbm_RTParm">RTparm record key</a>.
The <a href="#OVERRIDE">override mechanism</a> does not apply to
RTparm lists in order to make it possible to compare different
representation of temperature-pressure trends for one species. <br>
&nbsp; </p>
<p>Several RTPARM records can be created for one DCOMP or REACDC
record,
and up to four such records can be plotted together on graphs, e.g.,
for
comparison of different temperature extrapolations. The RTPARM
function,
taken together with flexibility of DCOMP and REACDC definitions
implemented
in GEMS, provides a new level of matching and user's extension of
thermodynamic
database, and can save a lot of time and effort in putting together
various
data needed for modeling systems of environmental geochemical interest.
Since
the same DCthermo() and RCthermo() routines are used in both RTPARM and
<a href="#P3250">System Profile</a> calculations, the tests done by
RTPARM will
make you confident that nothing unexpected can happen with
thermodynamic data
during calculation of equilibria at non-ambient temperatures and
pressures. <br>
&nbsp; </p>
<p>As usual, new RTPARM calculations are performed in GEMS by creating
new records. In a Remake configuration window (invoked by <a
 href="#P333R2">Remake</a> or <a href="#P333R3">Create</a> commands),
the user can specify how many points for temperature and pressure will
be calculated, which thermodynamic data collected and how they will be
displayed on four plots. This is done using flags and switches
(equipped with help messages popping up at mouse pointer, as usual).
After pressing OK, the RTPARM
screen form appears again, there minimum, maximum temperature-pressure
and their increments can be specified if different from default (0 to
375
<sup>o</sup>C in 15 <sup>o</sup>C increments at P<sub>SAT</sub>). <br>
&nbsp; </p>
<p>Calculations are performed&nbsp; with <a href="#P333R4">Calculate</a>
command; when finished, up to four graphs are displayed on <tt>"Record"
"<a href="#P333R8">Plot</a>"</tt> menu command and can be <a
 href="#P3290">customized</a> as in <a href="#P3280">GTDEMO</a>
record. The calculated data can also be printed into a text file using
a <tt>"Record" "<a href="#P333R9">Print</a>" </tt>command. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_4_create_PCO"></a>3.3.4 Creating Predefined
Composition Object (PCO) definitions</h4>
<p><br>
A useful extension of your modeling tollbox is creating GCO definitions
(<a href="#P33D2">Compos</a> records) and storing them in your <tt>/compos.&lt;pname&gt;.pdb</tt>
file. It helps much in setting bulk compositions of systems in a neat
and transparent way, especially for simulation of such processes as
mixing , evaporation, weathering etc. As usual in GEMS, the easiest way
is to
"clone" existing Compos records with <a href="#P333R3">Create</a> or <a
 href="#P333R6">Save As</a> menu commands, remaking and re-calculating
them whenever appropriate. The new Compos record keys will be
automatically added to the <a href="#P3400">System Profile</a> when
you open it next time. </p>
<p>Let us consider an example of creating a new Compos record for the
kaolinite stoichiometry. First, press "Show" button to get the
record&nbsp; "<tt>Kaolinite:MIN:Al2Si2O5(OH)4:</tt>". You will
see&nbsp; a very simple screen where composition of kaolinite is
expressed in moles of chemical elements in the "CI" vector. The
MasVol[0] cell shows kaolinite molar mass in kg, and MasVol[6] displays
the total number of moles of elements per mole of kaolinite. </p>
<p>Try to express the same composition in mole percents of petrogenic
oxides Al<sub>2</sub>O<sub>3</sub>, SiO<sub>2</sub> and H<sub>2</sub>O.
First, execute&nbsp; "Record" "<a href="#P333R3">Create</a>" command,
modify
the previous record key as follows: "<tt>Kaolinite1:MIN:Moles_oxides:</tt>"
and press OK. In appearing "Reorganization of data fields" dialog,
press "<tt>Remake</tt>" button. In the next "Compos: Remake parameters"
dialog, turn first switch off and third switch on. In counters to the
right, put zero into fist one and 3 (number of required formulae for
petrogenic oxides) into third counter, and press <tt>OK</tt>. In
c_icbc selection list which appears next, check "Clear All" and then
"Proceed" buttons. </p>
<p>Now, the "Compos::" screen form appears, with empty&nbsp; list of
formulae "formU". Type SiO2 into its first line; Al2O3 into second and
H2O into third line. Now,&nbsp; specify composition of kaolinite in
"CA" vector
(to the right) by entering 2 against SiO2 formula, 1 against Al2O3 and
2
against H2O. These numbers will be interpreted depending on <a
 href="GEMS-Linux-USREF.html#P6104">units of measurement</a> coded in
the&nbsp; "AUcl" vector (in between), and then will be converted to
numbers of moles and added to bulk GCO composition. By default, 'M'
letters (numbers of moles) appear in AUcl. Be careful with MasVol[0]
and MasVol[6] cells because they are used for normalizing the
composition you have specified to certain mass or total number of IC
moles, respectively. MasVol[0] contains total mass of geochemical
object Ms in kg.&nbsp; If 0 or EMPTY value ` were specified by the user
then mass fractions can not be used and Ms will be automatically
calculated from moles or molar (molal) concentrations. A positive value
should be entered in MasVol[0] cell if at least one value in CI, CD or
CA vectors is specified as mass percent&nbsp; '%'&nbsp; in classifiers
CIcl, CDcl or CAcl. In our kaolinite example, type zero into MasVol[6]
and 0.1 into MasVol[0] cells.&nbsp; Now, press "Calculate"&nbsp; to
calculate
100 g of kaolinite stoichiometry (you will see new&nbsp; numbers in the
leftmost "Cm" vector), and "Save" to save the new record to database
(do
not forget to delete this exercise before you open the System Profile
next
time). </p>
<p>&nbsp;It is important that each element of CI, CD or CA vectors (and
their equivalents in SysEq dialog) can be set up in different <a
 href="GEMS-Linux-USREF.html#P6104">units of measurement</a>. This is
very convenient and gives the user an unprecedented freedom in working
with bulk compositions or modifying them. When specifying different
units, one should take care of their base quantities. For example, when
setting molality units, a mass of water-solvent should always be set.
Read carefully all the help lines to MasVol cells for instructions how
to set base quantities and units of measurement correctly. Examination
of available Compos records and some experimentation will give you the
right feeling how&nbsp; to work with GCO records. Negative numbers can
be used in CI, CD and CA vectors as long as they do not produce
negative numbers of moles in the total GCO composition "Cm" vector. <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_5_update_profile"></a>3.3.5 Updating the System
Profile</h4>
<p><br>
This is done automatically when the user enters "Computation of
Equilibria" mode of GEM-Selektor and selects a system profile from the
appearing list. If some records in thermodynamic database have been
created
or deleted, a warning appears in each case. Press "Ok" to confirm
changes or "Cancel" if the record was inserted or deleted by mistake
(in the latter case, you will need to fix the problem before attempting
to open your system
profile again). After insertion of some phases and species into the
profile,
it is usually necessary to re-calculate at least part of <a
 href="gm_syseq.html">SysEq</a> records produced before (and maybe,
also some <a href="gm_proces.html">Process</a>&nbsp; and <a
 href="gm_gtdemo.html">GtDemo</a> definitions). <br>
&nbsp; </p>
<p>The usual case for removing some phases from the profile (i.e.
respective Phase records from thermodynamic database) is that, after
all the necessary models have been calculated, it happens that these
phases never appeared in equilibria. Cleaning such phases out helps in
keeping your profile
lists smaller and easier to look through. In this situation, it is not
necessary to re-calculate all the SysEq records because nothing is
going
to change. <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_6_rerun_syseq"></a>3.3.6 Re-running already
calculated equilibria</h4>
<p><br>
There are two ways for re-calculating <a href="gm_syseq.html">SysEq</a>
records: (i) one-by-one (from the "Single Thermodynamic System" dialog)
and (ii) batch calculations (re-calculation of <a href="gm_proces.html">Process</a>
definitions, preferable). <br>
&nbsp; <br>
&nbsp; </p>
<p>The one-by-one method is the only possible for the SysEq records
which are "standalone" or used as "parent" systems for Process
definitions. It consists of two steps: (1) Press "Load..." button and
select the record; (2) Press "BCC" and then "IPM" buttons to re-run GEM
IPM module. "Accept" on the IPM Progress dialog will also save updated
SysEq record to database. <br>
&nbsp; </p>
<p>The batch calculation requires first to open the "Process" window,
then load the necessary Process record, and press "Calculate" icon or
menu item to recalculate all SysEq records created by this Process
definition. Re-calculating all GtDemo definitions related to this
process is also
advisable for re-plotting results and looking what changed. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h3> <a name="3_4_create_profile"></a>3.4 Creating a new System Profile</h3>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_1_select_files"></a>3.4.1 Selecting files from the
kernel database</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_2_configure_profile"></a>3.4.2 Configuring the new
profile</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_3_create_first_system"></a>3.4.3 Creating the first
chemical system definition</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h2> <a name="4_howto_proceed"></a>4.&nbsp;&nbsp;&nbsp; How to proceed</h2>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<p>We believe that at this point, you already feel how easy it is to
"clone" and change definitions of chemical systems in the GEM-Selektor
profile and immediately see what happens to the equilibrium states.
Later on,
you can work through the Tutorial to gain a lot more experience. It is
really easy to check various (geo)chemical ideas using GEM-Selektor! <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
</p>
<hr size="2" width="100%">
<p><br>
</p>
<p> </p>
<p><a name="END_GEMSTAR2"></a><a href="gemstdbm.html">CONTINUE to the
next file (gemstdbm.html)</a> </p>
<p><a href="file:///C:/GEMS2test/program/doc/html/gemstart.html">Table
of Contents</a> </p>
<p><tt>end of file</tt> <br>
&nbsp; </p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
