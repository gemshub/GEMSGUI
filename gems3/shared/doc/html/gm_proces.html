<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <meta name="GENERATOR"
 content="Mozilla/4.7 [en] (WinNT; I) [Netscape]">
  <title>GEMS3 Proces Module</title>
  <meta name="description" content="Version 2.0.0-PSI">
</head>
<body>
<h1><img src="gems1.png" align="left" height="48" width="48"> <font
 color="#000066"> GEM-Selektor version 3</font> </h1>
<h2>Process Simulation (Proces) Module<br>
</h2>
<hr size="2" width="100%">
<p> </p>
<h3>Contents</h3>
<blockquote>
  <p><font face="Helvetica, Arial, sans-serif"><a href="#PROCES_INTRO">1.
Introduction to Proces module<br>
  </a></font></p>
  <p style="font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_SIMULATIONS">1.1. Overview of Process Simulations</a></p>
  <p><font face="Helvetica, Arial, sans-serif"><a href="#PROCES_SPECIAL">1.2.
Special cases of &nbsp;Process Simulators</a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_SPECIAL_INVTITR">1.2.1. Inverse titrations</a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_SPECIAL_SEQREACT">1.2.2. Sequential reactors</a><br>
  </font> </p>
  <font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_SPECIAL_LIPPMANN">1.2.3. Lippmann diagrams</a></font></blockquote>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_MWIZARD">2. Proces Create/Remake Wizard</a></p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_1">2.1. Proces Wizard Step 1</a></p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_2">2.2. Proces Wizard Step 2</a></p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_3">2.3. Proces Wizard Step 3</a><br>
</p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_4">2.4. Proces Wizard Step 4</a><br>
</p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_5">2.5. Proces Wizard Step 5</a><br>
</p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#WZSTEP_6">2.6. Proces Wizard Step 6</a><br>
</p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_MWINDOW">3. Proces Module Window</a></p>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#MWPAGE_1">3.1. Proces Window Page 1</a></p>
<blockquote> <a href="#MWPAGE_2"><span
 style="font-family: Helvetica,Arial,sans-serif;">3.2. Proces Window
Page 2</span></a></blockquote>
<p style="margin-left: 40px; font-family: Helvetica,Arial,sans-serif;"><a
 href="#MWPAGE_3">3.3. Proces Window Page 3</a><br>
</p>
<blockquote><a href="#MWPAGE_4"><span
 style="font-family: Helvetica,Arial,sans-serif;">3.4. Proces Window
Page 4</span></a><br>
  <p><font face="Helvetica, Arial, sans-serif"><a href="#PROCES_DETAILS">4.
Details on Process Simulations</a><a href="#PROCESS_SIM_ITERATORS"><br>
  </a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_DETAILS_ITERATORS">4.1. Setting up the Process iterators</a><a
 href="#PROCESS_SIM_MATH_SCRIPT"><br>
  </a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_SIMULATION_SCRIPT">4.2. Writing Process simulation math
scripts</a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCES_SAMPLING_SCRIPT">4.3. Writing Process data sampling
math scritps</a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCESS_DETAILS_RUN">4.4.
Running Process Simulators</a></font></p>
  <p><font face="Helvetica, Arial, sans-serif"><a
 href="#PROCESS__DETAILS_PLOT">4.5. Plotting and exporting results</a></font>
  </p>
  <p><font face="Helvetica, Arial, sans-serif"><a href="#PROCES_DATA">5.
Proces Window Data Entries</a></font></p>
  <p style="font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_DATA_ITERATORS">5.1. Input Process Iterators</a></p>
  <p style="font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_DATA_OPTIONAL">5.2. Optional Data Vectors</a></p>
  <p style="font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_DATA_SAMPLING">5.3. Data Objects for Sampling/Plotting
of Results</a><br>
  </p>
  <p style="font-family: Helvetica,Arial,sans-serif;"><a
 href="#PROCES_DATA_CONFIG">5.4. Data fields that can be changed only
through create/remake wizard</a></p>
  <p><font face="Helvetica, Arial, sans-serif"><a href="#PROCES_ERRORS">6.
Warnings and error messages</a></font></p>
</blockquote>
&nbsp;<br>
<hr size="2" width="100%"><br>
<h2><a name="PROCES_INTRO"></a>1. Introduction to Proces Module</h2>
<p> Geochemical modeling often requires simulation of <a
 href="glossary.html#DT_irreversible">irreversible processes&nbsp;</a>such
as mixing, dissolution, titration, corrosion, weathering, etc.&nbsp;
According to the<a href="glossary.html#DT_Local_equilibrium">
principles of local</a> and <a
 href="glossary.html#DT_Partial_equilibrium">partial equilibrium</a>,
this can be done by computing a series of discrete <a
 href="glossary.html#DT_equilibrium">equilibrium states</a> generated
by a stepwise change of the bulk composition and other input
parameters of the chemical system. Doing this in manual mode (i.e.
defining such equilibrium states one-by-one ) is usually boring and
time-consuming, especially in the case of certain <i>regular</i>
change of bulk composition of the system. The "manual" data sampling
with graphic or tabular presentation of modeling results would be even
more work-intensive. Hence, the automation of "batch" calculation of
many equilibrium states and sampling of results is of critical
importance for the efficiency of the whole modelling exercise. </p>
<p>For these reasons, a Process Simulator module (and "proces" record
type) has been implemented in the GEM-Selektor code. The module is
quite flexible;&nbsp; it can rapidly generate many equilibrium
"points" by changing virtually any combination of GEM IPM input data
(see <a href="gems_bcc.html"><tt>gems_bcc.html</tt></a> and <a
 href="gems_scm.html"><tt>gems_scm.html</tt></a> manuals), store the
results (see <a href="gems_sys.html"><tt>gems_sys.html</tt></a>
manual)
in the <a href="gm_syseq.html">SysEq</a> database, and at the same
time, sample and plot any IPM output data (or function of it),
optionally together with some experimental points. To tell the program
what input data to modify and what output data to sample, you have
to provide two <a href="gmscript.html">Math Scripts</a> that control
generation of the simulated points (<a href="#P_expr"><tt>P_expr</tt></a>)
and data sampling (<a href="#pgExpr"><tt>pgExpr</tt></a>),
respectively.&nbsp; </p>
<br>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h3><a name="PROCES_SIMULATIONS"></a>1.1. Overview of Process
Simulations</h3>
<p><br>
</p>
<p>There are three major classes of process simulators: </p>
<ul>
  <li>
    <p>"<b>S</b>" (sequential, or simple) simulation implies that the
next step of the process <b>does not depend</b> on any calculated
parameters of equilibrium obtained at the previous step. This is true
for temperature-pressure changes, <a
 href="glossary.html#DT_titration_direct">direct titrations</a>, and
simple reaction extent models like dissolution of a fixed rock
composition.&nbsp; </p>
  </li>
  <li>
    <p>"<b>U</b>" (reciprocal) simulation means that the next step <b>depends
on some just calculated parameters</b> of the current equilibrium
state,
for instance, on pH, pe, bulk composition of equilibrium phases,
activity of some species etc. Typical examples are <a
 href="glossary.html#DT_sequential_reactors">sequential reactors</a>, <a
 href="glossary.html#DT_titration_inverse">inverse titrations</a>, and
kinetically controlled processes that depend on pH, pe, gas
fugacities, or dissolved metal concentrations.</p>
  </li>
  <li>
    <p>"<b>G</b>" (inverse) simulation produces one or several
local/partial equilibrium states found from a <b>parametric
minimization</b> (using the golden-section method) of a difference
between the prescribed and the calculated value of a GEM IPM output
parameter. The most typical example is the <a
 href="glossary.html#DT_titration_inverse">"inverse titration" </a>
that calculates a number of aquatic equilibria for the prescribed
values
of pH, pe or any other output parameter. </p>
  </li>
</ul>
<p>In the case of inverse titration, the program automatically runs
several IPM calculations by varying certain input parameters, such as
the amount of titrant (acid, base, oxidant or reductant), until
finding such input values that bring the "objective" parameter (e.g.
the equilibrium pH) close enough to its prescribed value. This is done
using an internal "golden section" algorithm; when it converges
(usually between 3 and 16 IPM runs), the program stores the results
into database and proceeds to the next simulation point. The "inverse
titration" procedure requires a special form of <a href="gmscript.html">Math
Script</a>, available in the <a href="gm_sdref.html#MATH_SCRIPT_LIB">template
math script library</a>. <br>
&nbsp;<br>
It is impossible to foresee and hard-code all the meaningful process
simulations of interest to (geo)chemists because any simulation depends
on the system definition and the modeling objectives. For this
reason, the GEM-Selektor code requires the user to specify exactly
what and how to simulate by writing Math Scripts. This provides an
unmatched freedom and flexibility, but at the same time requires some
learning effort. To facilitate writing Math Scripts, we provide a
collection of useful template scripts in the <a
 href="gm_sdref.html#MATH_SCRIPT_LIB">math script template library</a>.
You can get these template scripts any time by clicking on the "Help"
"Scripts" menu command in the Process window.&nbsp; </p>
<p>A Process Simulator record refers through its <a
 href="gdb_rkey.html#dbm_Process">record key format</a> to a <a
 href="gm_syseq.html">SysEq record</a> that must exist in the database
before the process simulator will be created and executed. This
"parent" SysEq record is used as a template which is modified and
"cloned" into a sequence of generated SysEq records. For this reason,
the first eight&nbsp; fields of the <a href="gdb_rkey.html#dbm_Process">Proces
record key</a> are the same as
in its parent <a href="gdb_rkey.html#dbm_SysEq">SysEq record key</a>,
followed by the process identifier and type fields.&nbsp; The parent
SysEq record is never changed by the process simulator; it is just
used as a template to start calculations and generate new, modified
SysEq records on the simulation steps. </p>
<p>Process simulation, especially in the case of fitting the model to
some empirical data, can be greatly facilitated by using the data
sampling and plotting functionality of the Process module (not
available in GEMS versions before 1.95). If the sampling/plotting
mode is invoked and the data sampling Math Script (<a href="#pgExpr"><tt>pgExpr</tt></a>)
is provided then it will be executed immediately after calculation
of every process-generated equilibrium points. When the process
simulation is finished, the sampled data can be plotted just by
pressing the "Plot" toolbar button, or exported into the ASCII file
using a print script from the script library. Moreover, next time you
can run the process simulation again in such a way that the newly
generated points will be added one-by-one to the existing graph.</p>
<p>&nbsp;
<br>
</p>
<p> </p>
<hr style="width: 100%; height: 2px;">
<h3><a name="PROCES_SPECIAL"></a>1.2. Special Cases of &nbsp;Process
Simulators</h3>
&nbsp;There are several practically important special cases of Process
simulators (see also the <a
 href="gm_sdref.html#process_mscripts_simulator">template math script
database</a>). Three will be outlined in this section: inverse
titrations, sequential reactors, and calculation of Lippmann diagrams
in the binary solid solution - aqueous solution (SSAS) system.<br>
&nbsp;
<h4><a name="PROCES_SPECIAL_INVTITR"></a>1.2.1. Inverse titrations<br>
</h4>
<h4>Inverse Titration (single point)</h4>
<p> Suppose a process simulator should find how many moles of CO<sub>2</sub>
per 1 kg of water at equilibrium with excess calcite CaCO<sub>3</sub>
(closed system) must be added to bring it to a prescribed equilibrium
pH=6.4±0.01. This can be done with&nbsp; the following <a
 href="gmscript.html">Math Script </a>program typed into "P_expr"
field on&nbsp; <tt>"Process" Page 1</tt>&nbsp; window:</p>
<div style="margin-left: 40px;"><tt>$ Finding molality of CO2 added to
obtain a prescribed pH</tt> <br>
<tt>$ Initialization</tt> <br>
<tt>&nbsp; if( NeIt[1] = 0 )</tt> <br>
<tt>&nbsp; begin</tt> <br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp; ipH[1]=:pH-ipH[0]; iNu[2]=:0;</tt> <br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp; cNu=:iNu[0]; iNu[1]=: xd_[{CO2}];</tt> <br>
<tt>&nbsp; end</tt> <br>
<tt>$ Calculation of difference between given and computed pH</tt> <br>
<tt>&nbsp; cpH =: pH-ipH[0];</tt> <br>
<tt>$ Recalculation of a step in titrant molality</tt> <br>
<tt>&nbsp; cNu =: ( ( cpH * ipH[1] ) &lt; 0 ? cNu*0.382 : cNu );</tt> <br>
<tt>&nbsp;&nbsp; ipH[1] =: cpH;</tt> <br>
<tt>$ Calculation of the amount of titrant</tt> <br>
<tt>&nbsp; iNu[2] =: iNu[2] + cNu*sign(cpH);</tt> <br>
<tt>&nbsp; xd_[{CO2}] =: iNu[1]+iNu[2];</tt> <br>
<tt>$ Check of convergence</tt> <br>
<tt>&nbsp; Next =: ( ( abs( cpH ) &lt; ipH[2] ) ? 0 : 1);</tt> <br>
<tt>$ Finish</tt></div>
<p> </p>
<p>The<span style="font-family: monospace;"> iNu[0] </span>cell should
contain an initial guess how much titrant will be added; if it is
too small or too large then too many steps of this simple&nbsp;
"gold-section" algorithm will be performed. The <span
 style="font-family: monospace;">iNu[2]</span> cell contains current
amount of titrant added;<span style="font-family: monospace;"> iNu[1]</span>
is loaded at the beginning with the amount of this titrant in the
parent SysEq definition.<span style="font-family: monospace;"> ipH[0] </span>contains
the prescribed pH value,<span style="font-family: monospace;"> ipH[2]</span>
gives a precision to be achieved, <span style="font-family: monospace;">ipH[1]</span>
will hold the current
difference between the calculated and prescribed pH. If alkali is used
for titration instead of acid, the assignment <tt>cpH =: pH-ipH[0];</tt>
must be replaced by <tt>cpH =: ipH[0]-pH;</tt>&nbsp; This is just one
example of many possible algorithms to solve this kind of single
inverse titration problems.&nbsp;&nbsp; </p>
<h4><a name="INV_TITR_SEQ"></a> Inverse titration sequence</h4>
<p> The process simulator in GEMS has also a built-in "golden section"
1-D minimization procedure that permits to calculate a series of
inverse titrations in a single process run. The GEM algorithm
cannot use pH as an input parameter; the only way to obtain a
prescribed pH value is to add/subtract acid or alkali in the system
bulk composition. This can be done by hand, repeating GEM IPM
calculations and checking the pH value. However,&nbsp;this is
inefficient for plotting diagrams as function of pH. The script shown
below (see also a SDref record <span style="font-family: monospace;">"mscript-titr-invers:0003:proces:"</span>
in the <a href="gm_sdref.html#process_mscripts_simulator">template
math
script database</a>) helps doing this efficiently. It can be used to
create a sequence of aquatic equilibria with pH changing in regular
intervals (e.g., from 2 to 10 in 0.2 unit step).<br>
</p>
<div style="margin-left: 40px;"><span style="font-family: monospace;">$
modC[J]: acid or base added</span><br style="font-family: monospace;">
<span style="font-family: monospace;"> $ pH sequence of inv. titrations</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> if ( Next=1) begin</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> &nbsp;cNu =: cpH-pH; end</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> if (Next=2) begin</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> &nbsp;xa_[{NaOH}] =: ((cEh &lt;
0)? 1e-8: cEh); </span><br style="font-family: monospace;">
<span style="font-family: monospace;"> &nbsp;xa_[{HCl}] =: ((0-cEh &lt;
0)? 1e-8: 0-cEh);</span><br style="font-family: monospace;">
<span style="font-family: monospace;"> &nbsp;modC[J] =: cEh; </span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"> end</span><br
 style="font-family: monospace;">
</div>
<p>After copying this script with <span style="font-family: monospace;">Ctrl-C</span>
and pasting it (<span style="font-family: monospace;">Ctrl-V</span>)
into the <span style="font-family: monospace;">P_expr</span> field on
Page 1 of the "Process" window, you may have to edit the script there
if different acid and base are to be added (e.g., KOH and HNO<sub>3</sub>)
in your particular system definition. If you use species'
stoichiometries as titrants (rather than <a href="gm_compos.html">PCO/Compos</a>
entries) then change also <span style="font-family: monospace;">xa_</span>
to <span style="font-family: monospace;">xd_</span> data object
label.&nbsp; <br>
<br>
To use such "inverse titration" script, turn on the <span
 style="font-family: monospace;">PePsts[11]</span> flag "Is this a
sequence of inverse titration points (+ -)?" when creating or
remaking the Process definition. This flag activates a built-in
"Golden Section" 1-D parametric minimization algorithm. At each
iteration of the "Golden Section" algorithm, the interval [a,b] is
corrected as: <br>
</p>
<div style="margin-left: 40px;">x1 = { <span
 style="font-family: monospace;">ipXi[0]</span> at the first iteration;
current <span style="font-family: monospace;">cEh</span> at next
iterations }, <br>
x2 = <span style="font-family: monospace;">ipXi[1]</span>;<br>
a = min( x1, x2 ); <br>
b = max( x1, x2 ). <br>
</div>
<p>Convergence is achieved when the deviation function becomes smaller
than the precribed precision value, given in the <span
 style="font-family: monospace;">iNu[1]</span> field (for pH, usually
0.01). The "Inverse titration sequence" math script has the following
general structure:<br>
</p>
<div style="margin-left: 40px;">if( <span
 style="font-family: monospace;">Next</span> = 1 ) begin <br>
&lt;expressions&gt; <span style="font-family: monospace;">cNu</span>
=:&lt;function&gt;; &lt;expressions&gt; end <br>
if( <span style="font-family: monospace;">Next</span> = 2 ) begin <br>
&lt;expressions&gt; &lt;titrant&gt; =: <span
 style="font-family: monospace;">cEh</span>; &lt;expressions&gt; end <br>
</div>
<p>Here, &lt;function&gt; is a valid expression specifying a monotonous
function of deviation between the calculated and the measured
parameter (<span style="font-family: monospace;">cNu</span><span
 style="font-family: monospace;"> =:</span><span
 style="font-family: monospace;"> cpH-pH;</span>), which has a minimum
in a prescribed interval of addition of titrants to the bulk
composition of the system. &lt;titrant&gt; is any cell in "System"
window pages to control the calculated parameter of the eqiuilibrium
state. In the above script, the operator <br>
</p>
<div style="margin-left: 40px;"><span style="font-family: monospace;">&nbsp;xa_[{NaOH}]
=: ((cEh &lt; 0)? 1e-8: cEh);</span> <br>
</div>
<p>adds NaOH to the system bulk composition if <span
 style="font-family: monospace;">cEh</span> &gt; 0, and <br>
</p>
<div style="margin-left: 40px;"><span style="font-family: monospace;">&nbsp;xa_[{HCl}]
=: ((0-cEh &lt; 0)? 1e-8: 0-cEh); </span><br>
</div>
<p>adds HCl if <span style="font-family: monospace;">cEh</span> &lt;
0.
The operator&nbsp; <span style="font-family: monospace;">modC[J] =:
cEh;</span> stores the necessary titrant addition into an optional
vector <span style="font-family: monospace;">modC</span>; and<span
 style="font-family: monospace;"> J </span>is an index of the chemical
equilibrium system currently generated in the Process simulator. <br>
&nbsp;<br>
The initial interval <span style="font-family: monospace;">ipXi[0],
ipXi[1]</span> of titrant additions (performed using the <span
 style="font-family: monospace;">cEh</span> cell) must be specified in
the Process definition. The lower boundary <span
 style="font-family: monospace;">ipXi[0]</span> must be less than the
upper boundary<span style="font-family: monospace;"> ipXi[1]</span>,
though <span style="font-family: monospace;">ipXi[0]</span> and also <span
 style="font-family: monospace;">ipXi[1]</span> can be negative. In the
latter case, only acid will be added. If both boundaries are positive
then only alkali will be added. Othervise, in some of the generated
equilibria, the acid (negative<span style="font-family: monospace;"> cEh</span>
values) and in other - the base will be added. Please, make sure
(before running the Process simulator) that appropriate boundaries are
known, by doing sample calculations in a single system for the smallest
and the largest pH values necessary. Also you must specify: <br>
</p>
<div style="margin-left: 40px;"><span style="font-family: monospace;">ipXi[2]</span>
- precision of inverse titration in the same units as the titrant
addition (e.g. 1e-9 moles); <br>
<span style="font-family: monospace;">iNu[1]</span>&nbsp; - precision
of the deviation function result (<span style="font-family: monospace;">cNu</span>)
with respect to the calculated parameter (e.g. 0.01 pH unit).<br>
</div>
<p>When you calculate the Process Simulator, an inverse modelling
problem is solved for and the resulting SysEq record is saved to the
database for each simulation point. Then the program will proceed to
the next point (if there are any left). The number of equilibrium
points to be created should be entered into the <span
 style="font-family: monospace;">Ntxi[1]</span> field. Enter also <span
 style="font-family: monospace;">NeIt[0]</span> &gt; <span
 style="font-family: monospace;">Ntxi[1]*2</span>. Flags <span
 style="font-family: monospace;">PePsts[2], PePsts[4], PePsts[7],
PePsts[10]</span> must be turned on. Flag <span
 style="font-family: monospace;">PePsts[8]</span> must be turned off.
If
necessary, remake the Process record and set the flags properly. <br>
<br>
</p>
<h4><a name="PROCES_SPECIAL_SEQREACT"></a>1.2.2. Sequential reactors</h4>
<p>The "sequential reactor sequence" is a good model for some
steady-state irreversible processes such as weathering, infiltration
metasomatosis, evaporation of seawater etc. The idea behind it is
that a given mass of the aqueous (fluid) phase of a certain initial
composition is added to the first "reactor" where it equilibrates at
given T, P with a known mass of solids of a given bulk composition.
&nbsp;After &nbsp;the local equilibrium has been achieved, the fluid
of now different bulk composition is moved (at a given quantity) to the
next "reactor" that exists maybe at different T, P, and/or contains
some reactive solids of known mass and bulk composition. In the same
way, the fluid "propagates" sequentially through a desired
number&nbsp; of "reactors".&nbsp;</p>
<p>To facilitate "sequential reactor" modelling, we have included the
respective mode of process simulation (activated during remake of the
Process record using a <a href="gm_proces.html#PePsts_5"><span
 style="font-family: monospace;">PePsts[5]</span></a> flag). However,
this also requires a special configuration of the "parent" <a
 href="gm_syseq.html">SysEq record,</a> more precisely - two start-up
records. The very first one is (let us call it "initial" system) is
just
an ordinary SysEq record that defines a prototype of the chemical
system to be used for constructing all "reactors", which produces at
equilibrium the aqueous (fluid) phase of the initial bulk composition.
The next one ("parent" system) can be "cloned" from the "initial"
system and re-configured by executing&nbsp; the "Record" "Remake"
menu command from the "Single Thermodynamic System" dialog. In the
appearing remake configuration dialog, find and switch on ('+') a <a
 href="gems_bcc.html#SyPvec_3"><span style="font-family: monospace;">SyPvec[3]</span></a>
flag and press "Ok". The program will ask you to select a SysEq record
from where to take equilibrium bulk compositions of phases; select the
key of the "initial" SysEq record and press Ok. Then open a "Phase"
page of the "System" window; there you will see a <a
 href="gems_bcc.html#xp_"><span style="font-family: monospace;">xp_</span></a>
vector of quantities of phases from previous equilibrium to be added to
the bulk composition of this chemical system. Set there e.g. 1000 g of
aqueous phase to add, then remove the corresponding PCO additions on
the Compos page (<a href="gems_bcc.html#xa_"><span
 style="font-family: monospace;">xa_</span></a> vector). Calculate the
equilibrium and save the results. The "parent" record is now
ready.&nbsp;<br>
</p>
<p>At this point, you can create the Process record that will perform
"sequential reactors"; put <span style="font-family: monospace;">"R"</span>
in the last field of the <a href="gdb_rkey.html#dbm_Proces">Process
record key</a>, select the "Sequential Reactors" mode in the appearing
wizard, and enter a desired number of "reactors" (e.g.21) to be
created. It is also desirable to activate the "Data sampling/plotting"
mode, to be able to follow what happens in the reactors. From now on,
define the process simulation as usual (set process iterators, write
necessary math scripts and so on). Wnen ready, just run the process
simulation. To have it working properly, make sure that at least one
non-zero value is given in the xp_ vector of the "parent" SysEq record
for a multi-component phase. <br>
<br>
[worked example to be provided]&nbsp; </p>
<h4><a name="PROCES_SPECIAL_LIPPMANN"></a>1.2.3. Lippmann diagrams<br>
</h4>
<p><a href="glossary.html#DT_Lippmann_diagram">Lippmann diagrams</a>
are
helpful in establishing equilibrium compositions of a binary <a
 href="glossary.html#DT_solid_solution">solid solution</a> and <a
 href="glossary.html#DT_aqueous">aqueous electrolyte</a> phases as
function of mole fractions (in solid and in aqueous phase). Even
though such diagrams are not required for solving <a
 href="glossary.html#DT_SSAS_equilibrium">SSAS equilibria</a> in GEM
codes, Lippmann diagrams are still helpful in visualizing behavior of
binary SSAS systems. <br>
</p>
<h4>Process Simulator for compositional dependence in the binary SSAS
system <br>
</h4>
<p>To construct a Lippmann diagram, one first has to generate enough
SSAS equilibrium points covering the whole range of solid phase
compositions. 50 points (with a step 2% in solid mole fraction) are
usually sufficient. A direct titration script like that shown below
for the regular binary (Ca,Mn)CO3 system with <span
 style="font-style: italic;">a</span> = 1.9&nbsp; at S/L = 0.2 mol
solid per 1 kg H<sub>2</sub>O can do the job: <br>
</p>
<div style="margin-left: 40px;"><span style="font-family: monospace;">cNu
=: iNu[0] + iNu[2]*J;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">xa_[{CaCO3}] =: (cNu&gt;0?
cNu*0.2/100; 1e-6);</span><br style="font-family: monospace;">
<span style="font-family: monospace;">xa_[{MnCO3}] =: (cNu&lt;100?
(100-cNu)*0.2/100; 1e-6);</span><br>
</div>
<p>The conditional math script operators check for zero mole fractions
and, if so, assign trace additions of end-member stoichiometries to
prevent degeneration of the system.&nbsp; This script (to be put in
the <span style="font-family: monospace;">"P_expr"</span> field)
generates 51 points using the <span style="font-family: monospace;">"iNu"</span>
iterator loaded with 0; 100; 2 to produce 2% steps in solid mole
fraction scale.&nbsp; <br>
</p>
<h4>Data Samplers for constructing Lippmann diagrams</h4>
The Lippmann diagram actually is a superposition of two plots where the
same ordinate value called "total solubility product" is plotted
against two different abscissas: the end-member mole fraction in solid
solution ("solidus") and the ionic mole fraction in aqueous phase
("solutus"). Any horizontal line connecting a point on "solidus" with
a point on "solutus" defines a SSAS equilibrium state. <br>
<br>
Note that the GEM-Selektor v.2 Graph Dialog can plot several ordinates
(lines) but only against one abscissa. This technical limitation means
that only one of two lines of the Lippmann diagram can be plotted in
one Process or GtDemo run. To produce the second line, one has to
"clone" the record and change only the data sampling script, then
re-calculate. <br>
<br>
The example script below (to be put into <span
 style="font-family: monospace;">"pGexpr"</span> field ) calculates the
"solidus" curve of the Lippmann diagram: <br>
<p style="margin-left: 40px;"><tt>$ Lippmann diagram - solidus</tt> <br>
<tt>&nbsp;&nbsp; xp[J] =: Wxx[{rhodochrosite}];</tt> <br>
<tt>&nbsp;&nbsp; yp[J][0] =: lg( my[{CO3-2}]*gamma[{CO3-2}] * <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
my[{Ca+2}]*gamma[{Ca+2}] +</tt>&nbsp;<tt> my[{Mn+2}]*gamma[{Mn+2}] ));</tt>
<br>
</p>
<p>The script below calculates the "solutus" curve of the Lippmann
diagram. "Clone" the Process record and put the second script into
the&nbsp; <span style="font-family: monospace;">pGexpr</span> field,
then re-run the Process simulator.<br>
</p>
<div style="margin-left: 40px;"><tt>$ Lippmann diagram - solutus</tt> <br>
<tt>&nbsp; xp[J] =: my[{Mn+2}]*gamma[{Mn+2}] / (
my[{Ca+2}]*gamma[{Ca+2}] +</tt> <br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
my[{Mn+2}] * gamma[{Mn+2}] );</tt> <br>
<tt>&nbsp; yp[J][0] =: lg( my[{CO3-2}]*gamma[{CO3-2}] * </tt><br>
<tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
my[{Ca+2}]*gamma[{Ca+2}] +</tt> <tt>my[{Mn+2}]*gamma[{Mn+2}] ));</tt> <br>
</div>
The full diagram can be plotted after exporting both sets of
results
and putting them on the same graph in a commercial plotter (MS Excel,
SigmaPlot etc.).<br>
<p><br>
</p>
<p>&nbsp;<br>
</p>
<hr style="width: 100%; height: 2px;">
<p></p>
<h2><a name="PROCES_MWIZARD"></a>2. Proces Create/Remake Wizard<br>
</h2>
<br>
<p><br>
</p>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h3><a name="WZSTEP_1"></a>2.1. Proces Wizard Step 1</h3>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="WZSTEP_2"></a>2.2. Proces Wizard Step 2</h3>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="WZSTEP_3"></a>2.3. Proces Wizard Step 3</h3>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="WZSTEP_4"></a>2.4. Proces Wizard Step 4</h3>
<br>
<br>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="WZSTEP_5"></a>2.5. Proces Wizard Step 5</h3>
<br>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="WZSTEP_6"></a>2.6. Proces Wizard Step 6</h3>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h2><a name="PROCES_MWINDOW"></a>3. Proces Module Window</h2>
<br>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><a name="MWPAGE_1"></a>3.1. Proces Window Page 1</h3>
<p><br>
</p>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><span style="font-family: Helvetica,Arial,sans-serif;"><a
 name="MWPAGE_2"></a>3.2. Proces Window Page 2</span></h3>
<p><br>
<span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><br>
<span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<hr style="width: 100%; height: 2px;">
<p><span style="font-family: Helvetica,Arial,sans-serif;"><br>
</span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>
<h3><a name="MWPAGE_3"></a>3.3. Proces Window Page 3</h3>
<p><br>
</p>
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<hr style="width: 100%; height: 2px;">
<p style="font-family: Helvetica,Arial,sans-serif;"><br>
</p>
<h3><span style="font-family: Helvetica,Arial,sans-serif;"><a
 name="MWPAGE_4"></a>3.4. Proces Window Page 4</span></h3>
<p><br>
</p>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h2><font face="Helvetica, Arial, sans-serif"><a name="PROCES_DETAILS"></a>4.
Details on Process Simulations</font></h2>
<p>To create a new Process Simulator, first make sure that the "parent"
SysEq record has been created, calculated and saved in the database.
Then switch to the "Process" window and select the "Record" "Create"
menu command. A list of available SysEq records will appear; find
there the "parent" record (suppose, its key is <tt>"TestProject:G:TestSystem:1:0:1:25:0:"</tt>),
select it and press the "Ok" button (or double-click on the selected
record key). In the appearing "Process: Please, enter a new key"
dialog, fill out the last two fields of the new Process record key
(e.g. as <tt>"...:Titration1:S:"</tt>). Press "Ok" when ready.&nbsp;<br>
&nbsp; <br>
Now, a "Setup to Create Process:" wizard appears. On the first tab
"Process Simulation Types", select a desired process simulation type
(mode); default is <span style="font-family: monospace;">"S"</span> -
a direct change of bulk composition. A checkbox "Use stepwise mode"
below (default - unchecked), if checked, causes the program to run the
process simulator in a "stepwise" mode, where you can stop the
automatic run and execute main process simulation steps one-by-one,
then resume or cancel the simulation (see also the <a
 href="#PROCESS_RUN">"Running process simulators" chapter</a> and <a
 href="#PePsts_0"><span style="font-family: monospace;">PePsts[0]</span></a>
flag). In the normal (non-stepwise) mode, there is no way to stop the
simulation run until it is finished or an error occurs. Hence, the
"stepwise" mode would be preferential for debugging of the
newly-created process simulators or for calculation of long simulation
sequences using the large chemical system.<br>
</p>
<p>On the second tab "Dimensions and Graphics", you must set a number
of process-generated points (equilibria; 17 to 51 points are
recommended for nice-looking plots). Other fields are optional, but in
many cases useful (press "Help" for more information or consult the <a
 href="process_setup.html"><font size="+1"><tt>process_setup.html</tt></font></a>
file). For instance, the <a href="#modC"><tt>modC</tt></a> array can
be
used for entering some input parameters that specify each&nbsp; point
to be generated, or for collecting addition(s) of titrant(s) in an
inverse titration sequence. Setting a positive number of plots will
invoke the data sampling/ plotting mode; you have to decide now how
many columns (plot lines) with output data you need. If the plotting
is invoked, you can also define how many lines and columns you need
for typing in the empirical (experimental) data to be shown as
scattered symbols over the simulation plots. Finally, you can change
the number of references to bibliographic (SDref) records.&nbsp; Press
"Ok" when finished - you are now ready to set up the process iterators
and write up the math scripts. The Process Simulator can be
re-configured at any time by executing a "Record" "Remake" menu
command.&nbsp; <br>
</p>
<p>Alternatively, as usual in GEM-Selektor, you can "clone" a new
Process record from an existing one. After selection of a "parent"
SysEq record key and typing in the Process ID and type, this will lead
you into the "Remake" mode where you see a standard "Process: Remake
parameters" dialog. Here, you have a full control over configuration
and behavior of the process simulator; read the tooltips and help
pages (in this manual below) for setting up flags and counters. To
clone the Process record without getting into "Remake" mode, execute
the "Record" "Save As" menu command and make a new Proces record key. </p>
<br>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h3><a name="PROCES_DETAILS_ITERATORS"></a>4.1. Setting up the Process
iterators</h3>
<p>Now, you should see Page 1 of the "Process" window with empty or
zero data fields (or non-zero values in the case of "cloning" from
another Process record). Variants of the process simulation can be
set up using one or more of column vectors ("iterators")&nbsp; <tt>"iTm",
"iV", "iP", "iTC", "iNv", "iTau", "ipXi", "iNu", "ipH", "ipe"</tt>.
Scan them with mouse pointer and read tooltips. Each of the
iterators has the following structure: </p>
<blockquote>
  <p><tt>first cell&nbsp; [0]&nbsp; start value</tt> <br>
  <tt>second cell [1]&nbsp; limiting value</tt> <br>
  <tt>third cell&nbsp; [2]&nbsp; increment (or 0 for no change)</tt> </p>
</blockquote>
<p>The first five iterators are automatically used by the program to
assemble the last five fields of the generated SysEq record keys.
Make sure that the respective values will not exceed length limits
of <a href="gdb_rkey.html#dbm_SysEq">SysEq record key format</a>. In
the&nbsp; <tt>"iTm"</tt> specification, it is wise to put increment
larger than 1 (at best, 5 or 10) if the process simulation will
change bulk composition of the system. This may give you a possibility
later on for producing more points in the most interesting parts of
the sequence (e.g., near a redox barrier).</p>
All iterators have their counterparts - the work cells&nbsp;<tt> "cTm",
"cV", "cP", "cT", "cTC", "cNv", "cTau", "cpXi", "cXi", "cNu", "cpH",
"cpe", "cEh"</tt>, and the Process index cell <tt>&nbsp;"J"</tt>,
all visible on&nbsp; <tt>Page 2</tt>&nbsp; of the "Process" window.
The process simulation begins when you press the "Calculation" button
on the Process window toolbar (or execute the "Record" "Calculate"
menu command). At this point, the index cell <tt>"J"</tt> contains 0
and the work cells are loaded with the respective start values
from the iterators.&nbsp; <br>
&nbsp; <br>
The <tt>"Next"</tt> data cell contains 1, which means that the next
process point is to be simulated. When the&nbsp;<tt>"Next"</tt> cell
contains 0, the simulation is finished. This will happen automatically
when the pre-defined limit is achieved in any of the work cells
connected to iterators; the current point index <tt>"J"</tt> will be
greater or equal than the total input number of points to generate; or
the&nbsp;<tt>"Next"</tt> cell will be set to 0 in the <tt>"P_expr"</tt>
math script. Note that the program will first increment the iterator
work cells and then execute Math Scripts, first &nbsp;the <tt>"P_expr"</tt>
and next, after calculating the equilibrium state, - the <tt>"pgExpr"</tt><tt>
</tt>math
script. This means that the <a href="gmscript.html">math scripts</a>
may override the default behavior of the Process Simulator algorithm if
they change contents of any work cells listed above. After the
equilibrium point is computed and the optional <tt>"P_expr"</tt><tt> </tt>math
script is executed, the next SysEq record key will be assembled, put in
the <tt>"PeStl"</tt> list (seen on Page 3 of the Process window), and
the record will be saved into the database if the &nbsp;<tt>PePsts[4]</tt>
flag is turned on. If the&nbsp;<tt>"Next"</tt> cell contains 1, the
program will proceed to the next simulation point.&nbsp;
<p>Now, let us come back to Page 1 of the "Process" window. We
recommend at once to fill out the <tt>"PeName", "PeNote", "PSDref",</tt>
and&nbsp; <tt>"PSDval"</tt> comment fields in such a way that after a
month or two you could still easily recall what this process simulator
is doing. Creation of a "process simulation log page" would be highly
recommended at this point. To do this, type in the <tt>"PSDref"</tt>
field a new <a href="gdb_rkey.html#dbm_SDref">SDref record key</a>
like
this: <tt>"process_{name}:{year}:log:"</tt>, where <tt>{name}</tt>
stands for the process ID (see field 8 of the <a
 href="gdb_rkey.html#dbm_Process">Process record key</a>), and <tt>{year}</tt>
is the current year. Press <tt>Enter</tt> and then <tt>F2</tt>. This
will open a "SDref" window, which you can fill out and save the new <a
 href="gm_sdref.html">SDref record</a> into your project database file.
In the <tt>"SDabst"</tt> editor field on Page 2, you can now describe
why and how did you create the process definition, what it is
supposed to do and what results are to be sampled. This description
can be continued in the future every time when you access the Process
record and press <tt>F2 </tt>after clicking on the <tt>"PSDref"</tt>
field.&nbsp; <br>
</p>
<p>Now, continue by going through the first five process iterators (<tt>"iTm",
"iV", "iP", "iTC", "iNv"</tt>) and setting up there what has to be
changed and what is to be kept constant in the respective fields of
generated <a href="gdb_rkey.html#dbm_SysEq">SysEq record keys</a>. For
instance, if only the bulk composition of the system will be changed
from one point to another at constant pressure 1 bar and temperature
70 <sup>o</sup>C, the iterators should look like this:&nbsp; <br>
</p>
<blockquote>
  <table bgcolor="#ffffff" border="1" cellpadding="2" cellspacing="2"
 width="250">
    <tbody>
      <tr>
        <td valign="top"><big><tt>iTm<br>
        </tt></big></td>
        <td valign="top"><big><tt>iV<br>
        </tt></big></td>
        <td valign="top"><big><tt>iP<br>
        </tt></big></td>
        <td valign="top"><big><tt>iTC<br>
        </tt></big></td>
        <td valign="top"><big><tt>iNv<br>
        </tt></big></td>
      </tr>
      <tr>
        <td valign="top"><big><tt>1000<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
        <td valign="top"><big><tt>1<br>
        </tt></big></td>
        <td valign="top"><big><tt>70<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
      </tr>
      <tr>
        <td valign="top"><big><tt>1200<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
        <td valign="top"><big><tt>1<br>
        </tt></big></td>
        <td valign="top"><big><tt>70<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
      </tr>
      <tr>
        <td valign="top"><big><tt>10<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
        <td valign="top"><big><tt>0<br>
        </tt></big></td>
      </tr>
    </tbody>
  </table>
</blockquote>
<p>&nbsp;This will generate the following list of SysEq record keys
(and store SysEq records in the database if the <a href="#PePsts_4"><tt>PePsts[4]</tt></a>
flag is turned on): <br>
</p>
<blockquote><tt>TestProject:G:TestSystem:1000:0:1:70:000:</tt><br>
  <tt>TestProject:G:TestSystem:1010:0:1:70:000:</tt><br>
  <tt>TestProject:G:TestSystem:1020:0:1:70:000:</tt><br>
  <tt>.........................................</tt><br>
  <tt>TestProject:G:TestSystem:1200:0:1:70:000:</tt><br>
</blockquote>
<p>Note that the numbering in the CSD field occurs with an increment
10, so that up to 9 records can be added later on, if necessary,
between any two adjacent SysEq records to "resolve" some interesting
parts of the process profile. In the last field of SysEq record keys, <tt>"000"</tt>
is printed even though <tt>"0"</tt> stays in the <tt>"iNv"</tt>
iterator. This helps to distinguish between the SysEq records created
by you and by process simulators. <br>
</p>
<p>Assignment of either of the remaining work cells &nbsp;<tt>"cTau",
"cpXi", "cXi", "cNu", "cpH", "cpe", "cEh"</tt>, is usually done in
the <a
 href="file:///E:/gems2html/program/doc/html/gm_proces.html#P_expr"><tt>P_expr</tt></a>
math script (see below)<br>
</p>
<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
<h3><a name="PROCES_SIMULATION_SCRIPT"></a>4.2. Writing Process
Simulation Math Scripts<br>
</h3>
<p>To specify a change in the bulk composition of the system, you have
to enter a <a href="gmscript.html">Math Script</a> into the <a
 href="#P_expr"><tt>P_expr</tt></a> text editor field. To make it
easier, we recommend usage of the <a href="gmscript.html#MS_LIBRARY">template
math script library</a>, accessible via the "Help" "Script" menu
command (or <tt>F3</tt> hot key). Upon that, you will see a list of
available template scripts (record keys with math scripts for the <tt>P_expr</tt>
field start with <tt>"mscript-titr..."</tt>). Select the appropriate
one and press "Ok". In the appearing SDref module window, the
template script is provided on Page 2. Read the comments, then mark
the script text using the mouse drag, copy it (<tt>Ctrl-C</tt>), switch
to Page 1 of the Process window, click on the <tt>P_expr</tt> field
and
paste the text (<tt>Ctrl-V</tt>). Now, you can edit the script
according to your own idea about controlling the process simulation
(you can open the "Single Thermodynamic System" dialog to look in
parallel for correct data object labels and names of PCO, species, and
phases). After you have edited the script (but before trying
calculations), save the Process record to database. <br>
</p>
<p>All Process work cells and corresponding iterators, as well as most
data objects visible in the "System" window pages, can be used as
variables in the process Math Script expressions to describe changes
in the system along the process path. The process script usually
looks like this (see also template math scripts): </p>
<p><tt>$ Change in Ca/Si bulk ratio in the system</tt> <br>
<tt>cNu =: iNu[0] + J*iNu[2];</tt> <br>
<tt>xd_[{quartz}] =: cNu;</tt> <br>
<tt>xd_[{portlandite}] =: 1-cNu;</tt> <br>
<tt>$ end</tt> </p>
The script is run automatically to change bulk composition in SysEq
records when each next point&nbsp; (indexed with <tt>J</tt>) is
generated during&nbsp; the process simulation. The first and the last
line are comments. The second line calculates the current number of
moles of added quartz stoichiometry by incrementing within <tt>"iNu"</tt>
iterator (supposed to be set up by the user). The third line copies it
into an element of <tt>"xd_"</tt> vector that corresponds to quartz
(see "DComp" page of the "System" window). The fourth line calculates
the number of moles of portlandite stoichiometry and assigns it to the
respective element of the <tt>"xd_"</tt> vector.&nbsp; There are
many alternative ways to specify the same process simulation in writing
math scripts.
<br>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h3><a name="PROCES_SAMPLING_SCRIPT"></a>4.3. Writing Process Data
Sampling Math Scritps<br>
</h3>
<p>If you have invoked the data sampling/plotting mode then switch to
Page 2 of the "Process" window and type a data sampling script into
the <tt>"pgExpr"</tt> editor field. Just as in the case of the <tt>"P_expr"</tt>
simulation script described above, you can pick up and paste a template
math script from the library (look for SDref record keys beginning
with <tt>"mscript-plot..."</tt>). All such scripts must fill out
the <tt>"xp"</tt> vector (abscissa) and the <tt>"yp"</tt> table
(ordinates, or plot lines) with some GEM IPM results, one line per
process step (indexed with <tt>"J"</tt>). The <tt>"xp"</tt> and <tt>"yp"</tt>
data objects are accessible on the "Graph" page of the "Process"
window. After editing the <a href="gmscript.html">math script</a>,
save the Process record again. <br>
</p>
<p>If the empirical data are to be plotted, you can change to the
"Graph" page of the "Process" window and type the data into<tt> "xEp"</tt>
and <tt>"yEp"</tt> fields. Also, edit the plot (column) names in the <tt>"pY_nam",&nbsp;
"pX_nam", &nbsp;"pLnam"</tt> and <tt>"pLnamE"</tt> fields (these will
appear on the graph dialog and printouts of the results). <br>
&nbsp;<br>
&nbsp;
<br>
</p>
<hr style="width: 100%; height: 2px;">
<p><br>
</p>
<h3><a name="PROCESS_DETAILS_RUN"></a> 4.4. Running Process Simulators<br>
</h3>
<p>To start the process simulation, press the "Calculate record data"
toolbar button (or press the&nbsp; <span
 style="font-family: monospace;">F9</span> key or execute the "Record"
"Calculate" menu command). The program may ask you to save the Process
record into the database; do it (this will do no harm but may save your
work if later on some problems happen with calculations). If the
sampling/plotting mode is invoked, you will see a small "Use graphic
window" question dialog, otherwise calculations will start immediately.
<br>
</p>
<p>If you respond with "No" to the "Use graphic window" question then a
small progress dialog may pop up in the left upper corner of your
desktop. In the "stepwise" calculation mode, you can click on a "Stop"
button and, by clicking on the "Step" button, execute the process
simulation step-by-step. At every step, the program will calculate one
equilibrium point and wait (until you examine the EqDemo window pages
or other windows). Clicking on a "Resume" button will resume the
usual, continuous process simulation. When finished, you will see a
message "Finished Ok" in the title line of the Process window. &nbsp;<br>
</p>
<p>If there are syntax errors in the math scripts, the program will
display an error message, followed by a yet unprocessed part of the
math script text. If this happens then press "Ok", fix the error, and
start the Process calculation again. <br>
</p>
<p>If you run a process simulator with the sampling/plotting mode
invoked for the first time, we recommend to run it without using the
graphic window because the plots on the graphic dialog are not yet
customized. After this is done (see next section), you can run the
process simulator using the graphic window. In this case,
newly-calculated plots will be displayed as scattered dots over the
previously existing plots.&nbsp;</p>
<p>The Process calculations may take time if the system is large or
the process generates many points (depending on the processor
performance). When all equilibria are computed, you can see a list of
generated SysEq records on "Page 3" and sampled results on the "Graph"
page of the "Process" window. If you want to plot experimental data,
this is the right time to type this data into the <span
 style="font-family: monospace;">xEp</span> (abscissa) and <span
 style="font-family: monospace;">yEp</span> fields. &nbsp;<br>
</p>
<p><br>
</p>
<hr style="width: 100%; height: 2px;">
<p>&nbsp;<br>
</p>
<h3><a name="PROCESS__DETAILS_PLOT"></a>4.5. Plotting and Exporting
Results </h3>
<p>Click on the "Plot data..." toolbar button (or execute the "Record"
"Plot" menu command) to display the Graph dialog with plotted
results and empirical data points, if provided. Now, the graph
colors, lines, scales, symbols etc. can be customized ("Customize..."
button) and later on saved in the Process record. &nbsp;The plot names
from the legend can be dragged and dropped on the plot lines in the
graphic image by using the left mouse button. Note that if you close
the graph dialog and open it again (or customize it), you will have to
drag-and-drop the legend names again. The picture can be saved into a
file (png, jpeg or bitmap) by clicking a "Save Image..." button, or
printed on a system printer ("Print..." button; may not work properly
on some Linux printers and currently in Win32 version). We recommend
saving the plots into .png files.&nbsp;<br>
<br>
The process simulation results (with or without scripts) can also be
printed into an ASCII file using the "Print" toolbar button on the
"Process" window and selecting an appropriate printing script from
the appearing list. <br>
&nbsp; <br>
The process simulation can always be re-run after some input parameters
of either the "parent" SysEq record (CSD) or the process simulator
(e.g. <span style="font-family: monospace;">modC</span> array values,
math scripts, etc.) have been changed. When re-running the simulation
with an already customized graph, you can click "Yes" on the "Use
graphic window?" dialog. This will display the graph with previous
calculation results; new results will appear as dots of the same
color as lines, step by step, until the whole calculation is
completed. If you wish to retain the newly calculated results then
close the graph dialog and save the Process record (if you now open
the graph, only new results will be shown as lines); otherwise, do not
save the record and load it again from the database to discard the
newly-calculated results. This mode is especially good for fitting some
input model parameters against experimental (e.g. titration)
data.&nbsp; <br>
</p>
&nbsp;
<br>
<p><br>
</p>
<hr size="2" width="100%">
<h2><a name="PROCES_DATA"></a>5. Proces Window Data Entries</h2>
<dl>
  <dt><br>
  </dt>
  <dt><a name="PeName"></a><big><b><tt><big>PeName</big> </tt></b></big>-
Comment line for the full name of this Process Simulator definition </dt>
  <dd> <br>
  </dd>
  <dd>This string (up to 70 characters) should be entered by the user
for identification of this Process record, best during creation or
remake.&nbsp;It will appear on the plot and in the text printouts.</dd>
  <dd><br>
  </dd>
  <dd><br>
  </dd>
  <dd><br>
  </dd>
  <dt> <a name="PeNote"></a><big><b><big><tt>PeNote</tt></big></b></big>
- Comment line for optional enhancement of the <span
 style="font-family: monospace;">PeName</span> line&nbsp;</dt>
  <dd>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</dd>
  <dd>This string (up to 70 characters) can also be entered to enhance
identification of the process simulator.<br>
    <br>
  </dd>
  <dd><br>
  </dd>
</dl>
<dl>
  <dt> <a name="P_expr"></a><big><big style="font-weight: bold;"><tt>P_expr</tt></big></big><b><big><tt>
    </tt></big></b>-
Math script defining the process simulation</dt>
</dl>
<dl>
  <dd>&nbsp; <br>
Equations in this <a href="gmscript.html">math script</a> text are
supposed to alter certain input data fields (seen in "System" window
pages) for calculation of a sequence of equilibrium states. Some
additional restrictions may apply depending on the process type. The
equations are recalculated at every step (point, iteration, <span
 style="font-family: monospace;">"J"</span> index) of the process
simulation. If the math script contains a conditional expression which
sets the <span style="font-family: monospace;">"Next"</span>
variable to 0 then the process simulation will be finished when <span
 style="font-family: monospace;">Next</span> becomes equal to 0,
otherwise it will stop when a prescribed maximum number of iterations
(or the upper limit in any of the process iterators <span
 style="font-family: monospace;">"iTm",</span> ...) is reached. </dd>
</dl>
<dl>
  <dd> &nbsp; <br>
To facilitate writing of math script equations in this field, a
template math script library is provided (see <a
 href="#PROCESS_SIM_MATH_SCRIPT">"Writing Process Simulation Math
Scripts"</a> chapter).</dd>
  <dd><br>
  </dd>
  <dd><br>
    <br>
  </dd>
</dl>
<hr style="width: 100%; height: 2px;">
<h3><a name="PROCES_DATA_ITERATORS"></a>5.1 Input Process Iterators</h3>
Many variants of the process simulation can be set up using one or
more of column vectors ("iterators")&nbsp; <tt>"iTm", "iV", "iP",
"iTC", "iNv", "iTau", "ipXi", "iNu", "ipH", "ipe"</tt>. &nbsp;See
more about that in <a href="#PROCESS_SIM_ITERATORS">"Setting up the
Process iterators"</a> chapter.<br>
&nbsp;
<dl>
  <dt> <a name="iTm_0"></a><b><big><tt><big>iTm[0]</big> </tt></big></b>-&nbsp;
SysEq <a href="glossary.html#DT_CSD">CSD</a> variant number:
start value </dt>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd>This iterator defines values in the VarCSD field of newly
generated <a href="gdb_rkey.html">SysEq record keys</a> to store
process simulation results. Recommended values are 100 &nbsp;(200,
300, ...) or 1000 (2000, 3000, ...).<br>
&nbsp; <br>
Important! Always check and edit this iterator before running the new
process simulation, to prevent accidental overwriting of previously
calculated SysEq records. </dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>New SysEq record keys are generated using CSD variant numbers
from the current <span style="font-family: monospace;">"cTm"</span>
cell, which is automatically changed by the program as: <span
 style="font-family: monospace;">cTm =: iTm[0] + J * iTm[2]; </span>if
not overridden by the<span style="font-family: monospace;"> P_expr </span>math
script.<span style="font-family: monospace;">&nbsp;</span> </dd>
  <dd> <br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="iTm_1"></a><b><big><tt><big>iTm[1]</big> </tt></big></b>-
SysEq CSD variant number: end value</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This integer value defines the end point of the process
simulation, which continues as long as <span
 style="font-family: monospace;">cTm &lt;= iTm[1]</span> <span
 style="font-family: monospace;">and J &lt; Ntxi[1].</span>&nbsp; &nbsp;<br>
&nbsp; <br>
  </dd>
  <dd>If <span style="font-family: monospace;">&nbsp;iTm[1] &lt;
iTm[0] </span>then<span style="font-family: monospace;"> iTm[2] </span>must
be negative (decreasing order of CSD variant numbering).&nbsp; &nbsp;</dd>
  <dd><br>
  </dd>
</dl>
<dl>
  <dd><br>
  </dd>
  <dt>&nbsp;<a name="iTm_2"></a><b><big><tt><big>iTm[2]</big> </tt></big></b>-
SysEq CSD variant number: step value</dt>
  <dd> &nbsp;&nbsp; <br>
  </dd>
  <dd>This integer value defines how the system CSD variant number is
incremented (can also be negative). Minimum absolute value is 1,
recommended values are between 2 and 10 - this allows to insert some
additional SysEq records into the process-generated sequence later on.<br>
&nbsp; <br>
&nbsp; </dd>
  <dt><a name="cTm"></a><b><big><tt><big>cTm</big> </tt></big></b>-
Current SysEq CSD variant number </dt>
  <dd>
    <p>Current CSD variant number for <a href="gdb_rkey.html#dbm_SysEq">SysEq
record key</a> to be generated on <span style="font-family: monospace;">J</span>-th
process iteration. Incremented automatically according to the values
provided in the <span style="font-family: monospace;">"<a href="#iTm_0">iTm</a>"</span>
iterator; can also be set in the <span style="font-family: monospace;">P_expr</span>
math script.</p>
  </dd>
  <dd><br>
  </dd>
  <dt><br>
  </dt>
</dl>
<dl>
  <dt><b><big><tt><a name="iV_0"></a><big>iV[0]</big> </tt></big></b>-<b><i>
    </i></b>Volume
constraint of the system (L): start value </dt>
  <dd> &nbsp; &nbsp; &nbsp;<br>
  </dd>
  <dd>Default value of this <a href="gdb_rkey.html#dbm_SysEq">SysEq
record key</a> field for GEM calculations is 0 (unconstrained volume),
except in a few special cases.&nbsp; </dd>
  <dd> <br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="iV_1"></a><b><big><tt><big>iV[1]</big> </tt></big></b>-
Volume constraint of the &nbsp;system: &nbsp;end value</dt>
  <dd> &nbsp;<br>
It is recommended to leave this real number at the default value (0). <br>
&nbsp; <br>
&nbsp;<br>
  </dd>
  <dt> <a name="iV_2"></a><b><big><tt><big>iV[2]</big> </tt></big></b>-
Volume constraint of the system: increment</dt>
  <dd> &nbsp; <br>
It is recommended to leave this increment at the default value (0). </dd>
  <dd>&nbsp; &nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt><a name="cV"></a><b><big><tt><big>cV</big> </tt></big></b>-
Current V - volume constraint (default 0) </dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>In most cases, must be 0 (unconstrained volume).<br>
&nbsp; <br>
&nbsp;<br>
  </dd>
</dl>
<dl>
  <dt><a name="iP_0"></a><b><big><tt><big>iP[0]</big> </tt></big></b>-
Pressure of interest P, bar: start (real) value </dt>
  <dd> &nbsp;<br>
  </dd>
  <dd>This iterator defines how the system pressure will be specified
in <a href="gdb_rkey.html#dbm_SysEq">SysEq record keys</a>
generated by the process simulator. Ambient pressure is 1 bar
(default). </dd>
  <dd>If you wish to keep the pressure P constant then set &nbsp;<span
 style="font-family: monospace;">iP[0] =</span> P; <span
 style="font-family: monospace;">iP[1] =</span> P;<span
 style="font-family: monospace;"> iP[2] =</span> 0. </dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>At the beginning of process simulation, <span
 style="font-family: monospace;">cP</span> is automatically set equal
to <span style="font-family: monospace;">iP[0]</span>.</dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp;<br>
  </dd>
  <dt> <a name="iP_1"></a><b><big><tt><big>iP[1]</big> </tt></big></b>-
&nbsp;Pressure of interest&nbsp; P, bar: end value</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This real value (default 1 bar) defines the end point of the
process simulation, which continues as long as <span
 style="font-family: monospace;">cP &lt;= iP[1]</span> <span
 style="font-family: monospace;">and J &lt; Ntxi[1].</span>&nbsp; &nbsp;<br>
&nbsp; <br>
  </dd>
  <dd>If <span style="font-family: monospace;">&nbsp;iP[1] &lt; iP[0] </span>then<span
 style="font-family: monospace;"> iP[2] </span>must be negative
(decreasing pressure in the process simulation). <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp;<br>
  </dd>
  <dd> <br>
  </dd>
  <dt> <a name="iP_2"></a><b><big><tt><big>iP[2]</big> </tt></big></b>-
Pressure of interest P, bar: step value</dt>
  <dd> &nbsp;<br>
This real value defines how pressure will be (linearly) incremented in
the process simulation. Default is 0 (constant pressure); otherwise the
program will change the &nbsp;<span style="font-family: monospace;">cP</span>
&nbsp;cell according to a given non-zero value.&nbsp;</dd>
</dl>
<dl>
  <dd><br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="cP"></a><b><big><tt><big>cP</big> </tt></big></b>-
Current pressure of interest P (bar). </dt>
  <dd> <br>
  </dd>
  <dd>Current pressure P to set in a <span
 style="font-family: monospace;">J</span>-th generated SysEq record
key. Automatic Initialization: <span style="font-family: monospace;">cP
=: iP[0]</span>. Can be incremented in the <span
 style="font-family: monospace;"><a href="#P_expr">P_expr</a> </span>math
script expressions; if not and <span style="font-family: monospace;">iP[2]
&lt;&gt; 0</span> then automatically <span
 style="font-family: monospace;">cP = ip[0] + J*iP[2]</span> . </dd>
  <dd> <br>
  </dd>
  <dd>&nbsp;</dd>
  <dd><br>
  </dd>
  <dt><a name="iTC_0"></a><b><big><tt><big>iTC[0]</big> </tt></big></b>-&nbsp;
Temperature of interest TC, centigrade: start value </dt>
  <dd>&nbsp;<br>
  </dd>
  <dd>This real value (default 25 C, ambient temperature) defines how
the system temperature will be specified in <a
 href="gdb_rkey.html#dbm_SysEq">SysEq record keys</a> generated by the
process simulator.</dd>
  <dd>If you wish to keep temperature (TC) constant then set <span
 style="font-family: monospace;">iTC[0] =: </span>TC; <span
 style="font-family: monospace;">iTC[1] =:</span> TC; <span
 style="font-family: monospace;">iTC[2] =:</span> 0.</dd>
  <dd><br>
  </dd>
  <dd><br>
  </dd>
  <dt> <a name="iTC_1"></a><b><big><tt><big>iTC[1]</big> </tt></big></b>-
Temperature of interest TC, centigrade: end value&nbsp;</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This real value (default 1 bar) defines the end point of the
process simulation, which continues as long as <span
 style="font-family: monospace;">cTC &lt;= iTC[1]</span> <span
 style="font-family: monospace;">and J &lt; Ntxi[1].</span>&nbsp; &nbsp;<br>
&nbsp; <br>
  </dd>
  <dd>If <span style="font-family: monospace;">&nbsp;iTC[1] &lt;
iTC[0] </span>then<span style="font-family: monospace;"> iTC[2] </span>must
be negative (decreasing pressure in the process simulation).</dd>
  <dd><br>
  </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd> <br>
  </dd>
  <dt> <a name="iTC_2"></a><b><big><tt><big>iTC[2]</big> </tt></big></b>-
Temperature of interest TC, centigrade: step value</dt>
  <dd> &nbsp; <br>
  </dd>
</dl>
<dl>
  <dd>This real value defines how temperature will be (linearly)
incremented in the process simulation. Default is 0 (constant
temperature); otherwise the program will change the &nbsp;<span
 style="font-family: monospace;">cTC</span> &nbsp;cell according to a
given non-zero value.&nbsp;</dd>
</dl>
<dl>
  <dd><br>
  </dd>
</dl>
<dl>
  <dt><a name="cTC"></a><b><big><tt><big>cTC</big> </tt></big></b>-
Current temperature of interest TC &nbsp;(centigrade)<br>
  </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd> Current temperature cTC to set in a <span
 style="font-family: monospace;">J</span>-th generated SysEq record
key. Automatic initialization: <span style="font-family: monospace;">cTC
=: iTC[0]</span>. &nbsp;Can be incremented in the <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> math script
expressions; if not and<span style="font-family: monospace;"> iTC[2]
&lt;&gt; 0</span> then automatically <span
 style="font-family: monospace;">cTC = iTC[0] + J*iTC[2]</span>. </dd>
  <dd>&nbsp;<br>
&nbsp;&nbsp;&nbsp;</dd>
</dl>
<a name="cT"></a><b><big><tt><big>cT</big> </tt></big></b>- Current
temperature of interest T (Kelvin)<br>
<dl>
  <dd>This work cell is automatically calculated as &nbsp;<span
 style="font-family: monospace;">cT =: cTC + 273.15 </span>&nbsp;at
each process simulation step in order to facilitate writing of <a
 href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>
data sampling math scripts.<br>
  </dd>
</dl>
<dl>
  <dd>&nbsp;&nbsp;</dd>
  <dd><br>
  </dd>
</dl>
<dl>
  <dt><b><big><tt><a name="iNv_0"></a><big>iNv[0]</big> </tt></big></b>-
TD variant number: start value </dt>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd>This iterator defines integer values in the VarTD field of newly
generated <a href="gdb_rkey.html#dbm_SysEq">SysEq record keys</a>
to store process simulation results. Default value is 0. Recommended
values are 10 &nbsp;(20, 30, ...) or 100 (200, 300, ...).<br>
&nbsp; <br>
Important! Always check and edit this iterator before running the new
process simulation, to prevent accidental overwriting of previously
calculated SysEq records. </dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>New SysEq record keys are generated using TD variant numbers from
the current <span style="font-family: monospace;">"cNv"</span> cell,
which is automatically changed by the program as: <span
 style="font-family: monospace;">cNv =: iNv[0] + J * iNv[2], </span>if
not overridden by the<span style="font-family: monospace;"> P_expr </span>math
script.<br>
&nbsp; <br>
&nbsp; &nbsp;<span style="font-family: monospace;"></span></dd>
  <dd> &nbsp; <br>
  </dd>
  <dt> <a name="iNv_1"></a><big><b><tt><big>iNv[1]</big> </tt></b></big>-
TD variant number: end value</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This integer value defines the end point of the process
simulation, which continues as long as <span
 style="font-family: monospace;">cNv &lt;= iNv[1]</span> <span
 style="font-family: monospace;">and J &lt; Ntxi[1].</span>&nbsp; &nbsp;<br>
&nbsp; <br>
  </dd>
  <dd>If <span style="font-family: monospace;">&nbsp;iNv[1] &lt;
iNv[0] </span>then<span style="font-family: monospace;"> iNv[2] </span>must
be negative (decreasing order of TD variant numbering).&nbsp; &nbsp;</dd>
  <dd><br>
  </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="iNv_2"></a><b><big><tt><big>iNv[2]</big> </tt></big></b>-
TD variant number: step value</dt>
  <dd> &nbsp; <br>
  </dd>
</dl>
<dl>
  <dd>This integer value defines how the system TD variant number is
incremented (can also be negative). Usually 0 is set (TD variant
number does not change). In the case if the <span
 style="font-family: monospace;">P_expr</span> script changes some
kinetic constraints or <span style="font-family: monospace;">gEx</span>
increments to input thermodynamic data,&nbsp; the recommended values
are between 1 and 10.</dd>
</dl>
<dl>
  <dd> <br>
  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="cNV"></a><b><big><tt><big>cNV</big> </tt></big></b>-
Current SysEq TD variant number </dt>
  <dd> <br>
  </dd>
</dl>
<dl>
  <dd>Current VarTD number for <a href="gdb_rkey.html#dbm_SysEq">SysEq
record key</a> to be generated on <span style="font-family: monospace;">J</span>-th
process iteration.
Incremented automatically according to the values provided in the <span
 style="font-family: monospace;">"<a href="gm_proces.html#iNv_0">iNv</a>"</span>
iterator; can also be set in the <span style="font-family: monospace;">P_expr</span>
math script.<br>
&nbsp; &nbsp;<br>
&nbsp;<br>
  </dd>
</dl>
<dl>
  <dt><a name="iTau_0"></a><b><big><tt><big>iTau[0]</big> </tt></big></b>&nbsp;-
Real time (tau), arbitrary units: start value </dt>
  <dd> <br>
This iterator can be optionally used in simulations of kinetic mass
transfer processes that depend on the real time. Usually, such
processes
(e.g. mineral dissolution) also depend on the output GEM parameters
such as pH. The <span style="font-family: monospace;">"<a
 href="#P_expr">P_expr</a>"</span> math script in such cases must
define the mole quantity of a kinetically-retarded species as a
function of time, pH, ... and use this quantity for setting the upper-
(<a href="gems_bcc.html#dul_"><span style="font-family: monospace;">dul_</span></a>),
the lower (<a href="gems_bcc.html#dll_"><span
 style="font-family: monospace;">dll_</span></a>) or both
metastability restrictions (seen on the DComp page of the "System"
window).&nbsp; The "iTau" iterator defines a linear (or logarithmic,
depending on how the math script is written) sequence of time points
at which the partial equilibrium states must be calculated.
&nbsp;Default value is 0.&nbsp;</dd>
  <dd> &nbsp; &nbsp; &nbsp; </dd>
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="iTau_1"></a><b><big><tt><big>iTau[1]</big> </tt></big></b>-
Real time (tau): end value</dt>
  <dd> &nbsp; <br>
This real value defines the end time point of kinteically-dependent
simulation. Default value is 0.&nbsp;</dd>
</dl>
<dl>
  <dd>The simulation continues as long as <span
 style="font-family: monospace;">cTau &lt;= iTau[1]</span> <span
 style="font-family: monospace;">and J &lt; Ntxi[1].</span></dd>
</dl>
<dl>
  <dd>&nbsp; </dd>
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="iTau_2"></a><b><big><tt><big>iTau[2]</big> </tt></big></b>-
Real time (tau): step value</dt>
  <dd> &nbsp; <br>
This positive real value defines how the real time is incremented in
the kinetically-dependent simulation. Default value is 0.</dd>
  <dd> &nbsp;&nbsp;</dd>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="cTau"></a><b><big><tt><big>cTau</big> </tt></big></b>-
Current real time (tau) </dt>
  <dd> <br>
  </dd>
  <dd>This cell contains a current real time value during
kinetically-dependent simulations. Automatic initialization: <span
 style="font-family: monospace;">cTau =: iTau[0]</span>. The cell
content can also be set in the <span style="font-family: monospace;">"<a
 href="#P_expr">P_expr</a>"</span> math script operators. If not, the
program will set&nbsp; <span style="font-family: monospace;">cTau =:
iTau[0] + J*iTau[2]</span> on a <span style="font-family: monospace;">J</span>-th
step. If time is considered in logarithmic scale then an expression <span
 style="font-family: monospace;">"10^cTau"</span> must be used as a
time
variable in the process simulation math script operators.&nbsp; </dd>
  <dd> &nbsp; &nbsp; &nbsp;<br>
    <br>
  </dd>
  <dt><a name="ipXi_0"></a><b><big><tt><big>ipXi[0]</big> </tt></big></b>-
Process extent parameter pXi = -log(Xi): start value </dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd>This iterator can be used for automatic calculation of the
"reaction-extent" ("process-extent") parameter <span
 style="font-family: monospace;">cpXi</span> = -log(Xi) if the latter
is
not set in the <span style="font-family: monospace;">"<a href="#P_expr">P_expr</a>"</span>
math scripts. The <span style="font-family: monospace;">ipXi</span>
cells can also be used as work cells in arbitrary math scripts.
&nbsp;Default value is 0.&nbsp; </dd>
  <dd><span style="font-weight: bold;">&nbsp; </span><span
 style="font-weight: bold; text-decoration: underline;"><br>
Attention:</span> In the case of an <a
 href="glossary.html#DT_titration_inverse">inverse titration</a>
sequence (the <a href="#PePsts_11"><span
 style="font-family: monospace;">PePsts[11]</span></a>
flag set to <span style="font-family: monospace;">'+'</span>), this
iterator must contain the interval of minimum-maximum values and
precision for the quantity of added titrant (see also the <a
 href="#INV_TITR_SEQ">"Inverse titration sequence" section</a>). </dd>
  <dd> <br>
  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="ipXi_1"></a><b><big><tt><big>ipXi[1]</big> </tt></big></b>-
Process extent parameter pXi: end value</dt>
  <dd> &nbsp;<br>
This real value defines the end "reaction-extent" point of the process
simulation (if not specified otherwise in the <span
 style="font-family: monospace;">P_expr</span> math script).. Default
value is 0. <br>
  </dd>
</dl>
<dl>
  <dd><span style="font-weight: bold; text-decoration: underline;">Attention:</span>
In the case of an inverse titration sequence (the <a
 href="gm_proces.html#PePsts_11"><span style="font-family: monospace;">PePsts[11]</span></a>
flag set to <span style="font-family: monospace;">'+'</span>), this
cell must contain the maximum possible addition of titrant.&nbsp;</dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="ipXi_2"></a><b><big><tt><big>ipXi[2]</big> </tt></big></b>-
Process extent parameter pXi: step value</dt>
  <dd> &nbsp; <br>
This real value contains a (logarithmic) step of the "reaction-extent"
variable pXi. Default value is 0. <br>
&nbsp; <br>
    <span style="font-weight: bold; text-decoration: underline;">Attention:</span>
In the case of an inverse titration sequence, this cell must contain
the
precision for the quantity of added titrant (usually 1e-6 to 1e-9 mol).
&nbsp;</dd>
  <dd> &nbsp;<br>
&nbsp; <br>
  </dd>
  <dt><a name="cpXi"></a><b><big><tt><big>cpXi</big> </tt></big></b>-
Current pXi = -log(Xi), where Xi stands for a logarithmic "reaction
extent" variable</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This cell is automatically initialized as <span
 style="font-family: monospace;">cpXi =: ipXi[0]</span> when<span
 style="font-family: monospace;"> J </span>= 0. If not set in <a
 href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>
math script operators, the <span style="font-family: monospace;">cpXi </span>cell
is incremented automatically as&nbsp; <span
 style="font-family: monospace;">cpXi =: ipXi[0] + J*ipXi[2]</span>. <br>
&nbsp;<br>
&nbsp;&nbsp; </dd>
  <dt><a name="cXi"></a><b><big><tt><big>cXi</big> </tt></big></b>-
Current Xi = 10^cpXi - the linear "process extent" variable</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This work cell can be used in the <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> or <a href="#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a> math scripts;
usually
assigned as <span style="font-family: monospace;">cXi =: 10^cpXi</span>.&nbsp;
&nbsp;</dd>
  <dd> &nbsp; <br>
&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="iNu_0"></a><b><big><tt><big>iNu[0]</big> </tt></big></b>-
Factor of the process extent Nu: start value </dt>
  <dd>&nbsp;&nbsp; &nbsp;</dd>
  <dd>This iterator can define changes in the "process extent factor"
cXi = cNu * 10^cpXi (has to be written explicitly in the P_expr math
script). Default value is 0.&nbsp;&nbsp;</dd>
  <dd>&nbsp; <br>
  </dd>
  <dd>&nbsp;<br>
  </dd>
  <dt><a name="iNu_1"></a><big><b><big><tt>iNu[1]</tt></big></b></big>
-
Factor of the process extent Nu: end value</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This real value may set up an upper boundary of the "process
extent" factor cNu. &nbsp;Default value is 0.&nbsp;</dd>
</dl>
<dl>
  <dd><span style="font-weight: bold; text-decoration: underline;">Attention:</span>
If an <a href="#INV_TITR_SEQ">inverse titration sequence </a>(<a
 href="#PePsts_11"><span style="font-family: monospace;">PePsts[11]</span></a>
set to <span style="font-family: monospace;">'+'</span>) is specified
then <span style="font-family: monospace;">iNu[1]</span> must
contain the precision of the parametric deviation function (for pH,
usually 0.01).</dd>
</dl>
<dl>
  <dd><br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="iNu_2"></a><b><big><tt><big>iNu[2]</big> </tt></big></b>-
Factor of the process extent Nu: step value &nbsp;</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd> This real value defines a step size for a increment of the
"process extent" factor cNu. Default value is 0. </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="cNu"></a><b><big><tt><big>cNu</big> </tt></big></b>-
Current Nu - the process extent factor </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This work cell is automatically initialized as <span
 style="font-family: monospace;">cNu =: iNu[0]</span>. If not assigned
in the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>
math script, <span style="font-family: monospace;">cNu</span> will be
automatically incremented as <span style="font-family: monospace;">cNu
=: iNu[0] + iNu[2]</span>. <br>
&nbsp; <br>
    <span style="font-weight: bold; text-decoration: underline;">Attention:</span>
If an<a href="#INV_TITR_SEQ"> inverse titration sequence</a> is
performed then the <span style="font-family: monospace;">cNu</span>
cell must be
explicitly assigned with the current value of the deviation function
on iterations of the built-in "golden section" procedure. Example: <span
 style="font-family: monospace;">cNu =: cpH - pH;</span> in the <span
 style="font-family: monospace;">P_expr</span> math script. <br>
&nbsp; <br>
&nbsp;<br>
&nbsp;&nbsp;</dd>
  <dt><a name="ipH_0"></a><b><big><tt><big>ipH[0]</big> </tt></big></b>-
Prescribed pH sequence (for inverse titrations): start value </dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd>This iterator can be used for generating a sequence of equilibria
that produce pre-defined values pH (or another output parameter of
equilibrium state) by solving a <a href="#INV_TITR_SEQ">sequence of
GEM inverse titration problems</a>. In cases of forward modelling,
these cells can be used as work variables in <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> or <a href="#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a> math scripts.
Default
value is 0.&nbsp;&nbsp;</dd>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd> <br>
  </dd>
  <dt><a name="ipH_1"></a><b><big><tt><big>ipH[1]</big> </tt></big></b>-
&nbsp;Prescribed pH sequence: end value</dt>
  <dd> &nbsp; <br>
This real value sets the upper limit to pH (or another parameter)
sequence. Default value is 0.&nbsp;</dd>
  <dd> &nbsp;&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="ipH_2"></a><tt><big><b><big>ipH[2]</big></b></big> </tt>-
Prescribed pH sequence: step size</dt>
  <dd> &nbsp; <br>
This real value defines a step size for incrementing pH (usually in a
sequence of inverse titrations). Default is 0. Recommended step sizes
for pH are 0.1; 0.2; 0.5, depending on the pH interval. </dd>
  <dd>&nbsp; <br>
&nbsp;<br>
  </dd>
  <dt><a name="cpH"></a><b><big><tt><big>cpH</big> </tt></big></b>-
Current pH at J-th inverse titration point </dt>
  <dd>&nbsp;&nbsp; </dd>
  <dd>This work cell is automatically initialized as&nbsp; <span
 style="font-family: monospace;">cpH =: ipH[0]</span>. If not written
in the <span style="font-family: monospace;">P_expr</span> math
script, the <span style="font-family: monospace;">cpH</span> value
is automatically incremented as&nbsp; <span
 style="font-family: monospace;">cpH =: ipH[0] + J*ipH[2]</span>. See
also a section about the<a href="#INV_TITR_SEQ"> inverse titration
sequence</a>.&nbsp; </dd>
  <dd>
    <p>&nbsp; &nbsp;</p>
  </dd>
  <dt><a name="ipe_0"></a><b><big><tt><big>ipe[0]</big> </tt></big></b>-
Prescribed pe values for the inverse titration sequence: start value </dt>
</dl>
<dl>
  <dd>This iterator can be used for generating a sequence of equilibria
that produce pre-defined values of pe (or another output parameter of
equilibrium state) by solving a <a href="gm_proces.html#INV_TITR_SEQ">sequence
of GEM inverse titration problems</a>. In cases of forward modelling,
these cells can be used as work variables in <a
 href="gm_proces.html#P_expr"><span style="font-family: monospace;">P_expr</span></a>
or <a href="gm_proces.html#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a>
math scripts. Default value is 0.</dd>
</dl>
<dl>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="ipe_1"></a><b><big><tt><big>ipe[1]</big> </tt></big></b>-
&nbsp;Prescribed pe values: end value </dt>
  <dd>&nbsp; <br>
This real value sets the upper limit to pe sequence. Default value is
0.&nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd> <br>
  </dd>
  <dt> <a name="ipe_2"></a><b><big><tt><big>ipe[2]</big> </tt></big></b>-
Prescribed pe sequence: step size</dt>
  <dd> &nbsp; <br>
This real value defines a step size for incrementing pe (in a sequence
of inverse titrations). Default value is 0. Recommended step sizes for
pe are 0.5 or 1.0, depending on the total pe interval. </dd>
  <dd> &nbsp; <br>
  </dd>
</dl>
<dl>
  <dt><a name="cpe"></a><b><big><tt><big>cpe</big> </tt></big></b>-
Current pe at J-th inverse titration point&nbsp; </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This work cell is automatically initialized as&nbsp; <span
 style="font-family: monospace;">cpe =: ipe[0]</span>. If not written
in the <span style="font-family: monospace;">P_expr</span> math
script, the <span style="font-family: monospace;">cpe</span> value
is automatically incremented as&nbsp; <span
 style="font-family: monospace;">cpe =: ipe[0] + J*ipe[2]</span>. In
the&nbsp;<a
 href="file:///E:/gems2html/program/doc/html/gm_proces.html#INV_TITR_SEQ">
inverse titration sequence</a> math script, the operator &nbsp;<span
 style="font-family: monospace;">cNu =: cpH - pH;</span> must be
replaced by <span style="font-family: monospace;">cNu =: cpe - pe;</span>.
&nbsp; </dd>
  <dd> <br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="cEh"></a><b><big><tt><big>cEh</big> </tt></big></b>-
Current Eh value </dt>
  <dd>&nbsp;&nbsp; &nbsp;</dd>
  <dd>This work cell, analogous to <a href="#cpH"><span
 style="font-family: monospace;">cpH</span></a>, can contain the
current prescribed value of Eh (in V).&nbsp; <br>
    <span style="font-weight: bold; text-decoration: underline;">Attention:</span>
During calculation of <a href="#INV_TITR_SEQ">inverse titration
sequences</a>, this cell holds the current amount of titrant set by
the built-in "golden section" algorithm. </dd>
  <dd> &nbsp; <br>
&nbsp; <br>
  </dd>
</dl>
<dl>
  <dt><a name="NeIt_0"></a><big><b><big><tt>NeIt[0]</tt></big></b></big>
- Max. number of iterations allowed (<span
 style="font-family: monospace;">&gt;= Ntxi[1]</span>; for inverse
titrations, <span style="font-family: monospace;">&gt; Ntxi[1]*15</span>)</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This counter is necessary to prevent infinite cycling in case of
incorrect specification of controlling parameters. Default value is
400. The process simulation will stop with a warning message when the <span
 style="font-family: monospace;">NeIt[0]</span> limit is reached. <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="NeIt_1"></a><big><b><big><tt>NeIt[1]</tt></big></b></big>
- Number of completed main steps in the process simulation </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This field contains the number of completed main iterations of
the process simulator, which is equal to the current index of processed
SysEq record key and the <span style="font-family: monospace;">J</span>
index used in math scripts&nbsp; (<span style="font-family: monospace;">
J =: NeIt[1]</span> ). <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="Next"></a><b><big><tt><big>Next</big> </tt></big></b>-
A
flag to continue (1) or finish (0) main process simulation steps</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This flag is automatically set to 1 at the start of the process
simulation and to 0 when a maximum number of allowed iterations has
been achieved, or one of iterator's limits reached. Simulation will
also stop if <span style="font-family: monospace;">Next</span> is set
to 0 in any of the math script expressions. <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="I"></a><b><big><tt><big>I</big> </tt></big></b>-
Internal index in an inverse titration sequence step </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This index controls iterations of the "golden section" procedure
in a sequence of inverse titration problems. In a single inverse
titration, it must be incremented in the math script text. In other
cases, the <span style="font-family: monospace;">I</span> cell can be
used as a work variable. <br>
    <p> &nbsp; </p>
  </dd>
  <dt> <a name="J"></a><b><big><tt><big>J</big> </tt></big></b>-
&nbsp;Process simulation main step index</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd> This&nbsp; index is automatically incremented (from 0 to <tt><a
 href="#Ntxi_1">Ntxi[1]</a>-1</tt>) when the next process simulation
point is to be performed. This index is automatically changed by the
program. You can use it in math scripts, but you should not modify the<span
 style="font-family: monospace;">J</span> value, as it may cause
unpredictable behavior of the process simulator. <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="cnrk"></a><big><b><big><tt>Jp</tt></big></b></big> -
Current index of the processed SysEq in the record key list</dt>
  <dd><br>
  </dd>
  <dd>This index is incremented automatically (usually in parallel with
the <span style="font-family: monospace;">J</span> index). Can be
read in the math script expressions. <br>
  </dd>
  <dd> <br>
  </dd>
  <dd>&nbsp; <br>
    <br>
&nbsp;&nbsp;</dd>
  <dd> <br>
  </dd>
</dl>
<hr style="width: 100%; height: 2px;">
<h3><a name="PROCES_DATA_OPTIONAL"></a>5.2. Optional Data Vectors</h3>
&nbsp;These optional dynamic data objects are not used by default, but
any of them can be allocated (using the respective flag) during
creation or remake of the Process record. The first three objects are
used commonly, other can help for debugging- or data sampling
purposes.&nbsp;
<dl>
  <dt> <br>
  </dt>
  <dt> <a name="PSDref"></a><big><b><big><tt>PSDref</tt></big></b></big>
-&nbsp;List of SDref keys to data sources</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd> This list can contain one or more <a
 href="gdb_rkey.html#dbm_SDref">SDref record keys</a> (in packed
format)
referencing to bibliography or your comments to this process simulator
definition. Allocated if the&nbsp; <span
 style="font-family: monospace;">PeDim1[4]&nbsp;</span> counter is set
to a positive number upon remake or create. &nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd> <br>
  </dd>
  <dt> <a name="PSDval"></a><big><b><big><tt>PSDval</tt></big></b></big>
- List of short comments to SDref &nbsp;keys in the PSDref list. </dt>
  <dd>&nbsp; <br>
  </dd>
  <dd> This list of comments is allocated if the <span
 style="font-family: monospace;">PeDim1[4]</span> counter is set to a
positive number of lines in the <a href="#PSDref"><span
 style="font-family: monospace;">PSDref</span></a> list.&nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="modC"></a><big><b><big><tt>modC</tt></big></b></big> -
Array of the process simulation parameters </dt>
  <dd>
    <p>This optional vector or matrix can contain data used in
specification of the process simulation model by means of IPN math
script expressions. Each row in this array corresponds to one step in
the main process simulation sequence (indexed by a <a href="#J"><span
 style="font-family: monospace;">J</span></a> index). </p>
    <p>In the<a href="#P_expr"><span style="font-family: monospace;">
P_expr</span></a> or <a href="#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a> math script, you
should refer to this array as <span style="font-family: monospace;">modC[J][0]</span><span
 style="font-family: monospace;">, modC[J][1], ... </span>depending on
how many columns were specified in the <span
 style="font-family: monospace;"><a href="#PeDim1_1">PeDim1[1]</a> </span>counter.
The&nbsp;<span style="font-family: monospace;"></span>number of rows is
automatically set equal to <span style="font-family: monospace;">Ntxi[1]</span>on
remake. &nbsp; &nbsp;</p>
  </dd>
  <dd>&nbsp; <br>
  </dd>
</dl>
<p> </p>
<dl>
  <dt><a name="vTm"></a><b><big><tt>vTm</tt></big></b> - Optional
vector
to collect VarCSD ( <a href="#cTm"><span
 style="font-family: monospace;">cTm</span></a> ) numbers from main
process simulaion steps&nbsp;</dt>
  <dd><b><i> </i></b>&nbsp; <br>
  </dd>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_0"><span style="font-family: monospace;">PePvv[0]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). If
not specified otherwise in the&nbsp; <a href="#P_expr"><span
 style="font-family: monospace;">P_expr </span></a>math script, the
CSD variant number will be stored automatically as <span
 style="font-family: monospace;">vTm[J] =: cTm; </span><br>
  </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="vNV"></a><b><tt><big>vNV</big></tt></b> - Optional
vector
of VarTD (<a href="#cNV"><span style="font-family: monospace;">cNV</span></a>)
numbers from main process simulation steps </dt>
  <dd><br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_1"><span style="font-family: monospace;">PePvv[1]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). If
not specified otherwise in the&nbsp; <a href="#P_expr"><span
 style="font-family: monospace;">P_expr </span></a>math script, the
VarTD number will be stored automatically as <span
 style="font-family: monospace;">vNV[J] =: cNV; </span></dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="vP"></a><b><big><tt>vP</tt></big></b> - Optional vector
of pressure values (<a href="#cP"><span style="font-family: monospace;">cP</span></a>)
from main process
simulation steps </dt>
  <dd> &nbsp; </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_2"><span style="font-family: monospace;">PePvv[2]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). If
not specified otherwise in the&nbsp; <a href="#P_expr"><span
 style="font-family: monospace;">P_expr </span></a>math script, the
pressure values (in bar) will be stored automatically as <span
 style="font-family: monospace;">vP[J] =: cP;<br>
&nbsp; <br>
    </span></dd>
</dl>
<dl>
  <dt><a name="vV"></a><b><big><tt>vV</tt></big></b> - Optional vector
of volume constraint (<a href="#cV"><span
 style="font-family: monospace;">cV</span></a>) values from main
process simulation steps</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_3"><span style="font-family: monospace;">PePvv[3]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). If
not specified otherwise in the&nbsp; <a href="#P_expr"><span
 style="font-family: monospace;">P_expr </span></a>math script, the
pressure values (in bar) will be stored automatically as <span
 style="font-family: monospace;">vV[J] =: cV;</span></dd>
</dl>
<dl>
  <dd>&nbsp;<br>
  </dd>
  <dt><a name="vT"></a><b><big><tt>vT</tt></big></b> - Optional vector
of temperatures (<a href="#cT"><span style="font-family: monospace;">cT</span></a>)
from main process simulation steps </dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_4"><span style="font-family: monospace;">PePvv[4]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). If
not specified otherwise in the&nbsp; <a href="#P_expr"><span
 style="font-family: monospace;">P_expr </span></a>math script, the
temperature values (in Kelvin) will be stored automatically as <span
 style="font-family: monospace;">vT[J] =: cT;</span></dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="vTau"></a><b><big><tt>vTau</tt></big></b> - Optional
vector of Tau (physical time, <a href="#cTau"><span
 style="font-family: monospace;">cTau</span></a>) values from main
process simulation steps </dt>
  <dd> &nbsp; <br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_5"><span style="font-family: monospace;">PePvv[5]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). We
recommend always to allocate it if the process simulator involves
kinetic dependencies. If not specified otherwise in the&nbsp; <a
 href="#P_expr"><span style="font-family: monospace;">P_expr </span></a>math
script, the time values (in bar) will be stored automatically as <span
 style="font-family: monospace;">vTau[J] =: cTau;<br>
&nbsp; <br>
&nbsp;<br>
    </span></dd>
</dl>
<dl>
  <dt><a name="vpXi"></a><b><big><tt>vpXi</tt></big></b> - Optional
vector of pXi (-log process extent <span
 style="font-family: monospace;"><a href="#cpXi">cpXi</a>)</span>
values
from main process simulation steps </dt>
  <dd> &nbsp; <br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_6"><span style="font-family: monospace;">PePvv[6]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). We
recommend always to allocate it if the process simulator involves
kinetic dependencies. If not specified otherwise in the&nbsp; <a
 href="#P_expr"><span style="font-family: monospace;">P_expr </span></a>math
script, the time values (in bar) will be stored automatically as <span
 style="font-family: monospace;">vpXi[J] =: cpXi;<br>
&nbsp; <br>
&nbsp; <br>
    </span></dd>
</dl>
<dl>
  <dt><a name="vNu"></a><b><big><tt>vNu</tt></big></b> - Optional
vector
of Nu (process extent factor <a href="#cNu"><span
 style="font-family: monospace;">cNu</span></a>) values from main
process simulation steps </dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a> is allocated if the
    <a href="#PePvv_7"><span style="font-family: monospace;">PePvv[7]</span></a>
flag is set on (<span style="font-family: monospace;">"+"</span>). We
recommend always to allocate it if the process simulator involves
kinetic dependencies. If not specified otherwise in the&nbsp; <a
 href="#P_expr"><span style="font-family: monospace;">P_expr </span></a>math
script, the time values (in bar) will be stored automatically as <span
 style="font-family: monospace;">vNu[J] =: cNu;</span></dd>
</dl>
<dl>
  <dd>&nbsp; &nbsp; </dd>
  <dd> &nbsp; <br>
  </dd>
  <dt> <a name="vKin"></a><b><big><tt>vKin</tt></big></b> - Optional
array of parameters for (reaction) kinetic dependencies </dt>
  <dd>&nbsp;&nbsp; </dd>
  <dd>This work array for kinetic parameters will be created upon
remake if the <a href="#PePvv_8"><span style="font-family: monospace;">PePvv[8]</span></a>
flag is turned on (<span style="font-family: monospace;">'+'</span>)
and
&nbsp;<a href="#PeDim1_3"><span style="font-family: monospace;">PeDim1[3]</span></a>
(number of rows) and <a href="#PeDim1_4"><span
 style="font-family: monospace;">PeDim1[4] </span></a>(number of
columns) are set to positive numbers. This data object may be used in <a
 href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>
and/or <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>
math scripts for implementation of advanced kinetically-dependent
process simulators. </dd>
  <dd>&nbsp; <br>
  </dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="PeStl"></a><big><b><big><tt>PeStl</tt></big></b></big>
-&nbsp;List of generated SysEq record keys</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This list of process-generated <a href="gdb_rkey.html#dbm_SysEq">SysEq
record keys</a> &nbsp;(in packed format) is automatically created
&nbsp;during &nbsp;process simulations. &nbsp;The list can help in
identifying &nbsp;a particular SysEq record that &nbsp;has to be
examined in detail (e.g. for debugging purposes). Note that this list
contains fictive SysEq record keys if the <a href="#PePsts_4"><span
 style="font-family: monospace;">PePsts[4]</span></a> &nbsp;flag is
switched off ('-') and saving of SysEq records to database is
disabled.&nbsp; </dd>
  <dd>&nbsp; &nbsp;&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="pSTkey"></a><b><big><tt><big>pSTkey</big> -&nbsp;</tt></big></b>
Current SysEq record key</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This field displays the last processed <a
 href="gdb_rkey.html#dbm_SysEq">SysEq record key</a> generated from the
    <a href="gdb_rkey.html#dbm_Proces">Process record key</a> and
current
contents of the <span style="font-family: monospace;">&nbsp;<a
 href="#cTm">cTm</a>, <a href="#cV">cV</a>, <a href="#cP">cP</a>,<a
 href="#cTC">cTC</a>, <a href="#cNV">cNV</a> </span>cells. </dd>
  <dd>
    <p>&nbsp; &nbsp;&nbsp;</p>
  </dd>
  <dd>
    <p><br>
    </p>
  </dd>
</dl>
<hr style="width: 100%; height: 2px;">
<h3><a name="PROCES_DATA_SAMPLING"></a>5.3. Data Objects for
Sampling/Plotting of Results&nbsp;</h3>
&nbsp;The data objects listed below appear when the data
sampling/plotting mode is activated during create/remake of the
process simulator by setting the flag &nbsp;<a href="#PePsts_6"><span
 style="font-family: monospace;">PePsts[6]</span></a> on (<span
 style="font-family: monospace;">'+'</span>).&nbsp;
<dl>
  <dd><br>
  </dd>
  <dt><a name="pgExpr"></a><big><b><big><tt>pgExpr</tt></big></b></big>
- Math Script expressions for data sampling during the process
simulation <br>
  </dt>
  <dd><br>
  </dd>
  <dd>Equations in this <a href="gmscript.html">math script</a> text
provide you with power and flexibility in extracting any input or
output numerical data and perform various calculations before
plotting results or exporting them for use in other programs. To
facilitate writing of data sampling math scripts, a <a
 href="gmscript.html#MS_LIBRARY">template library</a> is provided (see
also <a href="#PROCESS_SAMPL_MATH_SCRIPT">"Writing process data
sampling math scripts"</a> chapter).</dd>
  <dd> &nbsp; <br>
The minimum possible set of <span style="font-family: monospace;">&nbsp;pGexpr</span>
&nbsp;math script expressions for data sampling has the following form:
  </dd>
</dl>
<dl style="margin-left: 40px;">
  <dd><samp><tt>xp[J] =: &lt;expression&gt;;</tt></samp></dd>
  <dd><samp><tt>yp[J][0] =: &lt;expression&gt;;</tt></samp></dd>
  <dd><samp><tt>. . .</tt></samp></dd>
  <dd><samp><tt>yp[J][n] =: &lt;expression&gt;;</tt></samp></dd>
</dl>
<dl>
  <dd>here, &nbsp;<span style="font-family: monospace;">n</span> stands
for the last valid index of columns in the data sampling array <a
 href="#yp"><span style="font-family: monospace;">yp</span></a>; &nbsp;<span
 style="font-family: monospace;">&lt;expression&gt;</span> must contain
some labels of data objects visible on the EqDemo window pages.
Arbitrary expressions for intermediate calculations can also be
specified. Lists of (hidden) data objects that can be used in Process
math scripts are provided in a <a href="dod_labels.html">separate
file</a>. <br>
  </dd>
  <dd> &nbsp; <br>
&nbsp;<br>
  </dd>
  <dt><a name="xp"></a><big><b><big><tt>xp</tt></big></b></big> -&nbsp;
Vector-column of abscissa x</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This vector-column (of dimension <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a>) will be used as an
abscissa (x axis) for plotting the sampled data. Contents of this
vector must be filled out in the&nbsp; <a href="#pgExpr"><span
 style="font-family: monospace;">pgExpr</span></a> &nbsp;math script,
to be executed during the process simulation.&nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="yp"></a><big><big><b><tt>yp</tt></b></big></big> -
Data
table of ordinate(s)&nbsp; y</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>Each column of the <span style="font-family: monospace;">yp</span>
sampled data table will be plotted as a separate curve. &nbsp;Number of
columns in the <span style="font-family: monospace;">yp</span> table
can be set in the <a href="#pDimXY_1"><span
 style="font-family: monospace;">pDimXY[1]</span></a> counter upon
remake/create of the Process record. Number of rows is set from <a
 href="#pDimXY_0"><span style="font-family: monospace;">pDimXY[0]</span></a>
counter which, in turn, automatically equals <span
 style="font-family: monospace;">Ntxi[1]</span> counter. &nbsp; </dd>
  <dd> &nbsp;<br>
&nbsp; &nbsp;</dd>
  <dt><a name="xEp"></a><big><b><big><tt>xEp</tt></big></b></big> -
Vector-column of abscissa for empirical data xE</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>In this vector-column, the user can enter empirical
(experimental) data that will be used as an abscissa for plotting
empirical (scattered) points on the graph. The number of elements in
the <span style="font-family: monospace;">xEp</span> vector can be
defined in the <span style="font-family: monospace;"><a
 href="#pDimEf_0">pDimEf[0]</a> </span>counter on remake/create of
the Process record. </dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="yEp"></a><big><b><big><tt>yEp</tt></big></b></big> -
Vector-column (or table) of ordinate(s) for empirical data yE</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>Here, the user can enter empirical (experimental) data to be used
as ordinate(s) for plotting empirical (scattered) points on the
graph. The number of lines (ordinates) can be defined in the <a
 href="#pDimEf_1"><span style="font-family: monospace;">pDimEf[1]</span></a>
counter and that of points - in the <a href="#pDimEf_0"><span
 style="font-family: monospace;">pDimEf[0]</span></a> counter upon
remake/create of the Process record. </dd>
  <dd> &nbsp; <br>
&nbsp; <br>
  </dd>
</dl>
<dl>
  <dt><a name="pX_Nam"></a><big><b><big><tt>pX_Nam</tt></big></b></big>
-&nbsp; Abscissa name (for the graph)</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>Here, the user should type a short name (up to 8 characters) for
the abscissa axis that will be shown on the graph. Typical examples: <span
 style="font-family: monospace;">"pH", "log M", "Mol.Fr.%"</span>.
Ideally, the abscissa name should include units of measurement.
&nbsp; &nbsp;</dd>
  <dd> &nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="pY_Nam"></a><big><b style="font-weight: bold;"><big><tt>pY_Nam</tt></big></b><span
 style="font-weight: bold;"> </span></big>-&nbsp; Ordinate name (for
the graph)</dt>
  <dd> &nbsp; &nbsp; </dd>
  <dd>Here, the user should type a short name (up to 8 characters) for
the ordinate axis to be shown on the graph. Typical examples: <span
 style="font-family: monospace;">"log M", "Molal", "log a"</span>.
Ideally, the ordinate name should define units of measurement because
names of the plot lines can be given separately in the <a href="#pLnam"><span
 style="font-family: monospace;">pLnam</span></a>
list.&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dd> <br>
  </dd>
</dl>
<dl>
  <dt> <tt><b><big><a name="pLnam"></a><big>pLnam</big>&nbsp;</big></b></tt>
- List of names of columns in the <a href="#yp"><span
 style="font-family: monospace;">yp</span></a> array<b><i> </i></b></dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>Here, the user should enter names of columns (plot lines)
corresponding to columns in the <a href="#yp"><span
 style="font-family: monospace;">yp</span></a> (sampled data) table.
The
names must not exceed 6 characters. They will be displayed on the
graph legend together with coloured symbols and plot lines. From
there, you can drag-and-drop the names onto the graph field (see also
the <a href="#PROCESS_PLOT_EXPORT">"Plotting and exporting results"
chapter</a>). Number of elements in this list is defined in the <a
 href="#PeDim1_0"><span style="font-family: monospace;">PeDim1[0]</span></a>
counter.&nbsp; </dd>
  <dd><br>
&nbsp; <br>
    <p> </p>
  </dd>
  <dt> <a name="pLnamE"></a><big><b><big><tt>pLnamE</tt></big></b></big>
-&nbsp; List of names of columns in the <a href="#yEp"><span
 style="font-family: monospace;">yEp</span></a> array of empirical data</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>Enter here the name(s) of column(s) in the yEp array of empirical
data. Similar to names in the pLnam list, these will also be
displayed on the graph legend. Number of elements in this list is
defined in the <a href="#pDimEf_1"><span
 style="font-family: monospace;">pDimEf[1]</span></a> counter.&nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd><br>
  </dd>
</dl>
<hr style="width: 100%; height: 2px;">
<h3><br>
</h3>
<h3><a name="PROCES_DATA_CONFIG"></a>5.4. Data fields that can be
changed only through create/remake wizard</h3>
<dl>
  <dt><a name="pDimXY_0"></a><b><big><tt><big>pDimXY[0]</big> -</tt></big></b><big><tt>
    </tt></big>Number
of rows in xp, yp arrays (simulated points to be sampled)</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This counter contains the number of rows for allocation of the <a
 href="#xp"><span style="font-family: monospace;">xp</span></a> and <a
 href="#yp"><span style="font-family: monospace;">yp</span></a> arrays.
Usually, there is no need to set it during creation of a new Process
record: the number will be automatically copied from the <a
 href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>
counter. &nbsp;However, it is good to check this counter upon remake
because it must be that <span style="font-family: monospace;">pDimXY[0]
&gt;= Ntxi[1]</span>.&nbsp; </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="pDimXY_1"></a><big><b><big><tt>pDimXY[1]</tt></big></b></big><b><i>
    </i></b>-
Number of columns in the yp table (plot lines)</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>If the data sampling/plotting mode of process simulation is
activated (flag <span style="font-family: monospace;"><a
 href="#PePsts_6">PePsts[6]</a> = '+'</span>) then the user must enter
here the number of columns in the <a href="#yp"><span
 style="font-family: monospace;">yp</span></a> table (or plot lines to
be shown on the graph). Recommended number of lines lies between 1
and 3. If you need to sample/plot more output parameters then better
create one or more <a href="gm_gtdemo.html">GtDemo data samplers</a>
connected to this process simulation.&nbsp;</dd>
  <dd> &nbsp;</dd>
  <dd> <br>
  </dd>
  <dt> <a name="pDimEf_0"></a><big><b><big><tt>pDimEf[0]</tt></big></b></big>
- Number of points&nbsp;of input empirical data (rows in <a href="#xEp"><span
 style="font-family: monospace;">xEp</span></a> and <a href="#yEp"><span
 style="font-family: monospace;">yEp</span></a>
arrays).&nbsp;</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>Here, the user should enter the number of empirical data points
to be shown as scattered symbols on the graph together with the
simulated lines.&nbsp;<b><i> </i></b></dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd> <br>
  </dd>
  <dt> <a name="pDimEf_1"></a><big><b><big><tt>pDimEf[1]</tt></big></b></big>
- Number of parameters in the input empirical data (columns in the <a
 href="#yEp"><span style="font-family: monospace;">yEp</span></a>
array).</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>Here, the user should enter the number of empirical parameters to
be shown as different scattered symbols on the graph together with
the simulated lines. In most cases, this number is 1, seldomly 2 or
3.&nbsp;</dd>
</dl>
<dl>
  <dd>Dimensions of input empirical data: number of parameters (columns
in yEp array)</dd>
  <dd>&nbsp; &nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt> <br>
  </dt>
</dl>
<dl>
  <dt> <a name="PePsts_0"></a><big><b><big><tt>PePsts[0]</tt></big></b></big>
- Process Simulation status: 0/5-indefinite; 1/6-start; 2/7-run;
4/9-end </dt>
  <dd> <br>
  </dd>
  <dd>This flag shows the process simulation status flag that controls
operation of the Process module. In the usual (non-stepwise mode),
the flag takes the following values: </dd>
  <dd> <br>
  </dd>
  <dd>0 &nbsp; indefinite <br>
1 &nbsp; start of process simulation <br>
2 &nbsp; progress or the process simulation <br>
4 &nbsp; process simulation finished </dd>
  <dd> <br>
The "stepwise" calculation mode is performed when the PePsts[0] flag
has one of the following values: <br>
  </dd>
  <dd><br>
5&nbsp;&nbsp; indefinite (stepwise) <br>
6 &nbsp; start of stepwise process simulation <br>
7 &nbsp; progress of stepwise process simulation <br>
9 &nbsp; stepwise process simulation finished </dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>There is no need to&nbsp; manually change this field, except when
you want to run a previously "non-stepwise" process in the "stepwise
mode. To do this, just remake the Process record and set this flag to
5, then press "Ok" and start the simulation by pressing the
"Calculate" button. In the other way round (by changing this flag to 0
upon remake), you can convert the process simulator to "non-stepwise"
mode (runs faster, but cannot be stopped or executed
step-by-step).&nbsp; &nbsp;<br>
  </dd>
  <dd>&nbsp;</dd>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="PePsts_1"></a><big><b><big><tt>PePsts[1]</tt></big></b></big>
- Is T,P,V of the system changing in the process (+ -)?</dt>
  <dd>
    <p>This flag incicates that temperature T, pressure P or volume
constraint V of the system will be changed in the process simulation.
Default is off ('-'). If the flag is set on, the respective iterator (<span
 style="font-family: monospace;"><a href="#iTC_0">iTC</a>, <a
 href="#iV_0">iP</a></span> or <a href="#iV_0"><span
 style="font-family: monospace;">iV</span></a>) must have a non-zero
step size.&nbsp;</p>
  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="PePsts_2"></a><big><tt><b><big>PePsts[2]</big></b></tt></big>
- Is there a change in the bulk composition of the system (+ -)? </dt>
  <dd>
    <p>This flag indicates that <a href="glossary.html#DT_CSD">CSD</a>
(bulk composition) will be changed during the process simulation.
Default is on ('+'). If the flag is set on then the iterator <a
 href="#iTm_0"><span style="font-family: monospace;">iTm</span></a>
must
specify a non-zero step size. &nbsp; </p>
&nbsp;&nbsp; &nbsp;</dd>
  <dt> <a name="PePsts_3"></a><big><b><big><tt>PePsts[3]</tt></big></b></big>
- Are there changes in constraints or metastability parameters (+
-)?&nbsp;</dt>
  <dd>&nbsp;<br>
  </dd>
  <dd>This flag indicates that some metastability constriants or <a
 href="gems_bcc.html#gEx_"><span style="font-family: monospace;">gEx</span></a>_
increments will be changed in the process simulation. Default is off
&nbsp;('-'). If the flag is set on then the iterator <a href="#iNv_0"><span
 style="font-family: monospace;">iNv</span></a> must specify a non-zero
step size. If a real-time kinetics are to be simulated then also the <a
 href="#iTau_0"><span style="font-family: monospace;">iTau</span></a>
iterator must specify a non-zero time step. </dd>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="PePsts_4"></a><big><tt><b><big>PePsts[4]</big></b></tt></big>
- Save generated SysEq records to database (+ -)? </dt>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd>This flag defines whether SysEq records generated on main process
simulation steps will be saved into the project database ('+') or not
('-'). Default value is on ('+'). Note that if saving of SysEq
records is disabled by setting this flag off ('-') then you will not
be able to perform additional sampling of results by creating GtDemo
data samplers; however, process simulation will be performed much
faster, only fictive SysEq record keys will be written into the <a
 href="#PeStl"><span style="font-family: monospace;">PeStl</span></a><span
 style="font-family: monospace;"> </span>list. </dd>
  <dd> &nbsp;&nbsp;</dd>
  <dd>&nbsp; &nbsp;</dd>
  <dt> <a name="PePsts_5"></a><big><b><big><tt>PePsts[5]</tt></big></b></big>
- Is this a Sequential Reactor simulation (+ -)? </dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>This flag sets up a "sequential reactor" modeling sequence, in
which the bulk composition of the system at the current (J-th) step
is calculated using equilibrium bulk compositions of phases from
the previous (J-1) simulation step. Default value is off ('-').&nbsp; <br>
  </dd>
  <dd>&nbsp; <br>
If this flag is turned on ('+') then the <span
 style="font-family: monospace;"><a href="#PePsts_2">PePsts[2]</a>, <a
 href="#PePsts_4">PePsts[4]</a> </span>and <a href="#PePsts_7"><span
 style="font-family: monospace;">PePsts[7]</span></a> flags must also
be
turned on. The "parent" SysEq record for this process simulation must
be configured with&nbsp; the <a href="gems_bcc.html#xp_"><span
 style="font-family: monospace;">xp_</span></a> vector allocated (<a
 href="gems_bcc.html#SyPvec_3"><span style="font-family: monospace;">SyPvec[3]</span></a>
flag switched on). See <a href="#SEQUENTIAL_REACTORS">example</a>.&nbsp;</dd>
  <dd> &nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="PePsts_6"></a><big><big style="font-weight: bold;"><span
 style="font-family: monospace;">PePsts[6]</span></big></big> - Data
sampling/plotting mode of process simulation&nbsp; (+ -)? </dt>
  <dd>&nbsp;&nbsp; <br>
  </dd>
  <dd> This flag activates the data sampling/plotting mode of the
process simulation. Default value is off ('-'). If this flag is set
on ('+') then you will have to enter (into <a href="#pDimXY_1"><span
 style="font-family: monospace;">pDimXY[1]</span></a> counter) the
number of columns to be sampled into the <a href="#yp"><span
 style="font-family: monospace;">yp</span></a> table; optionally, the
dimensionality of empirical data arrays ( <a href="#pDimEf_0"><span
 style="font-family: monospace;">pDimEf[0]</span></a> and <a
 href="#pDimEf_1"><span style="font-family: monospace;">pDimEf[1]</span></a>
counters); and, after remake is finished, in any case type a data
sampling math scritpt into the <a href="#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a> text editor field.
See more in the <a href="#PROCESS_PLOT_EXPORT">"Plotting and
exporting results" chapter</a>. <br>
  </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="PePsts_7"></a><tt><b><big>PePsts[7]</big></b></tt> -
Does Process simulation depend on the output GEM parameters (pH, Eh
etc.) (+ -)? </dt>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd>This flag (if turned on) ensures that the process simulation is
performed in stepwise-reentrant mode because the math scripts refer
to some GEM IPM output parameters (such as activities, fugacities,
speciation, equilibrium composition of phases, pH, pe, Eh etc.)&nbsp;
Typical examples are inverse titrations and sequential reactors.</dd>
  <dd> Default value is off ('-'). <br>
&nbsp; <br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="PePsts_8"></a><big><b><big><tt>PePsts[8]</tt></big></b></big>
- Is this a single inverse titration problem (+ -)? </dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This mode permits the user to create customary inverse titration
simulators by writing a special <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> math script (<a
 href="#PePsts_10"><span style="font-family: monospace;">PePsts[10]</span></a>
flag must also be turned on). The <span style="font-family: monospace;">"I</span>"
index must be used in some equations to count iterations and stop when
its limit is reached, to prevent infinite cycling. See also<a
 href="#INVERSE_TITRATION"> examples</a>. Default value of this flag is
off ('-'). &nbsp; </dd>
  <dd>
    <p> </p>
    <br>
  </dd>
  <dd>If this flag (<span style="font-family: monospace;">PePsts[8]</span>)
&nbsp;is on then flags <span style="font-family: monospace;">PePsts[2],
PePsts[4], PePsts[7], PePsts[10]</span> must be switched on; however,
the flag <a href="#PePsts_11"><span style="font-family: monospace;">PePsts[11]</span></a>
must be turned&nbsp; off. </dd>
  <dd> &nbsp; <br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="PePsts_9"></a><b><big><tt>PePsts[9]</tt></big></b> -
Flag
for kinetic-dependent&nbsp; modes of process simulation (+ -) &nbsp;-
reserved &nbsp;</dt>
  <dd>&nbsp; &nbsp; <br>
  </dd>
  <dd>&nbsp; &nbsp;</dd>
  <dd>&nbsp; &nbsp;<br>
  </dd>
  <dt> <a name="PePsts_10"></a><big><b><big><tt>PePsts[10]</tt></big></b></big>
- Is a math script to be specified in this process simulator
definition (+ -)? </dt>
  <dd> <br>
This flag defines whether the <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> math script will be
used for controlling the process simulation. If this flag is turned
on ('+', default) then the math script must contain operators that
&nbsp;describe how some GEM IPM input parameters will be changed on <span
 style="font-family: monospace;">J</span>-th main simulation step (more
in the <a href="#PROCESS_SIM_MATH_SCRIPT">"Writing process
simulation math scritps" chapter</a>).&nbsp;</dd>
  <dd> &nbsp; <br>
  </dd>
  <dd>This flag can be turned off ('-') in cases when only temperature
or pressure will be changed in the simulation, but the bulk
composition will remain constant (then the iterators <a href="#iP_0"><span
 style="font-family: monospace;">iP</span></a> or <a href="#iTC_0"><span
 style="font-family: monospace;">iTC</span></a> must be set properly to
describe the changes). <br>
  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dd> <br>
  </dd>
  <dt> <a name="PePsts_11"></a><big><big><b><tt>PePsts[11]</tt></b></big></big>
- Is this a sequence of inverse titration points (+ -)? </dt>
  <dd>&nbsp; <br>
This flag (if turned on '+') defines simulation of a sequence of
inverse titration points by invoking a built-in "golden section" 1-D
parametric minimization algorithm. See more in the "Inverse titration
sequence" section. For this mode, set <span
 style="font-family: monospace;">NeIt[0] &gt; Ntxi[1]*15</span>;&nbsp; <br>
flags <span style="font-family: monospace;">PePsts[2], PePsts[7],
PePsts[10]</span> must be turned on, but flag <span
 style="font-family: monospace;">PePsts[8]</span> must be turned
off.&nbsp; <br>
&nbsp; <br>
Default value of this flag is off ('-'). <br>
&nbsp; <br>
&nbsp; &nbsp;<br>
  </dd>
  <dt> <a name="PePvv_0"></a><b><big><tt>PePvv[0]</tt></big></b> -
Flag
for allocation of an optional <span style="font-family: monospace;">vTm</span>
vector (+ - *) </dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>The <a href="#vTm"><span style="font-family: monospace;">vTm</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). <br>
  </dd>
  <dd>&nbsp; <br>
&nbsp;<br>
  </dd>
  <dt><a name="PePvv_1"></a><big><b><tt>PePvv[1]</tt></b></big> - Flag
for allocation of an optional <span style="font-family: monospace;">vNV</span>
vector (+ - *)</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>The <a href="#vNV"><span style="font-family: monospace;">vNV</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="PePvv_2"></a><big><b><tt>PePvv[2]</tt></b></big> - Flag
for allocation of an otpional <span style="font-family: monospace;">vP</span>
vector (+ - *)</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>The <a href="#vP"><span style="font-family: monospace;">vP</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd>&nbsp;&nbsp; &nbsp;<br>
  </dd>
  <dt> <a name="PePvv_3"></a><big><b><tt>PePvv[3]</tt></b></big> -
Flag
for allocation of an optional <span style="font-family: monospace;">vT</span>
vector (+ - *)</dt>
  <dd> &nbsp;&nbsp; &nbsp; <br>
  </dd>
  <dd>The <a href="#vT"><span style="font-family: monospace;">vT</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="PePvv_4"></a><b><tt><big>PePvv[4]</big> </tt></b>- Flag
for allocation of an optional <span style="font-family: monospace;">vV</span>
vector (+ - *)</dt>
  <dd> <br>
  </dd>
  <dd>The <a href="#vV"><span style="font-family: monospace;">vV</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="PePvv_5"></a><big><b><tt>PePvv[5]</tt></b></big> - Flag
for allocation of an optional <span style="font-family: monospace;">vTau</span>
vector (+ - *)</dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>The <a href="#vTau"><span style="font-family: monospace;">vTau</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="PePvv_6"></a><big><b><tt>PePvv[6]</tt></b></big> - Flag
for allocation of an optional <span style="font-family: monospace;">vpXi</span>
vector (+ - *)</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>The <a href="#vpXi"><span style="font-family: monospace;">vpXi</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
</dl>
<dl>
  <dd>&nbsp; <br>
  </dd>
  <dt><a name="PePvv_7"></a><big><b><tt>PePvv[7]</tt></b></big> - Flag
for allocation of an optional <span style="font-family: monospace;">vNu</span>
vector (+ - *)</dt>
  <dd> <br>
  </dd>
  <dd>The <a href="#vNu"><span style="font-family: monospace;">vNu</span></a>
vector will be allocated if this flag is turned on ('+' or '*'),
otherwise this vector will be deallocated (default). </dd>
  <dd>&nbsp; <br>
&nbsp; <br>
  </dd>
  <dt><a name="PePvv_8"></a><b><tt><big>PePvv[8]</big> </tt></b>- Flag
for allocation of an optional <span style="font-family: monospace;">vKin</span>
array (+ - *) </dt>
  <dd>&nbsp; <br>
This flag controls allocation of a kinetic parameters array&nbsp;<span
 style="font-family: monospace;"> <a href="#vKin">vKin</a></span>.
Default value is off ('-'). If the flag is set on ('+' or '*') then
the&nbsp; non-zero dimensions must be entered into <a href="#PeDim1_2"><span
 style="font-family: monospace;">PeDim1[2]</span></a>
(number of rows) and <a href="#PeDim1_3"><span
 style="font-family: monospace;">PeDim1[3]</span></a> (number of
columns) counters.<br>
&nbsp; <br>
&nbsp;&nbsp; </dd>
  <dt><a name="PePvv_9"></a><big><b><tt>PePvv[9]</tt></b></big> - Flag
for allocation of the process simulation parameters array <span
 style="font-family: monospace;">modC</span> (+ - *) </dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This flag controls allocation of the <a href="#modC"><span
 style="font-family: monospace;">modC</span></a> array, which in many
cases is useful for entering or collecting some important parameters
that control the process simulation. The <span
 style="font-family: monospace;">modC</span> array is also used in some
    <a href="gmscript.html#MS_LIBRARY">template math scripts</a>. The
default flag is off ('-'). If the flag is on ('+') then the number of
columns in the <span style="font-family: monospace;">modC</span> array
must be given in the <a href="#PeDim1_1"><span
 style="font-family: monospace;">PeDim1[1]</span></a> counter (<span
 style="font-family: monospace;"></span>number of lines is
automatically set equal to <a href="#Ntxi_1"><span
 style="font-family: monospace;">Ntxi[1]</span></a>). <br>
  </dd>
  <dd> &nbsp; &nbsp;&nbsp; </dd>
  <dd> <br>
  </dd>
  <dt> <a name="PePvv_10"></a><b><tt><big>PePvv[10]</big> -</tt></b>
Use
previous SysEq result (+) or Simplex initial approximation (-)? </dt>
  <dd> &nbsp; <br>
  </dd>
  <dd>This flag (if turned on, '+') permits to use the previous result
of calculation of equilibrium state (at J-1 process main step) as an
initial approximation for the J-th process simulation main step. This
can greatly accelerate extensive simulations, although it is safer to
use the automatic IPM Simplex initial approximation at all process
main steps. Default flag is off ('-').</dd>
  <dd> &nbsp; &nbsp; &nbsp; &nbsp;<br>
  </dd>
  <dd><br>
  </dd>
  <dt><a name="PePvv_11"></a><b><tt><big>PePvv[11]</big> </tt></b>-
Show experimental data points in the data sampling/plotting mode (+
-)? </dt>
  <dd>&nbsp; &nbsp;<br>
This flag (if turned on '+') causes the GraphDialog module to display
data entered into the <a href="#xEp"><span
 style="font-family: monospace;">xEp</span></a> and <a href="#yEp"><span
 style="font-family: monospace;">yEp</span></a> arrays as scattered
symbols on top of the simulated lines. Default flag is off ('-'). <br>
&nbsp; &nbsp; &nbsp;</dd>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="Ntxi_0"></a><b><big><tt>Ntxi[0]</tt></big></b> - Maximum
number of time steps in mass transport simulation involving real time
(reserved for future versions)</dt>
  <dd>&nbsp;&nbsp;</dd>
  <dd> &nbsp; <br>
  </dd>
  <dt><a name="Ntxi_1"></a><b><big><tt><big>Ntxi[1]</big> </tt></big></b>-
Maximum number of main process simulation steps (important!)&nbsp; </dt>
  <dd> &nbsp; &nbsp;<br>
  </dd>
  <dd>This counter defines how many main process simulation steps
(indexed by <span style="font-family: monospace;">J</span>) can at
most be performed. This counter must always be set upon creation or
remake of the Process record because it is necessary for allocation
of many dynamic data objects such as <span
 style="font-family: monospace;"><a href="#xp">xp</a>, <a href="#yp">yp</a>,
    <a href="#modC">modC</a></span>. However, the
actual number of performed steps can be less than <span
 style="font-family: monospace;">Ntxi[1]</span> depending on the
process
iterators or conditions in the <a href="#P_expr"><span
 style="font-family: monospace;">P_expr</span></a> math script.&nbsp;<br>
&nbsp;Default counter is 1. <br>
&nbsp; <br>
  </dd>
  <dt><br>
  </dt>
  <dt><a name="PeDim1_0"></a><big><big><b><tt>PeDim1[0]</tt></b></big></big>
-&nbsp; Dimensionality of the SyEq record key list (<a href="#PeStl"><span
 style="font-family: monospace;">PeStl</span></a>)</dt>
  <dd> &nbsp;<br>
  </dd>
  <dd><br>
  </dd>
  <dt> <a name="PeDim1_1"></a><big><big><b><tt>PeDim1[1]</tt></b></big></big>
- Number of columns in the <a href="#modC"><span
 style="font-family: monospace;">modC</span></a> array</dt>
  <dd> &nbsp;&nbsp; &nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="PeDim1_2"></a><b><tt><big>PeDim1[2]</big> </tt></b>-
Number of rows in the <a href="#vKin"><span
 style="font-family: monospace;">vKin</span></a> array</dt>
  <dd> &nbsp;&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="PeDim1_3"></a><b><tt><big>PeDim1[3]</big> </tt></b>-
Number of columns in the <a href="#vKin"><span
 style="font-family: monospace;">vKin</span></a> array</dt>
  <dd> &nbsp;&nbsp;</dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="PeDim1_4"></a><big><big><b><tt>PeDim1[4]</tt></b></big></big>
- Number of entries in <a href="#PSDref"><span
 style="font-family: monospace;">PSDref</span></a> and <a
 href="#PSDval"><span style="font-family: monospace;">PSDval</span></a>
lists</dt>
  <dd> &nbsp;<br>
&nbsp; <br>
    <br>
  </dd>
</dl>
<h3>Data Objects Reserved For Future Versions</h3>
<dl>
  <dt> <br>
  </dt>
  <dt> <a name="pGDkey"></a><b><tt>pSYkey</tt></b> - internal</dt>
  <dd>&nbsp; </dd>
  <dd><br>
  </dd>
  <dt><a name="pSLkey"></a><b><tt>pTPkey</tt></b> - internal</dt>
  <dd>&nbsp;&nbsp;</dd>
  <dd><br>
  </dd>
  <dt> <a name="PeTprn"></a><b><tt>PeTprn</tt></b> - internal</dt>
  <dd>&nbsp;&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
</dl>
<br>
<br>
<hr size="2" width="100%"><tt><br>
<br>
</tt>
<h2><a name="PROCES_ERRORS"></a> 6. Warnings and error messages<br>
</h2>
(under construction)<br>
<br>
<dl>
  <dt><br>
  </dt>
  <dt><br>
  </dt>
  <dt><b><big><tt>E00PErem: </tt></big></b>Invalid dimensions in
Process data structure!</dt>
  <dd>&nbsp; </dd>
  <dd>&nbsp;Some counters are set inconsistently. Remake the Process
record and check the counters.<br>
&nbsp;<br>
&nbsp;<br>
  </dd>
  <dt><b><big><tt>E01PErem: </tt></big></b>Invalid Process Simulation
mode</dt>
  <dd>&nbsp; </dd>
  <dd>&nbsp;Some flags defining simulation modes are inconsistent.
Remake the record and check the flags.&nbsp; <br>
&nbsp; <br>
&nbsp;<br>
  </dd>
  <dt><b><big><tt>W02PErem: </tt></big></b>You forgot to specify the
number of points! Please, do it!</dt>
  <dd>&nbsp; </dd>
  <dd>&nbsp;The <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>
counter contains 0 or a negative value. Remake the record and set the
counter properly.<br>
&nbsp; &nbsp;<br>
&nbsp;<br>
  </dd>
  <dt><b><big><tt>E03PErem: </tt></big></b>Illegal access to pe in
set_def</dt>
  <dd> &nbsp; </dd>
  <dd>&nbsp;Internal error (memory corruption). Please, report it to
developers. <br>
&nbsp; <br>
&nbsp; &nbsp;<br>
  </dd>
  <dt><b><big><tt>E04PErem: </tt></big></b>Illegal access to pe in
dyn_new</dt>
  <dd>&nbsp; </dd>
  <dd>&nbsp;Internal error (dynamic memory corruption). Please, report
it to developers.<br>
&nbsp;&nbsp; <br>
&nbsp; &nbsp;<br>
  </dd>
  <dt><b><big><tt>E05PErem: </tt></big></b>Illegal access to pe in
dyn_kill</dt>
  <dd><br>
  </dd>
</dl>
<dl>
  <dd>Internal error (dynamic memory corruption). Please, report it to
developers.<br>
&nbsp; <br>
&nbsp;<br>
  </dd>
</dl>
<dl>
  <dt><b><big><tt>E06PErem: </tt></big></b>Illegal access to pe in
dyn_set</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>Internal error (dynamic memory corruption). Please, report it to
developers.<br>
&nbsp; <br>
&nbsp;<br>
  </dd>
</dl>
<dl>
  <dt><b><big><tt>E07PErem: </tt></big></b>Illegal record key (no
system)!</dt>
  <dd>&nbsp;</dd>
  <dd> Probably, the "parent" SysEq record was occasionally deleted.
Please, restore it and calculate the process simulation again. <br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp; &nbsp;</dd>
  <dt><b><big><tt>E08PErem: </tt></big></b>Illegal record key (another
Modelling Project)!</dt>
</dl>
<dl>
  <dd>The "parent" <a href="gm_syseq.html">SysEq record</a> has been
copied from another project database. Please, rename it (in the
"Database Management" mode of GEM-Selektor), then check and calculate
it, then remake this Process record and try running the process
simulation again. <br>
&nbsp; &nbsp; &nbsp;<br>
    <br>
  </dd>
  <dt><b><big><tt>E09PErem: </tt></big></b>Please, do it in the
Project mode!</dt>
  <dd>&nbsp; <br>
You have attempted to remake the Process simulator in "Database
Management" mode. Please, open the<a href="gm_project.html"> modeling
project </a>and then&nbsp; remake this Process record.<br>
&nbsp;<br>
&nbsp; &nbsp;</dd>
  <dt><b><big><tt>E93MSTran: </tt></big></b>Error in translation of
Process Simulator math script:&nbsp;</dt>
  <dd>&nbsp; <br>
Syntax error(s) were detected during pre-processing or translation of
text in the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>
math script. The remaining (not yet processed) part of the script will
be printed after the error message in order to help in localizing the
error. <br>
&nbsp; <br>
To correct the script, press "Ok" to close the error message, examine
the <a href="gmscript.html">math script syntax</a> in the <a
 href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>
field, fix the error (or data object label, or phase/species name),
save
the Process record to database and calculate the simulation again.<br>
&nbsp; &nbsp; &nbsp;</dd>
  <dd> &nbsp; &nbsp;</dd>
  <dt><big><b><tt>E94MSTran: </tt></b></big>Error in translation of
Process Demo Sampler math script:</dt>
  <dd> &nbsp;<br>
  </dd>
</dl>
<dl>
  <dd>Syntax error(s) were detected during pre-processing or
translation of text in the <a href="#pgExpr"><span
 style="font-family: monospace;">pGexpr</span></a> math script. The
remaining (not yet processed) part of the script will be printed
after the error message in order to help in localizing the error. </dd>
  <dd> &nbsp; </dd>
  <dd> To correct the script, press "Ok" to close the error message,
examine the <a href="gmscript.html">math script syntax</a> in the <a
 href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>
field, fix the error (or data object label, or phase/species name),
save
the Process record to database and calculate the simulation again.</dd>
</dl>
<dl>
  <dd> &nbsp; <br>
&nbsp; </dd>
  <dt><b><big><tt>E00PEexec: </tt></big></b>Process simulation stopped
by the user.</dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd> &nbsp;The user has cancelled the stepwise process simulation. <br>
    <br>
&nbsp; <br>
  </dd>
  <dt><b><big><tt>W01PEexec: </tt></big></b>GoldenSection(): No result
in specified interval! Change interval!&nbsp;</dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd>The built-in "golden section" algorithm could not converge in one
of the inverse titration sequence steps. <br>
Check and extend the titrant additions interval in the <a
 href="#ipXi_0"><span style="font-family: monospace;">ipXi</span></a>
iterator. Sometimes, the "golden section" algorithm cannot converge
because the titrant addition precision value <a href="#ipXi_2"><span
 style="font-family: monospace;">ipXi[2]</span></a> is too large; in
this case, decrease it by 1-2 orders of magnitude.&nbsp; &nbsp; &nbsp;<br>
    <br>
&nbsp; </dd>
  <dt><b><big><tt>E02PEexec: </tt></big></b>Please, do it in the
Project mode!&nbsp;</dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd> &nbsp;You have attempted to calculate the Process record in
"Database management" mode. Switch to the Project mode and try again.<br>
&nbsp; <br>
&nbsp;&nbsp;&nbsp;</dd>
  <dt><b><big><tt>E00PSexec: </tt></big></b>No print script format
text in this record &nbsp; &nbsp;&nbsp;</dt>
  <dd>&nbsp; &nbsp;</dd>
  <dd> The SDref record selected when printing the Process record data
contains no print format script (or print script for another record
type.) &nbsp;Switch to "database management" mode, open the SDref
window, and check the record with selected print script. <br>
&nbsp; <br>
    <br>
  </dd>
</dl>
<hr size="2" width="100%"><br>
<br>
<p><font face="Helvetica, Arial, sans-serif">To be completed in version
2.2&nbsp;</font> </p>
<hr size="2" width="100%">
<h2><a name="GSM_IRREVER_PROCESS"></a><font
 face="Helvetica, Arial, sans-serif">4.&nbsp; Simulation of
Irreversible Processes</font></h2>
<p><font face="Helvetica, Arial, sans-serif"> Many geochemical modeling
problems
require calculation of a series of equilibrium states to simulate <a
 href="glossary.html#DT_irreversible">irreversible chemical
mass-transfer</a><a href="glossary.html#DT_titration_direct">titration</a>,
mixing, <a href="glossary.html#DT_dissolution">incongruent dissolution</a>,
<a href="glossary.html#DT_sequential_reactors">"sequential reactors"</a>,
etc. Often, scores to hundreds of equilibria must be computed in one
such "process simulation".&nbsp; <br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif"> Doing this by creating
single system <a href="glossary.html#DT_CSD">CSD</a>s, calculating and
examining equilibria <a href="gemstart.html#GSM_SINGLE_EQSTAT">as
described previously</a>, would be a rather time-consuming, inefficient
and boring job, especially when the process simulation is to be
controlled by a certain regular change of temperature, pressure, or
bulk composition of the system. Process Simulators of the GEM-Selektor
(implemented in the <a
 href="file:///Users/dimacool/Developer/trunk/gems3/shared/doc/html/gm_proces.html">Process</a>
module and
record type) can greatly facilitate and accelerate this work - from
telling the program what to change in the CSD from one equilibrium
point to another, up to sampling, plotting and exporting relevant
results.<br>
</font> </p>
<p><font face="Helvetica, Arial, sans-serif">In this section, we will
create some Process Simulators within the "Carbonat" modelling project.
<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Firstly, we will plot the
aqueous speciation of calcium as it depends on the CO<sub>2</sub>
&nbsp;addition in the closed system in presence of Portlandite Ca(OH)<sub>2</sub>
and Calcite CaCO<sub>3</sub> solid phases. This can be done in a
"direct titration" process, also convenient for plotting redox changes
upon addition of a reductant (or oxidant) to the closed system (shown
on an example of adding carbon to the aqueous solution with Fe-Mn
oxides). <br>
</font> </p>
<p><font face="Helvetica, Arial, sans-serif">Secondly, we will plot the
aqueous speciation as function of pH in presence of calcite in the open
system. As pH cannot be set directly as an input parameter of the GEM
algorithm, we will have to adjust pH by adding acid (HCl) or base
(NaOH). The best way
to obtain nice graphs is to perform a series of the so-called "inverse
titrations"
(where the program itself looks for an addition of acid or base for
obtaining
a prescribed value of calculated pH). Later on, the sequence of inverse
titration
points can easily be converted into a (much faster) direct titration
simulation.
<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Finally, we will learn how
to set up and run the Process Simulator in a "sequential reactor"
mode.&nbsp;</font></p>
<p> <br>
&nbsp; <br>
</p>
<h3><a name="GSM_PARENT_SYSEQ"></a><font
 face="Helvetica, Arial, sans-serif">4.1. Creating a Parent System
Definition</font></h3>
<p><font face="Helvetica, Arial, sans-serif">To create a Process
Simulator, you first have to create its "parent" <a
 href="gm_syseq.html">SysEq record</a> containing an initial <a
 href="gems_bcc.html">CSD</a> and <a href="gems_sys.html">equilibrium
speciation</a>. The <a
 href="file:///Users/dimacool/Developer/trunk/gems3/shared/doc/html/gm_proces.html">Process</a>
module will
then automatically "clone" and modify the "parent" SysEq record and run
BCC and IPM calculations, according to the input values of Process
iterators and the process simulation math script.<br>
&nbsp; <br>
So, start the GEM-Selektor (if necesary) and open the "Carbonat"
project. Open the "Single Thermodynamic System" dialog and create a new
system </font><big><tt>"Carbonat:G:CO2titrP:0:0:1:25:0:"</tt></big><font
 face="Helvetica, Arial, sans-serif">. Comment it as </font><big><tt>"Parent
for CO2 titration of water-portlandite system"</tt></big> <font
 face="Helvetica, Arial, sans-serif">and give the following recipe for
the bulk composition: 1 kg water, 0.001 g O<sub>2</sub>, 0.1 mol Ca(OH)<sub>2</sub>
and 1e-6 mol CO<sub>2</sub>, then calculate BCC (let the program turn
off &nbsp; </font><big><tt>Na,Cl,Fe,Mn</tt></big> <font
 face="Helvetica, Arial, sans-serif">and</font> <big><tt>Nit</tt></big>
<font face="Helvetica, Arial, sans-serif">Independent Components) and
compute the
equilibrium state. If you experience problems in setting up the system
(it
should take some 1 minute), then read again about</font> <font
 face="Helvetica, Arial, sans-serif"><a
 href="gemstart.html#GSM_CREATE_SYSTEM_1">how to create a single system
definition</a>. Your should have calculated pH =&nbsp; 12.47 and only </font><big><tt>"aq_gen"</tt></big><font
 face="Helvetica, Arial, sans-serif"> and </font><big><tt>"Portlandite"</tt></big>
<font face="Helvetica, Arial, sans-serif">phases present at equilibrium
in non-zero amounts. </font><br>
&nbsp; <br>
<font face="Helvetica, Arial, sans-serif"> The parent system for
creating a new Process Simulator is, in principle, ready. We can check
now how much CO<sub>2</sub> should be added to convert all portlandite
into calcite and get pCO<sub>2</sub> close to 1 bar. "Clone" the
currently active SysEq record by changing the fourth field of the
record key, say, to "9" and add 0.1 mole of CO<sub>2</sub> to the bulk
conposition, then calculate the
equilibrium. Now, portlandite is gone, we have almost 0.1 mole of</font>
<big><tt>"Calcite"</tt></big> <font face="Helvetica, Arial, sans-serif">present,
but still no gas phase and pH = 9.9 (you can expand the</font> <big><tt>"gas_gen"</tt></big>
<font face="Helvetica, Arial, sans-serif">phase and see that fugacity
of CO<sub>2</sub> (log(activity) = -6.18 is still very low). Thus,
change the CO<sub>2</sub> addition to 0.3 moles and run GEM IPM again.
This time, you should get 0.1565 moles of the gas phase, pH = 6.0 and
fugacity of CO<sub>2</sub> close to 1. So, the titration can be stopped
at about 0.3 moles of added CO<sub>2</sub>. You can delete the trial
SysEq record now, if you wish.&nbsp;</font> </p>
<p><br>
</p>
<h3><a name="GSM_SET_PROCESS_SIM"></a><font
 face="Helvetica, Arial, sans-serif">4.2.&nbsp; Setting up a Process
Simulator</font></h3>
<p><font face="Helvetica, Arial, sans-serif">From the "GEM Modelling
Project" dialog, click on a "Process Simulation (Process)" button. This
will bring you a (still empty) "Process" module window. Select "Create"
from the "Record" menu to create your first <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_proces.html">Process
definition</a> record.&nbsp; You will see a dialog window entitled
"SysEq: Please, select a parent system for a new Process" with a list
of <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_syseq.html">SysEq
records</a> available in the </font><big><tt>"Carbonat"</tt></big> <font
 face="Helvetica, Arial, sans-serif">profile.&nbsp; Click on the</font>
<big><tt>"Carbonat:G:CO2titr:0:0:1:25:0:"</tt></big>&nbsp;<font
 face="Helvetica, Arial, sans-serif"> record key (to mark/select it)
and press </font><font face="Helvetica, Arial, sans-serif" size="-1">"Ok"</font><font
 face="Helvetica, Arial, sans-serif"> to proceed. <br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">Now, a small "Process:
Please, enter a new key" dialog appears with the last two lines
containing asterisks</font> <big><tt>'*'</tt></big><font
 face="Helvetica, Arial, sans-serif"> in two
fields added below to the above-mentioned record key. Replace</font>
<tt><big>'*'</big> </tt><font face="Helvetica, Arial, sans-serif">with&nbsp;</font>
<big><tt>'S'</tt></big> <font face="Helvetica, Arial, sans-serif">in
the last field, to indicate that the process will change bulk
composition independently of calculated equilibrium parameters. In a
field above
(previous-to-last one), type e.g.</font> <big><tt>"AddCO2toPort"</tt></big>
<font face="Helvetica, Arial, sans-serif">as a process simulator
identifier
(because several processes can be defined using the same parent SysEq
record). Press</font> <big><tt>"Ok"</tt></big> <font
 face="Helvetica, Arial, sans-serif"> when finished. </font><span
 style="font-family: helvetica,arial,sans-serif;"><br>
</span></p>
<p><span style="font-family: helvetica,arial,sans-serif;">This will get
you to a "Setup to Create Process" dialog with two pages: </span><span
 style="font-family: helvetica,arial,sans-serif;"> "Process simulation
types" and "Dimensions and graphics". This time, there is nothing to
change on the first page, so switch to the second one "Dimensions and
graphics". Change the first field (number of SysEq records to be
generated) to 31 and the
third field (number of sampled data lines on the graph) to 3. </span><font
 face="Helvetica, Arial, sans-serif">The idea here is to collect
calculated values of log Ca<sub>AQ</sub>, log <i>f</i>CO<sub>2</sub>
and&nbsp; -pH
at each of 31 simulation points and plot them. 31 points are necessary
to
discretize an interval of CO<sub>2</sub> additions from 1e-6 to 0.3 mol
with
a step of 0.01 mol).&nbsp; <br>
&nbsp;<br>
Press "Ok" when ready. &nbsp;A Page 1 of the "Process" window will
appear; as usual, fill out the first two comment fields e.g. as shown
below.&nbsp;</font></p>
<p><span style="font-family: helvetica,arial,sans-serif;">&nbsp; </span><tt><big>"Titration
of portlandite-water system with CO2"<br>
&nbsp;"Example 2 from GEMS Getting Started tutorial"</big></tt><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"><b><a
 name="GSM_SET_PROC_ITER"></a>How to set up iterators in your first
Process Simulator. </b><br>
</span> <span style="font-family: helvetica,arial,sans-serif;"><br>
The first iterator <a href="gm_proces.html#iTm_0"><big><tt>iTm</tt></big></a>
defines how the program will number the generated system definitions
(CSD). If we start with CSD #1000 and will produce 31 points, then we
will end up with a CSD #1300 at increment 10. &nbsp;So, we should set
&nbsp;<big><tt>iTm</tt></big> &nbsp;to these values 1000, 1300 and 10
(from top to bottom). <br>
<br>
Pressure (1 bar) and temperature (25 C) will be kept constant, so there
is nothing to change in the <a href="gm_proces.html#iP_0"><big><tt>iP</tt></big></a>
and <a href="gm_proces.html#iTC_0"><big><tt>iTC</tt></big></a>
iterators. The <a href="gm_proces.html#iNv_0"><big><tt>iNv</tt></big></a>
iterator
should usually be set the same as the last field of the "parent" SysEq
record
key, i.e. left as 1, 1, 0 in this case. <br>
<br>
The<b> </b><a href="gm_proces.html#iNu_0"><big><tt>iNu</tt></big></a>
iterator should usually contain the range ( 0 to 0.3 mol) and the
linear
increment (0.01 mol) for additions the titrant, in our case, CO<sub>2</sub>
to bulk composition of the parent system. &nbsp;So, set <big><tt>iNu</tt></big>
to 0, 0.3 and 0.01. <br>
<br>
After you have set the iterators, what remains is to write up the
process simulation and the data sampling <a href="gmscript.html">math
scripts</a>.&nbsp;</span> <br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"></span></p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_MATH_SCRIPT"></a><font
 face="Helvetica, Arial, sans-serif">4.3. Writing Process Simulation
Math Script&nbsp;</font></h3>
<p><span style="font-family: helvetica,arial,sans-serif;"> A&nbsp;large
(still empty) field at the bottom of "Page 1" of the "Process" window
should
contain a math script that tells the program what and how to change
during
the process simulation. To facilitate writing of such scripts, the GEMS
code
is provided with the <a href="gm_sdref.html">"Template script library"</a>,
accessible via the "Help" "Scripts..." menu command or the <big><tt>F3</tt></big>
keystroke. <br>
</span></p>
<p><span style="font-family: helvetica,arial,sans-serif;">In the case
of
present example, the simulation script must change step-by-step the
addition
of CO<sub>2</sub> to bulk composition of the "parent" system. The
easiest
way to do it is to use <a href="gm_proces.html#cNu"><big><tt>cNu</tt></big></a>
- a work cell connected to the <big><tt>iNu</tt></big> process
iterator.
When the process simulator runs, it first sets <big><tt>cNu</tt></big>
equal
to <big><tt>iNu[0]</tt></big> and then automatically increments the <big><tt>cNu</tt></big>
cell by&nbsp; <big><tt>iNu[2]</tt></big></span><span
 style="font-family: helvetica,arial,sans-serif;"> value until it
becomes greater than</span><span
 style="font-family: helvetica,arial,sans-serif;"><big><tt> iNu[1]</tt></big>,
or the maximum total number of steps (31 in this case) is reached. So,
for now, the following simple script will do the requested job: <br>
</span></p>
<blockquote><big><tt>$ Check if not zero</tt></big><br>
  <big><tt>cNu =: ( cNu? cNu: 1e-6 );</tt></big><br>
  <big><tt>$ Store for plotting</tt></big><br>
  <big><tt>modC[J] =: cNu;</tt></big><br>
  <big><tt>$ Change composition of J-th system </tt></big><br>
  <big><tt>xa_[{CO2}] =: cNu;</tt></big><br>
  <big><tt>$ End </tt></big><br>
</blockquote>
<p><big><font face="Helvetica, Arial, sans-serif"><small>Lines
beggining
with "$" are comments. The first operator checks if cNu contains zero
(the
first simulation point in our case) and, if so, replaces it by 1e-6
(mol)
in order to prevent the program from eliminating carbon and its species
from
the CSD. The second operator stores additions of CO<sub>2</sub> in J-th
simulation point for the subsequent plotting of results (the </small></font><small><big><tt>J</tt></big>
<font face="Helvetica, Arial, sans-serif">index is changed
automatically
by the program, starting from 0).</font>&nbsp; <font
 face="Helvetica, Arial, sans-serif"> Finally, the last operator sets
the value contained in</font> <big><tt>cNu</tt></big><font
 face="Helvetica, Arial, sans-serif"> for the J-th CSD into the</font> <a
 href="gems_bcc.html#xa_"><big><tt>xa_</tt></big></a> <font
 face="Helvetica, Arial, sans-serif">vector for PCO quantities, visible
on the "Compos" page of "System" window. We used the same input vector
previously, to add directly 1000 g H<sub>2</sub>O, 0.1 mol Ca(OH)<sub>2</sub>
and so
on. <br>
</font></small></big></p>
<p><big><small><font face="Helvetica, Arial, sans-serif">Now, you can
copy the above script and paste it into the</font> <big><tt>P_expr</tt></big>
<font face="Helvetica, Arial, sans-serif">field on Page 1 of the
"Process"
window. Alternatively,&nbsp; you can type the script right there, or
edit
it any time when this Process record is loaded. </font><br>
</small></big></p>
<p><big><tt><br>
</tt></big></p>
<h3><a name="GSM_SET_PROSIM_SAMPLING"></a><font
 face="Helvetica, Arial, sans-serif">4.4. Setting Process Data Sampling</font>&nbsp;</h3>
<p><font face="Helvetica, Arial, sans-serif">There is a convenient
option to run the process simulation and simultaneously plot some
results. We strongly recommend using it, as also intended in this
example. You will need to write another math script (see Page 2 of the
Process window) that will be executed at each simulation step after the
process simulation math script and the
GEM IPM calculation of an equilibrium state. At the beginning, this may
seem
a bit complicated, but after some exercises you will see how much
freedom
the math scripts give you in picking up relevant results out of a vast
amount of calculated numbers. <br>
</font> <br>
</p>
<h4> <a name="GSM_PROSAMPLE_MATH_SCRIPT"></a><font
 face="Helvetica, Arial, sans-serif">4.4.1. Writing Process Data
Sampling Math Script</font></h4>
<p> <span style="font-family: helvetica,arial,sans-serif;">To
facilitate writing of math scripts, the GEMS code is provided with the
"Template script library", accessible via the "Help" "Scripts..." menu
command or the <big><tt>F3</tt></big> keystroke. Press <big><tt>F3</tt></big>
to see the "...Select an appropriate script" dialog</span><span
 style="font-family: helvetica,arial,sans-serif;"> and double-click
there on </span><span style="font-family: helvetica,arial,sans-serif;">a&nbsp;
"<big><tt>mscript-plot-aqueous:0001:proces:</tt></big>" record key in
the
appearing list.</span><span
 style="font-family: helvetica,arial,sans-serif;"> This will open a
SDref window;</span><span
 style="font-family: helvetica,arial,sans-serif;"> &nbsp;the template
script itself is visible on Page 2 of this window (scroll down
to end of the text).&nbsp; </span></p>
<p><span style="font-family: helvetica,arial,sans-serif;"> Read the
comments, then mark the script (with left mouse key pressed) as shown
above, and
press &nbsp;<big><tt>Ctrl-C</tt></big> &nbsp;to take it into clipboard.
Then switch back to Page 2 of the Process window and paste (<big><tt>Ctrl-V</tt></big>)
the text into the <a href="gm_proces.html#pgExpr"><big><tt>pgExpr</tt></big></a>
field. Edit the script; its final appearance should be like this: </span><br>
</p>
<blockquote><big><tt>$ Abscissa: additions of CO2 in millimoles</tt></big><br>
  <big><tt>xp[J] =: modC[J]*1000; </tt></big><br>
  <big><tt>yp[J][0] =: lgm_t[{Ca}];</tt></big><br>
  <big><tt>yp[J][1] =: lga[{CO2}];</tt></big><br>
  <big><tt>yp[J][2] =: 0 - pH;</tt></big><br>
  <big><tt>$ End<br>
  </tt></big></blockquote>
<p><span style="font-family: helvetica,arial,sans-serif;"> The <a
 href="gm_proces.html#xp"><big><tt>xp</tt></big></a> and <a
 href="gm_proces.html#yp"><big><tt>yp</tt></big></a> arrays (where the
results will be collected) are accessible on the "Graph" page of the
Process window.&nbsp; The <big><tt><a href="gems_sys.html#lgm_t">lgm_t</a>,<a
 href="gems_sys.html#lga">lga</a> </tt><small>and</small><tt> <a
 href="gm_proces.html#pH">pH</a></tt></big> data objects can be seen on
pages of the EqDemo window that can be opened by </span><small><font
 face="Helvetica, Arial, sans-serif" size="+1"><small>clicking the </small></font></small><font
 size="+1"><small><font face="Helvetica, Arial, sans-serif"> "Detailed
results" <img src="ordertool.png" alt="Show Eqstat button" height="24"
 width="24"> &nbsp; toolbar</font></small></font><span
 style="font-family: helvetica,arial,sans-serif;"> button on the
"Single
Termodynamic System" dialog. &nbsp;Writing <big><tt>"0 - pH"</tt></big>
instead
of <big><tt>"-pH"</tt></big> is required by the syntax of GEMS math
scripts.
&nbsp;<br>
<br>
You are now ready to run the Process simulator.</span><br>
<br>
</p>
<h4><a name="GSM_RUN_PROSAMPLE"></a><font
 face="Helvetica, Arial, sans-serif">4.4.2. Running Process Simulation
with Data Sampling</font></h4>
<p><span style="font-family: helvetica,arial,sans-serif;">Press the
"Calculate record data" <img
 src="../../../../../../../../C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/kcalc.png"
 alt="b-calc" height="22" width="22"> &nbsp; toolbar button, confirm
saving the Process record to database,
and, for the first time only, answer "No" to an appearing question
about
using the graphics during calculations. <br>
</span></p>
<span style="font-family: helvetica,arial,sans-serif;">When the process
simulation is finished (as indicated on the title line of the Process
window), switch to the "Graph" page to see a table with sampled data: </span>
<p><br>
</p>
<p><br>
<br>
</p>
<h4> <a name="GSM_PLOT_PROSAMPLE"></a><font
 face="Helvetica, Arial, sans-serif">4.4.3. Examining, Plotting and
Printing Sampled Results</font></h4>
<p> <span style="font-family: helvetica,arial,sans-serif;"> Edit names
of the abscissa and ordinate columns as shown above (according to the
data sampling script), and press the "Plot data on graph dialog" <img
 src="../../../../../../../../C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/xpaint.png"
 alt="b-plot" height="22" width="27"> &nbsp; toolbar button when ready.
Confirm saving of the Process database record, and you will see the
graph as shown below.&nbsp;</span><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;"> Even though
the graph already looks not too bad, it is advisable to adjust colors
and axis scales. <br>
Click on the "Customize" button and get in the following dialog:&nbsp;</span><br>
</p>
<p><span style="font-family: helvetica,arial,sans-serif;">Change the
axis intervals, as well as colours and symbols on the plot lines, as
shown above. To change the color, click on a button to the left of the
legend name (e.g. -pH) and get into a line/symbol setup dialog: </span><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">There, you can change
colors, symbols, symbol size (0 - no symbols) and line size (0 - no
line). Click "Ok" when finished to get back to the Customize dialog.
There, click on the "Apply" button to see changes on the plot.&nbsp; </font>
</p>
<p><font face="Helvetica, Arial, sans-serif">Close the Customize dialog
when ready. Now, you can drag and drop with mouse the legend names onto
the plot surface. The plot will look like this:&nbsp;<br>
</font></p>
<p><font face="Helvetica, Arial, sans-serif">You can also click on the
"Fragment" button to see an enlarged part of the diagram (you will have
to drag-and-drop legend names again). </font><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">This graph is not yet
perfect; it would look nicer if -pe is plotted instead of pe. This is
very easy to change. Close the graph and switch to Page 2 of the
Process window. In the </font><big><tt>pgExpr</tt></big> <font
 face="Helvetica, Arial, sans-serif">field, change the last line
&nbsp;to:&nbsp;<br>
</font></p>
<p><big><tt>yp[J][4] =: 0 - pe;&nbsp;</tt></big><font
 face="Helvetica, Arial, sans-serif"><br>
</font></p>
<font face="Helvetica, Arial, sans-serif"> Now, click on the </font><span
 style="font-family: helvetica,arial,sans-serif;">"Calculate record
data" <img
 src="../../../../../../../../C:/DataDK/GEMS2-www/Software/GEMS-PSI/screenshots/kcalc.png"
 alt="b-calc" height="22" width="22"> &nbsp; toolbar button</span><font
 face="Helvetica, Arial, sans-serif"> to run the Process simulation
again,
confirm saving the Process record to database, and press "Yes" to use
the
graphic window during simulation. This time, newly calculated results
(-pe
instead of pe) will be plotted one-by-one as scattered symbols. When
the
simulation run is finished, you will see a plot like this: </font>
<p><font face="Helvetica, Arial, sans-serif"> To retain newly
calculated
results, close the graph dialog and open it again (while saving the
Process
record to database). Then customise the axis intervals, drag and drop
legend
labels on the plot, and press the "Save image" button to save the graph
as
e.g. a PNG graphic file. When you insert that file into e.g. a Word
document,
it will look there as follows: </font><br>
</p>
<p><font face="Helvetica, Arial, sans-serif">More can be done by
constructing a GtDemo data sampler using SysEq records already
generated in the Process simulation. <br>
You can also "clone" the Process record and easily modify it, as
described in more detail in the Process module manual. </font><br>
</p>
<p><br>
</p>
<h4><a name="GSM_PROFIT_RUN"></a><font
 face="Helvetica, Arial, sans-serif">4.4.4. Running Process Simulation
in Graphic Fitting Mode</font></h4>
<p><font face="Helvetica, Arial, sans-serif">&lt;To be provided
later&gt;</font><font face="Helvetica, Arial, sans-serif"><br>
</font></p>
<p><br>
</p>
<p><br>
<br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<p><tt><br>
<br>
<br>
</tt></p>
<p><tt>&nbsp;<br>
</tt></p>
<p><tt>&nbsp;"Solubility of (Ca,Sr)CO3 as f(X_Sr) at 20 g/L"</tt> <br>
&nbsp; <tt>"Expanding Example 10 from PHREEQC2 users guide"</tt></p>
<p><br>
Below, there is a line of switches which control
operation and data structure of the Process module; click on each
to read tool tips. It's the right moment to think again what the
process simulator must do. <br>
&nbsp; </p>
<p>To see the effect of bulk solid composition on equilibrium
solubility of
Ca and Sr and mole fraction of (Ca,Sr)CO<sub>3</sub> phase(s) at ca. 20
g/L
S/W ratio, we need to "mix"&nbsp; <i>nu</i>&nbsp;&nbsp; grams of CaCO<sub>3</sub>
with (20 - <i>nu </i>) grams of SrCO<sub>3</sub>, incrementing <i>nu</i>&nbsp;
from, say, 0 to 20 with a 1 g step which gives
21 points in total. The rest of the system definitions can be left
the same as in the parent system, because solubility of mixed carbonate
will not exceed a few millimolal, e.g. significant change of S/W ratio
is not likely to occur. The Process module generates new SysEq records
by duplicating ("cloning") the parent system, and then applies
necessary changes to these new records. <br>
&nbsp; </p>
<p>In our (pretty simple) case, it is sufficient to switch off (i.e.,
put minus instead of plus) <tt>PePsts[0,1]</tt> because temperature
and pressure will be kept fixed, but make sure that <tt>PePsts[0,2]</tt>
is on since bulk composition will be changed, and <tt>PePsts[0,4] </tt>is
on - to save the newly created SysEq records to database. <tt>PePsts[0,10]</tt>&nbsp;
must be on because we will provide a math script for modifying bulk
compositions. Put also a minus in <tt>PePvv[0,10]</tt> to always use
the automatic Simplex initial approximation in <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gems_ipm.html">GEM
IPM</a>
calculations. Then proceed to the leftmost counter <tt>Ntxi</tt> and
set there 21 (points to be generated). You may also put&nbsp; 1 into
<tt>PePdim[0,4]</tt> to set one bibliographic reference. Check the
switches
once more and press <tt>"Ok"</tt>. <br>
&nbsp; </p>
<p>Now, you see <tt>Page 1</tt> of the "Process" window with the
record key and the name of the process simulator, but with several
empty
fields, including a multi-line text editor field <tt>P_expr</tt>.&nbsp;
Many variants of the process simulation can be set up using one or more
of three-number column "iterators"&nbsp; <tt>iTm, iNv, iP, iTC, iV,
iTau, ipXi, iNu, ipH, ipe</tt>. Each of those has the following
structure: <br>
&nbsp; </p>
<dl>
  <dd> <tt>&lt;iterator_name&gt;[0]&nbsp; start (initial) value</tt></dd>
  <dd> <tt>&lt;iterator_name&gt;[1]&nbsp; limiting value</tt></dd>
  <dd> <tt>&lt;iterator_name&gt;[2]&nbsp; increment (0 - keep at start
value)</tt></dd>
</dl>
<p><br>
The Process module has also one work cell for each iterator, named <tt>cTm</tt>
(for <tt>iTm</tt> iterator), <tt>cNv</tt> (for <tt>iNv</tt>) and so
on; you can see all these work cells on <tt>Page 2</tt> of the
"Process" window. Contents of the work cells can be changed on every
iteration of the Process Simulator, either
automatically using the start and increment values from the respective
iterator, or by the user-defined math script (see below). The first
five
iterators&nbsp; <tt>iTm, iNv, iP, iTC, </tt>and<tt> iV </tt>are
used&nbsp;
by the program automatically to increment respectively the <tt>cTm,
cNv, cP, cTC, </tt>and<tt> cV </tt>work cells and from these generate
the last five fields of newly-created&nbsp; <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_SysEq">SysEq
record keys</a>.&nbsp; Other iterators are not incremented
automatically and may be used only in the Process math scripts
expressions to
set work variables, such as <tt>cNu</tt>. The full list of iterators,
work cells and other data objects related to the Process Simulators,
which can be used in math scripts, is available in the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/g_useref.html">user's
reference</a> and in the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_proces.html">Process
module documentation</a> files. <br>
&nbsp; </p>
<p>In the&nbsp; <tt>iTm</tt>&nbsp; iterator, it makes sense to put an
increment larger than 1 (at best, 5 or 10) if the process simulation
will change the total bulk composition of the system. The SysEq records
generated by the Process Simulator will then be numbered like 1000,
1010, 1020, ... - this leaves you a possibility of producing more
points in the most interesting parts of the batch sequence later on
(e.g., obtain better resolution near the redox barrier). Please, keep
in mind that the process step counter <tt>Ntxi</tt> has a priority
over iterators - the simulation is finished when <tt>Ntxi</tt> points
are computed, regardless of which limiting values in the iterators are
not yet
reached. <br>
&nbsp; </p>
<p>Now, let us come back to setting the iterator values. First of all,
we need to set constant pressure (1 bar) and temperature (25 <sup>o</sup>C).
To do it, select the&nbsp; <tt>iP</tt>&nbsp; column and put 1 into the
first cell (start value), 1 into second one (end value), and 0 into
third one (increment). Likewise, set the <tt>iTC</tt> column for fixed
25 <sup>o</sup>C. In the <tt>iTm</tt> column, set 1000 in the first,
1200 in second, and 10 in the third cell; this will generate SysEq
records with 1000, 1010, 1020, ..., 1190, 1200 CSD (<u>c</u>hemical <u>s</u>ystem
<u>d</u>efinition) variant numbers in the fourth field of the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_SysEq">SysEq
record key</a>. Finally, set 0 in the first, 20 in&nbsp; second, and 1
in third cells of the<tt> iNu</tt> column, to be used as an
iterator for a master variable&nbsp; <tt>cNu</tt>&nbsp; in the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_proces.html#P_expr">Process
math script</a>. <br>
&nbsp; </p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_MATH_SCRIPT"></a>4.3. Writing Process
Simulation Math Script&nbsp;</h3>
<p>This knowledge must be sufficient for us to write a necessary <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gmscript.html">math
script</a>.
It has to assign current <tt>cNu</tt> value to number of grams of
strontianite ( <tt>xd_[{strontianite}]</tt> ) and <tt>20 - cNu</tt>
to number of grams of aragonite ( <tt>xd_[{aragonite}]</tt>) - see how
we specified 10 grams of each in our <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gemstart.html#SIDEBAR_1">previous</a>
<br>
<tt>"Default:G:CaSrCO3SS:1:0:1:25:0:"</tt> system definition! The math
script must look like this: <br>
&nbsp; </p>
<blockquote><tt>$ Changing Sr/Ca ratio in solid on iteration</tt> <br>
  <tt>cNu =: iNu[0] + J * iNu[2];</tt> <br>
  <tt>xd_[\J{aragonite}] =: 20 - cNu;</tt> <br>
  <tt>xd_[{strontianite}] =: cNu;</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
Enter it into the <tt>P_expr </tt>field on <tt>Page 1</tt> of the
"Process" window (you can also drag mouse to select the text in the
Help browser window, then press <tt>Ctrl-c</tt>, click on the <tt>P_expr
</tt>field and press <tt>Ctrl-v</tt>). In this script: <br>
&nbsp; </p>
<blockquote><tt>'$'</tt>&nbsp; character starts a comment line; <br>
  <tt>J</tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is an
internally changed Process iteration index; <br>
Expression&nbsp; <tt>cNu =: iNu[0] + J * iNu[2];</tt> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
increments<tt> cNu</tt> from 0 to 20 by 1; <br>
Expression&nbsp; <tt>xd_[\J{aragonite}] =: 20 - cNu;</tt> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
assigns 20, 19, ..., 1, 0 grams to the <tt>xd_</tt> vector cell <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for the first occurrence of <tt>aragonite</tt> in the species list.</blockquote>
<br>
The <tt>"\J"</tt> switch tells the program to look for the index
of&nbsp; <tt>aragonite</tt> in the Profile species name list (such
switches will be obsolete in the next version of GEMS). Before
simulations, the DC index is determined and substituted against the
species name (e.g., <tt>xd_[238]</tt>). As some species can be added
or removed to/from the profile later on, writing indices directly into <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gmscript.html">math
scripts</a>
would create incompatibility problems; that is why name preprocessing
has been implemented in GEM-Selektor.&nbsp; Now the Process Simulator
is ready to run. <br>
<p>&nbsp;<br>
</p>
<h3><a name="GSM_PROSIM_RUN"></a>4.4. Running the Process (Batch) GEM
IPM Calculations</h3>
<p> After editing of the process definition fields is finished, press
the&nbsp;<tt> "Calculate"</tt> button or <tt>"Record" "Calculate"</tt>
menu commands to start simulation. You will be asked to save the
Process record to database (to be able to recover it if something goes
wrong with calculations).&nbsp; If the Process math script
contains syntax errors, you may be asked to fix them before the program
can proceed. In our numerical example, you will get warnings that
the program finds more than one "aragonite" and "strontianite" - a
consequence of having two mixed carbonate phases with the same end
member names (two copies of solid solution phase definition are needed
to
simulate phase separation). Just take the first ones and proceed with
calculations. <br>
&nbsp; </p>
<p>During calculations, the "IPM Minimization Progress"&nbsp; dialog is
normally visible, showing the currently processed SysEq record key.
Calculations may take some time if the system is large or the process
simulator generates hundreds of points (depending on computer
performance). When all equilibria are computed, you will see a message
"Process calculation finished OK" in the status line of the "Process: "
window. Press "<tt>Accept</tt>" button, then close the "Process" window
(with save), and proceed with analyzing the results. <br>
&nbsp; </p>
<p>The simplest (but less convenient)&nbsp; way is to examine each
generated equilibrium state (stored in a SysEq record) separately, as a
single system, as described in <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gemstart.html#3_1_4_exam_results">Section
3.1.4</a>. Go into the&nbsp; "Single thermodynamic system" dialog and
press the "Load..." button. In the appearing list, you should
see many entries for the "<tt>CaSrCO3SS</tt>" system, numbered 1000,
1010, 1020 and so on - generated by our process simulator. Click on
(select) any of them - for instance, 1050 - and press "Ok", then open
the "EqDemo" window.&nbsp; There you will see that two carbonate solid
solutions of different compositions are present, with mole fractions
of end members just on the solvus edges, so the system looks pretty
much the same as&nbsp; <tt>"Default:G:CaSrCO3SS:1:0:1:25:0:" </tt>(<a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gemstart.html#SIDEBAR_1">end
of Section 3.2</a>). <br>
&nbsp; </p>
<p>Within the miscibility gap, all equilibria (numbered 1010 to 1080)
will have the same pH and solubility values, only masses of two mixed
phases will differ. Clearly, 4-6 points in this composition region
would be enough; there are only 1 and 2 points left for the one-phase
regions, - quite insufficient to produce complete diagrams. Luckily, in
GEM-Selektor it's easy enough to improve the math script in the Process
simulator definition. Let us try - close the "EqDemo" window and the
"Single Thermodynamic System" dialog, and go back to the "Process"
window. Load there our previously created Process definition record <tt>"Default:G:CaSrCO3SS:0:0:1:25:0:CaSr_r20gL:S:<font
 size="+1">"</font></tt><font size="+1">.</font> <br>
&nbsp; </p>
<p><br>
</p>
<h3><a name="GSM_PROSIM_RESULTS"></a>4.5. Examining Process Simulation
Results</h3>
<p> <br>
</p>
<h3><a name="GSM_INVERSE_TITR"></a>4.6. Setting Process Simulator to
Perform an Inverse Titration Sequence</h3>
<p> &nbsp;<br>
<br>
</p>
<h3> <a name="GSM_PROCESS_MORE"></a>4.7. More About Process Simulations<br>
</h3>
<p> </p>
<p> </p>
<p> </p>
<p><br>
</p>
<p><br>
</p>
<h3><a name="GSM_GTDEMO_SAMPLER"></a>5. Using Graphic/Tabulation Data
Samplers (GtDemo)</h3>
<p><br>
</p>
<h4><a name="GSM_CREATE_GTDEMO"></a>5.1. Creating a GtDemo Sampler&nbsp;</h4>
<p> <br>
</p>
<h4><a name="GSM_GTDEMO_MATH_SCRIPT"></a>5.2. Writing a GtDemo Math
Script</h4>
<p> <br>
</p>
<h4><a name="GSM_RUN_GTDEMO"></a>5.3. Sampling Process Results and
Plotting Graphs</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_EMPIRICAL"></a>5.4. Adding and Plotting Empirical
Data</h4>
<p> <br>
</p>
<h4><a name="GSM_GTDEMO_PRINT"></a>5.5. Printing Sampled Results using
Print Scripts</h4>
<p> </p>
<p> </p>
<p><br>
</p>
<p><br>
<br>
</p>
<h4> 3.2.3 Setting up a GtDemo data sampler</h4>
<p><br>
When many equilibrium states are calculated using the Process
definition to simulate titrations, reaction progress models,
evaporation or temperature/ pressure changes, it is impractical to
print out all the results, pick up and plot them by hand. To facilitate
this crucial step in the interpretation of modeling results, a
special facility is included into GEM-Selektor code.&nbsp; The facility
is called a "GtDemo data sampler" module, which collects the numerical
data by reading records according to a pre-defined sequence of record
keys from the GEMS database. <br>
&nbsp; </p>
<p>Data to extract and to recalculate can be specified in a <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gmscript.html">math
script</a>
text inside GtDemo definition.&nbsp; As in the case of <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_proces.html">Process
simulator</a>, the GtDemo math script is automatically translated and
run every time when the GtDemo module reads a record from the database.
As
a rule, the math script stores any sampled and (optionally)
re-calculated data into GtDemo abscissa vector <tt>x0</tt> and table
(matrix)
object <tt>y0</tt> (up to 20 columns). These data objects are
displayed
on a "GtDemo" window page; can be printed into a text file for
subsequent export to worksheets or&nbsp; high-quality presentation
software;
or plotted directly in a Graph Dialog window. <br>
&nbsp; </p>
<p>Graphs can be customized, zoomed and printed. A sequence of
(user-defined) empirical data points can be kept in the GtDemo record
(optional <tt>xE</tt> and <tt>yE</tt> arrays), shown&nbsp; on the
graph together with the sampled (calculated) data, which is very
convenient for fitting thermodynamic model parameters to experimental
data. Any
number of GtDemo records can be created for sampling different
information from the same set of GEM-Selektor database records. <br>
&nbsp; </p>
<p>To create a <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_gtdemo.html">GtDemo
data
sampler</a>, press the <tt>"Data Sampling and Plotting (GtDemo)"</tt>
button in the "Computation of Geochemical Equilibrium Models" dialog.
In the&nbsp; (empty) "GtDemo" window, as usual, select <tt>"Record"
"Create"</tt> menu commands. A small "GtDemo: Please, enter a new key"
will appear with five edit lines according to the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_GtDemo">GtDemo
record format</a>. <br>
&nbsp; </p>
<p>The first field already contains profile name (<tt>Default</tt>).
The second
field shows what record type (database module) will be sampled, type <tt>"SysEq"</tt>
here. The third field codes thew type of GtDemo sampler, enter <tt>"GT"</tt>
for now. The fourth field contains an identification number, type 0
there
(many GtDemo records can be created for the same list of sampled
records).
The fifth field is the name of GtDemo sampler (up to 16 characters),
type
<tt>"CaSrCO3SS_aq". </tt>Press <tt>"Ok"</tt> when ready. You will see
a list
of database record types; click on "SysEq" to select it, and press <tt>"Ok"</tt>
to proceed. This will show the familiar "Reorganization of Data Fields"
dialog;
to create the first record, press <tt>"Clear all"</tt> button. <br>
&nbsp; </p>
<p>In the appearing "GtDemo: Remake parameters" dialog, first type in <tt>GDname</tt>
and <tt>GDcom</tt> fields as follows: <br>
&nbsp; </p>
<p><tt>Solubility of Ca and Sr at equilibrium with (Ca,Sr)CO3 SS</tt> <br>
<tt>as function of bulk solid X(Sr) at S/W = 20 g/L</tt> <br>
&nbsp; </p>
<p>The idea is to plot total dissolved calcium and strontium (molal) as
function of total mole fraction of Sr in solid phases (i.e. in binary
system). As experimental data in [<a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/g_litref.html#%5B1987PLU/BUS%5D">1987PLU/BUS</a>]
does not discriminate between Ca and Sr, we will also plot a
Ca+Sr line and will compare it with some experimental points. So,
in total we have 3 plots and need 3 columns in the <tt>y0</tt> table
and, say, 7 experimental points and 1 column in the <tt>yE</tt> table.
To set this up, find the <tt>gDimXY[0,1]</tt> cell and enter 3 there,
then enter 7 and 1 into <tt>gDimEf[0,0]</tt> and <tt>gDimEf[0,1]</tt>,
respectively, and turn on (<tt>'+'</tt>) the <tt>GDps[0,0]</tt> flag.
Press <tt>"Ok"</tt> when finished. <br>
&nbsp; </p>
<p>A small "Set template" dialog will appear, just press <tt>"Ok"</tt>
for now. You will see a list of SysEq record keys with a title "
Marking record keys for data extraction". With left mouse clicks,
select all <tt>CaSrCO3SS</tt>&nbsp; record keys numbered from <tt>1000</tt>
to <tt>1200</tt> (as they were set up in the Process definition).
Selected lines in the list are indicated by dark background color.
Press <tt>"Ok"</tt> when ready. You will see the "GtDemo" window (<tt>Page
1</tt>) with empty single- and multi-line editor fields. The largest
one is called <tt>gExpr</tt>, it must contain a <tt>GtDemo</tt> <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gmscript.html">math
script</a>,
written, in principle, in a similar way as that in the <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/gm_proces.html">Process
simulator</a> definition. <tt>gX_Nam</tt> and <tt>gY_Nam</tt> fields
may contain names of abscissa and ordinate axis, respectively (in our
case <tt>"X_Sr"</tt>&nbsp; and <tt>"log_m"</tt>). The <tt>gLnam</tt>
list contains identifiers for the plot lines (columns in the <tt>y0</tt>
array), in case of
our example, enter <tt>"Ca_aq", "Sr_aq"</tt> and <tt>"Ca+Sr"</tt>;
likewise, the <tt>gLnamE</tt> object identifies (plots of) the
empirical
data that the user has entered into columns of the optional <tt>yE</tt>
array (<tt>"Ca+Sr_E"</tt>). <br>
&nbsp; </p>
<p>Now, it's time to write the math script; in GtDemo definition, it
must contain assignments such as <tt>x0[jR] =: ...... ;&nbsp;
y0[jR][0] =: ....; y0[jR][1] =: ...;&nbsp; ......</tt>&nbsp; Such
operators will put sampled data into lines of the <tt>x0</tt> and <tt>y0</tt>
arrays. In most cases, it is sufficient to describe only how one record
should be sampled using the <tt>jR</tt> index variable which is
automatically changed from 0 to <tt>gDimXY[0,0] </tt>(total number of
sampled records) upon GtDemo module execution. On the right side of
assignment operators, you can use any (indexed) <a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/g_useref.html">data
object
labels</a> which refer to meaningful numerical data existing at present
in GEM-Selektor program memory. These labels are seen on any module
page screen forms (e.g., "EqDemo") or window status lines. <br>
&nbsp; </p>
<p>For our example (Ca-Sr carbonate SSAS system), the following script
will do the job: <br>
&nbsp; </p>
<blockquote><tt>$ Determine Sr mole fraction in solid</tt> <br>
  <tt>x0[jR] =: ( b[\i{Sr}] - bXa[0][{Sr}] ) /</tt> <br>
  <tt>&nbsp; ( b[{Sr}] - bXa[0][{Sr}] + b[{Ca}] - bXa[0][{Ca}] );</tt> <br>
  <tt>$ Collect total dissolved Ca and Sr in log
molal</tt> <br>
  <tt>y0[jR][0] =: lgm_t[{Ca}];</tt> <br>
  <tt>y0[jR][1] =: lgm_t[{Sr}];</tt> <br>
  <tt>$ Calculate log of sum of dissolved Ca and
Sr</tt> <br>
  <tt>y0[jR][2] =: lg( 10^lgm_t[{Ca}] + 10^lgm_t[{Sr}] );</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
You can see the contents of data objects&nbsp; <tt>b&nbsp;</tt>
and&nbsp; <tt>lgm_t</tt> in the "EqDemo" window, page <tt>EqIC</tt>
and the bXa&nbsp; data object - in the "Multi" window, page <tt>Phas D</tt>.
Both are accessible from the "Single Thermodynamic System" dialog,
buttons <tt>"Dual solution..."</tt> and <tt>"Details for experts"</tt>,
respectively. Every time when a new SysEq record is loaded by the
GtDemo module, the script will be executed, the <tt>jR</tt> index
automatically incremented, and the next record loaded from the
database. Enter the script (or copy it using clipboard) into <tt>gExpr</tt>
editor field on <tt>Page 1</tt> of the "GtDemo" window and press the <tt>"Calculate"</tt>
icon or <tt>"Record" "Calculate"</tt> menu commands (save the GtDemo
record to database upon warning). <br>
&nbsp; </p>
<p>If there were no syntax errors in the math script, the program will
silently spend some seconds for loading SysEq records one-by-one and
calculating the data. Finally, the "GtDemo" window title will show a
message "Calculation finished OK". Now, we can examine and plot the
results; to do it, select <tt>Page 2</tt> of rhe "GtDemo" window.
There
you will see <tt>x0</tt> and <tt>y0</tt> arrays filled with sampled
numbers, as well as <tt>xE </tt>and <tt>yE</tt> columns still
containing
zeros. From the <tt>"Record"</tt> menu, the <tt>"Print"</tt> item
exports data to ASCII print files, and the <tt>"Plot"</tt> item opens
the Graph Dialog window where <tt>y0</tt> and <tt>yE</tt> columns are
plotted as lines (or scattered symbols, or both) against the <tt>x0
(xE)</tt> abscissa. <br>
&nbsp; </p>
<p>Select the <tt>"Record" "Plot"</tt> menu commands. You will be
prompted to save the GtDemo record to database (it is always wise to do
it).&nbsp; A graph window entitled as the "GDname" line appears. You
can see what each line means in the "Legend" on the right side. A The <tt>"Fragment"
</tt>button will display an enlarged fragment of the graph. A <tt>"Print..."</tt>
button sends the plot window contents to standard printing device (in
this version, may still be under construction). Line thickness, color
and symbols can be customized in the Legend Dialog which appears on
pressing the <tt>"Customize..."</tt> button on the graph. There you
can set up scales for abscissa and ordinates, select axis type (the
number of grid lines), define size and position of zoomed fragment, and
set symbol shape, size and color, as well as
line thickness and color, for each ordinate. The <tt>"Background"</tt>
button lets you specify a background color for the graph (not saved
with
other contents of GtDemo record in this version). <br>
&nbsp; </p>
<p>If you have entered some experimental data into <tt>xE</tt> and <tt>yE</tt>
arrays, their symbols and colors can be customized separately on the
Legend dialog. For capturing a ready GtDemo graph window into <tt>*.jpg</tt>,
<tt>*.png</tt> or other graphic file formats, we
recommend using a <tt>ksnapshot</tt> utility program (a Linux KDE
application) or Win32 <tt>Alt-PrtSc</tt> key combination to send the
picture to clipboard, from where it can be inserted into an image
editor (e.g., Microsoft(R) Photo Editor). <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_2_5_export_results"></a>3.2.5 Exporting sampled results</h4>
<p><br>
To export data sampled by a GtDemo definition, open the "GtDemo"
window, load a record of interest, and select <tt>"Record" "Print"</tt>
commands from the menu. You will have to answer questions such as which
format (tabular or plain text) to use, and whether to print math script
together with the data. Then a standard "File selection" dialog appears
where you can enter the file name and choose the directory path to save
the file. This ASCII file can then be edited using any standard text
editor and imported into Microsoft(R) Excel
or other commercial presentation programs. We are going to provide
output filters for exporting data into some important formats in the
future versions of GEM-Selektor. <br>
&nbsp; </p>
<p>Let us return to our numerical example - (Ca,Sr)CO<sub>3</sub> SSAS
system, - and examine the plot of aqueous solubility data in more
details. Please, open the "GtDemo" window, load the previously created
record keyed "<tt>Default:SysEq:GT:0:CaSrCO3SS_aq:"</tt>, and
plot it (<tt>"Record" "Plot"</tt> menu commands). We see on the plot
that Sr_aq steeply increases from less than 1e-7 to about 1e-3 molal
at 1e-6 &lt; <i>X</i> (Sr) &lt; 0.005 and then Sr_aq and Ca_aq remain
constant along the miscibility gap where compositions of both solid
solution phases are fixed at the spinodal mole fractions up to <i>X</i>
(Sr) = 0.86. At higher mole fractions of Sr in the solid, Sr_aq
increases
up to the solubility of pure strontianite (4.5 mmolal) while Ca_aq goes
below 1e-6 molal. <br>
&nbsp; </p>
<p>Let us see how the calculated total dissolved Ca+Sr fit with the
experimental data of Plummer and Busenberg [<a
 href="../../../../../../../../C:/GEMS2test/program/doc/html/g_litref.html#%5B1987PLU/BUS%5D">1987PLU/BUS</a>].
To save time, enter into <tt>xE</tt> and <tt>yE</tt> columns on <tt>Page
2</tt> of the "GtDemo" window only seven points from their Table 4 for
25 <sup>o</sup>C at nearly one bar p(CO<sub>2</sub>): <br>
&nbsp; <br>
&nbsp;
<table border="3" cellpadding="3" cellspacing="3">
  <tbody>
    <tr>
      <td><tt>X(Sr),xE</tt></td>
      <td><tt>0.0083</tt></td>
      <td><tt>0.114</tt></td>
      <td><tt>0.411</tt></td>
      <td><tt>0.565</tt></td>
      <td><tt>0.859</tt></td>
      <td><tt>0.925</tt></td>
      <td><tt>0.998</tt></td>
    </tr>
    <tr>
      <td><tt>Solubility</tt></td>
      <td><tt>10.81</tt></td>
      <td><tt>11.58</tt></td>
      <td><tt>10.57</tt></td>
      <td><tt>8.72</tt></td>
      <td><tt>5.56</tt></td>
      <td><tt>5.13</tt></td>
      <td><tt>4.72</tt></td>
    </tr>
    <tr>
      <td><tt>log(solub.),yE</tt></td>
      <td><tt>-1.966</tt></td>
      <td><tt>-1.936</tt></td>
      <td><tt>-1.976</tt></td>
      <td><tt>-2.059</tt></td>
      <td><tt>-2.255</tt></td>
      <td><tt>-2.290</tt></td>
      <td><tt>-2.326</tt></td>
    </tr>
  </tbody>
</table>
</p>
<p>When ready, save the record to database and plot the data again (<tt>"Record"
"Plot"</tt>). Customize the graph (make scattered symbols of size 5,
line type 0 for the experimental points). The experimentally determined
total solubilities are significantly less than our model predictions at
total 0.6 &lt; <i>X</i> (Sr) &lt; 0.9, implying either inhibition of
phase separation in this region or insufficient equilibration time in
the experiments. <br>
&nbsp; </p>
<p>It is now interesting to see how compositions of both solid solution
phases change with total <i>X</i> (Sr) in solid. It is easy - we just
have to "clone"&nbsp; the previously created GtDemo record and change
some parts in the sampler definition. In the "Record" menu, select <tt>"Save
as"</tt> , change the record key to "<tt>Default:SysEq:GT:1:CaSrCO3SS_sx:"</tt>,
press <tt>"Ok"</tt> and then select <tt>"Record" "Remake"</tt> menu
item. Select "SysEq" in the appearing list, press <tt>"Ok"</tt> and
again <tt>"Remake"</tt> button. Now we need four lines for mole
fractions of two end members in two phases, and we will not plot any
experimental points. So, find the <tt>gDimXY[0,1]</tt> cell and enter
6 there, then enter zeros into <tt>gDimEf[0,0]</tt> and <tt>gDimEf[0,1]
</tt>fields, and turn off (to <tt>'-'</tt>) the <tt>GDps[0,0]</tt>
flag. Press <tt>"Ok"</tt> when finished. The record key template and
list of SysEq record keys appear again, all the keys are already
selected, simply press <tt>"Ok"</tt>. In the "GtDemo" window, change
GDname field to: <br>
&nbsp; </p>
<blockquote><tt>Mole fractions of Ca and Sr end members in SS phases</tt></blockquote>
<p><br>
Put <tt>"Mol fr."</tt> to <tt>gY_Nam</tt> field.
Six entries in <tt>gLnam</tt> list can be changed to <tt>"X1Ca",
"X1Sr", "X2Ca", "X2Sr", "mX1,g", "mX2,g". </tt>There are many
ways to write a math script for picking up mole fractions of solid
solution end members; here is just one of them, in tune with the
previous
script: <br>
&nbsp; </p>
<blockquote><tt>$ Determine total Sr mole fraction % in solid</tt> <br>
  <tt>x0[jR] =: ( b[\i{Sr}] - bXa[0][{Sr}] ) *100 /</tt> <br>
  <tt>&nbsp; ( b[{Sr}] - bXa[0][{Sr}] + b[{Ca}] - bXa[0][{Ca}] );</tt> <br>
  <tt>$ Collect % mole fractions of Ca and Sr in
SS phases</tt> <br>
  <tt>y0[jR][0] =: Wxx[\j{oxygen}+1]*100;</tt> <br>
  <tt>y0[jR][1] =: Wxx[{oxygen}+2]*100;</tt> <br>
  <tt>y0[jR][2] =: Wxx[{oxygen}+3]*100;</tt> <br>
  <tt>y0[jR][3] =: Wxx[{oxygen}+4]*100;</tt> <br>
  <tt>$ Masses of SS phases in grams</tt> <br>
  <tt>y0[jR][4] =: phM[2];</tt> <br>
  <tt>y0[jR][5] =: phM[3];</tt> <br>
  <tt>$ End</tt></blockquote>
<p><br>
<tt>Wxx</tt> is the data vector containing calculated mole fractions
for species in multi-component phases. The <tt>oxygen</tt> gas stays
in the DC list just before aragonite end member of the first solid
solution phase, and this name is used in the script
to avoid warnings that there are two species named "<tt>aragonite</tt>".
<tt>phM</tt> is a vector containing masses of phases (see <tt>EqPh</tt>
page of "EqDemo" window). Put this script into <tt>gExpr</tt> field
(remove old contents before) and run the data sampler by clicking on
the <tt>"Calculate"</tt> icon. When finished, plot the data and
customize the graph (assign different colors to lines, adjust the grid
and so on). <br>
&nbsp; </p>
<p>Take a look first at the <tt>"mX1,g" </tt>and<tt> "mX2,g"</tt>
lines showing amounts of Ca-strontianite and Sr-aragonite phases,
respectively. Both phases co-exist in a wide region of total <i>X</i>
(Sr)&nbsp; values from 0.5 to 86 %, where the quantity of the first one
increases and that of the second one decreases, while mole fractions of
end-member remain fixed (i.e. fill out a miscibility gap at very low Sr
content in aragonite and ca. 14% CaCO<sub>3</sub> in strontianite).
At&nbsp; <i>X</i> (Sr) = 86%, the Sr-aragonite phase disappears and
mole fractions of end-members in Ca-strontianite change linearly
towards composition
of pure strontianite; quantity of this phase now practically remains
constant. <br>
&nbsp; <br>
</p>
<p><br>
</p>
<h2><a name="GSM_EXTEND_PROJECT"></a>6. Extending Modelling Project
Database</h2>
<p><br>
</p>
<h3><a name="GSM_DATA_OVERRIDE"></a>6.1. Overriding Database Records
for Species
and Phases</h3>
<p><br>
</p>
<h3><a name="GSM_ADD_SPECIES"></a>6.2. Adding New Dependent Components
(Species)</h3>
<p><br>
</p>
<h4><a name="GSM_ADD_DCOMP"></a>6.2.1. Adding DComp Records</h4>
<p><br>
</p>
<h4><a name="GSM_SET_BIBLIOREF"></a>6.2.2. Setting Up a Bibliography
Reference</h4>
<p> <br>
</p>
<h4><a name="GSM_ADD_REACDC"></a>6.2.3. Adding ReacDC Records&nbsp;</h4>
<p><br>
</p>
<h4><a name="GSM_RUN_RTPARM"></a>6.2.4. Tabulating T,P Corrections for
Thermodynamic Data (RTParm Records)&nbsp;</h4>
<p><br>
</p>
<h4><a name="GSM_RTPARM_MATH_SCRIPT"></a>6.2.5. Modifying a RTParm
Print Script</h4>
<p> </p>
<p> </p>
<p><br>
</p>
<h3><a name="GSM_ADD_PHASE"></a>6.3. Adding New Phase Definitions</h3>
<p><br>
</p>
<h4><a name="GSM_ADD_SINGLE"></a>6.3.1. Creating a Single-Component
Phase Record</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_IDEAL"></a>6.3.2. Creating an Ideal Solution Phase
Record</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_NONIDEAL"></a>6.3.3. Creating a Non-Ideal Solution
Phase Record</h4>
<p><br>
</p>
<h4><a name="GSM_PHASE_MATH_SCRIPT"></a>6.3.4. Writing Math Script for
a Non-Ideal
Mixing Model</h4>
<p><br>
</p>
<h4><a name="GSM_ADD_SORPTION"></a>6.3.5. Creating a Sorption Phase
Record </h4>
<p><br>
</p>
<h3><a name="GSM_ADD_COMPOS"></a>6.4. Adding New PCO (Compos) Records</h3>
<p><br>
</p>
<h3><a name="GSM_GEMS_DB_MORE"></a>6.5. More About Management of GEMS
Databases</h3>
<p> <br>
</p>
<h2><a name="GSM_PROJECT_EXTEND"></a>7. &nbsp;Extending the Modelling
Project</h2>
<p><br>
</p>
<h3><a name="GSM_ELEMENTS_DIALOG"></a>7.1. ElementsDialog Options</h3>
<p><br>
</p>
<h3><a name="GSM_PROJECT_COPY"></a>7.2. Copying Records from GEMS
Kernel Database</h3>
<p> <br>
</p>
<h3><a name="GSM_EQSTAT_RERUN"></a>7.3. Re-running already calculated
equilibria</h3>
<p><br>
</p>
<h3><a name="GSM_PROJECTS_MORE"></a>7.4. More About Modelling Projects</h3>
<p><br>
</p>
<h2><a name="GSM_MOD_SORPTION"></a>8. Modelling Systems with Sorption
Phases</h2>
<p><br>
</p>
<h3>8.1.&nbsp;</h3>
<p><br>
</p>
<h3>8.2.&nbsp;</h3>
<p><br>
</p>
<h2><a name="GSM_HOWTO_PROCEED"></a>9. How to Proceed&nbsp;</h2>
<p> </p>
<p> </p>
<p><br>
</p>
<br>
<h3> <a name="3_3_extend_tdbase"></a>3.3 Extending Thermodynamic
Database</h3>
<p><br>
What to do if you have reached a conclusion that an aqueous complex or
solid phase are missing in the system profile you worked with? Or
you do not like some thermodynamic data in the GEM-Selektor kernel
database and want to replace them? These situations are very typical in
geochemical modelling and may sometimes need a lot of effort to be
resolved. <br>
&nbsp; </p>
<p>In GEM-Selektor, it is easy to do thermodynamic database extensions
and make them available to your system profile, although this requires
some understanding on how the thermodynamic database is organized and
maintained. You may skip the following five paragraphs if you are
already familiar with GEMS thermodynamic data framework. <br>
&nbsp; </p>
<blockquote><a name="TDB_OVERVIEW"></a>The GEM-Selektor thermodynamic
database has four levels of data, kept in the IComp, DComp, ReacDC, and
Phase
record types (chains). The <a href="gm_icomp.html">IComp</a> chain
contains
records defining Independent Components (IC), or stoichiometry units,
which form a common stoichiometry basis for expressing&nbsp;
composition
of chemical systems and species. The IComp symbols (mainly chemical
elements
and charge), and only them, can be used in writing&nbsp; <a
 href="g_useref.html#FORMULA">chemical formulae</a>&nbsp; of&nbsp;
thermodynamic&nbsp; species, or Dependent Components (DC), which are
stored in&nbsp; <a href="gm_dcomp.html">DComp</a>&nbsp; or&nbsp; <a
 href="gm_reacdc.html">ReacDC</a>&nbsp; database records. DC formulae
are automatically processed for calculation of the species molar mass,
formula charge, checking consistency of thermodynamic data, and
producing stoichiometry matrices for calculation of chemical
equilibria. In addition, IComp records contain default valence numbers
of elements to simplify chemical formulae, as well as values of
absolute entropy of elements, needed for conversions between standard
molar Gibbs energy, enthalpy and entropy of chemical species. <br>
&nbsp;
  <p>DComp records keep the formulae and standard state thermodynamic
properties of solid, gas, liquid and aqueous species (DC) in
"thermochemical" format. Namely, it includes the standard molar
properties (or standard partial molal properties) at reference pressure
and temperature: Gibbs energy <i>G<sup>o</sup></i>&nbsp; and enthalpy <i>H<sup>o</sup>&nbsp;</i>
of formation from IC (chemical elements) at standard states, absolute
entropy <i>S<sup>o</sup>&nbsp;</i> and molar volume <i>V<sup>o</sup></i>
. Optionally, the <a href="gm_dcomp.html">DComp</a> records may
contain
vectors of empirical <i>Cp<sup>o</sup> </i>= <i>f </i>(<i>T </i>),
  <i>V<sup>o</sup> </i>= <i>f </i>(<i>T,P</i> ), equation -of -
state coefficients etc., necessary for <a href="theortdb.html">calculation
of
standard thermodynamic properties at elevated pressures and temperatures</a>.
All the numbers contained in DComp records refer to the stoichiometry
of
this particular species, rather than to its reaction with other
species.
In other words, data in different DComp records are connected only
through
IC stoichiometries of species and information kept in IComp records. <br>
&nbsp; </p>
  <p><a href="gm_reacdc.html">ReacDC</a> records are used for defining
thermodynamic properties of aqueous and surface complexes and minerals
for which thermochemical data are not available or too uncertain. For
such species, only log<i>K</i>&nbsp; of the dissolution, association or
surface complexation reaction is
usually known (often predicted at 25 <sup>o</sup>C or other
temperatures).
Thus, a ReacDC record describes the reaction and its properties (and
also <i>T,P</i>&nbsp; dependence of&nbsp; log<i>K</i> ). Because GEM
algorithms cannot use reactions and stability constants directly for
calculation of equilibria, ReacDC record also provides a full set of
standard
(partial molal) thermodynamic properties for a "new" species, computed
from the properties of the reaction and that of all other species
involved
in the reaction. The "new", reaction-defined compound, actually, gives
a name to the reaction and to the ReacDC <a href="gemstar2.html#P3324">record
key</a>.
Thermodynamic properties of this compound are automatically maintained
consistent
(to that of other species involved into the reaction) at all
temperatures
and pressures. The "involved" species must already exist in the
database
as either <a href="gemstar2.html#P33D3">DComp</a> or other ReacDC
records: a given
ReacDC
definition can refer to other ReacDC records (but not to itself), thus
forming
a "reaction chain" (up to seven levels of recursion are supported). Any
reaction
chain always terminates with a reaction which refers to DComp records
only.
Several&nbsp; <a href="theortdb.html">methods of calculation</a> of
thermodynamic
properties of reaction-defined species at elevated&nbsp; <i>T,P&nbsp; </i>are
available in GEM-Selektor. ReacDC module is a unique feature
of GEMS, to our knowledge, not yet available in full elsewhere.
Accordingly,
the GEM-Selektor database is the first in a sense that thermochemical
data and reactions are used together for any kind of geochemical
modelling
and data consistency is automatically maintained. <br>
&nbsp; </p>
  <p><a href="gm_phase.html">Phase</a> definition records put together
links to input data from both DComp and ReacDC record types. Design of
GEM-Selektor requires that each (even a single- component) phase to be
taken into
calculation of equilibrium states must be&nbsp; described in a separate
  <a href="gm_phase.html">Phase</a> record, with (unique) phase name
appearing in the <a href="gemstar2.html#P3326">Phase record key</a>. <a
 href="gm_dcomp.html">DComp</a> or <a href="gm_reacdc.html">ReacDC</a>
definitions do not contain all information for defining structure and
behavior
of the single- or multi-component phases. In fact, any data describing
the non-ideal mixing behavior of end-members is valid for a particular
model of phase only, and alternative representations are often
possible. The flexible Phase data structure permits formulation of a
large variety of crystalline and dispersed, liquid and gaseous,
adsorption and ion-exchange ideal or non-ideal phases which may occur
in different (geo)chemical systems. Please, note that <a
 href="gm_profil.html">System Profiles</a> in GEMS are
constructed from Phase definitions, i.e. the profile cannot "see" any
DComp
or ReacDC records which are not referred to by at least one Phase
record
accessible to the profile. <br>
&nbsp; </p>
  <p>What does it mean "accessible"? In GEM-Selektor, every database
chain consists of several files, usually located in two places: a
"kernel
database" and a "user's profile" directories. The write-protected
"kernel
database" directory contains IComp, DComp, ReacDC and Phase database
files with more or less "standard" thermodynamic data for major and
many
minor chemical elements; is supplied and installed together with GEMS
program and help files. The user's profile directory is automatically
created
when the user creates a new system profile for his/her modelling
applications;
this is the only place where all the input data provided by the user
and
calculation results can be stored. Any time, the database file can be
linked
in or out of the current database configuration of GEM-Selektor. When a
file is linked in, all the records it contains become "visible" for the
user and the program in record key lists. Accordingly, these records
become
"invisible" and inaccessible after the file has been linked out. New
database
files can be any time created by the user in his profile directory and
linked in, if necessary.</p>
</blockquote>
<p>Although the GEM-Selektor kernel thermodynamic database can be used
for solving many various geochemical problems (see <a
 href="g_tutor.html">Tutorial</a>), almost every study involving
thermodynamic modeling, sooner or later, faces a problem of
inconsistency or incompleteness of thermodynamic data. It is therefore
necessary to have convenient tools to handle the data, check and match
them, and incorporate into equilibria calculations. The tradition,
however, is such that most of modeling codes contain files with
thermodynamic data from published databases but still no tools to work
with the data (except using them for speciation calculations). <br>
&nbsp; </p>
<p>There are some specialized codes such as SUPCRT92 [<a
 href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>] which handle
the thermodynamic database, calculate user-specified reactions, plot
them on diagrams, but they cannot calculate equilibria in
multi-component systems. Moreover, most of speciation programs based on
the Law of Mass Action (LMA) algorithm (like PHREEQC2 [<a
 href="g_litref.html#%5B1999PAR/APP%5D">1999PAR/APP</a>] or MINTEQA2
[1991ALL/BRO] use thermodynamic data exclusively in the form of
reaction equilibrium constants <i>K</i>&nbsp; for the "product"
species plus dependences of <i>K</i>&nbsp;&nbsp; on temperature and/or
pressure. Thermochemical data must be recalculated first into log<i>K</i>&nbsp;&nbsp;
values (e.g., as in EQ3/6&nbsp; [1992WOL]) to be used in such codes.
There are, however, special utility programs PMATCH [1989PEA/AVI] and
PM2SEL
[1999DMY/KUL] which can help in checking the internal consistency
of&nbsp;
thermodynamic data and convert it into different formats. <br>
&nbsp; </p>
<p>Programs based on GEM algorithms (e.g., ChemGeo, GIBBS,
GEM-Selektor), on the contrary, accept only the standard partial
molar(molal) values of Gibbs energy for all species <i>g<sup>o </sup></i>(<i>T,P&nbsp;
</i>), so any data represented as log<i>K</i> (<i>T,P&nbsp; </i>) must
first
be converted to <i>g<sup>o </sup></i>(<i>T,P&nbsp; </i>) values
before
usage in GEM modeling calculations. In this case, it is not easy to
extend
thermodynamic database with consistent data for some new components if
their thermochemical properties are not known. Hence, the structure of
GEM-Selektor database has been designed to help in overcoming these
difficulties.
<br>
&nbsp; <br>
&nbsp; </p>
<blockquote>Example? Diagram?</blockquote>
<p>When you press the "<tt>Thermodynamic Database</tt>" button on
GEM-Selektor Main dialog, you will see a "Thermodynamic Database"
dialog window with six large buttons for accessing the <a
 href="gm_icomp.html">IComp</a>,
<a href="gm_dcomp.html">DComp</a>, <a href="gm_reacdc.html">ReacDC</a>,
<a href="gm_rtparm.html">RTparm</a>, <a href="gm_compos.html">Phase</a>
and <a href="gm_compos.html">Compos</a> module windows, described in
the corresponding manuals. The respective six database chains contain
records with all
the input data necessary for building GEM chemical models, linked
together
into the System Profile ("Default" in this exercise). Part of database
files in each chain belongs to the kernel database which you can use
but
not modify; another part belongs to your own "Default" profile
directory;
all extensions and changes you make can be stored there and only there.
In other words, the kernel database will remain unaffected by your
personal
modifications of thermodynamic data, and your own work will retain
compatibility
with system profiles created by other GEMS users. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_1_override_data"></a>3.3.1 Overriding data in kernel
database</h4>
&nbsp;
<p>&nbsp; </p>
<p>A typical case (especially for experienced modellers) is when the
user refuses&nbsp; thermodynamic data for some species or minerals
provided in the kernel database, but the corresponding records cannot
be changed because they are write-protected. Of course, you could
create a new DComp or ReacDC records with different names for those
species and type in your favorite numbers; after the system profile is
open next time, you should
not forget to switch off the "primarily provided" species from the
SysEq
selection lists. But GEM- Selektor offers&nbsp; a far more elegant way
-
<i>an override mechanism of record selection, </i>which applies to
lists
of record keys in ReacDC, Phase, and Profile/SysEq data structures
only.
<br>
&nbsp; <br>
&nbsp; </p>
<blockquote>In the GEMS database, structurized <a href="gdb_rkey.html">record
key formats</a> are supported.&nbsp; For instance, <a
 href="gm_dcomp.html">DComp</a> and <a href="gm_reacdc.html">ReacDC</a>
record key formats are identical and include four fields - phase state,
group, species name, and comment (data set code). The primary idea of
these formats was to keep long lists of DC record keys in a
well-structurized way as the database chain index is alphabetically
sorted, so that aqueous species are first, gases next, and minerals at
the end. Within aqueous species list, the group name (second field)
usually refers to metal cation or ligand, so all complexes of a given
metal are conveniently held together in the lists. Actually, the
species name is the most important because it may appear
in the (case sensitive) <a href="gmscript.html">math scripts.</a>&nbsp;
The fourth field serves to indicate the original data set from where
the data were taken and (optionally) grade of their uncertainty.</blockquote>
<p><a name="OVERRIDE"></a>The <b><i>override mechanism</i></b>&nbsp;
consists in that the last field of the record key is actually ignored
when the records are loaded during processing of the lists of record
keys in&nbsp; ReacDC, Phase and Profile/SysEq data structures. So, when
the program
finds more than one&nbsp; record with the same record key fields except
the last one,&nbsp; it simply takes in a record keyed alphabetically
the
first and ignores others; no warnings are issued. <br>
&nbsp; </p>
<p>Let us check how the override mechanism works using a celestite (SrSO<sub>4</sub>)
example. From the "Thermodynamic Database" dialog, press the <tt>"Dependent
Components (DComp)" </tt>button. In appearing "DComp" window, click
on the "Show" icon (first from the left) and in the list, select the
line <tt>s:SrSO:celestite:rs:</tt>&nbsp; and press <tt>"Ok"</tt>. You
will see the DComp record for celestite from GEMS kernel database which
contains
data from the USGS dataset [<a href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>]&nbsp;
(indicated by&nbsp; <tt>rs</tt>&nbsp; in the last record key field).
The drawback of this data is absence of <i>Cp<sup>o</sup></i> = <i>f </i>(<i>T
</i>) coefficients and heat capacity value at 25 <sup>o</sup>C (check
on <tt>Page 2</tt> of "DComp" window), thus making temperature
extrapolation impossible. Fortunately, data for celestite is also
available from the SUPCRT92 database [<a
 href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>] with
Majer-Kelly coefficients valid up to 1500 K (both data are compared
below in J/mol): <br>
&nbsp; <br>
&nbsp; <br>
&nbsp;
<table border="1" cols="3" width="73%">
  <tbody>
    <tr>
      <td>Property of celestite</td>
      <td>&nbsp;[<a href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>]&nbsp;</td>
      <td>[<a href="g_litref.html#%5B1992JOH/OEL%5D">1992JOH/OEL</a>]</td>
    </tr>
    <tr>
      <td><i>G<sup>o</sup><sub>298&nbsp;&nbsp; </sub></i>J/mol</td>
      <td>-1339600</td>
      <td>-1340700</td>
    </tr>
    <tr>
      <td><i>H<sup>o</sup><sub>298&nbsp;&nbsp; </sub></i>J/mol</td>
      <td>-1453200</td>
      <td>-1453100</td>
    </tr>
    <tr>
      <td><i>S<sup>o</sup><sub>298&nbsp;&nbsp;&nbsp; </sub></i>J/K/mol</td>
      <td>117.0</td>
      <td>117.152</td>
    </tr>
    <tr>
      <td><i>V<sup>o</sup><sub>298</sub></i> , J/bar</td>
      <td>4.625</td>
      <td>4.625</td>
    </tr>
    <tr>
      <td><i>Cp<sup>o</sup><sub>298&nbsp; </sub></i>J/K/mol</td>
      <td>0</td>
      <td>107.8</td>
    </tr>
    <tr>
      <td><i>a<sub>0</sub></i></td>
      <td>0</td>
      <td>91.2112</td>
    </tr>
    <tr>
      <td><i>a<sub>1</sub></i></td>
      <td>0</td>
      <td>0.05565</td>
    </tr>
    <tr>
      <td><i>a<sub>2</sub></i></td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<br>
&nbsp; </p>
<p>The SUPCRT92 data for celestite originate from a compilation by
H.Helgeson and others [1978HEL/DEL]; it allows for temperature
extrapolation and provides ca. 0.2 p<i>K</i> unit lower solubility of
celestite at 25 <sup>o</sup>C, compared to the data from [<a
 href="g_litref.html#%5B1995ROB/HEM%5D">1995ROB/HEM</a>], as seen from
the difference in values of&nbsp; <i>G<sup>o</sup><sub>298</sub></i> .
<br>
&nbsp; </p>
<p>To use SUPCRT92 data for celestite in equilibria calculations,
select
<tt>"Record" "Save As"</tt> menu commands in order to create a new <a
 href="gm_dcomp.html">DComp</a> record with identical first three key
fields and an alphabetically higher fourth field. A small dialog
entitled "DComp: Insert new record keyed" appears, with the&nbsp; <tt>s:SrSO:celestite:rs3:
</tt>record key disassembled into four editor lines. Change only the
last (fourth) line from&nbsp; <tt>"rs3"</tt> to <tt>"h78"</tt> (or
any other alphabetically preceding value) and press <tt>"Ok"</tt>.&nbsp;
You will see a selection list entitled "Choose database file to put a
record..." with DComp database file names, currently linked to GEMS.
Select a&nbsp; <tt>dcomp.Default </tt>file (other files belong to the
kernel database and are write-protected) and press <tt>"Ok"</tt>. <br>
&nbsp; </p>
<p>Now, the DComp window appears again with previous contents, but
under
different record key. Enter data from the above table (right column)
into
<tt>Page 1</tt> there (heat capacity coefficients and their validity
temperature
interval into <tt>Page 2</tt>). Change reference in dSDref field on <tt>Page
1</tt> to <tt>"Helgeson_ea:1978:pap:".</tt> Press <tt>"Calculate"</tt>
icon
(or <tt>F9</tt>). A small dialog with a question "Calculate standard
values
..." appears; press<tt> "Yes"</tt> - this will check consistency of
standard
properties and calculate <i>Cp<sup>o</sup><sub>298</sub></i> value for
celestite
from the Majer-Kelly coefficients that you entered on <tt>Page 2</tt>.
If
this value is not 107.83 then the <i>Cp<sup>o</sup></i> = <i>f </i>(<i>T
</i>) coefficients were not entered correctly; if so then check numbers
entered on <tt>Page 2</tt> and&nbsp; repeat calculation. Press <tt>"Save"</tt>
icon when finished. You can also perform data restoration and
consistency checks; for instance, put "Empty" value (`) into the <tt>H0d[0]</tt>
cell and press <tt>"Calculate"</tt> button. <br>
&nbsp; <br>
&nbsp; </p>
<p>Upon the next calculation, any reference to celestite in ReacDC,
Phase records and Profile/SysEq structures will operate with your new
data
for celestite, without any furtner reconfiguration. <br>
&nbsp; </p>
<p>A little bit more complicated change is needed when you wish to
replace <a href="gm_dcomp.html">DComp</a> data for a mineral but you
have only reaction logK and can create <a href="gm_reacdc.html">ReacDC</a>
record only. This requires to override <a href="gm_phase.html">Phase</a>
definition which refers to this species: just copy it (using a "Record"
"Save as"
menu command) with alphabetically higher last record key field into
your
<tt>phase.&lt;profilename&gt;.pdb</tt> file (). Then remake new phase
definition so that it would point to your own ReacDC record. Done! <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_2_insert_new"></a>3.3.2 Inserting new species and
phases</h4>
<p><br>
Second typical (and not so rare) case is that, after some modeling
sessions, you have reached a conclusion that a mineral and/or an
aqueous complex,&nbsp; which in reality most probably define measured
metal concentrations, are missing from your modeling system. There is
nothing unusual - no thermodynamic database is complete, not even the
GEM-Selektor kernel database. It is more important to have effiicient
tools for extending your database and system formulations. Such tools
are at your disposal! <br>
&nbsp; </p>
<p>The simplest case is adding aqueous or gaseous species if your <a
 href="gm_profil.html">system profile</a> uses default (automatically
assembled during opening of the profile) aqueous and gas phases. All
you have to do is to collect thermodynamic data and create missing <a
 href="gm_dcomp.html">DComp</a> and/or <a href="gm_reacdc.html">ReacDC</a>
records in database extension files in your profile directory. We
recommend keeping up with the style of record keys used in the kernel
database. These new species will be taken into all your SysEq
definitions when
you select the "Computation of Equilibria" mode and open your profile
next time (press "Ok" on warnings about detection of your newly
inserted
species). <br>
&nbsp; </p>
<p>Please, do not forget to re-calculate all equilibria already stored
in SysEq records in your profile! The program automatically updates
indexation in <a href="gm_syseq.html">SysEq</a> records after some
species were
excluded or added from/to the system profile, but it cannot decide in
which cases these species can affect modelling results, so this is left
to your discretion. <br>
&nbsp; </p>
<p>If you wish to add mineral phases to your system, first check
whether
the respective DComp records are available in the kernel database -
Phase
definitions are provided there only for the most commonly used
minerals.
If this is the case, simply create missing <a href="gm_phase.html">Phase
definition</a> records. If not - then create <a href="gm_dcomp.html">DComp</a>
or <a href="gm_reacdc.html">ReacDC</a> record, enter thermodynamic
data,
and save the record in one of the database extension files in your
profile
directory (best is to load some of the existing records and use them as
templates
by applying "Record" "Save As" menu command). Then&nbsp; create a new
Phase record (single- or multi-component phases) and remake it to point
to the new DC record. New phases and components will be automatically
inserted into System Profile lists upon the next opening of the
profile. Do not forget to recalculate those <a href="gm_syseq.html">SysEq</a>
records (system definitions) in which you deem the new phases to be
stable! <br>
&nbsp; </p>
<p>One important remark about non-aqueous and non-gaseous phases and
their components: the system profile is assembled by picking up all
records available in the current Phase database chain (with due regard
to the
override mechanism). Only those <a href="gm_dcomp.html">DComp</a> and
<a href="gm_reacdc.html">ReacDC</a> records will be selected that are
referred to in <a href="gm_phase.html">Phase</a> records. This means
that some species or minerals in your database extension may not be
used in equilibria calculations if you (on purpose or by chance) did
not include them into Phase record lists. <br>
&nbsp; </p>
<p>Creating definitions of single component condensed phases is by far
the simplest task because such a definition does not include any math
script equations and refers only to one species (the system profile <a
 href="gemstar2.html#OVERRIDE">override mechanism</a> applies for
loading
DComp/ReacDC data referred to in <a href="gm_phase.html">Phase
definitions</a>). In a Remake configuration window which comes after
you have specified the
new <a href="gdb_rkey.html#dbm_Phase">Phase record key</a>, check that
<tt>"NNNNNN"</tt> is entered into<tt> p_solt</tt>&nbsp; fields with <a
 href="g_useref.html#NONIDTYPES">codes for non-ideality phase types;</a>&nbsp;
either of <tt>"l", "s"</tt> or <tt>"d"</tt> code stays in the <tt>Ph_Ps[0,0]</tt><a
 href="g_useref.html#PHASETYPES">phase class field</a>, and press "Ok".
Then select one species from DComp or ReacDC record lists that appear
later. Type in the phase name and check that <tt>"O"</tt> (single
component) code is present in the <tt>PhDCC</tt> (species class)
field. Finally, save the new phase definition record into one of your
profile extension database files. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_3_check_trends"></a>3.3.3 Checking T,P trends for
new species</h4>
<p><br>
When thermodynamic data are entered into <a href="gm_dcomp.html">Dcomp</a>
records, or new <a href="gm_reacdc.html">ReacDC</a> definitions are
constructed, misprints
and errors can be introduced. Some of them are automatically detected
by Dcomp and ReacDC modules, i.e. such errors incomplete or
inconsistent standard state data, wrong formula stoichiometry,
incorrect charge; the corresponding diagnostic messages are then
issued. Some other errors can be detected only when a series of
thermodynamic data for varying <i>T,P</i>&nbsp;&nbsp; is computed and
plotted on graphs. Thus, the RTparm module and window
screen forms are provided for facilitating the process of
"debugging"&nbsp;
thermodynamic data and their <i>T,P</i>&nbsp;&nbsp; dependencies for
individual species. <a href="gm_rtparm.html">RTparm</a> module takes
input data from Dcomp or ReacDC record with the four first fields same
as in the <a href="gdb_rkey.html#dbm_RTParm">RTparm record key</a>.
The <a href="gemstar2.html#OVERRIDE">override mechanism</a> does not
apply to
RTparm lists in order to make it possible to compare different
representation of temperature-pressure trends for one species. <br>
&nbsp; </p>
<p>Several RTPARM records can be created for one DCOMP or REACDC
record,
and up to four such records can be plotted together on graphs, e.g.,
for
comparison of different temperature extrapolations. The RTPARM
function,
taken together with flexibility of DCOMP and REACDC definitions
implemented
in GEMS, provides a new level of matching and user's extension of
thermodynamic
database, and can save a lot of time and effort in putting together
various
data needed for modeling systems of environmental geochemical interest.
Since
the same DCthermo() and RCthermo() routines are used in both RTPARM and
<a href="gemstar2.html#P3250">System Profile</a> calculations, the
tests done by
RTPARM will
make you confident that nothing unexpected can happen with
thermodynamic data
during calculation of equilibria at non-ambient temperatures and
pressures. <br>
&nbsp; </p>
<p>As usual, new RTPARM calculations are performed in GEMS by creating
new records. In a Remake configuration window (invoked by <a
 href="gemstar2.html#P333R2">Remake</a> or <a
 href="gemstar2.html#P333R3">Create</a> commands),
the user can specify how many points for temperature and pressure will
be calculated, which thermodynamic data collected and how they will be
displayed on four plots. This is done using flags and switches
(equipped with help messages popping up at mouse pointer, as usual).
After pressing OK, the RTPARM
screen form appears again, there minimum, maximum temperature-pressure
and their increments can be specified if different from default (0 to
375
<sup>o</sup>C in 15 <sup>o</sup>C increments at P<sub>SAT</sub>). <br>
&nbsp; </p>
<p>Calculations are performed&nbsp; with <a href="gemstar2.html#P333R4">Calculate</a>
command; when finished, up to four graphs are displayed on <tt>"Record"
"<a href="gemstar2.html#P333R8">Plot</a>"</tt> menu command and can be <a
 href="gemstar2.html#P3290">customized</a> as in <a
 href="gemstar2.html#P3280">GTDEMO</a>
record. The calculated data can also be printed into a text file using
a <tt>"Record" "<a href="gemstar2.html#P333R9">Print</a>" </tt>command.
<br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_4_create_PCO"></a>3.3.4 Creating Predefined
Composition Object (PCO) definitions</h4>
<p><br>
A useful extension of your modeling tollbox is creating GCO definitions
(<a href="gemstar2.html#P33D2">Compos</a> records) and storing them in
your <tt>/compos.&lt;pname&gt;.pdb</tt>
file. It helps much in setting bulk compositions of systems in a neat
and transparent way, especially for simulation of such processes as
mixing , evaporation, weathering etc. As usual in GEMS, the easiest way
is to
"clone" existing Compos records with <a href="gemstar2.html#P333R3">Create</a>
or <a href="gemstar2.html#P333R6">Save As</a> menu commands, remaking
and re-calculating
them whenever appropriate. The new Compos record keys will be
automatically added to the <a href="gemstar2.html#P3400">System Profile</a>
when
you open it next time. </p>
<p>Let us consider an example of creating a new Compos record for the
kaolinite stoichiometry. First, press "Show" button to get the
record&nbsp; "<tt>Kaolinite:MIN:Al2Si2O5(OH)4:</tt>". You will
see&nbsp; a very simple screen where composition of kaolinite is
expressed in moles of chemical elements in the "CI" vector. The
MasVol[0] cell shows kaolinite molar mass in kg, and MasVol[6] displays
the total number of moles of elements per mole of kaolinite. </p>
<p>Try to express the same composition in mole percents of petrogenic
oxides Al<sub>2</sub>O<sub>3</sub>, SiO<sub>2</sub> and H<sub>2</sub>O.
First, execute&nbsp; "Record" "<a href="gemstar2.html#P333R3">Create</a>"
command,
modify
the previous record key as follows: "<tt>Kaolinite1:MIN:Moles_oxides:</tt>"
and press OK. In appearing "Reorganization of data fields" dialog,
press "<tt>Remake</tt>" button. In the next "Compos: Remake parameters"
dialog, turn first switch off and third switch on. In counters to the
right, put zero into fist one and 3 (number of required formulae for
petrogenic oxides) into third counter, and press <tt>OK</tt>. In
c_icbc selection list which appears next, check "Clear All" and then
"Proceed" buttons. </p>
<p>Now, the "Compos::" screen form appears, with empty&nbsp; list of
formulae "formU". Type SiO2 into its first line; Al2O3 into second and
H2O into third line. Now,&nbsp; specify composition of kaolinite in
"CA" vector
(to the right) by entering 2 against SiO2 formula, 1 against Al2O3 and
2
against H2O. These numbers will be interpreted depending on <a
 href="GEMS-Linux-USREF.html#P6104">units of measurement</a> coded in
the&nbsp; "AUcl" vector (in between), and then will be converted to
numbers of moles and added to bulk GCO composition. By default, 'M'
letters (numbers of moles) appear in AUcl. Be careful with MasVol[0]
and MasVol[6] cells because they are used for normalizing the
composition you have specified to certain mass or total number of IC
moles, respectively. MasVol[0] contains total mass of geochemical
object Ms in kg.&nbsp; If 0 or EMPTY value ` were specified by the user
then mass fractions can not be used and Ms will be automatically
calculated from moles or molar (molal) concentrations. A positive value
should be entered in MasVol[0] cell if at least one value in CI, CD or
CA vectors is specified as mass percent&nbsp; '%'&nbsp; in classifiers
CIcl, CDcl or CAcl. In our kaolinite example, type zero into MasVol[6]
and 0.1 into MasVol[0] cells.&nbsp; Now, press "Calculate"&nbsp; to
calculate
100 g of kaolinite stoichiometry (you will see new&nbsp; numbers in the
leftmost "Cm" vector), and "Save" to save the new record to database
(do
not forget to delete this exercise before you open the System Profile
next
time). </p>
<p>&nbsp;It is important that each element of CI, CD or CA vectors (and
their equivalents in SysEq dialog) can be set up in different <a
 href="GEMS-Linux-USREF.html#P6104">units of measurement</a>. This is
very convenient and gives the user an unprecedented freedom in working
with bulk compositions or modifying them. When specifying different
units, one should take care of their base quantities. For example, when
setting molality units, a mass of water-solvent should always be set.
Read carefully all the help lines to MasVol cells for instructions how
to set base quantities and units of measurement correctly. Examination
of available Compos records and some experimentation will give you the
right feeling how&nbsp; to work with GCO records. Negative numbers can
be used in CI, CD and CA vectors as long as they do not produce
negative numbers of moles in the total GCO composition "Cm" vector. <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_5_update_profile"></a>3.3.5 Updating the System
Profile</h4>
<p><br>
This is done automatically when the user enters "Computation of
Equilibria" mode of GEM-Selektor and selects a system profile from the
appearing list. If some records in thermodynamic database have been
created
or deleted, a warning appears in each case. Press "Ok" to confirm
changes or "Cancel" if the record was inserted or deleted by mistake
(in the latter case, you will need to fix the problem before attempting
to open your system
profile again). After insertion of some phases and species into the
profile,
it is usually necessary to re-calculate at least part of <a
 href="gm_syseq.html">SysEq</a> records produced before (and maybe,
also some <a
 href="file:///Users/dimacool/Developer/trunk/gems3/shared/doc/html/gm_proces.html">Process</a>&nbsp;
and <a href="gm_gtdemo.html">GtDemo</a> definitions). <br>
&nbsp; </p>
<p>The usual case for removing some phases from the profile (i.e.
respective Phase records from thermodynamic database) is that, after
all the necessary models have been calculated, it happens that these
phases never appeared in equilibria. Cleaning such phases out helps in
keeping your profile
lists smaller and easier to look through. In this situation, it is not
necessary to re-calculate all the SysEq records because nothing is
going
to change. <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_3_6_rerun_syseq"></a>3.3.6 Re-running already
calculated equilibria</h4>
<p><br>
There are two ways for re-calculating <a href="gm_syseq.html">SysEq</a>
records: (i) one-by-one (from the "Single Thermodynamic System" dialog)
and (ii) batch calculations (re-calculation of <a
 href="file:///Users/dimacool/Developer/trunk/gems3/shared/doc/html/gm_proces.html">Process</a>
definitions, preferable). <br>
&nbsp; <br>
&nbsp; </p>
<p>The one-by-one method is the only possible for the SysEq records
which are "standalone" or used as "parent" systems for Process
definitions. It consists of two steps: (1) Press "Load..." button and
select the record; (2) Press "BCC" and then "IPM" buttons to re-run GEM
IPM module. "Accept" on the IPM Progress dialog will also save updated
SysEq record to database. <br>
&nbsp; </p>
<p>The batch calculation requires first to open the "Process" window,
then load the necessary Process record, and press "Calculate" icon or
menu item to recalculate all SysEq records created by this Process
definition. Re-calculating all GtDemo definitions related to this
process is also
advisable for re-plotting results and looking what changed. <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h3> <a name="3_4_create_profile"></a>3.4 Creating a new System Profile</h3>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_1_select_files"></a>3.4.1 Selecting files from the
kernel database</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_2_configure_profile"></a>3.4.2 Configuring the new
profile</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h4> <a name="3_4_3_create_first_system"></a>3.4.3 Creating the first
chemical system definition</h4>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<h2> <a name="4_howto_proceed"></a>4.&nbsp;&nbsp;&nbsp; How to proceed</h2>
&nbsp;
<p>&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; </p>
<p>We believe that at this point, you already feel how easy it is to
"clone" and change definitions of chemical systems in the GEM-Selektor
profile and immediately see what happens to the equilibrium states.
Later on,
you can work through the Tutorial to gain a lot more experience. It is
really easy to check various (geo)chemical ideas using GEM-Selektor! <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
&nbsp; <br>
</p>
<hr size="2" width="100%">
<p><br>
</p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
