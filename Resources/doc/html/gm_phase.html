<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <meta name="GENERATOR" content="Mozilla/4.72 [en] (Win98; I) [Netscape]">
  <title>GEMS3 Phase Module</title>
  <meta name="description" content="Version 2.0.0-PSI">
</head>
<body>
<h1><img src="gems1.png" height="48" align="left" width="48"> <span style="color: rgb(0, 0, 102);"> GEM-Selektor version 3<br>
</span></h1>
<h2>Phase Definitions (Phase) Module<br>
</h2>
<hr style="width: 100%; height: 2px;">
<h3>Contents </h3>
<blockquote>
  </blockquote>
<p><a href="#PHASE_INTRO">1.
Introduction to Phase module</a></p>
<blockquote>
  <p><a href="#PHASE_FORMAT">1.1.
Phase Definition data format</a>
  </p>
  <p><a href="#PHASE_BUILTIN">1.2.
Built-in models of (non)ideal mixing</a></p>
  <p><a href="#PHASE_SCRIPTED">1.3.
Scripted customary
models of non-ideal mixing</a></p>
  <p><a href="#PHASE_CALC">1.4.
Phase module calculations</a>
  </p>
  <p><a href="#PHASE_INTPAR">1.5.
TSolMod rules for interaction parameters</a></p>
</blockquote>
<p><a href="#PHASE_MWIZARD">2.
Phase Create/Remake Wizard</a>
  </p>
<blockquote>
  </blockquote>
<blockquote>
  <p><a href="#WZSTEP_1">2.1.
Phase Wizard Step 1 - Defining the phase and the mode of mixing</a>
  </p>
  <p><a href="#WZSTEP_2">2.2.
Phase Wizard Step 2 - Phase model-specific settings</a>
  </p>
  <p><a href="#WZSTEP_3">2.3.
Phase Wizard Step 3 - Final settings and hints</a></p>
</blockquote>

  
  
<blockquote>
  <p><a href="#WZSTEP_3">
    </a></p>
</blockquote>

<p>
  </p>
<p><a href="#PHASE_MWINDOW">3.
Phase Module Window</a>
  </p>
<blockquote>
  <p><a href="#MWPAGE_1">3.1.
Phase Window Page 1</a></p>
  <p><a href="#MWPAGE_2">3.2.
Phase Window Page 2</a></p>
  <p>
  <a href="#MWPAGE_3">3.3. Phase Window Page 3</a></p>
</blockquote>

  
<p><a href="#PHASE_TYPES">4.
Types of Multicomponent Phases</a></p>
<blockquote>
  <p><a href="#PHASE_AQUEOUS">4.1.
Aqueous electrolyte</a>
  </p>
  <p><a href="#PHASE_GASFLUID">4.2.
Gas mixture and non-ideal fluids</a>
  </p>
  <p><a href="#PHASE_SOLSOL">4.3.
Solid and liquid non-electrolyte solutions</a></p>
  <p><a href="#PHASE_SORPTION">4.4.
Sorption and Surface Complexation</a></p>
  <a href="#PHASE_EXAMPLES">4.5.
Examples and special cases</a></blockquote>

  
  
<p>
  </p>
<p><a href="#PHASE_DATA_ENTRIES"> 5.
Data Entries on Phase Window Pages</a> 
  </p>
<blockquote>
  <p><a href="#PHASE_DOD_REMAKE">5.1. Data objects that can be
modified in Phase wizard upon create/clone/remake only</a>
  </p>
  <p><a href="#PHASE_DOD_RESERVED">5.2. Reserved and obsolete data
objects</a>
  </p>
  <p><a href="#PHASE_DOD_HIDDEN">5.3. Hidden data objects for use
in
Phase math scripts</a></p>
</blockquote>

  
  
<p><a href="#PHASE_ERRORS">6.
Warnings and error messages</a></p>
<blockquote>
</blockquote>


<blockquote></blockquote>
<hr style="width: 100%; height: 2px;"><h2><a name="PHASE_INTRO"></a>1. Introduction to Phase module<br>
</h2>
<p>Data for dependent components (chemical species) kept in <a href="gm_dcomp.html">DComp</a> or <a href="gm_reacdc.html">ReacDC</a>
 records do not contain all information that is needed to
calculate
equilibrium states involving multi-component phases. A separate data 
structure is needed just to tell the program what Dependent Components 
mix even in a simple ideal solution phase. In some phases, the solvent 
(e.g. water) and solutes (e.g. aqueous ions and complexes) need to be 
distinguished. In most cases, a phase-solution also has a model of 
non-ideal mixing with interaction parameters acting between components 
(end members) and/or with certain properties of components that, in 
fact, make no sense for a pure component compound. The same Dependent 
Component dataset can be involved in several models of phases-solutions,
 used alternatively or simultaneously in calculation of equilibrium 
states. Even a single-component (pure) may have additional properties 
such as specific surface area, specific surface free energy, etc. For 
all these reasons, Phase definition records are main 'building blocks', 
out of which the <a href="gems_bcc.html">chemical system definition</a> (CSD) is constructed inside of the <a href="gm_project.html">modeling project</a>. </p>
<p>A flexible Phase data structure allows the user to describe a large 
variety of
crystalline and dispersed, liquid and gaseous, adsorption and
ion-exchange, ideal or
non-ideal phases which may exist in (geo)chemical systems. Note that 
condensed compounds or surface species present as
DComp or ReacDC records in project database will not be taken into 
chemical systems, if no Phase definitions point to those Dependent 
Components. In contrast, DComp records representing gases will be&nbsp; 
linked to the ideal gas mixture phase, as well as aqueous species and 
water will be linked to the ion-association aqueous electrolyte phase, 
both (as a default) <a href="gems_aphsetup.html">automatically created</a> by opening a modeling project. <br>
</p>
<p>In GEM-Selektor, two kinds of multi-component phases are considered:
"symmetric" and "asymmetric". In symmetric phases (gas mixture, liquid
non-electrolyte solutions,
solid solutions), concentrations, activities and activity
coefficients of all components are treated in the same "rational" mole
fraction scale.
Asymmetric phases (e.g. aqueous solution) differ in that
there
is always a "solvent" made of end-member(s) taken in the
mole-fraction
scale, but other species ("solutes") are considered in
the "practical" (e.g. molality) scales, with
concentrations
being normalized by quantity of the "solvent" rather than by the amount 
of the whole phase. More about that can be found in the&nbsp; <b><tt>Activity-coeffs.pdf</tt></b> document available in GEM-Selektor installation folder.
</p>

<br>


<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"> 
<h3><a name="PHASE_FORMAT"></a>1.1. Phase Definition data format</h3>



<p>
</p>

<p>A Phase record must have unique (within a
modelling
project) phase name that appears in the third field of the <a href="gems_rekey.html#dbm_Phase">Phase record key</a>. <br>
</p>
<p>The simplest case is definition of a single-component condensed
(pure) solid
or liquid phase. Such Phase record at least contains a DComp or ReacDC 
record key that links the phase definition to the related stoichiometry 
formula and standard thermodynamic properties. Optionally, pure-phase 
definition may contain specific surface area, specific free energy of 
mineral-water and/or mineral-gas interface, and other properties 
specific for the project application.&nbsp; In these parameters are both
 given non-zero values, the program will automatically correct the 
stability of a condensed
phase
according to the&nbsp;Freundlich-Ostwald
equation.</p>

<p>Note that, if several DComp
(or
several ReacDC) records are available and their <a href="gems_rekey.html#dbm_DComp">record keys</a> are identical except the
last
field, the program will automatically take only the alphanumerically
first
record into the phase, even though the actual key in the <a href="#pDC_v_"><tt>pDC_v_</tt></a> field points to the one with different last record key field. For
experienced
users, this "override mechanism" is a very efficient tool to substitute
alternative
thermodynamic data into otherwise identical project- and phase
definitions.
<br>
</p>

<p>The next level of Phase definitions is represented by a simple
ideal (Raoultian) solution. The
only difference from the single-component phases is that now the phase
is composed of two,
three or more end-members (species, Dependent Components selected during remake of the Phase record), so the&nbsp; <a href="#PhDCS"><tt>PhDCS</tt></a>
and <a href="#pDC_v_"><tt>pDC_v_</tt></a> fields will appear as
lists&nbsp;on the first page of the Phase window. In addition, the <a href="#PhDCC"><tt>PhDCC</tt></a>
column should show the type codes of the involved components (<tt>"M"</tt>, <tt>"J"</tt>
or
<tt>"I"</tt>). The simple ideal mixing set by the <tt>'I'</tt> code in the <a href="#p_solt_0"><tt>p_solt[0]</tt></a> field. No other parameters are necessary to describe the mixing in simple ideal solution.&nbsp; <br>
</p>

<p>Various
more sophisticated ideal and non-ideal mixing models can be configured using <a href="#PHASE_MWIZARD">Phase Wizard</a>
 and saved as Phase records.
Selection of models of mixing, along with the list of Dependent 
Components, temperature and pressure ranges of their thermodynamic data,
 defines the area of applicability of the geochemical modeling 
package.&nbsp;</p><p>Non-ideal solutions, in addition to two, three,
... end-members, require some parameters
describing the essentially non-thermodynamic non-ideal mixing
effects. Such parameters can either refer to each component (end member)
 separately or one parameter can describe the interaction between two or
 more components (end members). Because model parameter values, in 
general, depend on temperature and pressure, several coefficients of 
such a dependence for each species- or interaction parameter need to be 
entered and stored in the Phase record. <br>
</p>
<p>Species property coefficients can be entered into the <a href="#dc_cf"><tt>dc_cf</tt></a> table 
having one row of coefficients per species (end member). Likewise, 
several coefficients of an interaction parameter can be entered into the
 <a href="#ph_cf"><tt>ph_cf</tt></a> table (one row per parameter). 
However, for specific interaction model of mixing, each interaction 
parameter must be identified by indexes of all phase components that are
 involved in the interaction. These indexes are stored in a 
supplementary table called <a href="#ipxT"><tt>ipxT</tt></a> (one row 
per parameter). Allocation of all these tables depends on the chosen 
model type and the number of components; it occurs upon remake of the 
Phase definition in Phase Wizard. Contents of <tt>dc_cf</tt>, <tt>ipxT</tt>, and <tt>ph_cf</tt>
 tables are automatically passed to the GEM IPM work structure before 
calculation of equilibria, and also can be exported into the GEMS3K IPM 
input file. This uniform data structure and data transfer mechanism are 
used in all <a href="#PHASE_BUILTIN">built-in phase non-ideality models</a> that are subclasses of the TSolMod class (more in the <font color="#cc0000">SolMod paper</font>). The built-in calculations are automatically selected in the program by analyzing codes set in the <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_phase.html#p_solt_0"><tt>p_solt[0]</tt></a>
field when the <tt>'S'</tt> code is set in the <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_phase.html#p_solt_3"><tt>p_solt[3]</tt></a>
field.</p>
<p>Even though TSolMod class contains over 20 hard-coded phase 
non-ideality models, they by far do not cover all the variety of models 
of mixing available in literature, nor the models that the users can 
potentially invent.&nbsp; For those reasons, GEM-Selektor allows the 
user to write almost any
imaginable non-ideality model as two <a href="g_mscript.html">Math Script</a> texts
stored in the Phase definition record. One script, called <a href="#DcEq"><tt>DcEq</tt></a>,
 should contain equations for calculation of each end member activity 
coefficient (relative to the simple ideal mixing) that depend on phase 
composition (i.e. mole fractions of end members). This script will 
usually be executed at every iteration of the GEM IPM algorithm. Another
 script, <a href="#PhEq"><tt>PhEq</tt></a>, contains calculation of 
parts of the non-ideal model that do not depend on composition but 
depend on temperature and/or pressure. Typically, this script will be 
executed only once before the GEM IPM calculations start for a given 
system. Exact modes of script execution can actually be selected in 
Phase wizard upon remake. Data exchange between scripts is done through 
two optional data arrays <a href="#Qp"><tt>Qp</tt></a> and <a href="#Qd"><tt>Qd</tt></a>. Technical details can be found in the help pages for DcEq and PhEq scripts. &nbsp; <br>
</p>
<p></p>
<p>To simplify writing of math scripts in Phase definitions, a <a href="#PHASE_DOD_HIDDEN">special set of data object labels</a> is
available; the dimensions and pointers of them will be reset separately
for each phase at every IPM iteration. Such calculations are controlled
by <a href="#p_solt_0">special codes</a> that can be set up and
changed during create/remake of a Phase record. The main limitation of 
using Phase scripts is that they cannot be calculated in the standalone 
GEMS3K program, where only built-in non-ideality models from TSolMod 
class can be calculated. <br>
</p>
<p>Phase records for sorption phases, in principle, are organized
similarly to those for multicomponent solid solutions, but, by
necessity, more surface-related default information (total and maximum
site densities, capacitance parameters, difference between inner- and
outer-sphere surface complexes) must be provided in the case of a
sorption phase. Some of these parameters can be modified later on in
the System definition, e.g. for model fitting purposes. Details
on GEM SCM calculations are given in the <b><tt>SCM-corrections.pdf</tt></b>
document. On-going work is devoted to conversion of sorption models into
 a TSorpMod class library using the same principles that are used in the
 TSolMod class. <br>
</p>
<p><br>
</p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"><h3><font face="Helvetica, Arial, sans-serif"><a name="PHASE_BUILTIN"></a></font>1.2.
Built-in models of (non)ideal mixing</h3>
<p>In GEM-Selektor (GEMS3K), all models of mixing in symmetric solutions
 (gas/fluid mixture, solid and liquid non-electrolyte solutions) refer 
to a simple
ideal Raoultian solution, in which the activity of each end-member <i>a<sub>j</sub></i> equals its mole fraction <i>x<sub>j</sub></i>.
 In an asymmetric solution (e.g. aqueous electrolyte), the ideal mixing 
is understood as the activity equals molality for each solute ( <i>a<sub>j</sub></i> = <i>m<sub>j</sub></i> ), whereas the activity equals mole fraction for the solvent (water, <i>a<sub>w</sub></i> = <i>x<sub>w</sub></i> ). Any deviation from the respective reference model of mixing is accounted for by the 'lump' activity coefficient <i>y<sub>j</sub></i> of end member - a ratio of its activity to mole fraction <i>y<sub>j</sub></i> = <i>a<sub>j</sub></i> / <i>x<sub>j</sub></i> (respectively, for aqueous solute species, a ratio of the activity to molality <i>y<sub>j</sub></i> = <i>a<sub>j</sub></i> / <i>m<sub>j</sub></i> ).</p>
<p>For the gas mixture, the default is the ideal mixture of ideal gases,
 in which the fugacity of any gas is equal to its partial pressure 
divided by total pressure, i.e. <i>a<sub>j</sub></i> = <i>p<sub>j</sub></i> <i>/ P </i>= <i>x<sub>j</sub></i>. In more complicated cases, an ideal mixture of real gases can be considered, in which <i>a<sub>j</sub></i> = <i>p<sub>j</sub></i> <i>f<sub>0,j</sub></i> <i>/ P </i>= <i>x<sub>j</sub></i><i> f<sub>0,j</sub></i>. where <i>f<sub>0,j</sub></i>
 is the pure gas fugacity coefficient. In the general case, the real 
(non-ideal) mixture of real gases contains also the fugacity coefficient
 due to non-ideal mixing: <i>a<sub>j</sub></i> = <i>p<sub>j</sub></i> <i>f<sub>0,j</sub></i> <i>f<sub>j</sub></i> <i>/ P </i>= <i>x<sub>j </sub></i><i>f<sub>0,j</sub></i> <i>f<sub>j</sub></i> .&nbsp; </p>

<p>In solid solutions, the default simple ideal mixing corresponds to a 
random substitution of A,B,C,... on a single structural site with a 
common "ligand" site occupied by L, when the end members are AL, BL, CL,
 ... (alternatively, with a single species on cation site and 
substituting ligands, the end members are CL, CM, CN, ...).&nbsp; Note 
that, if the stoichiometry of end members is scaled up e.g. to A2L2, 
B2L2, C2L2, ... then, even if no excess energy or excess volume 
interactions occur and the solution remains "energetically ideal", it is
 not a simple ideal solution anymore. It can be shown that the activity 
of end member like A2L2 in such 'ideal' solution is  <i>a<sub>j</sub></i> = <i>(x<sub>j</sub></i>)<sup>2</sup>. To calculate this kind of solid solution in GEMS3K correctly, a formal activity coefficient <i>y<sub>j</sub></i> = <i>x<sub>j</sub></i>
 must be applied to each end member. If substitutions occur on two or 
more different structural sites (sublattices) than expressions for ideal
 end member activities as functions of mole fractions become much more 
complicated (e.g. in the above example, the (A,B)(L,M) solution with end
 members AL, BL, AM, BM). <br>
</p>
<p>In GEM-Selektor, one way to describe such a complex multi-site ideal 
solution is to write down expressions for activity of each end member <i>a<sub>j</sub></i>  as function of mole fractions of phase end members, then obtain the expression for the formal activity coefficient using <i>y<sub>j</sub></i> = <i>a<sub>j</sub></i> / <i>x<sub>j</sub></i>,
 and type all such expressions into the DcEq script&nbsp; as described 
in the next section. However, apart from being prone to typos, this 
approach is limited because scripted Phase models cannot be used in 
standalone programs based on the GEMS3K kernel. <br>
</p>
<p>Another method of preference for sublattice solution models is more 
universal and requires no scripting at all. In this method, a chemical 
formula of the end member&nbsp; (in DComp or ReacDC records) must be 
written in a special format indicating the moieties present on different
 structural sites. For example, the usual formulae of feldspar end 
members are&nbsp;&nbsp;&nbsp;&nbsp; <tt>KAlSi3O8</tt>&nbsp; (microcline);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>NaAlSi3O8</tt>&nbsp;&nbsp; (albite);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <tt>CaAl2Si2O8</tt>&nbsp;
 (anorthite)&nbsp;&nbsp; etc. This format does not contain the 
information about sites and moieties that substitute on them, which can 
be incorporated by typing the end member formulae in the following 
way:&nbsp;&nbsp; <tt>{K}:{Al}{Si}3:O8&nbsp; {Na}:{Al}{Si}3:O8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {Ca}:{Al}2{Si}2:O8.</tt><br>
</p>
<p>Essential feature in this format is that each structural moiety 
(cation, anion, neutral IC, or a vacancy&nbsp; <tt>Va</tt> ) is taken in the {} braces. The colon 
&#8216;:&#8217; separates sublattice sites which must follow the same order in all 
end members. The moiety occupancy&nbsp; numbers&nbsp; appear just as 
stoichiometry coefficients after moieties. Upon parsing the formula, 
sublattices are counted by encountered colons &#8216;:&#8217; (two in this example),
 and the moieties are collected in a list along with their site-moiety 
multiplicity numbers and the site index. All this information is then 
passed to GEMS3K kernel (in memory or through the exported IPM file for 
standalone codes) where it is then forwarded to the instance of TIdeal 
subclass of TSolMod library and used in automatic calculation of the 
ideal configurational entropic part of the end member activity, finally 
converted to the respective part of the lump activity coefficient <i>y<sub>j</sub></i>.&nbsp; <br>
</p>
<p>Note that, unlike in the Calphad software, partial occupancies of a 
sublattice site with two or more moieties&nbsp; in end members are allowed.
 In any other use of Dependent Component formulae except when the 
chemical system definition (CSD) is assembled, the braces and colons in 
the formula are simply ignored (see <a href="g_useref.html#FORMULA">here more about DC formula syntax</a>). <br>
</p>
<p>A single- or multiple site mixing is called non-ideal when its excess
 Gibbs energy is not zero. In GEM-Selektor and GEMS3K, all such built-in
 models of non-ideal mixing are collected in the TSolMod class library. 
Details on setup and data for particular TSolMod built-in models are 
provided in the description of <a href="#PHASE_MWIZARD">Phase wizard</a> and <a href="#PHASE_MWINDOW">Phase window</a> pages. Currently, there are four groups of built-in non-ideality models. <br>
</p>
<p>(1) For the ion-association model of aqueous electrolyte, there are 
several variants of the Debye-H&uuml;ckel calculation of activity 
coefficients that account for the excess Gibbs energy of the long-range 
electrostatic interactions between charged aqueous species as function 
of the effective molal ionic strength. Since no specific interaction 
parameters are involved, and only ion-size parameters (properties of 
Dependent Components) are used in some cases, the Phase definition for 
any such model can be automatically created in GEM-Selektor upon opening
 the modeling project (and deleted when closing the modeling project). 
There is no need for the user to create Phase definition for this kind 
of aqueous electrolyte phase. <br>
</p>
<p>(2) In specific ion-interaction models of aqueous electrolyte 
(currently SIT, Pitzer, and Extended UNIQUAC), in addition to the 
Debye-H&uuml;ckel term, also excess energies due to specific ion-ion 
interactions are accounted for. Therefore, such Phase definitions cannot
 be assembled automatically and must be created in the (project) 
database before creating the modeling project chemical system 
definition. All such models utilized in GEM-Selektor use the common 
TSolMod data transfer mechanism based on <tt>dc_cf</tt>, <tt>ipxT</tt> and <tt>ph_cf</tt> data 
objects, thus can be exported into the IPM input files to be used in 
standalone programs based on GEMS3K code.&nbsp; <br>
</p>
<p>(3) Models of non-ideal gases and fluids include non-specific and 
specific interaction models. Phase definitions for non-specific 
multicomponent fluid models (such as Churakov-Gottschalk, Peng-Robinson,
 Peng-Robinson-Stryjek-Vera,  Soave-Redlich-Kwong) can be assembled by 
GEM-Selektor automatically, provided that DComp records for all 
components are available with correct format and properties in the 
project database. Other models with specific interaction parameters 
require that Phase definition record is created prior to calculation of 
equilibria, and all necessary interaction parameter coefficients entered
 into common TSolMod parameter <tt>ipxT</tt> and <tt>ph_cf</tt> arrays. <br>
</p>
<p>(4) Models of non-ideal solid and liquid non-electrolyte solutions 
are all based on specific-interaction framework of 'regular' or 
'subregular Margules' model for excess Gibbs energy of mixing. They 
require that the Phase definition record is created prior to calculation
 of 
equilibria, and all necessary interaction parameter coefficients are 
entered
 into common TSolMod <tt>dc_cf</tt> (optionally), <tt>ipxT</tt> and <tt>ph_cf</tt> arrays. In a few
 'classic' binary and ternary Margules and Guggenheim models, the <tt>ipxT</tt> 
index array is not used. All models from this group can be exported into
 the IPM file and used in standalone reactive transport or parameter fitting
 calculations.&nbsp;</p>

<p>The aqueous (non-ideal) solution phase must always be present in any
aquatic system. In GEM-Selektor, many Phase records defining aqueous
solutions
may be stored in the project database, but only one such definition
can be included into the <a href="gm_project.html">modelling project</a> when creating or remaking it as specified in the <a href="gems_aphsetup.html">Auto-Phase dialog</a>.&nbsp; By default, the program creates Phase definitions for ion-association aqueous
electrolyte
(<tt>"aq_gen"</tt>) and gas mixture (<tt>"gas_gen"</tt>), giving you a choice between the
built-in
<a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/glossary.html#DT_Davies">Davies</a> equation or several forms
of&nbsp;
<a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/glossary.html#DT_Debye_Hueckel">Debye-Hueckel</a> equations,
valid up to about unimolal <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/glossary.html#DT_ionic_strength">ionic
strength</a>.
If specified, Kielland's ion-size parameters in will be collected
automatically
from <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_dcomp.html">DComp</a> or <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_reacdc.html">ReacDC</a>
records. The default gas mixture is considered as an ideal mixture of
ideal
gases. <br>
</p>
<p>Every time when the user opens a modelling project, default definitions of aqueous and gaseous phases are automatically
assembled and stored in project database. In this process, all
available DComp and ReacDC records of suitable phase state (<tt>"a"</tt>
and <tt>"g"</tt>
or <tt>"p"</tt>, respectively) are selected according to the "override mechanism"
of GEM-Selektor database. Namely, if there are two or more <a href="gm_dcomp.html">DComp</a>
records for the same species to be included into the phase, and their<a href="gems_rekey.html#dbm_DComp"> record keys</a> differ only in the
last
field, then alphanumerically the first one will actually be
taken
into the Phase list, and all other records for the same species will be ignored.
The
same rule holds for <a href="gm_reacdc.html">ReacDC</a> records, but
not
for the case when one record belongs to DComp chain and another to
ReacDC
database chain - in this case, both species will be taken into the
phase
definition. This "override mechanism" applies also for any user-created
Phase
records, i.e. if a Phase record refers to a DComp (or ReacDC) and this
record
key is not found but another key with the identical first three fields
is
available, then that available record will be taken into the chemical system definition <i>without warning</i>. Again, no&nbsp; automatic crossover replacements
can
be done <i>between</i> DComp and ReacDC database chains.&nbsp;When the user closes a modelling project, default Phase records
for aqueous electrolyte (<tt>"aq_gen"</tt>) and gas mixture (<tt>"gas_gen"</tt>)
will be automatically deleted and created again when the project is opened next time.</p>
<br>
<p>
</p>
<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"><h3><a name="PHASE_SCRIPTED"></a><font face="Helvetica, Arial, sans-serif">1.3. </font><font face="Helvetica, Arial, sans-serif">Scripted customary
models of non-ideal mixing</font></h3>
<p>If, upon create/remake of the multicomponent Phase record, the user 
did not choose any built-in or ideal model of mixing, in GEM-Selektor 
there will be an opportunity to enter the equations for a customary 
model of mixing in&nbsp; <a href="gm_phase.html#DcEq"><span style="font-family: monospace;">DcEq</span></a> and <a href="gm_phase.html#PhEq"><span style="font-family: monospace;">PhEq</span></a> text editor fields on pages of the Phase module window.
 Note that such models cannot be exported to IPM files and hence cannot 
be used in standalone reactive transport or parameter fitting 
calculations. <br>
</p>
<p>In comparison with built-in phase models, this way of defining non-ideal solutions requires some more work: firstly,
the allocation of optional arrays for parameter coefficients and/or work variables, and secondly - entering and debugging <a href="g_mscript.html">scripts</a>
with equations for calculation of the activity coefficients of species
included into the phase. To facilitate writing of scripts, some
frequently used ones are provided in the template script library (press
<span style="font-family: monospace;">F3</span> or execute "Help"
"Scripts" menu command to get there). Note that Phase scripts cannot be
debugged when the Phase record is calculated. The scripts will be
translated and executed
only during the calculation of equilibrium
state
(with some error messages if something goes wrong).Usually, there is an 
immediate possibility to fix errors, save the Phase record, and try the 
GEM IPM calculation again.<br>
</p>
<p>In Phase script, it is strongly recommended
to use special <a href="gm_phase.html#PHASE_DOD_HIDDEN">hidden data objects</a>
that exist in the runtime IPM data structure and automatically map
species and parameters used in this phase only. When labels of these hidden data objects are used in the script,
there is no need to care about location of this phase and its species
in the whole chemical system definition, which is hard to know in
advance, before the
project system is assembled. <br>
</p>
<p>However, other numerical data objects from
the
runtime IPM data structure can be used as well, with some precautions
because
this would make the Phase definition dependent on the project
definition.&nbsp; </p>
<p>For details and some examples on how to write phase model scripts, please refer to help sections for&nbsp; <a href="gm_phase.html#DcEq"><span style="font-family: monospace;">DcEq</span></a> and <a href="gm_phase.html#PhEq"><span style="font-family: monospace;">PhEq</span></a>&nbsp;
 text editor fields. The scripted models of mixing are helpful in 
implementing rock-forming mineral solid solutions published in 
literature because each model has its own assumptions, simplifications 
and shortcuts that cannot be specified in a uniform way in any built-in 
model of mixing so far.&nbsp; <br>
</p><br>


<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"><p> <font face="Helvetica, Arial, sans-serif"> </font></p>
<h3><a name="PHASE_CALC"></a><font face="Helvetica, Arial, sans-serif">1.4.
Phase module calculations</font></h3>
<p>Execution of the "Record" "Calculate" menu command or toolbar icon
on the "Phase" window results in a "recalculation" of the the currently 
loaded Phase record, which, in fact, consists in reading all DComp or 
ReacDC records referenced in the phase component list and optionally 
extraction of some codes and parameters from them. This kind of 
diagnostics is useful in order to
check if the DComp/ReacDC records referenced in the <a href="gm_phase.html#PhDCS"><tt>PhDCS</tt></a>
and <a href="gm_phase.html#pDC_v_"><tt>pDC_v_</tt></a> &nbsp;lists are
indeed
present in the project database (especially after you &nbsp;have added,
renamed or deleted some records). In addition, some data like
Kielland's effective ionic radii will be collected from the
DComp/ReacDC records for the respectively defined phases. Note that the
"default override" mechanism (see above) applies also in Phase
recalculations. <br>
</p>
<p>If you get any error messages during re-calculation
then please use the Phase Wizard to remake of the Phase definition and fix the problem before opening the
modelling project, otherwise the latter will not be opened properly or get corrupt. <font face="Helvetica, Arial, sans-serif"><br>
</font></p>

<font face="Helvetica, Arial, sans-serif"><br>
</font>
<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"><h3><font face="Helvetica, Arial, sans-serif"><a name="PHASE_INTPAR"></a>1.5.
TSolMod rules for interaction parameters</font></h3>
<p><font face="Helvetica, Arial, sans-serif">&lt;To be added later&gt;<br>
</font></p>
<p><a href="gm_phase.html#PHASE_ERRORS"><font face="Helvetica, Arial, sans-serif"><br>
</font></a></p>
<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<p><a href="#P333R3"></a></p>
<h2><a name="PHASE_MWIZARD"></a> <font face="Helvetica, Arial, sans-serif">2. Phase Create/Remake Wizard</font></h2>
<p>To construct a new phase definition record, close your <a href="gm_project.html">modelling project</a> and switch to
"Thermodynamic Database" mode of GEM-Selektor. There, open the Phase module window and execute the
"Record" "Create" (or "Clone") toolbar or menu command. In the appearing "Phase:: Insert a new
record key" dialog, make a new <a href="gems_rekey.html#dbm_Phase">Phase
record key</a> (at best selecting one of existing keys "From List" and
modifying it), and press "Ok". The Phase Wizard appears; please, proceed
 through its steps while doing all necessary selections and settings. <br>
</p>
<p>After the wizard is finished, the record key list dialog appears 
showing the (filtered) list of available ReacDC ('r') and DComp ('d') 
records, asking you to mark those to be included into this Phase 
definition. Use the left mouse button to mark/unmark items. After the 
selection is done, the <a href="#PHASE_MWINDOW">Phase window</a> appears in the GEM-Selektor frame. Enter the
full phase name into the <a href="gm_phase.html#PhName"><span style="font-family: monospace;">PhName</span></a> field and
(optionally)
a comment into the <a href="gm_phase.html#PhNote"><span style="font-family: monospace;">PhNote</span></a>&nbsp; line.
Depending
on the configuration set up in Phase wizard, you may need to enter some numbers (e.g. specific
surface
area in <a href="gm_phase.html#DisPar_0"><span style="font-family: monospace;">DisPar[0]</span></a>
), Phase model scripts,&nbsp;or parameter coefficients on Phase window 
pages. When done, optionally recalculate and save the Phase record to 
project database. </p>
<p>The new or changed Phase definition will be effective in calculations
 of equilibria when this modeling project will be opened next time. Some
 parameter coefficients or comments can be edited and saved in the 
"Equilibria Calculation" mode. However, the remake or deletion of Phase 
records can be done only in the "Database maintenance" mode of 
GEM-Selektor. <br>
</p>
 &nbsp; <br>
<p><font face="Helvetica, Arial, sans-serif">
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">

<h3><font face="Helvetica, Arial, sans-serif"><a name="WZSTEP_1"></a>2.1.
Phase Wizard Step 1 - Defining the phase and the mode of mixing<br>
</font></h3>
<p>Selection of one of the following codes from drop-down lists on this 
page will configure the Phase record and tell the program what kind of 
phase and which model of (non-ideal) mixing should be used, and how it 
should be calculated.</p>
<p><font color="#cc0000">2.1.1. &lt;TBD&gt; Dropdown list -&gt; <a href="#Ph_Ps_0">Ph_Ps[0]</a>: Select a code of the phase aggregate state: <br>
  </font></p>

<blockquote>
  </blockquote>
<table border="1" cellpadding="2" cellspacing="2" width="100%">

    <tbody>
      <tr>
    <td align="center" valign="top">
<p><font color="#cc0000"><b>Code<br>
        </b></font></p>
</td>
    <td valign="top">
<p><font color="#cc0000">Displayed message<br>
      </font></p>
</td>
  </tr>
<tr>
        <td align="center">
<p><font color="#cc0000"><b>a<br>
</b></font></p>
</td>
        <td>
<p><font color="#cc0000"> aqueous electrolyte solution<br>
  </font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>g</b></font></p>
</td>
        <td>
<p><font color="#cc0000">gaseous or fluid mixture<br>
  </font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>l</b></font></p>
</td>
        <td>
<p><font color="#cc0000"> non-electrolyte liquid (melt), also multi-component</font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>h</b></font></p>
</td>
        <td>
<p><font color="#cc0000"> liquid hydrocarbon phase, also multi-component</font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>s</b></font></p>
 </td>
        <td>
<p><font color="#cc0000"> condensed solid phase, also multi-component solid solution<br>
  </font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>d</b></font></p>
 </td>
        <td>
<p><font color="#cc0000"> dispersed (particulate or porous) solid phase, also solid solution<br>
  </font></p>
</td>
      </tr>
      <tr>
        <td align="center">
<p><font color="#cc0000"><b>x</b></font></p>
 </td>
        <td>
<p><font color="#cc0000"> sorption phase in aqueous electrolyte</font></p>
</td>
      </tr>
    </tbody>
  
</table>
<blockquote>
</blockquote>

The same code should also appear in the first field of <a href="file:///C:/GEMS2test/program/doc/html/gdb_rkey.html#dbm_Phase">Phase
record key</a> where it will be used for sorting Phase record keys in the database lists. 
<p><br>
</p>
<p>2.1.2. Dropdown list -&gt; <a href="#p_solt_0">p_solt[0]</a>:&nbsp; Select a model of mixing for this phase:</p>

<table border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top"><b>Code<br>
        </b></td>
      <td valign="top">Displayed message<br>
      </td>
      <td align="center" valign="top"><b>TSM<br>
        </b></td>
      <td valign="top">Comment, links<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>I<br>
        </b></td>
      <td valign="top">Ideal mixture (also multi-site) or pure phase, default<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>M<br>
        </b></td>
      <td valign="top">Binary subregular Margules solid-solution model<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>G<br>
        </b></td>
      <td valign="top">Binary Redlich-Kister solid-solution model<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>T<br>
        </b></td>
      <td valign="top">Ternary regular Margules solid-solution model<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>R<br>
        </b></td>
      <td valign="top">Regular multicomponent solid- or liquid solution model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>V<br>
        </b></td>
      <td valign="top">Van Laar multicomponent solid- or liquid solution model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>K<br>
        </b></td>
      <td valign="top">Redlich-Kister multicomponent solid- or liquid solution model <br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>B<br>
        </b></td>
      <td valign="top">Microscopic&nbsp; a(symmetric) multicomponent solid-solution model (reserved)<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">under construction<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>L<br>
        </b></td>
      <td valign="top">NRTL multicomponent liquid solution model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>W<br>
        </b></td>
      <td valign="top">Wilson multicomponent liquid solution (or ion exchange) model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.2</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>F<br>
        </b></td>
      <td valign="top">Churakov-Gottschalk (CG) multicomponent fluid EoS model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.3<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>P<br>
        </b></td>
      <td valign="top">Peng-Robinson-Stryjek-Vera (PRSV) multicomponent fluid EoS model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.3</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>E<br>
        </b></td>
      <td valign="top">Soave-Redlich-Kwong (SRK) multicomponent fluid EoS model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.3</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>6<br>
        </b></td>
      <td valign="top">Sterner-Pitzer (STP) high-pressure fluid EoS model (reserved)<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">under construction<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>7<br>
        </b></td>
      <td valign="top">Peng-Robinson (PR78) multicomponent fluid EoS model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.3</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>8<br>
        </b></td>
      <td valign="top">Compensated Redlich-Kwong (CORK) multicomponent fluid EoS model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.3</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>D<br>
        </b></td>
      <td valign="top">Davies equation aqueous model<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>H<br>
        </b></td>
      <td valign="top">Extended Debye-Hueckel aqueous model (Helgeson), common a0<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>Y<br>
        </b></td>
      <td valign="top">Extended Debye-Hueckel aqueous model (Shvarov), common a0<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>3<br>
        </b></td>
      <td valign="top">Extended Debye-Hueckel aqueous model (Karpov), individual a0<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>2<br>
        </b></td>
      <td valign="top">Debye-Hueckel aqueous model (2-term) individual a0<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>1<br>
        </b></td>
      <td valign="top">Debye-Hueckel limiting law aqueous model<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Appendix 4.1</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>S<br>
        </b></td>
      <td valign="top">SIT multicomponent aqueous model (NEA TDB version)<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.1; Appendix 4.6<br>
</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>Z<br>
        </b></td>
      <td valign="top">Pitzer (HMW) multicomponent aqueous model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.1; Appendix 4.6</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>Q<br>
        </b></td>
      <td valign="top">Extended UNIQAC multicomponent aqueous model<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">Appendix 4.1; Appendix 4.6</td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>J<br>
        </b></td>
      <td valign="top">rEUNIQAC multicomponent aqueous model (reserved)<br>
      </td>
      <td align="center" valign="top"><b>+<br>
        </b></td>
      <td valign="top">under construction<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>A<br>
        </b></td>
      <td valign="top">Adsorption, SACT and EDL models<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top"><br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>O<br>
        </b></td>
      <td valign="top">Other non-ideal model selected by phase name (reserved)<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">under construction<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>U<br>
        </b></td>
      <td valign="top">Other non-ideal mixing model (user-defined scripts)<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">see help for&nbsp; <a href="#DcEq"><tt>DcEq</tt></a>,&nbsp; <a href="gm_phase.html#PhEq"><tt>PhEq</tt></a>; cannot be used in standalone GEMS3K calculations<br>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top"><b>N<br>
        </b></td>
      <td valign="top">No mixing (pure or single-component phase)<br>
      </td>
      <td align="center" valign="top"><b>-<br>
        </b></td>
      <td valign="top">Default option for single-component phases
      </td>
    </tr>
  </tbody>
</table>
<p>Notes: The code is kept in the <a href="#p_solt_0">p_solt[0]</a> field. TSM = TSolMod parameter convention: + used; - not used. 
Appendix 4.1, 4.2, 4.3 refers to the "Activity-Coeffs.pdf" document 
where model equations, required parameters, and literature references 
are available. See also <a href="g_useref.html#NONIDTYPES">GEMS Users Reference Section 4.4</a>. <br>
</p>
<p><br>
</p>
<p>2.1.3. Dropdown list -&gt; <a href="#p_solt_3">p_solt[3]</a>: Select a mode of calculation of activity coefficients of end members:<br>
</p>
<table border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top">
<p><b>Code<br>
        </b></p>
</td>
      <td valign="top">
<p>Displayed message</p>

      </td>
      <td valign="top">
<p>Comment</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>I<br>
        </b></p>
</td>
      <td valign="top">
<p>Activity coefficients will be set to 1 (pure phase, simple ideal mixing), default</p>

      </td>
      <td valign="top">
<p>Also pure phase</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>S<br>
        </b></p>
</td>
      <td valign="top">
<p>Activity coefficients will be calculated using a built-in mixing model selected above</p>

      </td>
      <td valign="top">
<p>Also multi-site ideal mixing (I)</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>N<br>
        </b></p>
</td>
      <td valign="top">
<p>Activity coefficients will be calculated as given in user-defined script(s)</p>

      </td>
      <td valign="top">
<p>Mixing model of 'U' type only</p>

      </td>
    </tr>
  </tbody>
</table>
<p>Note: The 'N' mode cannot be used in standalone code calculations with GEMS3K kernel.&nbsp; <br>
</p>
<p><br>
</p>
<p><a name="EXEC_MODE_DCEQ"></a>2.1.4. Dropdown list-&gt; <a href="#p_solt_1">p_solt[1]</a>: Select a mode of execution of <a href="#DcEq"><tt>DcEq</tt></a> user-defined script for end-members:<br>
</p>
<table height="113" border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top">
<p><b>Code<br>
        </b></p>
</td>
      <td valign="top">
<p>Displayed message</p>

      </td>
      <td valign="top">
<p>Comment</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>N<br>
        </b></p>
</td>
      <td valign="top">
<p>No DcEq script will be provided in this Phase definition (default)</p>

      </td>
      <td valign="top">
<p>Select this, if any built-in mixing model or simple ideal mixing will be used, or there is no mixing at all (pure phase).</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>T<br>
        </b></p>
</td>
      <td valign="top">
<p>DcEq script will be executed once before GEM IPM iterations</p>

      </td>
      <td valign="top">
<p>Expressions depend on <i>T, P</i> &nbsp;and <i>b</i>
&nbsp;(bulk composition of the system) only, but not on this phase speciation/composition</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>X<br>
        </b></p>
</td>
      <td valign="top">
<p>DcEq script will be executed after each GEM IPM iteration</p>

      </td>
      <td valign="top">
<p>Expressions depend on the current phase speciation (vector <font color="#cc0000"><tt>x</tt></font>)
or any function of it such as component concentrations, ionic strength, etc.&nbsp; </p>
</td>
    </tr>
  </tbody>
</table>
<p>Note; These modes are not applicable to standalone GEMS3K calculations.<br>
</p>
<p><br>
</p>
<p><a name="EXEC_MODE_PHEQ"></a>2.1.5. Dropdown list -&gt; <a href="#p_solt_2">p_solt[2]</a>: Select a mode of execution of <a href="#PhEq"><tt>PhEq</tt></a> user-defined script for the whole phase:<br>
</p>
<table border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top">
<p><b>Code<br>
        </b></p>
</td>
      <td valign="top">
<p>Displayed message</p>

      </td>
      <td valign="top">
<p>Comment</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>N<br>
        </b></p>
</td>
      <td valign="top">
<p>No PhEq script will be provided in this Phase definition (default)</p>

      </td>
      <td valign="top">
<p>Select this, if any built-in mixing model or simple ideal mixing will be used, or there is no mixing at all (pure phase).</p>
</td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>T<br>
        </b></p>
</td>
      <td valign="top">
<p>PhEq script will be executed once before GEM IPM iterations</p>

      </td>
      <td valign="top">
<p>Expressions depend on <i>T, P</i> &nbsp;and <i>b</i>
&nbsp;(bulk composition of the system) only, but not on this phase speciation/composition.</p>
</td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>X<br>
        </b></p>
</td>
      <td valign="top">
<p>PhEq script will be executed after each GEM IPM iteration</p>

      </td>
      <td valign="top">
<p>Expressions depend on the current phase speciation (vector <font color="#cc0000"><tt>x</tt></font>)
or any function of it such as component concentrations, ionic strength, etc. </p>

      </td>
    </tr>
  </tbody>
</table>
<p>Note: These modes are not applicable to standalone GEMS3K calculations.</p>
<p><br>
</p>
<p><a name="LINK_MODE_DCEQ"></a>2.1.6. Dropdown list -&gt; <a href="#p_solt_4">p_solt[4]</a>: Select a mode of linking user-defined <a href="#DcEq"><tt>DcEq</tt></a> script to phase end members:<br>
</p>
<table border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top">
<p><b>Code<br>
        </b></p>
</td>
      <td valign="top">
<p>Displayed message</p>

      </td>
      <td valign="top">
<p>Comment</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>N<br>
        </b></p>
</td>
      <td valign="top">
<p>No DcEq script will be provided (pure phase, built-in or ideal model), default</p>

      </td>
      <td valign="top">
<p>Select this, if any built-in mixing model or simple ideal mixing will be used, or there is no mixing at all (pure phase).</p>
</td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>U<br>
        </b></p>
</td>
      <td valign="top">
<p>A universal DcEq script will be applied to each end member in a loop</p>

      </td>
      <td valign="top">
<p>One "universal" group of equations for all components (e.g.,
Davies equation). The script must
contain at list one operand using the <tt>js</tt> &nbsp;index (of
species in the phase). The script will be
executed for each of <tt>La</tt> of end-members (species) in this phase in GEM IPM work data structure, by
automatically incrementing the <tt>js</tt> index&nbsp; by 1 from 0 to <tt>La</tt>
- 1. </p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>P<br>
        </b></p>
</td>
      <td valign="top">
<p>A private group of expressions will be executed for each end member separately</p>

      </td>
      <td valign="top">
<p>One "private" group of equations per end-member. The script must contain <tt>La</tt> groups of expressions, each group
closed by <tt>"\@"</tt> character string (<tt>La</tt> stands for the number
of species in this phase). Groups must follow in the same order as the species
in
the <a href="gm_phase.html#pDC_v_"><tt>pDC_v_</tt></a> list in the Phase window page. If a species is turned off in the system
definition, the respective "private" group will be skipped from the
math script execution. No other limitations exist for the number or
structure of expressions within each group (i.e. there can be several
operators per end-member, if-else
blocks etc.). Every "private" group will be calculated only once at
the time of the whole script execution. </p>
</td>
    </tr>
  </tbody>
</table>
<p>Note: These modes are not applicable to standalone GEMS3K calculations.</p>
<p><br>
</p>
<p>2.1.7. Dropdown list -&gt; <a href="#p_solt_5">p_solt[5]</a>: Select specific mixing rules (or form of temperature correction) for EoS and activity models:
</p>

<table border="1" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
    <tr>
      <td align="center" valign="top">
<p><b>Code<br>
        </b></p>
</td>
      <td valign="top">
<p>Displayed message</p>

      </td>
      <td valign="top">
<p>Comment</p>

      </td>
    </tr>
    <tr>
  <td align="center" valign="top">
    <p><b>N</b></p>
  </td>
  <td valign="top">
    <p>Default mixing rule or form of interaction parameter coefficients </p>
  </td>
  <td valign="top">
    <p>The appropriate mixing rule or form of interaction parameter 
coefficients will be selected depending on the chosen fluid- or aqueous 
model</p>
  </td>
</tr>
<tr>
      <td align="center" valign="top">
<p><b>W<br>
        </b></p>
</td>
      <td valign="top">
<p>Basic Van der Waals mixing rules in cubic EoS models (default)</p>

      </td>
      <td valign="top">
<p>Selecting this code enables the automatically assembled gas/fluid phase (chosen in the <a href="gems_aphsetup.html">AutoPhase dialog</a>) because all (default) interaction parameters are zeros</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>C<br>
        </b></p>
</td>
      <td valign="top">
<p>Constant one-term binary interaction parameter <i>k<sub>ij</sub></i></p>

      </td>
      <td valign="top">
<p>One coefficient per non-zero interaction parameter to be entered into <a href="#ph_cf"><tt>ph_cf</tt></a> array</p>

      </td>
    </tr>
    <tr>
      <td align="center" valign="top">
<p><b>T<br>
        </b></p>
</td>
      <td valign="top">Temperature-dependent one-term binary interaction parameter <i>k</i><sub><i>ij</i></sub><br>
      </td>
      <td valign="top">
<p>Two coefficients per non-zero interaction parameter <font color="#cc0000">(</font><i>A<sub>ij</sub></i> and <i>B<sub>ij</sub></i> <font color="#cc0000">? TW please specify)</font> to be entered into <a href="#ph_cf"><tt>ph_cf</tt></a> array</p>
</td>
    </tr><tr>
  <td align="center" valign="top">
    <p><b>5</b></p>
  </td>
  <td valign="top">
    <p>5-term Pitzer model parameter temperature dependence </p>
  </td>
  <td valign="top">
    <p>Five coefficients <i>a,b,c,d,e</i> of the temperature dependence&nbsp; <i>a</i> + <i>b</i>(1/<i>T</i>&#8722;1/298.15) +<i> c</i> ln(<i>T</i>/298.15) + <i>d</i>(<i>T</i>&#8722;298.15) <font color="#cc0000">+ <i>e</i>(<i>T</i>&#8722;298.15)<sup>2</sup></font>. Used also in TOUGHREACT software.</p>
  </td>
</tr>
<tr>
  <td align="center" valign="top">
    <p><b>6</b></p>
  </td>
  <td valign="top">
    <p>6-term Pitzer model parameter temperature dependence</p>
  </td>
  <td valign="top">
    <p>FREZCHEM variant (under construction)</p>
  </td>
</tr>
<tr>
  <td align="center" valign="top">
    <p><b>8</b></p>
  </td>
  <td valign="top">
    <p>8-term Pitzer model parameter temperature dependence</p>
  </td>
  <td valign="top">
    <p>under construction</p>
  </td>
</tr>

  </tbody>
</table>
<p>Note: Applicable only to non-ideal fluid models 'P', 'E', '7', also 
in standalone GEMS3K calculations. Codes 'C' and 'T' require entering 
non-zero parameter coefficients into <a href="#ipxT"><tt>ipxT</tt></a> and <tt><a href="#ph_cf">ph_cf</a></tt> arrays in TSolMod convention, therefore, a Phase record must be created before GEM calculations.&nbsp; 
</p>


<p><font face="Helvetica, Arial, sans-serif"><br>
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="WZSTEP_2"></a>2.2.
Phase Wizard Step 2 - Phase model-specific settings<br>
</font></h3>
<p>Optional dimensions to set when built-in functions or scripts for the mixing model shall be used.<br>
</p>
<p>Attention! For TSolMod built-in mixing models that use dc_cf and/or 
ipxT, pc_cf data objects, the numbers of columns will usually be 
allocated automatically, depending on the model of choice. Explicit 
corrections in these fields may be done upon remake of the Phase record.
 <br>
</p>
<blockquote>
  <p>Counter:&nbsp; dc_cf array: number of columns (coefficients per phase end member).<br>
  </p>
  <p>Counter: ipxT and ph_cf arrays: number of rows (non-zero 
interaction parameters) for the non-ideal mixing model. Must be given by
 the user.<br>
  </p>
  <p>Counter: ipxT array for indexation of interaction parameters: 
set here the maximum order of a parameter (e.g. 3 if binary and ternary 
parameters will be used).</p>
  <p>Counter: ph_cf array of interaction parameter coefficients: number of columns (max. number of coefficients per parameter).</p>
</blockquote>




<p>The group box below is used only if this is a sorption phase. In this case:&nbsp; </p>
<blockquote>
  <p>Check if surface complexation will be considered in this (sorption) phase<br>
  </p>
  <p>Set the number of surface types/patches (minimum 1, maximum 6) to allocate surface complexes</p>
  <p>Enter here the specific surface area A of the sorbent (in m<sup>2</sup> per gram), A&gt;0</p>
</blockquote>



<font face="Helvetica, Arial, sans-serif"><br>
  </font>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="WZSTEP_3"></a>2.3.
Phase Wizard Step 3 - Final settings and hints<br>
</font></h3>
<p>Counter:&nbsp; Set here the number of links to SDref bibliography records (default 0)<br>
</p>
<p>Checkbox:&nbsp; Extract parameters from DComp/ReacDC records and refresh DC class codes upon 'Calculate'?</p>
<blockquote>
  <p>This checkbox allows to re-sample codes and numbers as phase component properties, e.g. to collect data to the <a href="#dc_cf"><tt>dc_cf</tt></a> array. <br>
  </p>
</blockquote>

<p>What will happen after you click "Finish":<br>
</p>
<blockquote>
  <p>(1) A list of available ReacDC ('r') and DComp ('d') records will 
appear; mark those to be the phase components (end-members). At least 
one species for a pure phase, or two for a solution phase must be 
marked. Upon clone/remake, previously selected phase components will 
appear marked in the ReacDC/DComp record list; just mark the necessary 
and unmark unnecessary ones.<br>
</p>
  <p>(2) In Phase window, do not forget to fill out <tt>PhName</tt> and <tt>PhNote</tt> comments. Depending 
on setup, enter numbers in <tt>DisPar</tt> array, text in <tt>DcEq</tt> and/or <tt>PhEq</tt> script fields, and parameter 
coefficients in <tt>ipxT</tt>, <tt>ph_cf</tt>, <tt>dc_cf</tt> arrays on Phase window pages.</p>
  <p>(3) Click on 'Calculate' toolbar button to refresh DC properties 
collected in the Phase definition (works only if the above checkbox is 
set on). Attention! Previous properties and codes will be lost! After 
this operation, look at the <a href="#PhDCC"><tt>PhDCC</tt></a> 
column, and correct DC codes there, if needed ('T' for H+; 'W' for H2O-solvent; 
'M','J',or 'I' for solid-solution end members). <br>
  </p>
  <p>Last but not least, save the Phase record to 
the modeling project database.</p>
</blockquote>







<br>
<font face="Helvetica, Arial, sans-serif">
  </font>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h2><font face="Helvetica, Arial, sans-serif"><a name="PHASE_MWINDOW"></a>3.
Phase Module Window</font></h2>
<p>This window provides access to relevant data, codes, lists and 
scripts in the Phase definition (kept in Phase record). In current 
version of GEM-Selektor, the Phase window has three pages, shown by 
clicking on the respective buttons in the upper left part. Some data can
 and should be entered/edited directly in data object fields visible in 
pages, whereas configuration data can only be changed through Phase 
Wizard and DC selection list upon Create/Remake of the Phase record. <br>
</p>
<p>In forthcoming versions of GEM-Selektor, both Phase Wizard and Phase 
Window will be extended in order to accommodate a range of new 
adsorption and dissolution/precipitation kinetics models. <br>
</p>




<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="MWPAGE_1"></a>3.1.
Phase Window Page 1</font></h3>
<p>This window shows  <tt>PhName</tt> and <tt>PhNote</tt> comment lines; <a href="#DisPar_0"><tt>DisPar</tt></a> array to keep specific surface area and other optional properties of a dispersed phase; optional fields for source of data (<tt>SDref</tt>) references. Main information on this page is the list <tt>pDC_v_</tt>
 of Dependent Components that mix in this Phase. Together with DC class 
codes and data sources ('r' - ReacDC, 'd' - DComp records),&nbsp; this 
list appears as a (scrollable) table. In the same order as seen in this 
list, DCs and their codes will be added to Chemical System Definition 
created within the modelling project to which the Phase record 
belongs.&nbsp;&nbsp;</p>
<p>For a sorption phase, a table (starting with the <a href="#SCM_C"><tt>SCM_C</tt></a>
 code of surface complexation model) appears below the DC list. This 
table has one or several rows, each corresponding to a surface patch 
(type). In each row, relevant parameters for the surface patch and 
electrostatic model assigned to it can be entered. <br>
</p>


<p></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="MWPAGE_2"></a>3.2.
Phase Window Page 2</font></h3>
<p>This page gives access mainly to properties of Dependent Components. At the top, it shows phase model codes in the <a href="#p_solt_0"><tt>p_solt</tt></a> field, then relevant dimensions in <tt>Ph_Nc</tt> and <tt>Ph_nsc</tt> fields (all cannot be edited directly). Use help (F1) to learn more about various modes selected into <tt>p_solt</tt> field. <br>
</p>
<p>For a scripted Phase model of mixing (not usable for export into GEMS3K files), the <tt>DcEq</tt>
 multi-line text editor field appears, containing a script for 
calculation of end-member activity coefficients. See help pages (F1) on <a href="#DcEq"><tt>DcEq</tt></a> for more information.<br>
</p>
<p>Appearing next, the list of Phase Dependent Components (species, end members) <a href="#pDC_v_"><tt>pDC_v_</tt></a> is accompanied by various data fields depending on the chosen Phase model.&nbsp;</p>
<p>For pure (single-component) phase, simple ideal condensed 
solution,&nbsp; and a number of aqueous and solid solution models, there
 is no additional (DC-specific) data fields on this page. <br>
</p>
<p>For other multicomponent phases (non-ideal fluids, some solid 
solutions, some aqueous electrolyte models), the array of phase 
component properties <tt>dc_cf</tt> will be visible directly to the 
right of DC key list. In some cases, the data in this list can be 
collected automatically from DComp/ReacDC records upon calculation of 
the Phase definition. Otherwise (or if different properties are needed),
 they can be entered or copy-pasted directly. Note that the entered data
 may be lost if the Phase record is reclaculated. Use help (F1) to learn
 more about which properties or coefficients, in which units etc. must 
be entered into <tt><a href="#dc_cf">dc_cf</a> </tt>array for the Phase model of choice (given by code in <a href="#p_solt_0"><tt>p_solt[0]</tt></a>).&nbsp; <br>
</p>
<p>For a sorption model, the DC list is enhanced with <a href="#SAT_C_0"><tt>SAT_C</tt></a> and <a href="#MaSDj_0"><tt>MaSDj</tt></a> tables, where 
the surface species can be assigned to surface patches, electrostatic 
model planes, and site types, as well as the maximum site densities and 
charge distribution (CD) parameters can be specified. </p>



<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;"><h3><font face="Helvetica, Arial, sans-serif"><a name="MWPAGE_3"></a>3.3.
Phase Window Page 3</font></h3>
<p>This page displays mainly data regarding non-ideal interactions 
between phase end members (species) or even between site moieties in 
multi-site solid solution models.&nbsp;</p>
<p>In the upper part, relevant dimensions are shown (can only be set upon remake in Phase Wizard). <br>
</p>
<p>For a scripted Phase model of mixing (not usable for export into GEMS3K 
files), the <tt>PhEq</tt> multi-line text editor field appears, containing a 
script for calculation of properties of the phase that normally depend on <i>P,T</i> but not on composition. See help 
pages (F1) on <a href="gm_phase.html#PhEq"><tt>PhEq</tt></a> for more information.</p>
<p>For most built-in models of mixing that conform to TSolMod class 
library specifications, this page shows a table composed of two arrays: <tt>ipxT</tt> and <tt>ph_cf.</tt>
 Each row in this table corresponds to a non-ideal interaction between 
end members or moieties whose indices (in this Phase DC record list <a href="gm_phase.html#pDC_v_"><tt>pDC_v_</tt></a>) are given in <a href="#ipxT"><tt>ipxT</tt></a>, and interaction parameter coefficients are entered in <a href="#ph_cf"><tt>ph_cf</tt></a>
 part. The number of indexes and coefficients per row depends on the 
model of choice. The number of rows must be set in Phase Wizard upon 
remake. Rows for default (zero) interaction parameters are not needed; 
parameters can follow in any order. <br>

</p>

<p></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h2><font face="Helvetica, Arial, sans-serif"><a name="PHASE_TYPES"></a>4.
Types of Multicomponent Phases</font><br>
</h2>
<p>&lt;TBD&gt;<br>
</p>
<p><font face="Helvetica, Arial, sans-serif"><br>
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="PHASE_AQUEOUS"></a>4.1.
Aqueous electrolyte</font></h3>
<p>&lt;TBD&gt;<br>
</p>
<p><font face="Helvetica, Arial, sans-serif"><br>
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="PHASE_GASFLUID"></a>4.2.
Gas mixture and non-ideal fluids</font></h3>
<p>&lt;TBD&gt;<br>
</p>
<p><font face="Helvetica, Arial, sans-serif"><br>
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<h3><font face="Helvetica, Arial, sans-serif"><a name="PHASE_SOLSOL"></a>4.3.
Solid and liquid non-electrolyte solutions</font></h3>
<p>&lt;TBD&gt;<br>
</p>
<p><font face="Helvetica, Arial, sans-serif"><br>
  </font></p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<p></p><h3><a name="PHASE_SORPTION"></a><font face="Helvetica, Arial, sans-serif">4.4. Sorption and Surface
Complexation</font><br>
</h3>
<p>Phase definition for a sorption phase, in principle, is organized
similar to aqueous electrolyte or solid solution, with a difference
that some more information about surface species and surface types has
to be provided (see
details in the<a href="gems_scm.html"><tt> gems_scm.html </tt></a>and <a href="theorscm.html"><tt>theorscm.html</tt></a>&nbsp; manuals). Upon
create/remake
of a sorption phase, first of all, the number of surface types must be
set
in the "Phase: Remake Dialog ..." window (1 to 6, zero by default).
Several
optional arrays for keeping input adsorption parameters (area fractions
of surface types, maximum site density, capacitance parameters, SAT
model codes) must also be allocated. After selecting the suface species
from the ReacDC list and the sorbent end-member(s) from DComp or ReacDC
lists, make sure that proper codes are given&nbsp; in the <a href="g_useref.html#DCCLASSCODES">"Species Class"</a> list for inner-
and outer-sphere surface complexes and sorbent end-members. Check also
that
the <a href="g_useref.html#SCM_CODES">EDL model codes</a> are properly
specified and the non-zero number for specific surface area is provided
(it can be changed later on in project System
definition, if necessary).&nbsp; Theoretical aspects of GEM
sorption modeling are given in publications (Kulik, 2000, 2002a,b) or,
in a condensed form, in the <b><tt>SCM-corrections.pdf</tt></b>&nbsp;
manual. <br>
</p>
<p>This part is currently under construction due to on-going 
re-implementation of sorption models into TSorpMod class library.&nbsp;</p>

<p> </p>

<blockquote>
</blockquote>
<hr style="width: 100%; height: 2px;">
<p></p>
<h3><a name="PHASE_EXAMPLES"></a> 4.5. Examples and special cases</h3>
<p>&lt;to be added later&gt;<br>
</p>
<p> <br>
&nbsp; </p>
<h2> </h2>
<hr style="width: 100%; height: 2px;">
<h2><a name="PHASE_DATA_ENTRIES"></a><font face="Helvetica, Arial, sans-serif"> </font>5. Data Entries on Phase
Window Pages&nbsp; </h2>
<dl>
  <dt><br>
  </dt>
  <dt><a name="PhName"></a><big><b><big><tt>PhName</tt></big></b></big>
-
Input full name of this phase definition </dt>
  
  <dd>
<p> This comment field may contain a string up to 70 characters
long. It is highly recommended to enter this string for identifying the Phase definition on the Phase
window pages or in printouts. Not used in any calculations.&nbsp; <br>
</p>

&nbsp; </dd>
  <dt> <a name="PhNote"></a><big><big><b><tt>PhNote</tt></b></big></big>
-
Input comment to <b><tt>PhName </tt></b>(optional) </dt>
</dl>
<dl>
  <dd>
<p>This string up to 70 characters long may be entered by the user
for identification purposes. <br>
</p>
</dd>
  <dd>
  <p>In forthcoming versions, this field will be optionally used for 
providing links to other phases (within the modeling project system).</p>
</dd>
<dd>&nbsp; </dd>

  
</dl>
<dl>
  <dt> <a name="DisPar_0"></a><big><big><b><tt>DisPar[0]</tt></b></big></big>
- <i>A</i> &nbsp;(input specific surface area, m<sup>2</sup>/g)<br>
</dt>
  <dd>
<p>
The positive value of specific surface area <i>A</i> (in m<sup>2</sup>/g) must be
entered
by the user for dispersed or sortion phases (in the latter case, <i>A</i>
applies
to the sorbent part only). This value is automatically copied into the <a href="gems_bcc.html">project system definition</a> and can be edited
there,
if necessary. Default value is 0.&nbsp; <br>
</p>
</dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="DisPar_1"></a><big><big><b><tt>DisPar[1]</tt></b></big></big>
- <i>Sig</i> &nbsp;(input specific surface free energy of
solid-aqueous interface,
J/m<sup>2</sup>) <br>
</dt>
  <dd>
<p>
The specific free energy of surface in water at Pr = 1 bar,
Tr
= 25 C can be entered by the user for dispersed or sortion phases. If
unknown,
0 (default value) can be entered.&nbsp; This value is automatically
copied into <a href="gems_bcc.html">project system definition</a> and
can be edited there, if necessary. Together with <i>A</i>,<i> Sig</i>
is used there for correction of stability of the solid in water according
to the Freundlich-Ostwald
equation.&nbsp;</p>
</dd>
  
  <dd>
<p>Positive values of <i>Sig</i> &nbsp;correspond to a positive
curvature (particulate solid, less stable than the bulk solid); negative values
of &nbsp;<i>Sig</i> denote a porous solid phase (more stable than the
bulk
solid).</p>

&nbsp;&nbsp; </dd>
  <dt> <a name="DisPar_2"></a><big><big><b><tt>DisPar[2]</tt></b></big></big>
- Standard mean surface energy of gas-aqueous interface, J/m2 </dt>
  
  <dd>
<p>&nbsp; Reserved for future extension to model sorption of gases
on
aqueous phase surface.&nbsp; <br>

  </p>
</dd>
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="DisPar_3"></a><b><tt>DisPar[3]</tt></b> - Mean radius
r0 for
(spherical or cylindrical) particles, nm (reserved) </dt>
  
  <dd>
<p>&nbsp;Reserved for future extensions.</p>
</dd>
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="DisPar_4"></a><b><tt>DisPar[4]</tt></b> - Mean
thickness h0
for cylindrical or 0 for spherical particles, nm (reserved) </dt>
  
  <dd>
<p>&nbsp; Reserved for future extensions.</p>
</dd>
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="DisPar_5"></a><b><tt>DisPar[5]</tt></b> - Dielectric
constant for solid carrier at Tr (reserved)</dt>
  
  <dd>
<p>&nbsp; Reserved for future extensions.</p>
</dd>
  
  <dd> &nbsp; &nbsp;&nbsp; </dd>
  <dt> <a name="DisPar_6"></a><b><tt>DisPar[6]</tt></b> - Specific
conductivity at Tr, Sm/m/cm<sup>2</sup> (reserved) </dt>
  
  <dd>
<p>Reserved for future extensions.&nbsp; &nbsp;&nbsp; <br>
</p>
</dd>
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="DisPar_7"></a><big><b><tt>DisPar[7]</tt></b></big> -
Default reference density for surface species, 1/nm<sup>2</sup> <br>
</dt>
  <dd>
<p>
Default reference surface density (in sites/nm<sup>2</sup>) can be entered by the
user
for (ad)sortion phases (ignored for all non-sorption phases). This
value
is automatically copied into the project system definition and can be
edited there, if necessary. If unknown, enter the default (reference)
site density 12.05 sites/nm<sup>2</sup>.</p>

  </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dt> <a name="pSDref"></a><big><big><b><tt>pSDref</tt></b></big></big>
&nbsp;-
List of SDef keys to data sources or comments to this Phase definition. <br>
</dt>
  
  <dd>
<p> The following format is recommended: [name]:[year]:[type]:
&nbsp;Example: <tt>"Smith&amp;Martell:1976:ref:"</tt></p>
</dd>
  
  <dd>
<p> Click on any entry in this list and then press&nbsp; <tt>F2</tt>&nbsp;
to get the <a href="gm_sdref.html">SDref</a> window with full
information from the respective bibliographic data record. If the
record does not exist then you can immediately create it, enter the
information and save
to database.&nbsp;</p>
</dd>
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="pSDval"></a><big><big><b><tt>pSDval</tt></b></big></big>
-
Comments to SDref keys to data sources <br>
</dt>
  
  <dd>
<p>Contains the same number of entries as the <tt><a href="#pSDref">pSDref</a>
    </tt>list.&nbsp; <br>

  </p>
</dd>
  
  <dd>
<p> Into each entry of the <tt>pSDval</tt> list, you may put very
short comments indicating which data were taken from the data source
referenced in the respective <tt>pSDref</tt> list entry.</p>
</dd>
  
  <dd>&nbsp; </dd>
  <dt> <a name="PhDCC"></a><big><big><b><tt>PhDCC</tt></b></big></big>
- DC
classes of species included into this phase &nbsp;{ S T W O I M J 0 1 2
3
4 ... } &nbsp; <br>

  </dt>
  
  <dd>
<p>This list is automatically compiled from <a href="g_useref.html#DCCLASSCODES">DC Class codes</a> specified in
source <a href="gm_dcomp.html">DComp</a> (<a href="gm_dcomp.html#DC_set_0"><tt>DC_set[0]</tt></a>
&nbsp;field) or <a href="gm_reacdc.html">ReacDC</a> (<a href="gm_reacdc.html#RE_set_0"><tt>RE_set[0]</tt></a> &nbsp;
&nbsp;field) records, when the Phase definition is created or cloned. The codes may be changed here in <tt>PhDCC</tt>
column, from where they will be taken into the modelling project system
definition (can be
also edited in the project system, but only kept for the duration of the project session).</p>
</dd>
  
  <dd>
<p><b>Attention!</b> Special care is needed when applying 'remake' for an existing Phase
record. Upon remake, DC class codes in this field will not
be replaced automatically, so the user has to check the codes and edit
them if necessary before saving the Phase record to database. </p>
</dd>
  <dd>&nbsp; &nbsp; &nbsp; </dd>
  <dt> <a name="PhDCS"></a><big><big><b><tt>PhDCS</tt></b></big></big>
- Location
of source records for Dependent Components (species) { r d } &nbsp; <br>

  </dt>
  
  <dd>
<p>This one-character code defines where the program will look for
the source input data for the involved species, identified by
corresponding record keys in the <a href="#pDC_v_"><tt>pDC_v_</tt></a>
list. Possible codes:&nbsp;</p>
</dd>
  
  <dd>&nbsp; &nbsp; &nbsp; <big><b><tt>d</tt></b></big> &nbsp; &nbsp;
DComp source record <br>
&nbsp; &nbsp; &nbsp; <big><b><tt>r</tt></b></big> &nbsp; &nbsp;
&nbsp;ReacDC source record<br>
  </dd>
  
  <dd>
<p> The codes will be set automatically upon create/remake of the
Phase record. </p>
</dd>
  <dd> &nbsp; &nbsp; </dd>
  <dt> <a name="pDC_v_"></a><big><big><b><tt>pDC_v_</tt></b></big></big>
&nbsp;-
List of source DComp or ReacDC record keys for &nbsp;species included
into
this phase <br>
  </dt>
  
  <dd>
<p>This list contains records keys of the species involved into this
phase. The keys are interpreted according to codes in the <a href="#PhDCS"><tt>PhDCS</tt></a>
column. This list is created or updated automatically during
remake/create of the Phase record, when the user selects species from
ReacDC and/or DCcomp record key lists.&nbsp;</p>
</dd>
  
  <dd>
<p><b>Note</b> that the fourth field of DC record keys is not
analyzed when records are sampled from database into the modelling
project ("override mechanism"). This means that the (alphanumerically)
first record with matching first three fields will be taken, and others
(if available in the same database chain) will be ignored. However,
this is done separately within DComp or
ReacDC chains, i.e. no cross-overriding between DComp and ReacDC
records
is possible even if they have identical first three fields of their <a href="gems_rekey.html#dbm_DComp">record keys</a>.&nbsp; </p>
</dd>
  <dd> &nbsp; &nbsp; </dd>
  <dt> <a name="SAT_C_0"></a><big><big><b><tt>SAT_C[0]</tt></b></big></big>
- Classifier of methods of SACT&nbsp; calculation { L
Q 1 2 3 4 F R N I } and obsolete SAT calculation { C S }<br>
  </dt>
  
  <dd>
<p> This input column contains <a href="g_useref.html#SACT_CODES">SACT
codes for surface species</a>, used in calculation of&nbsp; the surface activity coefficient terms
(SACT). All
values must be entered by the user here because they cannot be
collected from DComp or ReacDC records. For the sorbent (end members),
the <tt>"I"</tt> code
must be used.&nbsp; <br>

  </p>
</dd>
  
  <dd>
<p>The SACT codes will be automatically copied into the
modelling project. Some of new method codes require other parameters to
be set appropriately in the <small><a style="font-family: monospace;" href="#MaSDj_0"><big>MaSDj</big></a></small><span style="font-family: monospace;"> </span>table, first of all, the site
density parameter.&nbsp; Recommended&nbsp; value in this column is "L"
(competitive Langmuir SACT) which produces effects similar to the site
balance in LMA SCMs. Competition takes place when more than one surface
species is assigned with the same site density parameter to the same
site type on the same surface type.</p>
</dd>
  
  <dd>
<p>Use of the obsolete SAT codes and equations ( C, S ) is not
recommended.<span style="font-style: italic;"></span></p>
</dd>
  <dd>&nbsp;&nbsp;</dd>
  <dt> <a name="SAT_C_1"></a><big><big><b><tt>SAT_C[1]</tt></b></big></big>
-&nbsp; Allocation of surface species to sorbent (end-members) { V }  <br>

  </dt>
  
  <dd>
<p> This input column contains the <a href="g_useref.html#SURFDC_ALLOC_CODES">allocation codes</a> assigning
a surface species to the whole solid carrier (<tt>"V"</tt> code;
default)
or one of its end-members (<tt>&lt;digit&gt;</tt>). The codes must be
entered here by the user. Allocation codes will be automatically copied
into the
modelling<a href="gems_scm.html"> project system </a>and can be edited
there,
if necessary. </p>

  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="SAT_C_2"></a><big><big><b><tt>SAT_C[2]</tt></b></big></big>
-&nbsp; Allocation of surface species to surface type on the
sorbent&nbsp; { 0 1 2 3 4 5 } <br>
  </dt>
  
  <dd>
<p> This input column contains the codes for assigning surface&nbsp;
species, sites, and electrical interface layer (EIL) models to a
certain surface type (or surface
patch) on the solid sorbent. There can be up to six surface patches
(types) in a sorption phase, indexed from 0 (default) to 5. The number
of active surface types can be set upon remake of the Phase record (see
    <a style="font-family: monospace;" href="#Ph_nsi_0">Ph_nsi[0]</a>
field). Some common parameters for surface types can be set on Page 3
of the Phase window.&nbsp; </p>

  </dd>
  
  <dd>
<p>These indexes (allocation codes) must be
entered here by the user. They will be automatically copied
into the
modelling<a href="gems_scm.html"> project system </a>and can be edited
there later on,
if necessary. </p>

&nbsp;&nbsp; </dd>
  <dt> <a name="SAT_C_3"></a><big><big><b><tt>SAT_C[3]</tt></b></big></big>
-&nbsp; Allocation of the surface complex outer charge to EIL model
plane&nbsp; { 0&nbsp; 1 b&nbsp; 2 d&nbsp; 3 c } <br>
  </dt>
  
  <dd>
<p> This input column contains the <a href="g_useref.html#SURFDC_ALLOC_CODES">allocation codes</a> assigning
an outer portion of the formula charge of a surface species to a
certain EIL
model plane. The respective charge should be given in the <a style="font-family: monospace;" href="#MaSDj_2">MaSDj[][2]</a><small>
  </small>column. The charge given in <small><a href="#MaSDj_1"><big><span style="font-family: monospace;">MaSDj[][1]</span></big></a></small>
column ("inner charge") will be always assigned to the 0 EIL plane. The
associated EIL model (for this surface type) is encoded in the <small><a href="#SCM_C"><big><span style="font-family: monospace;">SCM_C</span></big></a></small>
field on Page 3 of the Phase window.</p>

  </dd>
  
  <dd>
<p>Default allocation code is 0 (zero plane), which means that the
whole charge of surface species is located on the sorbent surface
directly (as in NEM, DLM, CCM, inner-sphere species in TLM, BSM and
3LM). Any non-zero charge given in the <a style="font-family: monospace;" href="gm_phase.html#MaSDj_2">MaSDj[][2]</a>
column will be ignored in this case. </p>

  </dd>
  
  <dd>
<p>Charge of outer-sphere electrolyte complexes is usually allocated
to the beta (b) or 1 plane (in "classic" TLM or BSM) or the 2 (d)
plane&nbsp; (in three-layer CD model by Hiemstra &amp; Van Riemsdijk
(1996). The outer charge of inner-sphere adsorbed metal complexes or
anions considered in 3LM CD should be located on the 1 (b) plane. The
inner charge is assigned to 0 plane in all cases. Codes '3' or 'c' are
reserved for future implementations of EIL models.</p>

  </dd>
  
  <dd>
<p>The allocation codes must be
entered here by the user. they will be automatically copied
into the
modelling<a href="gems_scm.html"> project system </a>and can be edited
there,
if necessary. </p>

&nbsp;&nbsp; </dd>
  <dt> <a name="SAT_C_4"></a><big><big><b><tt>SAT_C[4]</tt></b></big></big>
-&nbsp; Allocation of surface species to site type within a surface
type { 0 1 2 3 4 5 } <br>
  </dt>
  
  <dd>
<p> This input column contains the codes for assigning surface&nbsp;
species to a certain site type (within a surface type or patch) on the
sorbent surface. There can be up to six site types on one surface type,
indexed from 0 (default) to 5. </p>

  </dd>
  
  <dd>
<p>All species assigned to the same site type on the same surface
patch will potentially compete for these sites if a competitive SACT is
used (e.g. 'L'). All such competing species must be given the same
value of site
density parameter (complete coverage site density) in the <small><a href="#MaSDj_0"><big><span style="font-family: monospace;">MaSDj[][0]</span></big></a>
  </small>column. </p>

  </dd>
  
  <dd>
<p>These indexes (allocation codes) must be
entered here by the user. They will be automatically copied
into the
modelling<a href="gems_scm.html"> project system </a>and can be edited
there later on,
if necessary. <br>
</p>
</dd>
  <dd>
&nbsp;&nbsp; </dd>
  <dt> <a name="SAT_C_5"></a><big><big><b><tt>SAT_C[5]</tt></b></big></big>
-&nbsp; Units in which surface site density is given in MaSDj[][0]
column { n } ( { m M g } reserved } <br>
  </dt>
  
  <dd>
<p> This input column contains the code 'n' which tells that site
densities are given in nm<sup>-2</sup> units (one site per one square nanometer).
Other codes are reserved for future versions. </p>

  </dd>
  <dd> <br>
  </dd>
  <dt> <a name="MaSDj_0"></a><big><big><b><tt>MaSDj[0]</tt></b></big></big>
- Surface site (type) density parameter, in nm<sup>-2</sup>, to be used in SACT
calculations&nbsp;<br>
</dt>
  <dd>
<p>
This input column contains surface site (or complete site coverage)
densities for&nbsp; surface species, expressed in
1/nm2 units. If unknown, put here the standard-state reference density
(12.05 nm<sup>-2</sup>).&nbsp;</p>
</dd>
  
  <dd>
<p><b style="text-decoration: underline;">Attention: </b>All
surface species allocated to the same site type&nbsp; (<a style="font-family: monospace;" href="#SAT_C_4">SAT_C[][4]</a>
column) on the same surface type (<a style="font-family: monospace;" href="#SAT_C_2">SAT_C[][,2]</a>
column)&nbsp; must have the same density parameter value if they are
assigned with a competitive SACT code in <a style="font-family: monospace;" href="#SAT_C_0">SAT_C[][0]</a>
column). <br>
</p>

  </dd>
  
  <dd>
<p>Surface site densities will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary. &nbsp;&nbsp;&nbsp; <br>
</p>

  </dd>
  
  
  <dt> <a name="MaSDj_1"></a><big><big><b><tt>MaSDj[1]</tt></b></big></big>
- Effective part of the formula unit charge of surface species
allocated to 0
plane (sorbent surface)&nbsp; <br>
</dt>
  <dd>
<p>
These numbers will be used only in calculations of charge
densities and electrostatic potentials in CD EIL model Coulombic term,
which does not&nbsp; affect the overall charge balance in the chemical
system stoichiometry. Hence, the effective charges entered here must
not necessarily co-inside with formula charges of surface species. The
charges in this column will be applied regardless of the allocation
code set in <a style="font-family: monospace;" href="#SAT_C_3">SAT_C[][3]</a>
column.</p>

  </dd>
  
  <dd>
<p>Upon recalculation of Phase record, the numbers can be collected
initially from ReacDC records referred to in this Phase definition and
then edited by the user.</p>
</dd>
  
  <dd>
<p>Later on, the data will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary. </p>
</dd>
  
</dl>
<dl>
  <dt> <a name="MaSDj_2"></a><big><big><b><tt>MaSDj[2]</tt></b></big></big>
- Effective part of the formula unit charge of surface species
allocated to 1
or 2 plane (CD 3LM;&nbsp; BSM, TLM) <br>
  </dt>
  
  <dd>
<p>This input column contains unit charges of surface species to be
allocated to one of outer EIL planes&nbsp; according to the allocation
code in <a style="font-family: monospace;" href="#SAT_C_3">SAT_C[][3]</a>
column. If the corresponding allocation code is '0', the charge value
in this column will be ignored.</p>

  </dd>
  
  <dd>
<p>These numbers will be used only in calculations of charge
densities
and electrostatic potentials in CD EIL model Coulombic terms, which does
not&nbsp; affect the overall charge balance in the chemical system
stoichiometry. Hence, the effective charges entered here must not
necessarily co-inside with formula charges of surface species.</p>

  </dd>
  
  <dd>
<p>Upon recalculation of Phase record, the numbers can be collected
initially from ReacDC records referred to in this Phase definition and
then edited by the user.</p>
</dd>
  
  <dd>
<p>Later on, the data will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary.</p>
</dd>
  
  
</dl>
<dl>
  <dt> <a name="MaSDj_3"></a><big><big><b><tt>MaSDj[3]</tt></b></big></big>
- SACT isotherm parameter 1 (e.g. interaction parameter <i>a<sub>F</sub></i>&nbsp;
in Frumkin SACT)<br>
</dt>
  <dd>
<p>
This input column contains an optional additional parameter value to be
used in some SACT equations.&nbsp; </p>

  </dd>
  <dd>
<p>&nbsp;In Frumkin SACT, this column should provide the value of
interaction parameter <i>a<sub>F</sub></i> (negative means lateral repulsion, positive
means lateral
attraction).</p>
</dd>
  
  <dd>
<p>Later on, the data will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary. </p>

  </dd>
  
  
  <dt> <a name="MaSDj_4"></a><big><big><b><tt>MaSDj[4]</tt></b></big></big>
-&nbsp; SACT isotherm parameter 2 (e.g. denticity n in QCA SACTs) <br>
  </dt>
  
  <dd>
<p>This input column contains an optional additional parameter value
to be used in some SACT equations.&nbsp; </p>

  </dd>
  <dd>
<p>In Frumkin SACT, this column should provide the value of
coordination number
(default value 2 gives the standard Frumkin term).</p>
</dd>
  <dd>
<p>In QCA SACT, this column provides the denticity d (1, 2, 3 or
4).</p>

  </dd>
  <dd>
<p>Later on, the data will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary.</p>
</dd>
  
</dl>


<dl>
  <dt> <a name="MaSDj_5"></a><big><big><b><tt>MaSDj[5]</tt></b></big></big>
- SACT isotherm parameter 3 (reserved for future development of SACT
equations) &nbsp; <br>
</dt>
  <dd>
<p>
This input column contains an optional additional parameter value to be
used in&nbsp; SACT equations added in future.&nbsp;</p>
</dd>
  
  <dd>
<p>&nbsp;Later on, the data will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary. </p>
</dd>
</dl><dl>
  <dd>&nbsp; </dd>
</dl>
<dl>
  <dt> <a name="DcEq"></a><b><big><big><tt>DcEq</tt></big></big></b> -
Math script to compute activity coefficients of phase components (for
user-defined
non-ideal mixing models) <br>
  </dt>
  <dd>
<p>Use this multi-line text editor field to create a <a href="g_mscript.html">math script</a>
for calculation of species' activity coefficients
in
the non-ideal multi-component phase.&nbsp; Normally, this math script 
will be executed after each GEM IPM iteration because activity 
coefficients are functions of the phase composition, which is part of 
the GEM primal solution approximation.This behavior, coded in the <a href="gm_phase.html#p_solt_1"><tt>p_solt[1]</tt></a> field, can be changed in the Phase wizard upon remake of the Phase record. <br>
</p>
</dd>
  
  <dd>
<p>To facilitate writing of math scripts for calculation of activity 
coefficients, a template script library is provided, accessible by 
pressing <span style="font-family: monospace;">F3</span>
or executing the "Help" "Scripts" menu command. Select one of "mscripts"
 from the appearing list; this opens the SDref window, where the script 
(with comments) can be found on the second page. Copy-paste the script 
into DcEq field and modify, as needed.&nbsp;</p>
</dd><dd>
  <p>A typical script from the library ("<tt>mscript-2-Margules:0001:phase</tt>") looks like this:</p>
</dd>

</dl>
<blockquote>
  <dl>
    <dd><tt>$ Calculation of the activity coefficients (Margules
subregular)<br>
&nbsp; ln_gam[0] =: (Qd[0]+2*Wx[0]*(Qd[1]-Qd[0]))*Wx[1]^2; \@<br>
&nbsp; ln_gam[1] =: (Qd[1]+2*Wx[1]*(Qd[0]-Qd[1]))*Wx[0]^2; \@<br>
$ end<br>
      </tt></dd>
  </dl>
</blockquote>
<dl>
  
  <dd>
<p>This script applies to a single-site binary condensed solution consisting of two end
members (indexed with 0 and 1), in the same order as they appear in
the <a href="#pDC_v_"><tt>pDC_v_</tt></a> list on Page 1 of the
"Phase" window. <tt><a href="#Wx">Wx</a>[0]</tt> and <tt>Wx[1]</tt>
designate the current end-member mole fractions; the<tt> \@</tt>
symbols mark the end of group of equations for a given end member (several
operators per end member can be written
in one group of equations). The Margules interaction parameters are
taken
from an optional vector of work variables <a href="#Qd"><tt>Qd</tt></a> (where, in turn,
they
are placed after execution of another script in the <a href="#PhEq"><tt>PhEq</tt></a>
field, see example below). The <tt>Qd</tt> vector, with at least two elements, must be allocated in Phase Wizard upon remake.</p>
</dd></dl>
<blockquote>
  <dl>
    <dt>Data object labels normally used in DcEq and PhEq scripts belong to a special set of <a href="#PHASE_DOD_HIDDEN">"hidden" data objects</a>, automatically adjusted for each phase such that the indexation in them is limited to within this phase. For example, <a href="#Wx"><tt>Wx</tt></a> (mole fraction of end member) is a hidden data object that covers part of the (visible) <a href="gems_sys.html#Wxx"><tt>Wxx</tt></a> vector corresponding to this phase in the GEM IPM work structure. Likewise, <a href="#ln_gam"><tt>ln_gam</tt></a> is a hidden data object that covers part of the visible <a href="gems_sys.html#lnGam"><tt>lnGam</tt></a>
 vector corresponding to this phase only. Using such hidden object has 
an obvious&nbsp; advantage that their indexes are limited only to this 
phase, thus independent of the actual indexes of end members in the 
whole list of DCs in the chemical system. Available hidden data objects 
are <a href="#PHASE_DOD_HIDDEN">listed here</a>.&nbsp; <br>
    </dt>
  </dl>
</blockquote>
<dl>

  <dd>
  <p>Math script expressions in the DcEq field will be
collected for all phases involved in the modelling project, and translated immediately before the beginning of
GEM IPM calculation of an equilibrium state. The scripts will be executed at
each iteration of the IPM minimization algorithm according to the flag 'X' in
the <a href="#p_solt_1"><tt>p_solt[1]</tt></a>
field. </p>
</dd><dd>
    <p>There are two different relations between equations in the DcEq
script and the components of the non-ideal solution phase, defined by
the linking code in the <a href="#p_solt_4"><tt>p_solt[4]</tt></a> field. The above example
corresponds to the "private" linking, where each species has its own
group of equations in the math script (separated by the<tt> \@</tt>
symbols).&nbsp; There are also non-ideality models, in which the same
group of math script equations must be executed for each phase species
(e.g. as in the Debye-Hueckel aqueous activity model).&nbsp; <br>

  </p>

  </dd>

  
  <dd>
  <p>In some cases (SIT aqueous models, multicomponent solid
solutions), the DcEq math script can be greatly simplified using hidden aliases&nbsp; <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_phase.html#dCm"><tt>dCm</tt></a> for the
optional <a href="#dc_cf"><tt>dc_cf</tt></a> array, and <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_phase.html#pCv"><tt>pCv</tt></a> for the optional  <a href="#ph_cf"><tt>ph_cf</tt></a> 
array, both allocated upon create/remake of the Phase record. This is 
the easiest way to provide component properties and interaction 
parameter coefficients for the scripted model of mixing in the phase, 
similar to that in most of the <a href="g_useref#P_SOLT0">built-in phase models</a>.&nbsp; </p>
</dd>
  
  <dd> &nbsp;</dd>
  <dt> <a name="dc_cf"></a><big><b><tt><big>dc_cf</big> </tt></b></big>-
Array
of coefficients of end-member (species) properties for the non-ideal mixing model <br>
  </dt>
  
  <dd>
  <p>This array of component-related coefficients of the non-ideality
model can be allocated in Phase wizard upon create/remake of the Phase record. The <tt>dc_cf</tt>
array has the same number of rows as the number of Dependent components in the phase,
and
the user-defined number of columns (i.e. number of coefficients per
species). This array has also a hidden runtime data object alias <a href="#dCm"><tt>dCm</tt></a>.&nbsp; </p>
</dd><dd>
    <p>The <tt>dc_cf</tt> array is automatically
created,
filled-out and used in some <a href="g_useref.html#P_SOLT0">built-in modes</a> for calculation of activity
coefficients. For some built-in models, the user must fill the
coefficients out and save them in the Phase record. &nbsp; </p>
  </dd>

  
  <dd>
  <p>Coefficients stored in this array can be
used
in <a href="g_mscript.html">math script</a> equations for calculation
of
activity coefficients typed in the <a href="#DcEq"><tt>DcEq</tt></a>
field,
where they are accessible at the GEM IPM runtime using the <a href="#dCm"><tt>dCm</tt></a> hidden data object. To access a
coefficient, two indexes must be provided after <big><span style="font-family: monospace;">the <small>dCm</small></span></big>&nbsp; identifier, for
instance, as <span style="font-family: monospace;">dCm[1][2]</span>&nbsp;
or <span style="font-family: monospace;">dCm[js][1]</span>&nbsp;
or <span style="font-family: monospace;">dCm[js][is]</span>. <br>
  </p>

  </dd>
  
  <dd>
  <p>Except for the built-in mixing models, the user is fully responsible
for
setting up the correct information in the <tt>dc_cf </tt>array
and for the correct usage of this data in calculation of activity coefficients.&nbsp; </p>
</dd>
  
</dl>

<dl>
  <dd>&nbsp; &nbsp;&nbsp; </dd>
  <dt> <a name="PhEq"></a><big><big><b><tt>PhEq</tt></b></big></big>
-&nbsp;Math
script to calculate <i>T,P</i>-corrected parameters and properties (for user-defined non-ideal mixing models)&nbsp; <br>
  </dt>
  
  <dd>
<p>This multi-line editor field can be used to create an auxiliary <a href="g_mscript.html">math script</a> for preparing some temperature-,
pressure- corrected interaction parameters and phase properties to be used in
calculation of activity
coefficients of components in the non-ideal solution phase as defined in
the <a href="#DcEq"><tt>DcEq</tt></a> math script. Normally, this script does not depend on phase composition, hence it is calculated only once before entering the 
GEM IPM algorithm iterations. However, if some parts of the script 
depend on phase composition or any other function of the primal GEM 
solution (e.g. ionic strength), it has to be executed at every IPM 
iteration. This behavior, coded in the <a href="gm_phase.html#p_solt_2">p_solt[2]</a> field,  can be changed in the Phase wizard upon remake of Phase record.&nbsp; <br>
</p>
</dd>
  
  <dd>
<p>In writing PhEq scripts, we strongly recommend usage of special <a href="#PHASE_DOD_HIDDEN">hidden
data objects</a> that exist in the runtime IPM data structure and
automatically map indexes of components and parameters of this phase only (see also the description of the <a href="#DcEq"><tt>DcEq</tt></a>
field).</p>
</dd>
  
  <dd>
<p>Examples of PhEq scripts can be found in the template script library, accessible
by pressing <span style="font-family: monospace;">F3</span> or
executing the "Help" "Scripts" menu command. For example, the library entry "<tt>mscript-2-Margules:0001:phase</tt>"
contains the following script to be copy-pasted into the <tt>PhEq</tt>
field in order to complement the example script given in help page for the <a href="#DcEq"><tt>DcEq</tt></a> field:&nbsp;</p>
</dd>
</dl>
<blockquote>
  <dl>
    <dd><tt>&nbsp;$ Margules parameters W/(RT):<br>
&nbsp; Qd[0] =: ( 6327 </tt><tt>- 4.632*T_K </tt><tt>+ 0.093*P_ )/RT_;&nbsp; <br>
&nbsp; Qd[1] =: ( 7672 </tt><tt>- 3.857*T_K </tt><tt>+ 0.112*P_ )/RT_;<br>
&nbsp;$ end</tt><tt> </tt></dd>
  </dl>
</blockquote>
<dl>
  <dd>
<p>This script should be calculated only once per equilibrium state, because the Margules interaction parameters depend on <i>T,
P</i>
but not on the phase composition. The calculated Margules parameters
are
assigned to&nbsp; an optional vector <a href="file:///C:/gems2html/program/doc/html/gm_phase.html#Qd"><tt>Qd</tt></a>
&nbsp;from where, in turn, they will be taken into equations for
calculation of activity coefficients as specified in the <a href="#DcEq"><tt>DcEq</tt></a>
field (see above). &nbsp;Note that the same binary Margules model is
implemented
as a built-in option (<tt>'M'</tt> code set in the <a href="gm_phase.html#p_solt_0"><tt>p_solt[0]</tt></a> cell and <tt>'S'</tt>
code in <a href="#p_solt_3"><tt>p_solt[3]</tt></a> cell), in which
case
no scripts are needed, but&nbsp; the Margules parameter coefficients given in the above script should be entered
into <a href="#ph_cf"><tt>ph_cf</tt></a> cells instead.</p>
</dd><dd>
  <p>Of course, it is possible to modify the above script to access parameter values previously entered into the <tt>ph_cf</tt> table (allocated in Phase wizard with two rows and three columns).&nbsp; In the script below, <a href="#pCv"><tt>pCv</tt></a> is a hidden data object alias for <a href="#ph_cf"><tt>ph_cf</tt></a> table in this Phase definition:<br>
  </p>
</dd>
</dl>
<blockquote>
  <dl><dd><tt>&nbsp;$ Margules parameters W/(RT):<br>
&nbsp; Qd[0] =: ( pCv[0][0] </tt><tt>- pCv[0][1] </tt><tt>+ pCv[0][2] ) / RT_; <br>
&nbsp; Qd[1] =: </tt><tt>( pCv[1][0] </tt><tt>- pCv[1][1] </tt><tt>+ pCv[1][2] ) / RT_;</tt><tt> <br>
&nbsp;$ end</tt><tt> </tt></dd></dl>
</blockquote>
<blockquote>
  <p>For this particular Margules model, the contents of <tt>ph_cf</tt> table must be:&nbsp;</p>
  <table border="1" cellpadding="2" cellspacing="2" width="60%">
    <tbody>
      <tr>
        <td align="center" valign="top"><tt>6327</tt><br>
        </td>
        <td align="center" valign="top"><tt>4.632</tt></td>
        <td align="center" valign="top"><tt>0.093</tt><br>
        </td>
      </tr>
      <tr>
        <td align="center" valign="top"><tt>7672</tt><br>
        </td>
        <td align="center" valign="top"><tt>3.857</tt></td>
        <td align="center" valign="top"><tt>0.112</tt><br>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Math script expressions in the <tt>PhEq</tt> field will be copied 
into the modelling project, and translated immediately before
the beginning
of GEM IPM calculation of an equilibrium state. The script will be 
computed once before starting the GEM IPM run, or also at every IPM 
iteration, according to the mode flag in the <a href="#p_solt_2"><tt>p_solt[2]</tt></a> field. <br>
  </p>
</blockquote>

  
<dl>

</dl>

<dl>
  <dd>&nbsp; &nbsp; </dd>
  <dt> <a name="ph_cf"></a><big><big><b><tt>ph_cf</tt></b></big></big>
- Array
of interaction parameter coefficients for the phase-solution
non-ideal mixing model<br>
  </dt>
  
  <dd>
<p>This array of interaction parameter coefficients of the
non-ideality
model
can be allocated in Phase wizard upon create/remake of the Phase record. The <tt>ph_cf</tt>
array has the number of rows equal to the number of
interaction parameters; the number of columns equals the number of&nbsp;
coefficients per parameter, as defined by the user or set up
automatically by the chosen <a href="g_useref.html#P_SOLT0">built-in mixing model</a>.&nbsp;</p>
</dd><dd>
  <p>In many built-in models that belong to TSolMod class library, the <tt>ph_cf</tt> array is used together with the <a href="#ipxT"><tt>ipxT</tt></a>
 index list; each row in the latter contains indices of phase components
 (starting from 0) between which the non-ideal interaction exists, as 
given by coefficients in the respective row of the <tt>ph_cf</tt> table. The number, units and order of those coefficients is determined by the selected model of mixing (<a href="g_useref.html#P_SOLT0">see details here</a>).&nbsp; </p>

  </dd>

  
  <dd>
<p>The <tt>ph_cf</tt> array will be automatically created, if necessary,
 for certain types of built-in models as specified in the Phase wizard. 
You will only have to enter the indexes into <tt>ipxT</tt> list if apropriate, and the respective coefficient
values in <tt>ph_cf</tt> rows, and save the Phase record to project database.&nbsp; </p>

  </dd>
  <dd>
<p>There are three "old-style" built-in solid solution models that do 
not use the ipxT index list and, therefore, do not conform with the 
TSolMod specifications. These models were retained for upward 
compatibility. </p>
</dd><dd>
  <p>Specifically, the built-in binary Margules model (the 'M' code)
uses three
coefficients <i>W<sub>U</sub></i><sub>,1</sub>, <i>W<sub>S</sub></i><sub>,1</sub>&nbsp; and <i>W<sub>V</sub></i><sub>,1</sub><i> </i>from
 the first ph_cf row, and three from the second row&nbsp; (in J/mol, 
J/K/mol and J/bar), as represented below&nbsp; (see also the second 
example of <a href="#PhEq"><tt>PhEq</tt></a> script above):&nbsp;</p>
</dd>

</dl>
<blockquote>
  <dl>
    <dd><i>W</i><sub>12</sub> = <i>W<sub>U</sub></i><sub>,1</sub> - <i>W<sub>S</sub></i><sub>,1</sub>*<i>T</i>
+ <i>W<sub>V</sub></i><sub>,1</sub>*<i>P</i> &nbsp;&nbsp; <br>
</dd>
    <dd><i>W</i><sub>21</sub> = <i>W<sub>U</sub></i><sub>,2</sub> - <i>W<sub>S</sub></i><sub>,2</sub>*<i>T</i>
+ <i>W<sub>V</sub></i><sub>,2</sub>*<i>P</i> &nbsp;&nbsp; <br>
</dd>
  </dl>
</blockquote>
<dl>
  <dd>
<p>Unknown coefficients in <tt>ph_cf</tt> array must be set to
zero. For
example, if you wish to have activity coefficients to be independent of
temperature,
set non-zero values only in <tt>ph_cf[0,1]</tt> and&nbsp;<tt>ph_cf[1,1]</tt>cells.
If you set different values of of <i>W</i><sub>1</sub> and <i>W</i><sub>2</sub>,
you will run a subregular mixing model; equal values of <i>W</i><sub>1</sub>
and <i>W</i><sub>2</sub> result in a regular mixing model, and all zero
values
reduce it to the ideal mixture. </p>

  </dd>
  
  <dd>
<p>A ternary regular Margules model
'T' requires
four rows each of three coefficients according to the following equations:</p>
</dd>
</dl>
<blockquote>
  <blockquote><i>W</i><sub>12</sub> = <i>W<sub>U</sub></i><sub>,12</sub>
- <i>W<sub>S</sub></i><sub>,12</sub>*<i>T</i> + <i>W<sub>V</sub></i><sub>,12</sub>*<i>P</i>
<br>
    <i>W</i><sub>13</sub> = <i>W<sub>U</sub></i><sub>,13</sub> - <i>W<sub>S</sub></i><sub>,13</sub>*<i>T</i>
+ <i>W<sub>V</sub></i><sub>,13</sub>*<i>P</i> <br>
    <i>W</i><sub>23</sub> = <i>W<sub>U</sub></i><sub>,23</sub> - <i>W<sub>S</sub></i><sub>,23</sub>*<i>T</i>
+ <i>W<sub>V</sub></i><sub>,23</sub>*<i>P</i> <br>
    <i>W</i><sub>123</sub> = <i>W<sub>U</sub></i><sub>,123</sub> - <i>W<sub>S</sub></i><sub>,123</sub>*<i>T</i>
+ <i>W<sub>V</sub></i><sub>,123</sub>*<i>P</i> <br>
</blockquote>
</blockquote>
<dl>
  <dd>
<p>The binary Guggenheim (Redlich - Kister) mixing model 'G' needs only
three
coefficients that (in the present implementation) should be entered in
dimensionless
form: <i>a</i>0, <i>a</i>1 and <i>a</i>2 into <tt>ph_cf[0,0]</tt>, <tt>ph_cf[0,1]</tt>
and <tt>ph_cf[0,2]</tt>cells, respectively. These T,P independent coefficients will be
directly
used in computing end-member activity coefficients. </p>

  </dd>
  
  <dd>
<p>Mathematical details about built-in calculations can be found in the <b><tt>Activity-coeffs.pdf</tt></b>
manual.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;</p>
</dd>
  <dd>
  <p>Coefficients stored in the <tt>ph_cf</tt> array can be used
in <a href="g_mscript.html">math script</a> equations for calculation
of
activity coefficients at
the GEM IPM runtime by executing scripts typed in the <a href="gm_phase.html#DcEq"><tt>DcEq</tt></a>
or <a href="gm_phase.html#PhEq"><tt>PhEq</tt></a> fields, where the <tt>ph_cf</tt> coefficients are accessible via the <a href="gm_phase.html#pCv"><tt>pCv</tt></a>
hidden
data
object.&nbsp;</p>
</dd>
<dd><br>
  </dd>
  <dt><a name="ipxT"></a><big><big><b><tt>ipxT </tt></b><small>- <small>List
of indexation of interaction parameters of mixing models given in the <span style="font-family: monospace;">ph_cf</span> array</small></small></big></big>
  </dt>
  
  <dd>
<p>This data object was introduced in GEM-Selektor version 2.2.0 for the implementation of TSolMod class library of <a href="g_useref.html#P_SOLT0">built-in non-ideal mixing models</a>.</p>
</dd>
  
  <dd>
<p>The <big><tt>ipxT</tt></big>
array has the number of rows equal to the number of (non-default)
interaction parameters (set in <small><a href="#Ph_ncp_0"><big><span style="font-family: monospace;">Ph_ncp[0]</span></big></a></small> upon
remake) and columns equal to the maximum order of interaction parameter
(set in <small><a href="#Ph_npx"><big><span style="font-family: monospace;">Ph_npx</span></big></a></small>
upon remake), as defined by the user or set up
automatically by the built-in mixing model.&nbsp;</p>

  </dd>
  
  <dd>
<p>The index in each row of&nbsp; <span style="font-family: monospace;">ipxT</span> table should correspond to
the interaction parameter&nbsp; in the respective&nbsp; row of the <span style="font-family: monospace;">ph_cf</span> array. For example, the
ternary Margules model shown above (see description of&nbsp; <small><a href="#ph_cf"><big><span style="font-family: monospace;">ph_cf</span></big></a></small>
array) would require the following <span style="font-family: monospace;">ipxT</span> table:</p>
</dd>
  
</dl>
<blockquote>
  <table border="1" cellpadding="2" cellspacing="2" width="50%">
    <tbody>
      <tr>
        <td align="center" valign="top">0<br>
        </td>
        <td align="center" valign="top">1<br>
        </td>
        <td align="center" valign="top">-1<br>
        </td>
      </tr>
      <tr>
        <td align="center" valign="top">0<br>
        </td>
        <td align="center" valign="top">2<br>
        </td>
        <td align="center" valign="top">-1<br>
        </td>
      </tr>
      <tr>
        <td align="center" valign="top">1<br>
        </td>
        <td align="center" valign="top">2<br>
        </td>
        <td align="center" valign="top">-1<br>
        </td>
      </tr>
      <tr>
        <td align="center" valign="top">0<br>
        </td>
        <td align="center" valign="top">1<br>
        </td>
        <td align="center" valign="top">2<br>
        </td>
      </tr>
    </tbody>
  </table>
</blockquote>
<dl><dd>
<p>As the interaction parameters are symmetric (<span style="font-style: italic;">W</span><sub>12</sub> = <span style="font-style: italic;">W</span><sub>21</sub>; <span style="font-style: italic;">W</span><sub>123</sub> = <span style="font-style: italic;">W</span><sub>231</sub> = <span style="font-style: italic;">W</span><sub>312</sub> etc.) in such
mixing models, it is sufficient to index only one of them, as done
above. The index -1 in the last column means that there is no last index for this interaction
parameter (i.e. binary in a ternary system). For
multi-component mixing models such as Van Laar, Peng-Robinson, SIT, or
Extended UNIQAC, which have only binary interaction parameters, it is sufficient
to have only two columns in the <span style="font-family: monospace;">ipxT</span>
table. </p>

  </dd>
  
  <dd>
<p>Note that the TSolMod class library built-in functions assume that if some index
combinations are missing from the&nbsp; <span style="font-family: monospace;">ipxT</span>&nbsp; (and respective coefficients from&nbsp; <span style="font-family: monospace;">ph_cf</span>) arrays, the respective
interactions are assumed ideal and take default values of interaction
coefficients (usually 0). This makes the setup of multicomponent mixing
models easier. For instance, if in the above example, coefficients W<sub>123</sub>
and W<sub>13</sub> are not known or assumed to be zero then the
respective lines (the last and the second one) could be omitted from <span style="font-family: monospace;">ipxT</span> and <span style="font-family: monospace;">ph_cf</span> arrays, which would have
then only two rows each.&nbsp;
  <br>

  </p>

  </dd>
</dl>
<dl>
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="SCM_C"></a><big><big><b><tt>SCM_C</tt></b></big></big>
- Classifier
of SCM applied to surface patches/types {&nbsp; D C S T 3 M I N&nbsp; } &nbsp; <br>

  </dt>
  
  <dd>
<p> This input data object object contains the <a href="g_useref.html#SCM_CODES">SCM codes</a>
 for each surface patch (type) on
a sorption phase, e.g. for each crystal face. The codes must be entered 
by user directly here. Each surface patch can have an own surface 
complexation model, as given by this code. On each patch, one or more 
surface site types can be considered (via setting respective codes and 
site densities in the <a href="#MaSDj_0"><tt>MaSDj</tt></a> table). </p>

  </dd>
  
  <dd>
<p>SCM codes will be automatically copied into the modelling <a href="gems_scm.html">project system</a> and can be edited there, if
necessary.&nbsp; <br>
</p>
</dd>
  <dd>&nbsp; &nbsp; </dd>
  <dt> <a name="FSI_t"></a><big><big><b><tt>FSI_t</tt></b></big></big>
- Fraction
of surface patch (type) relative to &nbsp;the whole surface of the sorbent <br>
  </dt>
  
  <dd>
<p> This input data object contains fractions of the total surface
of the
sorbent assigned to each surface type. The numbers must be entered by
user;
the total fraction may be greater or smaller than 1. The total &lt; 1
indicates that the remaining part of the sorbent surface is considered
non-reactive. </p>

  </dd>
  
  <dd>
<p>Surface patch fractions will be automatically copied into the modelling
    <a href="gems_scm.html">project system</a> and can be edited there,
if necessary.</p>
</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="MsDt_0"></a><big><big><b><tt>MsDt[0]</tt></b></big></big>
- Common maximum density of competitive surface complexes, nm<sup>-2</sup>
(obsolete)&nbsp;<br>
</dt>
  <dd>
<p>
This input data object used in old SAT setup contains maximum density
of surface complexes
(marked
as "C" in the <a href="#SAT_C_0"><tt>SAT_C[0]</tt></a> column) that
compete for sites of the same type on the same surface patch (type).&nbsp;</p>
</dd>
  
  <dd>
<p>Common maximum densities will be automatically copied into the
modelling <a href="gems_scm.html">project system</a> and can be edited
there, if necessary.</p>
</dd>
  <dd>&nbsp;&nbsp;&nbsp;</dd>
  <dt> <a name="MsDt_1"></a><big><b><tt>MsDt[1]</tt></b></big> - SAT
FFG parameters
(reserved) </dt>
  
  <dd>
<p>This data object is reserved for future implementation of new
SCMs
and SAT equations. The cells must contain zeros in this version of GEMS.&nbsp;</p>
</dd>
  
  
  <dd>&nbsp; <br>
  </dd>
  <dt> <a name="Cap_t_0"></a><big><big><b><tt>Cap_t[0]</tt></b></big></big>
- C1 - inner EDL capacitance density parameter, F/m<sup>2</sup> (TLM, BSM,
CCM)&nbsp;&nbsp; <br>
</dt>
  <dd>
<p>
This input data object contains values of inner capacitance density C1
in
F/m<sup>2</sup> for TLM, BSM and CCM for each surface type. The numbers must be
entered by user; default is 1.0 F/m<sup>2</sup>.&nbsp;</p>
</dd>
  
  <dd>
<p>Values of C1 will be automatically copied into the modelling <a href="gems_scm.html">project system</a> and can be edited there, if
necessary.&nbsp; <br>
</p>
</dd>
  
  <dt> <a name="Cap_t_1"></a><big><big><b><tt>Cap_t[1]</tt></b></big></big>
- C2 - outer EDL capacitance density parameter, F/m<sup>2</sup> (TLM); anion C for
BSM&nbsp; <br>
  </dt>
  
  <dd>
<p> This input data object contains values of outer capacitance
density C2 in F/m<sup>2</sup> for TLM for each surface type. The numbers must be
entered by user; default is 0.2 F/m<sup>2</sup> for TLM and 0 for other SCMs.
&nbsp;</p>
</dd>
  
  <dd>
<p>Values of C2 will be automatically copied into the modelling <a href="gems_scm.html">project system</a> and can be edited there, if
necessary.&nbsp; &nbsp; <br>

  </p>

  </dd>
  
  <dd>&nbsp;&nbsp; </dd>
  <dt> <a name="XfIEC"></a><big><big><b><tt>XfIEC</tt></b></big></big>
- Density
of permanent surface charge, mkeq/m<sup>2</sup> (for electrostatic SCMs)</dt>
  
  <dd>
<p> This input data object contains values of permanent surface
charge in mkeq/m<sup>2</sup> for for each surface type. The numbers must be
entered by user; default is 0. Non-zero numbers must be entered for
surface types on which the ion exchange has to be considered using the
electrostatic SCM.&nbsp; <br>
</p>
</dd>
  
  <dd>
<p>Values of permanent charge density will be automatically copied
into the modelling <a href="gems_scm.html">project system</a> and can
be edited there, if necessary.&nbsp; <br>

  </p>

  </dd>
  
  
  <dd>&nbsp;<br>
  </dd>
</dl>
<h3><a name="PHASE_DOD_REMAKE"></a>5.1. Data objects that can be
modified in Phase wizard upon create/clone/remake only</h3>
<p><font face="Helvetica, Arial, sans-serif"> </font></p>
<dl>
  <dt> <a name="p_solt_0"></a><b><tt><font size="+2">p_solt[0]</font></tt></b> Code of phase-solution type and model of (non)ideal mixing { I M G T R V ... A O U N }<br>
</dt>
  <dd>
<p>
This code defines the type of mixing and the (built-in or scripted) method of
calculation of mixing properties and activity coefficients
at GEM IPM iterations. It can be set in Phase wizard upon create/clone/remake of the Phase record.</p>
</dd>
  <dd>
<p>Possible codes: see <a href="g_useref.html#P_SOLT0">User's
Reference</a>.
Default code: <tt>"I"</tt>.&nbsp;</p>
</dd>
  
  <dd>
<p> In the Phase record, two dynamic text fields with math scripts (
    <tt><a href="gm_phase.html#PhEq">PhEq</a></tt>
and <tt><a href="gm_phase.html#DcEq">DcEq</a></tt>
) will be allocated, if this code is set to <tt>"R"</tt> or <tt>"U" </tt>or<tt>
"O"</tt> values. No math scripts are necessary for other options (i.e. simple ideal or built-in non-ideal mixing models). &nbsp;
&nbsp;&nbsp; &nbsp; <br>
</p>

  </dd>
  
  <dt><b> <a name="p_solt_1"></a></b><tt style="font-weight: bold;"><font size="+2">p_solt[1]</font></tt> - Mode of calculation of the <tt>DcEq</tt>
math script for end members { N T X } </dt>
  
  <dd>
<p> This code defines how the math script expressions written by the
user in the <tt><a href="#DcEq">DcEq</a></tt> field (Page 2 of Phase
window) depend on <i>T,P</i> and/or current speciation (vector <tt><a href="gems_ipm.html#x">x</a></tt>) along the <a href="gems_ipm.html">GEM
IPM</a> iterations, and when the program should calculate the script
while solving for the chemical equilibrium state. Possible code values: {N T X} (<a href="#EXEC_MODE_DCEQ">see details here</a>). <br>
</p></dd><dd>
  <p>The code can be set in Phase wizard upon create/clone/remake of the Phase record.&nbsp; 
  </p>

</dd>

  
  <dd>
<p>If the math script is not neeced and the <tt>DcEq</tt> field
must not
be allocated, the code here must be set to <tt>"N"</tt> (default, "not execute")
value.
This is the case e.g. if a built-in mixing model was specified in the <tt>p_solt[0]</tt>
code.&nbsp; &nbsp; </p>
</dd>
  
  <dt> <a name="p_solt_2"></a><b><big><big><span style="font-family: monospace;">p_solt[2]</span></big></big></b> -
Mode of
calculation of the <tt>PhEq</tt> math script for the whole phase { N T
X
} </dt>
  
  <dd>
<p>This code defines how the math script expressions written by the
user in the <tt><a href="#PhEq">PhEq</a></tt> field (Page 3 of Phase
window) depend on <i>T,P</i> and/or current speciation (vector <tt><a href="gems_ipm.html#x">x</a></tt>) along the <a href="glossary.html#DT_IPM">GEM IPM</a> iterations, and when the
program should calculate the script while solving for the chemical
equilibrium state. Possible code values: {N T X} (<a href="#EXEC_MODE_PHEQ">see details here</a>).&nbsp;</p></dd><dd>
  <p>The code can be set in Phase wizard upon create/clone/remake of the Phase record.</p>

</dd>

  
  <dd>
<p>If the math script is not needed and the<tt> PhEq</tt>
&nbsp;field
is not allocated, this code must be set to <tt>"N"</tt> (default, "not execute")
value.&nbsp;This
is the case e.g. if a built-in mixing model was specified in the <tt>p_solt[0]</tt>
code. &nbsp; &nbsp; </p>
</dd>
  
  <dt><a name="p_solt_3"></a><big><big><b><tt>p_solt[3]</tt></b></big></big>
- Mode of calculation of species activity coefficients { N S I }<br>
</dt>
  <dd>
<p>
This code defines how the activity coefficients of species in this
phase
will be calculated. Any built-in mixing model for calculation of
activity
coefficients (see <a href="#p_solt_0"><tt>p_solt[0]</tt></a> code
field)
will operate only if this code will be set to <b><tt>'S'</tt></b>
value.&nbsp;&nbsp;</p></dd><dd>
  <p>The code can be set in Phase wizard upon create/clone/remake of the Phase record. Possible values: <a href="g_useref.html#P_SOLT3">see User's
Reference</a>.&nbsp; </p>

</dd>

  
  
  
  <dd>
<p><u>Attention</u>: If <a href="#p_solt_0"><tt>p_solt[0]</tt></a> is set
to <tt>"I"</tt> then this code must be also set to <tt>"I"</tt>
value. Only systems where all solution phases have the 'S' or 'I' code 
in this field can be exported into GEMS3K input files for standalone 
coupled-code calculations. <br>
</p>
</dd>
  
  <dt> <a name="p_solt_4"></a><big><big><b><tt>p_solt[4]</tt></b></big></big>
- Mode of linking DcEq math script equations to phase end members { N U P }<br>
</dt>
  
  <dd>
<p>This code defines how the math script expressions specified by
the user in the <a href="#DcEq"><tt>DcEq</tt></a> text field (Page 2
of the "Phase" window) will be linked to the end-members and their
non-ideality parameters. Please, consult the <tt><a href="gm_sdref.html">SDref</a></tt>
library of template math scripts for Phase records to learn about the
typical examples. Possible values: { N U P } (<a href="#LINK_MODE_DCEQ">see details here</a>). Default value: 'N' (no link).&nbsp;</p></dd><dd>
  <p>The code can be set in Phase wizard upon create/clone/remake of the Phase record.
  </p>

</dd>

  
  <dd>
<p><u>Attention</u>: If <a href="file:///C:/gems2html/program/doc/html/gm_phase.html#p_solt_0"><tt>p_solt[0]</tt></a>
is set to <tt>"I"</tt> and <a href="#p_solt_1"><tt>p_solt[1]</tt></a>
set
to <tt>"N"</tt> then this code must be also set to <tt>"N"</tt>
value.&nbsp; </p>
</dd>
  <dt> <a name="p_solt_5"></a><big><big><b><tt>p_solt[5]</tt></b></big></big>
- Specific mixing rule (or form of temperature correction) for EoS and activity models { N W C T 5 6 8 }&nbsp; 
  </dt>
  
  <dd>
<p>This code provides additional options to some phase-solution and model of mixing modes selected in <a href="#p_solt_0"><tt>p_solt[0]</tt></a>,
 either defining specific mixing rule and interaction parameter format 
for non-ideal fluid models, or defining a specific form of temperature 
dependence for Pitzer aqueous model. Possible values: <a href="g_useref.html#P_SOLT5">see User's Reference</a>.&nbsp;</p>
</dd><dd>
  <p>The code can be set in Phase wizard upon create/clone/remake of the Phase record.</p>
</dd>

  
  <dd>
<p><u>Attention</u>: For phase models where these additional options are irrelevant, the <tt>"N"</tt>
(default) code must be specified. </p>
</dd>
  <dd>&nbsp;&nbsp; &nbsp;&nbsp; </dd>
  <dt> <a name="Ph_Ps_0"></a><big><big><b><tt>Ph_Ps[0]</tt></b></big></big>
- Code of this phase aggregate state in the system { a g l h s d x }
    &nbsp; <br>
</dt>
  <dd>
<p>
This code defines the standard state and the reference scale of
concentrations for dependent components in a phase.&nbsp; It is used by
many <a href="gems_ipm.html">IPM module subroutines</a> during
calculation
of equilibrium states. Possible values: <a href="g_useref.html#PHASESTATECODES">see User's Reference.</a></p>

&nbsp; </dd>
  <dt> <a name="Ph_Ps_1"></a><big><big><b><tt>Ph_Ps[1]</tt></b></big></big>
- Allocation flag for the <a href="#ph_cf"><tt>ph_cf</tt></a> array
and <a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a>
table for interaction parameters { + * - } <br>
</dt>
  <dd>
<p>
This flag controls allocation an optional dynamic array <a href="#ph_cf"><tt>ph_cf</tt></a> &nbsp;for keeping the interaction parameter coefficients, and of the <a href="#ipxT"><tt>ipxT</tt></a> list of component or moiety indices that identify the interaction in the TSolMod library convention.&nbsp;Default
flag
is off <tt>'-'.</tt></p>
</dd>
  
  <dd>
<p>Dimensions of the <tt>ph_cf</tt> array must be set in the <a href="#Ph_ncp"><tt>Ph_ncp</tt></a> cells, and the maximum order of interaction (number of columns) for the <tt>ipxT</tt> list must be set in <small><a href="gm_phase.html#Ph_npx"><big><span style="font-family: monospace;">Ph_npx</span></big></a></small>
upon remake. The user must enter the data
in <tt>ph_cf</tt> array and into the <tt>ipxT</tt> list. </p>

  </dd>
  
  <dd>&nbsp;&nbsp;&nbsp;</dd>
  <dt> <a name="Ph_Ps_2"></a><big><big><b><tt>Ph_Ps[2]</tt></b></big></big>
- Allocation flag for the <a href="#dc_cf"><tt>dc_cf</tt></a> array
for phase component properties { + * - } </dt>
  <dd>
<p>
This flag controls allocation of an optional dynamic array <a href="#dc_cf"><tt>dc_cf</tt></a> &nbsp;for keeping properties of individual
phase components to be used in built-in mixing models or in the math scripts provided in <a href="#DcEq"><tt>DcEq</tt></a> or <a href="#PhEq"><tt>PhEq</tt></a> fields.&nbsp;</p>
</dd>
  
  <dd>
<p>Dimensions of the <a href="#dc_cf"><tt>dc_cf</tt></a> array
(only number of coefficients per species M)&nbsp; <a href="#Ph_nsc"><tt>Ph_nsc</tt></a>
field must be set up in the Phase wizard upon create/clone/remake. The user must enter the data
into dc_cf array. Default flag is off <tt>'-'</tt>.</p>
</dd>
  
  <dd>
<p><b>Note:</b> In certain cases, the
program will sample the component properties from DComp or ReacDC records upon
re-calculation of the Phase record. </p>

&nbsp;&nbsp; </dd>
  <dt> <a name="Ph_Ps_3"></a><big><big><b><tt>Ph_Ps[3]</tt></b></big></big>
- Allocation flag for the math
script <a href="#PhEq"><tt>PhEq</tt></a>
field { + * - } <br>
</dt>
  <dd>
<p>
If this flag is set (in Phase wizard) to&nbsp; '<tt>+</tt>'&nbsp; or '<tt>*</tt>'&nbsp; then the <a href="#PhEq"><tt>PhEq</tt></a> text field will be allocated, where the user
can specify a <a href="gmscript.html">math script</a> with equations
for the whole phase. Default flag is off <tt>'-'</tt>.</p>

&nbsp; </dd>
  <dt> <a name="Ph_Ps_4"></a><tt><big><big><b>Ph_Ps[4]</b></big></big></tt>
- Allocation flag for the&nbsp; math script <a href="#DcEq"><tt>DcEq</tt></a>
field { + * - } </dt>
  <dd>
<p>
If this flag is set (in Phase wizard) to '<tt>+</tt>' or '<tt>*</tt>' then the <a href="#DcEq"><tt>DcEq</tt></a> text field will be allocated, where the user can enter a <a href="gmscript.html">math script</a> with equations for
calculation of species activity coefficients. Default flag is off <tt>'-'</tt>.</p>

&nbsp;&nbsp; </dd>
  <dt> <a name="Ph_Ps_5"></a><big><big><b><tt>Ph_Ps[5]</tt></b></big></big>
- Allocation flag for surface type - related data objects { + * - } <br>
</dt>
  <dd>
<p>
This flag must be set on ( '+' or '*' ) using Phase wizard in order to define a sorption
phase
with surface species. If the flag is on then <tt><a href="#SCM_C">SCM_C</a>,<a href="#FSI_t">FSI_t</a>, <a href="#MsDt_0">MsDT</a>, <a href="#Cap_t_0">Cap_t</a> </tt>and <a href="#XfIEC"><tt>XfIEC</tt></a>
data objects (visible in the "Phase" window) will be allocated. Each of these objects
will
have the number of rows specified in the <a href="#Ph_nsi_0"><tt>Ph_nsi</tt></a>
&nbsp;field. In addition, the data objects <a href="#SAT_C_0"><tt>SAT_C</tt></a>
and <a href="#MaSDj"><tt>MaSDj</tt></a> will be allocated. Default flag is off <tt>'-'</tt>.&nbsp; </p>

&nbsp; </dd>
  <dt> <a name="Ph_Nc_0"></a><big><big><b><tt>Ph_Nc[0]</tt></b></big></big>
- Number of Dependent Components (species) in this phase definition <br>
</dt>
  <dd>
<p>
This number will be automatically calculated after the user has
selected ReacDC/DComp records to be linked into this Phase
definition. This selection occurs after finishing the Phase 
wizard.&nbsp; Upon clone/remake, previously selected phase components 
will be automatically marked in the ReacDC/DComp record list.</p>

&nbsp; </dd>
  <dt> <a name="Ph_Nc_1"></a><big><big><b><tt>Ph_Nc[1]</tt></b></big></big>
- Number of references to Data Sources <br>
</dt>
  <dd>
<p>
Shows the number of references to data sources visible in optional lists <a href="#pSDref"><tt>pDSref</tt></a> and <a href="#pSDval"><tt>pSDval</tt></a>. This number can be changed in Phase Wizard upon remake. Default value is 0 (the SDref key lists not available). </p>

&nbsp;&nbsp; </dd>
  <dt> <a name="Ph_ncp"></a><big><b><big><tt>Ph_ncp</tt></big></b></big>
- Number of rows in <a href="#ph_cf"><tt>ph_cf</tt></a> data
array and in&nbsp;<a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a>&nbsp; index list; number of columns in <tt>ph_cf</tt> data array. <br>
</dt>
  <dd>
<p>
Shows the number of rows (first cell) and columns (second cell) of
the optional <a href="#ph_cf"><tt>ph_cf</tt></a> array (to appear on
Page 3
of the Phase window); if both non-zero then the <a href="#Ph_Ps_1"><tt>Ph_Ps[1]</tt></a>
flag is also set on. The number of rows in <tt>ph_cf</tt> is also the number of rows in <tt>ipxT</tt> index list. <br>
</p>
</dd><dd>
  <p>These dimensions can be reset in Phase wizard upon 
create/clone/remake of the Phase record. For some built - in calculation
 modes (see code in <a href="file:///Users/kulik/DevGEMS/trunk/gems-gui/Resources/doc/html/gm_phase.html#p_solt_0"><tt>&nbsp;p_solt[0]</tt></a>
field) conforming to TSolMod class specifications, the number of columns will be set automatically. The number of rows&nbsp; in <span style="font-family: monospace;">ph_cf</span>&nbsp; array is also the
number of&nbsp; rows in the <a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a> array. </p>

  </dd>

  
  <dd>
<p>Default values are 0 (the <a href="#ph_cf"><tt>ph_cf</tt></a>
array
and ipxT list not available).</p>

  </dd><dd>&nbsp; </dd>
  <dt> <a name="Ph_npx"></a><big><big><b><tt>Ph_npx</tt></b></big>&nbsp;
    </big>-&nbsp; Number of columns (max. order of interaction parameter) in <a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a>
index list </dt>
  
  <dd>
<p> Shows the number of columns in the <a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a> parameter
indexation list, which corresponds to the maximum order of used parameters.
For instance, set 2 if only binary parameters are used in the
multi-component mixing model. Some built-in mixing models (see code in <a href="gm_phase.html#p_solt_0"><tt>p_solt[0]</tt></a>
field) conforming to <a href="#PHASE_INTPAR">TSolMod specifications</a> set this
dimension automatically. The number of rows in the <a href="#ipxT"><span style="font-family: monospace;">ipxT</span></a> table is the same as
in the <a href="#ph_cf"><span style="font-family: monospace;">ph_cf</span></a>
array. Dimensions can be reset in the Phase wizard upon clone/remake of Phase record. </p>

  </dd>
  
  <dd> Default value is 0 (the <span style="font-family: monospace;">ipxT</span> list not available).<br>
&nbsp; &nbsp;</dd>

  <dd>&nbsp;&nbsp; </dd>
  <dt> <a name="Ph_nsc"></a><big><big><b><tt>Ph_nsc</tt></b></big></big>
- Number of columns (properties and coefficients per end member) in the <a href="#dc_cf"><tt>dc_cf</tt></a>
array <br>
  </dt>
  <dd><br>
  </dd>
  <dd>Shows the number of columns of the optional <a href="#dc_cf"><tt>dc_cf</tt></a>
array (the <a href="#Ph_Ps_2"><tt>Ph_Ps[2]</tt></a> flag must
be also
set on). The number of rows in <tt>dc_cf</tt> is given in the <a href="#Ph_Nc_0"><tt>Ph_Nc[0]</tt></a> cell. Dimensions can be changed in Phase wizard upon remake. In some built - in
calculation modes, these dimensions will
be set
automatically, depending on the code in &nbsp;<a href="#p_solt_0"><tt>p_solt[0]</tt></a>
field.&nbsp;&nbsp;</dd>
  <dd>&nbsp; <br>
  </dd>
  <dd>Default value is 0 (the <a href="#dc_cf"><tt>dc_cf</tt></a>
array will not be available). </dd>
  <dd>&nbsp;&nbsp; <br>
&nbsp;&nbsp; </dd>
  <dt> <a name="Ph_nsi_0"></a><big><big><b><tt>Ph_nsi[0]</tt></b></big></big>
- Number of active surface patches/types (1 to 6, sorption phases only) <br>
</dt>
  <dd>
<p>
Shows number of surface types (minimum 1, maximum 6) defining how many
surface
patches (types) will be considered (and how many rows will be allocated in <tt><a href="#SCM_C">SCM_C</a>, <a href="#FSI_t">FSI_t</a>, <a href="#MsDt_0">MsDT</a>, <a href="#Cap_t_0">Cap_t</a> </tt>and <a href="#XfIEC"><tt>XfIEC</tt></a>
data objects). The <a href="#Ph_Ps_5"><tt>Ph_Ps[5]</tt></a> flag must
also be set on in the case of sorption phase with surface
complexation. Number of surface types can be changed in Phase wizard upon remake.<br>
</p>
</dd>
  <dd>
<p>&nbsp;This cell must contain 0 (default) for all phase types except sorption phase (code 'A' in <a href="#p_solt_0">p_solt[0]</a>).&nbsp; </p>

&nbsp; </dd>
  <dt> <a name="Ph_nsi_1"></a><big><big><b><tt>Ph_nsi[1]</tt></b></big></big>
- Number of different substituting moieties in the multi-site mixing model (0: simple mixing)</dt>
  
  <dd>
<p>Contains the number of different moieties (ions, atoms, etc.) that 
can substitute each other on structural sites of the sublattice 
(multisite) model of mixing.&nbsp; Note that the same stoichiometry 
(e.g. {Fe} substituting in two different sites is considered as two 
different moieties. This dimension is automatically computed by 
analyzing DC formulae when the Phase record is re-calculated.</p>
</dd><dd>
  <p>Default value (for models other than the multi-site mixing) is 0.&nbsp;</p>
</dd>
<dt><br>
</dt>
</dl>
<hr size="2" width="100%">

<h3><a name="PHASE_DOD_RESERVED"></a>5.2. Reserved and obsolete data
objects</h3>
<dl>
  <dt><br>
  </dt>
</dl>
<dl>
  <dt><a name="PHtprn"></a><big><b><tt>PHtprn</tt></b></big> </dt>
  <dd> Internal </dd>
  <dd> <br>
  </dd>
</dl>
<hr size="2" width="100%">
<h3><a name="PHASE_DOD_HIDDEN"></a>5.3. Hidden data objects for usage
in
Phase math scripts<br>
</h3>
<p>
The data objects listed below cannot be seen on Phase window pages
because these data exist in the runtime GEM IPM work data structure and are
automatically
mapped to components and parameters of this phase only.&nbsp;When labels
of
these hidden data objects are used in the <a href="#DcEq"><tt>DcEq</tt></a> or <a href="#PhEq"><tt>PhEq </tt></a>scripts, there
is
no need to care about location of this phase and its species in the
whole chemical system definition, which is hard to know in advance,
before the
project system is assembled. </p>


<p><big><b><tt>Attention!</tt></b></big> Most of the data objects listed
below are marked as "read only". This means that their values are
automatically set or changed during GEM IPM calculations. Using these
"read only" objects on the left side of <a href="g_mscript.html">math script</a> assign operator "=:" (i.e. assigning values to them) may cause incorrect results, unpredictable behaviour
or the program crash. </p>


<dl>
  <dt> <a name="Ps_mod"></a><big><b><tt>Ps_mod</tt></b></big> - Copy of <a href="#p_solt_0"><tt>p_solt</tt></a> codes for this phase, kept in the IPM work data structure (reserved)<br>
</dt>
  <dd>
&nbsp; <br>
</dd>
  <dt><a name="T_C"></a><big><b><tt>T_C</tt></b></big> -
&nbsp;Temperature in Centigrade C (scalar, read only) </dt>
  <dd>
  <p>Current system temperature (<sup>o</sup>C).&nbsp;&nbsp; </p>

  </dd>

  
  <dt> <a name="T_K"></a><big><b><tt>T_K</tt></b></big> - Temperature
in Kelvins
(scalar, read only) </dt>
  <dd>
  <p>Current system temperature (K). </p>
 </dd>

  
  <dt> <a name="P_"></a><b><big><tt>P_</tt></big></b> - Pressure in
bars (scalar,
read only) </dt>
  <dd>
<p> &nbsp; Current system pressure (bar, 1 bar = 0.1 MPa). </p>
</dd>
  <dd> &nbsp; </dd>
  <dt> <a name="IS_"></a><big><b><tt>IS_</tt></b></big> - Effective
molal ionic strength I (scalar, read only) </dt>
  <dd>
  <p>Current (at GEM IPM iteration) molal ionic strength of aqueous electrolyte.</p>
</dd>

  <dd> &nbsp; </dd>
  <dt> <a name="is"></a><big><b><tt>is</tt></b></big> - Internal index
of a column (e.g. in <a href="#dCm"><big><span style="font-family: monospace;">dCm</span></big></a> or <a href="#pCv"><big><span style="font-family: monospace;">pCv</span></big></a> arrays),&nbsp;
scalar&nbsp; </dt>
  
  <dd>
<p>This index is not set automatically and can be changed e.g. in a
math
script "do begin ... end" loop.&nbsp;&nbsp; </p>
</dd>
  
  
  <dt> <a name="js"></a><b><big><tt>js</tt></big></b> - internal index
of a row in <big><tt>dCm</tt></big> array (scalar) </dt>
  
  <dd>
<p>This index can be used in DcEq or PhEq scripts to access <a href="#dCm"><big><span style="font-family: monospace;">dCm</span></big></a> array cells. </p>

  </dd>
  <dd>
<p>In "public" mode, this index is automatically changed by the program from 0 to <tt>Ndc-1</tt>, where <a href="#Ndc"><tt>Ndc</tt></a>
is number of dependent components (species) in this phase. In "private"
mode, the
user must change this index in a math script operator.&nbsp;&nbsp; &nbsp;&nbsp; </p>
</dd>
  
  
  <dt> <a name="nexta"></a><b><big><tt>nexta</tt></big></b> - internal
indicator
of continued loops&nbsp; in do() operator (scalar) </dt>
  
  <dd>
<p>This indicator (integer number 0 or 1) is not set automatically
and
can be changed in a math script operator. The control will bail out of the loop when nexta = 0.</p>
</dd><dd>&nbsp;<br>
  </dd>
  <dt> <a name="Ncp"></a><big><b><tt>Ncp</tt></b></big> - Number of 
interaction parameters;&nbsp; max. order of interaction; number of 
coefficients per parameter; (vector of length 3, read only) </dt>

  
  <dd>
<p>These three counters contain: </p>
</dd><dd><tt>Ncp[0]</tt> - number of rows in the <a href="#pCv"><tt>pCv</tt></a>&nbsp; and <a href="#ipxt"><tt>ipxt</tt></a> arrays, or zero if <a href="#pCv"><tt>pCv</tt></a> is not allocated.</dd>
<dd><tt>Ncp[1]</tt> - number of columns in the <a href="#ipxt"><tt>ipxt</tt></a> index list for interaction parameters (in models of mixing from TSolMod class library), or 0 if the <tt>ipxt</tt> index list is not used for this phase.</dd>
<dd><tt>Ncp[2]</tt> - number of columns in <tt>pCv</tt> array, or 0 if <tt>pCv</tt> is not used.</dd>

  <dd>&nbsp; <br>
  </dd>
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="Ncd"></a><big><b><tt>Ncd</tt></b></big>&nbsp;- Number
of coefficients per DC in <tt>dCm</tt> array; number of sublattices/sites; number of substituting moieties (scalar, read only) </dt>
  
  <dd>
<p>These three counters contain: </p>
</dd><dd><tt>Ncd[0]</tt> - number of columns in the <a href="#dCm"><tt>dCm</tt></a> array, or zero if <a href="#dCm"><tt>dCm</tt></a> is not allocated (number
of rows in dCm is given in the <a href="#Ndc"><tt>Ndc</tt></a>
counter).</dd>
<dd><tt>Ncd[1]</tt> - number of sublattices/sites in multi-site solution model, or zero otherwise.</dd>
<dd><tt>Ncd[2]</tt> - number of moieties substituting on sublattice sites in multi-site solution, or zero otherwise.</dd>

  <dd>&nbsp; <br>
  </dd>
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="Ndc"></a><big><b><tt>Ndc</tt></b></big> - Number of
dependent components (end members, species) in this phase (scalar, read only) </dt>
  
  <dd>
<p>This object is mapped onto <tt>L1[k]</tt> cell, where&nbsp;<tt>k</tt> is
the index
of this phase in the GEM IPM data structure. It must be used for limiting any loop that runs with the <a href="#js"><tt>js</tt></a> index over phase components.<br>
</p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="PhVol"></a><big><b><tt>PhVol</tt></b></big> - current
volume of this phase in cm<sup>3</sup> (scalar, read only) <br>
</dt>
  
  <dd>
<p>Mapped to the <tt>phVol[k]</tt> cell where <tt>k</tt> is the
index of
this phase in the GEM IPM data structure.&nbsp;</p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="RT_"></a><big><b><tt>RT_</tt></b></big> - &nbsp;value
of <i>RT </i>for current temperature in J/mol (scalar, read only) 

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></dt>
</dl>
<blockquote>
  <p>The value of <i>RT</i> (<i>R</i>=8.31451 J/K/mol&nbsp; is the universal gas constant, <i>T</i> is temperature in K) is set automatically. </p>
</blockquote>
<dl>
  <dd>
    <p>Added to simplify writing Phase
math scritps.&nbsp; <br>
    </p>
  </dd>

  
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="FRT_"></a><big><b><tt>FRT_</tt></b></big> - value of
  <i>F</i>/(<i>RT</i>)&nbsp; for current temperature in C/J (scalar, read only) </dt>
  
  <dd>
  <p>The value of <i>F</i>/(<i>RT</i>) (<i>F</i> = 96485 C/mol is the Faraday constant) is set automatically. </p>
</dd><dd>
    <p>Added to simplify
Phase math scritps involving electrostatic correction terms.&nbsp;</p>
  </dd>

  
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="Ez"></a><big><b><tt>Ez</tt></b></big> - DC (species)
formula charges&nbsp; (vector of length&nbsp; <a href="#Ndc"><tt>Ndc</tt></a>, read only).</dt>
  
  <dd>
  <p>Mapped to a block of the&nbsp; <tt>ez</tt> &nbsp;vector in the GEM IPM data structure that corresponds to
this phase.&nbsp; </p>
</dd>
  
  <dd>
  <p>Usage in phase scripts: <tt>Ez[js]</tt> (in "public" mode),&nbsp;
or <tt>Ez[0]</tt> &nbsp;(<tt>Ez[1]</tt> ...) in "private" mode.&nbsp; <br>

  </p>
</dd>
  
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="pCv"></a><big><b><tt>pCv</tt></b></big> - Array
of interaction parameter coefficients for the phase-solution
non-ideal mixing model (read only) </dt>
  
  <dd>
  <p>This array having Ncp[0] rows and Ncp[2] columns corresponds at GEM IPM runtime to the <a href="#ph_cf"><tt>ph_cf</tt></a> array of interaction parameter coefficients
from this Phase record. More about these coefficients in relation to built-in and cripted models can be learned <a href="#ph_cf">here</a>.</p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>pCv[0][0], pCv[0][1], ...</tt></p>

  </dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="dCm"></a><big><b><tt>dCm</tt></b></big> - Array
of coefficients of end-member (species) properties for the non-ideal mixing model (read only)<br>
</dt>
  
  <dd>
  <p>This array having <a href="#Ndc"><tt>Ndc</tt></a> rows and <a href="#Ncd">Ncd</a>[0] columns (coefficients per phase component) corresponds at GEM IPM runtime to the <a href="#dc_cf"><tt>dc_cf</tt></a> array of phase component properties. More about these coefficients in relation to built-in and cripted models can be learned <a href="gm_phase.html#dc_cf">here</a>. Before
the
GEM IPM calculation, the program automatically copies here data from
the <a href="#dc_cf"><tt>dc_cf</tt></a> array (if present) from the
respective
Phase record (row by row, except that for skipped phase
components).&nbsp; <br>
  </p>
</dd>
  
  <dd>
  <p>Usage in math scripts:<tt> dCm[0][1], ... &nbsp;dCm[js][is]</tt>
("public"
mode), ...<tt> dCm[js]</tt> (if <a href="#Ncd"><tt>Ncd</tt></a>[0] =
1).&nbsp;&nbsp; <br>
  </p>
</dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="mVol"></a><b><big><tt>mVol</tt></big></b> - Species
molar volume, cm<sup>3</sup>/mol; &nbsp;vector of length&nbsp; <a href="#Ndc"><tt>Ndc</tt></a> (read only).</dt>
  
  <dd>
  <p>Mapped to a block of the <tt>vol</tt> &nbsp;vector belonging to
this phase in the GEM IPM data structure. </p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>mVol[js]</tt> (in "public"
mode)&nbsp; or <tt>mVol[0]</tt> &nbsp;(<tt>mVol[1]</tt> ...) in
"private" mode.&nbsp;</p>
</dd>
  
  <dd> &nbsp;<br>
  </dd>
  <dt> <a name="mGo"></a><big><b><tt>mGo</tt></b></big> - molar Gibbs
energy of pure end-members in the normalized lnK scale at <i>T,P</i> of interest
(length <a href="#Ndc"><tt>Ndc</tt></a>), read only </dt>
  
  <dd>
  <p>Mapped to a block of the <tt>g0</tt> &nbsp;vector belonging to
this phase in the GEM IPM data structure.&nbsp;Read only.&nbsp;</p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>mGo[js]</tt> (in "public"
mode)&nbsp; or <tt>mGo[0]</tt> &nbsp;(<tt>mGo[1]</tt> ...) in
"private" mode.&nbsp;</p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="gDQF"></a><big><b><tt>gDQF</tt></b></big> - Constant correction to end member <i>g</i>0 from Darken formalism or pure-state fugacity (length <a href="#Ndc"><tt>Ndc</tt></a>)

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></dt>
</dl>
<dl>
<dd>
  <p>Units of measurement: normalized lnK, correspond to <a href="#ln_gam"><span style="font-family: monospace;">ln_gam</span></a> units. Calculated in non-ideal fluid models (built-in or scripted). <br>
  </p>

  </dd>
  <dd>
  <p>Mapped to a block of the&nbsp; <tt>gEx</tt>&nbsp; vector
belonging to
this phase in the GEM IPM work data structure. </p>

  </dd>
  <dd>
  <p><big><span style="font-family: monospace;">gDQF</span></big>&nbsp;
elements can be used e.g. for setting up solid solution models that use
Darken's Quadratic Formalism (DQF).&nbsp;</p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>gDQF[js]</tt> (in "public"
mode)&nbsp;
or <tt>gDQF[0]</tt> &nbsp;(<tt>gDQF[1]</tt> ...) in "private"
mode.&nbsp; <br>
  </p>
</dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="gam"></a><big><b><tt>gam</tt></b></big> - calculated
activity
coefficients of phase components (length <a href="#Ndc"><tt>Ndc</tt></a>, in molal scale for aqueous species)<br>
</dt>
  
  <dd>
  <p>Mapped to a block of the <tt>gamma</tt> &nbsp;vector belonging
to this phase in the GEM IPM data structure.&nbsp;&nbsp; <br>

  </p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>gam[js] =: &lt;expression&gt;</tt>&nbsp;
(in "public" mode) or <tt>gam[0] =: &lt;expression&gt;;</tt> &nbsp;(<tt>gam[1]
=:</tt>
...) &nbsp;in "private" mode.&nbsp;</p>
</dd>
  
  
  <dd>
  <p>&nbsp;If, for a phase species, <tt>gam[js]</tt> not equal to 1
is calculated
and <tt>ln_gam[js]</tt> is set to 0 then <tt>ln_gam[js]</tt> will be
automatically
assigned<tt> ln(gam[js])</tt> value.</p>
</dd>
  
  <dd>&nbsp;&nbsp; </dd>
  <dt> <a name="ln_gam"></a><big><b><tt>ln_gam</tt></b></big> -
calculated
natural logarithms of rational (mole fraction scale) activity coefficients of phase components (length
    <a href="#Ndc"><tt>Ndc</tt></a>) </dt>
  
  <dd>
  <p>Mapped to a block of the <tt>lnGam</tt> &nbsp;vector belonging
to this phase in the GEM IPM data structure. Calculated in all built-in models of mixing. <br>
  </p>
</dd>
  
  
  <dd>
  <p>Usage in math scripts: <tt>ln_gam[js] =: &lt;expression&gt;</tt>&nbsp;
(in "public" mode) or <tt>ln_gam[0] =: &lt;expression&gt;;</tt> &nbsp;(<tt>ln_gam[1]
=:</tt>
...) &nbsp;in "private" mode.&nbsp;</p>
</dd>
  
  <dd>
  <p>Math scripts in <a href="#DcEq"><tt>DcEq</tt></a> field (as well as built-in functions)
usually
calculate <tt>ln_gam</tt> values for phase species involved into
calculation
of equilibrium states. If, for a phase species, <tt>ln_gam[js]</tt>
not equal
to 0 is calculated and <tt>gam[js]</tt> is set to 1 then <tt>gam[js]</tt>
will be automatically assigned<tt> exp(ln_gam[js])</tt> value.&nbsp; <br>
  </p>

  </dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="ipxt"></a><big><span style="font-family: monospace;"><span style="font-weight: bold;">ipxt</span></span></big> - table of
indexation of components or moieties for interaction parameters,&nbsp;
read only<br>
  </dt>
  
  <dd>
  <p>Mapped to the part of the <big><span style="font-family: monospace;">IPx</span></big>
array in the GEM IPM
data structure that belongs to this phase.&nbsp; This table (list) has one row per interaction
parameter and the number of columns equal to the maximum order of
interactions (usually number of end members, or less).&nbsp; The number
of interaction parameters is model-specific and also depends on the
number of end members. See also <a href="#ipxT">ipxT help page</a>.<br>
  </p>

  </dd>
  
  <dd>
  <p>Values in this table are indexes of the end members in the phase (ranging from 0 to <a href="#Ndc"><tt>Ndc</tt></a>-1), or -1 if this
parameter is less than higher-order. Rules for setting up the
indexation and interaction parameter coefficients for built-in
functions are provided in the description of&nbsp; <a href="#ph_cf"><big><span style="font-family: monospace;">ph_cf</span></big></a>&nbsp; table and in the <a href="g_useref#P_SOLT0">User's Reference</a>. </p>

  </dd>
  
  <dd>
  <p>For example, in a binary solution phase, the <big><span style="font-family: monospace;">ipxt</span></big> table will have two
columns and two rows for a subregular mixing model. A multicomponent
Van Laar model will require two columns because it only considers
binary interaction parameters; the number of rows depends on how many
non-zero interaction parameters are known. Any binary interaction
parameter which is not listed in the <big><span style="font-family: monospace;">ipxt </span></big>table will receive
its default (usually zero) value in built-in subroutines for
calculation of activity coefficients.</p>

  </dd>
  
  <dd>
  <p>Used in all built-in models of non-ideal mixing that conform with 
TSolMod specifications. Can be used in both Phase math scripts.</p>
</dd>
  
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="As"></a><big><b><tt>As</tt></b></big> - block of the
stoichiometry
matrix A belonging to this phase in the GEM IPM data structure (read
only) </dt>
  
  <dd>
  <p>Mapped to a block of the <tt>A</tt> matrix in GEM IPM data
structure, one row per phase component, one column per independent component. &nbsp; </p>
</dd>
  <dd>Can be used in Phase math scripts e.g. for extracting
stoichiometry
of a species. <br>
  </dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="Xalp"></a><big><b><tt>Xalp</tt></b></big> - current total mole amount of this phase (scalar, read only) </dt>
  
  <dd>
  <p>Mapped to an element of vector <tt>Xa[k]</tt> in the GEM IPM
data structure,
where k is the index of this phase. Can be used in both Phase math
scripts
e.g. for explicit calculation of mole fractions.</p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="XalpV"></a><big><b><tt>XalpV</tt></b></big> - current total mole amount in solvent or sorbent of this phase (scalar, read only) </dt>
  
  <dd>
  <p>Mapped to an element of vector <tt>Xav[k]</tt> in the GEM IPM
data
structure, where k is the index of this phase. Can be used in both
Phase
math scripts e.g. for explicit calculation of mole fractions. <br>

  </p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="XalpS"></a><big><b><tt>XalpS</tt></b></big> -&nbsp;
total
number of moles of solutes in this (aqueous or sorption) phase (scalar,
read
only) </dt>
  
  <dd>
  <p>Mapped to an element of vector <tt>Xas[k]</tt> in the GEM IPM
data
structure, where k is the index of this phase. Can be used in both
Phase
math scripts e.g. for explicit calculation of mole fractions etc.</p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="XecR"></a><big><b><tt>XecR</tt></b></big> &nbsp;-
reserved
for future versions </dt>
  <dd> &nbsp; </dd>
  <dd> &nbsp; </dd>
  <dt> <a name="Xx"></a><big><b><tt>Xx</tt></b></big> - vector of current mole amounts
of dependent components (end members, species) in this phase&nbsp;(length <a href="#Ndc"><tt>Ndc</tt></a>,
read
only) </dt>
  
  <dd>
  <p>Mapped to a block of the <tt>x</tt> &nbsp;vector belonging to
this
phase in the GEM IPM data structure.&nbsp;&nbsp;</p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>Xx[js]</tt> (in "public" mode)&nbsp;
or <tt>Xx[0]</tt> &nbsp;(<tt>Xx[1]</tt> ...) in "private" mode.&nbsp;</p>
</dd>
  
  <dd> <br>
  </dd>
  <dt> <a name="Wx"></a><big><b><tt>Wx</tt></b></big>&nbsp;- vector of
current mole
fractions of dependent components (end members, species) in this phase&nbsp;(length <a href="#Ndc"><tt>Ndc</tt></a>,
read only) </dt>
  
  <dd>
  <p>Mapped to a block of the <tt>Wxx</tt> &nbsp;vector belonging to
this phase in the GEM IPM data structure.&nbsp;&nbsp;</p>
</dd>
  
  <dd>
  <p>Usage in math scripts: <tt>Wx[js]</tt> (in "public" mode)&nbsp;
or <tt>Wx[0]</tt> &nbsp;(<tt>Wx[1]</tt> ...) in "private" mode.&nbsp;</p>
</dd>
  
  <dd>
  <p>This object is most frequently used in writing equations for
activity
coefficients of end-members in non-ideal solid solutions.&nbsp;&nbsp; <br>
  </p>
</dd>
  
  <dd> &nbsp; </dd>
  <dt> <a name="fMu"></a><big><b><tt>fMu</tt></b></big> - vector of
current normalized
chemical potentials of dependent components involved in this phase (length <a href="#Ndc"><tt>Ndc</tt></a>, read only) </dt>
  
  <dd>
  <p> &nbsp;Mapped to a block of the v &nbsp;vector belonging to this
phase
in the GEM IPM data structure.&nbsp; <br>
  </p>
</dd>
  
  <dd>&nbsp;<br>
  </dd>
  <dt> <a name="Qp"></a><b><big><tt>Qp</tt></big></b> - array of&nbsp;
180
work cells for phase model for use in math scripts for this phase &nbsp; </dt>
  
  <dd>
  <p>These work cells are initialized to zeros before the <a href="#PhEq"><tt>PhEq</tt></a> math script is executed.&nbsp;&nbsp; </p>
</dd>
  
  <dd> &nbsp;&nbsp; </dd>
  <dt> <a name="Qd"></a><big><b><tt>Qd</tt></b></big> - array of 60
work cells
for DCs use in math scripts for this phase </dt>
  
  <dd>
  <p>Attention: In "public" mode, contents of these work cells will be
zeroed
off before the next (js) species is processed.</p>
</dd><dd>&nbsp;&nbsp; </dd>

  
  
</dl>

<dl>
  <dt> <a name="wEqTxt"></a><big><b><tt>wEqTxt</tt></b></big> &nbsp;-
reserved
for future versions<b><b><b> </b> </b></b></dt>
</dl>
<dl>
  <dd><b><b><b><br>
    </b> </b></b></dd>
  
</dl>
<hr style="width: 100%; height: 2px;">
<h2><a name="PHASE_ERRORS"></a>6. Warnings and error messages</h2>
<dl>
  <dt><big><b><tt>E00PHrem</tt></b></big>: Illegal link q&gt;nQ</dt><dd><br>
</dd>

  <dt><big><b><tt>E01PHrem:</tt></b></big> Illegal access to ph in
dyn_set()</dt><dd><br>
</dd>

  <dt><big><b><tt>E02PHrem:</tt></b></big> Illegal access to ph in
dyn_kill()</dt><dd><br>
</dd>

  <dt><big><b><tt>E03PHrem:</tt></b></big> Illegal access to ph in
dyn_new()</dt><dd><br>
</dd>

  <dt><big><b><tt>E04PHrem:</tt></b></big> Number of DC in the phase
definition &lt;= 0</dt><dd><br>
</dd>

  <dt><big><b><tt>E05PHrem:</tt></b></big> Illegal access to ph in
set_def()</dt>
  <dd>&nbsp;</dd>
  <dd>Internal errors that most probably indicate the corruption of
dynamic
memory.&nbsp;</dd>
  <dd><br>
  </dd>
  <dd>Action: Restart GEMS and try again. If it does not help, please,
submit
a bug report describing a situation when it happens. &nbsp;</dd>
  <dd>&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt><big><b><tt>W06PHrem:</tt></b></big> Invalid number of coeffs in
the non-ideal solution model! Proceed?</dt>
  <dd>&nbsp;</dd>
  <dd>During remake, some dimensionalities have been assigned negative
or
too large values.&nbsp;</dd>
  <dd>&nbsp;</dd>
  <dd>Action: Press "Yes" and remake the record again and change the
counters.</dd>
  <dd>&nbsp;</dd>
  <dd>&nbsp;&nbsp;<br>
  </dd>
  <dt><b><big><tt>E07PHrem:</tt></big></b> Invalid mode of calculation!</dt>
  <dd>&nbsp;</dd>
  <dd>&nbsp;Some codes in the <a href="#p_solt_0"><tt>p_solt</tt></a>
field
are wrong or mismatch with the allocation flags.&nbsp;</dd>
  <dd>&nbsp; </dd>
  <dd>Action: Remake the record again and change the codes or
allocation
flags.</dd>
  <dd><br>
  </dd>
  <dd>&nbsp; <br>
  </dd>
  <dt><big><b><tt>W08PHrem:</tt></b></big> Number of selected
ReacDC/DComp keys &lt; 1.</dt>
  <dt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Mark again, proceed without ReacDC/DComp or Cancel?,</dt>
  <dd>&nbsp;&nbsp;</dd>
  <dd>No species from the database have been selected into the phase
definition.&nbsp;</dd>
  <dd><br>
  </dd>
  <dd>Actions: &nbsp; Press "Repeat" and mark the species again;</dd>
  <dd>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Press
"Cancel"
to abandon the create/remake action. </dd>
  <dd>&nbsp;&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
  <dt><big><b><tt>E09PHrem:</tt></b></big> No ReacDC/DComp records
selected into Phase..</dt>
  <dd>&nbsp;</dd>
  <dd>Confirmation that the user has pressed "Cancel" on the <big><tt>W08PHrem</tt></big>
warning.</dd>
  <dd>&nbsp;</dd>
  <dd>&nbsp;&nbsp;<br>
  </dd>
  <dt><big><b><tt>W10PHrem:</tt></b></big> Shall I set default values
automatically:&nbsp;
from (Kielland 1936), from (Helgeson ea 1981) or</dt>
  <dt>&nbsp;Not collect and not set automatically?&nbsp;</dt>
  <dd>&nbsp; <br>
  </dd>
  <dd>This function is under construction.&nbsp;</dd>
  <dd>&nbsp;</dd>
  <dd>&nbsp;<br>
  </dd>
</dl>

<hr style="width: 100%; height: 2px;"><b><b><b><tt><br>
</tt> &nbsp;&nbsp; <tt><a href="index.html">To Contents</a> &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;<a href="g_about.html">About GEM-Selektor</a>
</tt><br>
<tt><br>
</tt><br>
<tt>end of file</tt> <br>
&nbsp; <br>
</b> </b></b> <br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>


</body></html>