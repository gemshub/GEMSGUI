<!DOCTYPE doctype PUBLIC "-//w3c//dtd html 4.0 transitional//en"><html>  <head>    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">    <meta name="GENERATOR" content="Mozilla/4.7 [en] (WinNT; I)      [Netscape]">    <title>GEMS3 Proces Module</title>    <meta name="description" content="Version 2.0.0-PSI">  </head>  <body>    <h1><img src="gems1.png" width="48" align="left" height="48"> <font color="#000066">        GEM-Selektor version 3</font> </h1>    <h2>Process and Reaction Path Simulation (Process) Module<br>    </h2>    <hr width="100%" size="2">    <h3>Contents</h3>    <p><a href="#PROCES_INTRO">1. Introduction to Process module</a></p>    <div style="margin-left: 40px;">      <p><a href="#PROCES_SIMULATIONS">1.1. Overview of Process Simulations</a></p>      <p><a href="#PROCES_SPECIAL">1.2. Special cases of &nbsp;Process          Simulators</a></p>      <div style="margin-left: 40px;">        <p><a href="#PROCES_SPECIAL_INVTITR">1.2.1. Inverse titrations</a></p>        <p><a href="#PROCES_SPECIAL_SEQREACT">1.2.2. Sequential reactors</a></p>        <p><a href="#PROCES_SPECIAL_LIPPMANN">1.2.3. Lippmann diagrams</a></p>      </div>    </div>    <p><a href="#PROCES_MWIZARD">2. Process Module Create/Remake Wizard</a> </p>    <div style="margin-left: 40px;">      <p><a href="#WZSTEP_1">2.1. Proces Wizard Step 1 - Process Simulator          Configuration </a></p>      <p><a href="#WZSTEP_2">2.2. Proces Wizard Step 2 - Process Simulation          Controls</a></p>      <p><a href="#WZSTEP_3">2.3. Proces Wizard Step 3 - Selection of Items to          Sample/Plot </a></p>      <p><a href="#WZSTEP_4">2.4. Proces Wizard Step 4 - Important Data Object          Dimensions</a></p>      <p><a href="#WZSTEP_5">2.5. Proces Wizard Step 5 - Additional Options</a></p>      <p><a href="#WZSTEP_6">2.6. Proces Wizard Step 6 - Final Settings and          Comments</a></p>    </div>    <p><a href="#PROCES_MWINDOW">3. Process Module Window</a></p>    <div style="margin-left: 40px;">      <p><a href="#MWPAGE_1">3.1. Proces Window 'Controls' Page</a></p>      <p><a href="#MWPAGE_2">3.2. Proces Window 'Sampling' Page</a></p>      <p><a href="#MWPAGE_3">3.3. Proces Window 'Results' Page</a></p>      <p><a href="#MWPAGE_4">3.4. Proces Window 'Config' Page</a></p>    </div>    <p><a href="#PROCES_DETAILS">4. Details on Process Simulations</a></p>    <div style="margin-left: 40px;">      <p><a href="#PROCES_DETAILS_ITERATORS">4.1. Setting up the Process          iterators</a></p>      <p><a href="#PROCES_SIMULATION_SCRIPT">4.2. Writing Process simulation          control scripts</a></p>      <p><a href="#PROCES_SAMPLING_SCRIPT">4.3. Writing Process data sampling          math scritps</a></p>      <p><a href="#PROCESS_DETAILS_RUN">4.4. Running Process simulations</a></p>      <p><a href="#PROCESS__DETAILS_PLOT">4.5. Plotting and exporting results</a></p>    </div>    <p><a href="#PROCES_DATA">5. Process Window Data Entries</a> </p>    <div style="margin-left: 40px;">      <p><a href="#PROCES_DATA_ITERATORS">5.1. Input Process Iterators</a></p>      <p><a href="#PROCES_DATA_OPTIONAL">5.2. Optional Data Vectors</a></p>      <p><a href="#PROCES_DATA_SAMPLING">5.3. Data Objects for Sampling/Plotting          of Results</a></p>      <p><a href="#PROCES_DATA_CONFIG">5.4. Data fields that can be changed only          through Process Wizard</a></p>    </div>    <p><a href="#PROCES_ERRORS">6. Warnings and error messages</a></p>    <hr width="100%" size="2">    <h2><a name="PROCES_INTRO"></a>1. Introduction to Process Module</h2>    <p> Geochemical modeling often requires simulation of irreversible processes<a        href="glossary.html#DT_irreversible">&nbsp;</a>such
      as mixing, dissolution, titration, corrosion, weathering, etc.&nbsp; This      can be done, based on the<a href="glossary.html#DT_Local_equilibrium"> </a>principles
      of local and partial equilibrium, through computing a discrete series of      equilibrium states generated by a stepwise change of the bulk composition      and other input parameters of the chemical system. Doing this in manual      mode (i.e. defining such equilibrium states one-by-one) may be boring and      time-consuming, especially in the case of certain <i>regular</i> change      of bulk composition of the system. The "manual" data sampling with graphic      or tabular presentation of modeling results would be even more      work-intensive. Hence, the automation of "batch" calculation of many      equilibrium states and sampling of results is of critical importance for      the efficiency of the whole modelling exercise. </p>    <p>For these reasons, a Process Simulator module (and "Process" record type)      has been implemented in the GEM-Selektor code. The module is quite      flexible;&nbsp; it can rapidly generate many equilibrium "points" by      changing virtually any combination of GEM input data (see <a href="gems_bcc.html"><tt>gems_bcc.html</tt></a>      and <a href="gems_scm.html"><tt>gems_scm.html</tt></a> manuals), store      the results (see <a href="gems_sys.html"><tt>gems_sys.html</tt></a>      manual) in the <a href="gm_syseq.html">SysEq</a> part of the project      database, and at the same time, sample and plot any GEM output data (or      functions of it), optionally together with some experimental points. To      tell the program what input data to modify and what output data to sample,      you have to provide two&nbsp;&nbsp;<span style="text-decoration: underline;"></span><a        href="g_mscript.html">scripts</a>:&nbsp;
      <a href="#P_expr"><tt>P_expr</tt></a> that generates the simulation      points, and&nbsp; <a href="#pgExpr"><tt>pgExpr</tt></a> that samples the      simulation results.&nbsp; </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_SIMULATIONS"></a>1.1. Overview of Process Simulations</h3>    <p>There are six major modes of process simulators: </p>    <ul>      <li>"P" &nbsp;&nbsp; Sequential temperature and/or pressure change at        fixed bulk composition</li>      <li>"S" &nbsp;&nbsp; Direct sequential change of bulk composition and/or        constraints (default)</li>      <li>"G" &nbsp; Batch inverse titration sequence for incremented pH values        etc.</li>      <li>"T" &nbsp; One arbitrary inverse titration calculation as defined in        Process control script</li>      <li>"R" &nbsp; Single flow-through reactor (SFTR) simulation using        equilibrium compositions of phases</li>      <li>"L" &nbsp; Lippmann diagram, for a binary solid solution only</li>    </ul>    <p>More modes can be added in future versions. Each mode requires a special      configuration of the Process record and data structure, done at      Create/Remake step with help of the Process module wizard. Detailed      descriptions of available simulation modes are given under <a href="#PROCES_MWIZARD">Process
        Wizard help pages</a>.<br>      &nbsp; <br>      It is impossible to foresee and hard-code all the meaningful process      simulations of interest to (geo)chemists because any simulation depends on      the system definition and the modeling objectives. For this reason, the      GEM-Selektor code expects the user to specify exactly what and how to      simulate by writing a process control script. This provides an unmatched      freedom and flexibility, but at the same time requires some learning      effort. To facilitate writing scripts, we provide a collection of useful      template scripts in the <a href="gm_sdref.html#MATH_SCRIPT_LIB">math        script template library</a>. You can get these scripts at any time with      the "Help" "Scripts" menu command in the Process window. The Process      Wizard can create many variants of control script, depending on the      selected mode and variant, based on items chosen from the selection lists;      thus created scripts can be edited by the user later on.&nbsp; </p>    <p>A process simulator record refers through its <a href="gems_rekey.html#DBM_Process">record
        key format</a> to a 'parent' <a href="gm_syseq.html">SysEq record</a>      that must exist in the project database before the process simulator is      created and executed. This 'parent' SysEq record is used as an initial      state of the chemical system and as a template, which is automatically      modified and 'cloned' into a sequence of process-generated SysEq records.      For this reason, the first eight&nbsp; fields of the <a href="gems_rkey.html#DBM_Process">Process
        record key</a> are the same as of its parent <a href="gems_rekey.html#DBM_SysEq">SysEq
        record key</a>, followed by the process task name and mode code fields.      The GEM input data in the parent SysEq record itself is never changed by      the process simulator, which, however, at start of the simulation      re-calculates the equilibrium speciation in the parent system.&nbsp; </p>    <p>Process simulation, especially in the case of fitting the model to some      empirical data, can be greatly facilitated by using the data sampling and      plotting functionality of the Process module. If the sampling/plotting      mode is invoked and the data sampling script (<a href="#pgExpr"><tt>pgExpr</tt></a>)      is provided, then it will be executed immediately at each step of the      simulation, immediately after calculation of the system equilibrium state.      When the process simulation is finished, the sampled data can be plotted      just by pressing the "Plot data on Graph dialog" toolbar button,      copy-pasted into a commercial spreadsheet program, or exported into an      ASCII file using a print script from the script library. Moreover, when      you run the changed process simulation next time, the newly generated      points will be added one-by-one to the existing graph visible at run time.</p>    <p>In inverse process simulations, the program automatically runs GEM      calculations by varying certain input parameters, such as the amount of      titrant (acid, base, oxidant or reductant), until finding such input      values that bring the "objective" parameter (e.g. the equilibrium pH)      close enough to its prescribed value. This is done using an internal      "Golden Section" algorithm; when it converges (between 3 and 16 single GEM      runs), the program stores the results into database and proceeds to the      next inverse simulation point. The "inverse titration" procedure requires      a special form of <a href="g_mscript.html">script</a>, created by the      Process wizard or available in the <a href="gm_sdref.html#MATH_SCRIPT_LIB">template
math
        script library</a>. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_SPECIAL"></a>1.2. Special Cases of &nbsp;Process      Simulators</h3>    <p> There are several practically important special cases of Process      simulators (see also the <a href="gm_sdref.html#process_mscripts_simulator">template
        math script database</a>). Three will be outlined in this section:      inverse titrations, flow-through reactor (leaching and flushing), and      calculation of Lippmann diagrams in binary solid solution - aqueous      solution (SSAS) systems.</p>    <br>    <hr style="width: 100%; height: 2px;">    <h4><a name="PROCES_SPECIAL_INVTITR"></a>1.2.1. Inverse titrations<br>    </h4>    <h4>Inverse Titration (single point)</h4>    <p> Suppose we want to find how many moles of CO<sub>2</sub> per 1 kg of      water at equilibrium with excess calcite CaCO<sub>3</sub> (closed system)      must be added to bring it to a prescribed equilibrium pH=6.4±0.01. The GEM      algorithm cannot use pH as an input parameter; the only way to obtain a      prescribed pH value is to add/subtract acid or alkali in the system bulk      composition. This can be done by hand, repeating GEM IPM calculations and      checking the pH value, but this is inefficient.<br>    </p>    <p>The task can be solved by creating a Process simulator of 'T' type with      the following control <a href="gmscript.html">script </a>program typed      into "P_expr" field on the Process 'Controls' window:</p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">$      Finding molality of CO2 added to obtain a prescribed pH <br>      $ Initialization <br>      &nbsp; if( NeIt[1] = 0 ) <br>      &nbsp; begin <br>      &nbsp;&nbsp;&nbsp;&nbsp; ipH[1]=:pH-ipH[0]; iNu[2]=:0; <br>      &nbsp;&nbsp;&nbsp;&nbsp; cNu=:iNu[0]; iNu[1]=: xd_[{CO2}]; <br>      &nbsp; end <br>      $ Calculation of difference between given and computed pH <br>      &nbsp; cpH =: pH-ipH[0]; <br>      $ Recalculation of a step in titrant molality <br>      &nbsp; cNu =: ( ( cpH * ipH[1] ) &lt; 0 ? cNu*0.382 : cNu ); <br>      &nbsp;&nbsp; ipH[1] =: cpH; <br>      $ Calculation of the amount of titrant <br>      &nbsp; iNu[2] =: iNu[2] + cNu*sign(cpH); <br>      &nbsp; xd_[{CO2}] =: iNu[1]+iNu[2]; <br>      $ Check of convergence <br>      &nbsp; Next =: ( ( abs( cpH ) &lt; ipH[2] ) ? 0 : 1); <br>      $ Finish</div>    <p> </p>    <p>The<span style="font-family: monospace;"> iNu[0] </span>cell should      contain an initial guess how much titrant will be added; if it is too      small or too large then too many steps of this simple&nbsp;      "golden-section" algorithm will be performed. The <span style="font-family: monospace;">iNu[2]</span>      cell contains current amount of titrant added;<span style="font-family: monospace;">        iNu[1]</span> is loaded at the beginning with the amount of this titrant      in the parent SysEq definition.<span style="font-family: monospace;">        ipH[0] </span>contains the prescribed pH value,<span style="font-family: monospace;">        ipH[2]</span> gives a precision to be achieved, <span style="font-family: monospace;">ipH[1]</span>      will hold the current difference between the calculated and prescribed pH.      If alkali is used for titration instead of acid, the assignment <tt>cpH        =: pH-ipH[0];</tt> must be replaced by <tt>cpH =: ipH[0]-pH;</tt>&nbsp;      <br>    </p>    <p>This is just one example of many possible algorithms to solve this kind      of single inverse titration problems. A similar script can be generated by      the Process Wizard when a 'T' mode simulator is created.&nbsp; </p>    <h4><a name="INV_TITR_SEQ"></a> Inverse titration sequence</h4>    <p> The process simulator in GEMS has also a built-in "golden section" 1-D      minimization procedure that permits to calculate a series of inverse      titrations in a single process run, quite efficient for plotting diagrams      as function of pH in the 'G' process simulation mode. <br>    </p>    <p>The script shown below (see also a SDref record <span style="font-family: monospace;">"mscript-titr-invers:0003:proces:"</span>      in the <a href="gm_sdref.html#process_mscripts_simulator">template math        script database</a>) helps doing this efficiently. It can be used to      create a sequence of aquatic equilibria with pH changing in regular      intervals (e.g., from 2 to 10 in 0.2 unit step).<br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        modC[J]: acid or base added</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> $ pH sequence        of inv. titrations</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> if ( Next=1)        begin</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;cNu =:        cpH-pH; end</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> if (Next=2)        begin</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">        &nbsp;xa_[{NaOH}] =: ((cEh &lt; 0)? 1e-8: cEh); </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">        &nbsp;xa_[{HCl}] =: ((0-cEh &lt; 0)? 1e-8: 0-cEh);</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;modC[J]        =: cEh; </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> end</span><br style="font-family: monospace;">    </div>    <p>After copying this script with <span style="font-family: monospace;">Ctrl-C</span>      and pasting it (<span style="font-family: monospace;">Ctrl-V</span>) into      the <span style="font-family: monospace;">P_expr</span> field on Page 1      of the "Process" window, you may have to edit the script there if      different acid and base are to be added (e.g., KOH and HNO<sub>3</sub>) in      your particular system definition. If you use species' stoichiometries as      titrants (rather than <a href="gm_compos.html">PCO/Compos</a> entries)      then change also <span style="font-family: monospace;">xa_</span> to <span        style="font-family: monospace;">xd_</span>      data object label.&nbsp; A similar script is generated by the Process      Wizard upon remake/create of the 'G'-type process simulator. <br>      <br>      To use such "inverse titration" script, turn on the <span style="font-family: monospace;">PePsts[11]</span>      flag "Is this a sequence of inverse titration points (+ -)?" when creating      or remaking the Process definition. This flag activates a built-in "Golden      Section" 1-D parametric minimization algorithm. At each iteration of the      "Golden Section" algorithm, the interval [a,b] is corrected as: <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">x1
        = { ipXi[0] at the first iteration; current cEh at next iterations }, </span><br        style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> x2 = ipXi[1];</span><br        style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> a = min( x1, x2        ); </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> b = max( x1, x2        ). </span><br>    </div>    <p>Convergence is achieved when the deviation function becomes smaller than      the precribed precision value, given in the <span style="font-family: monospace;">iNu[1]</span>      field (for pH, usually 0.01). The "Inverse titration sequence" math script      has the following general structure:<br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">if(
        Next = 1 ) begin </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">        &lt;expressions&gt; cNu =:&lt;function&gt;; &lt;expressions&gt; end </span><br        style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> if( Next = 2 )        begin </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">        &lt;expressions&gt; &lt;titrant&gt; =: cEh; &lt;expressions&gt; end </span><br>    </div>    <p>Here, &lt;function&gt; is a valid expression specifying a monotonous      function of deviation between the calculated and the measured parameter (<span        style="font-family: monospace;">cNu</span><span        style="font-family: monospace;">        =:</span><span style="font-family: monospace;"> cpH-pH;</span>), which      has a minimum in a prescribed interval of addition of titrants to the bulk      composition of the system. &lt;titrant&gt; is any cell in "System" window      pages to control the calculated parameter of the eqiuilibrium state. In      the above script, the operator <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: monospace;">&nbsp;</span><span        style="font-family: Courier New,Courier,monospace;">xa_[{NaOH}]
        =: ((cEh &lt; 0)? 1e-8: cEh); </span><br>    </div>    <p>adds NaOH to the system bulk composition if <span style="font-family: monospace;">cEh</span>      &gt; 0, and <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: monospace;">&nbsp;</span><span        style="font-family: Courier New,Courier,monospace;">xa_[{HCl}]
        =: ((0-cEh &lt; 0)? 1e-8: 0-cEh); </span><br>    </div>    <p>adds HCl if <span style="font-family: monospace;">cEh</span> &lt; 0. The      operator&nbsp; <span style="font-family: monospace;">modC[J] =: cEh;</span>      stores the necessary titrant addition into an optional vector <span style="font-family: monospace;">modC</span>;      and<span style="font-family: monospace;"> J </span>is an index of the      chemical equilibrium system currently generated in the Process simulator.      <br>      &nbsp;<br>      The initial interval <span style="font-family: monospace;">ipXi[0],        ipXi[1]</span> of titrant additions (performed using the <span style="font-family: monospace;">cEh</span>      cell) must be specified in the Process definition. The lower boundary <span        style="font-family: monospace;">ipXi[0]</span>      must be less than the upper boundary<span style="font-family: monospace;">        ipXi[1]</span>, though <span style="font-family: monospace;">ipXi[0]</span>      and also <span style="font-family: monospace;">ipXi[1]</span> can be      negative. In the latter case, only acid will be added. If both boundaries      are positive then only alkali will be added. Othervise, in some of the      generated equilibria, the acid (negative<span style="font-family: monospace;">        cEh</span> values) and in other - the base will be added. Please, make      sure (before running the Process simulator) that appropriate boundaries      are known, by doing sample calculations in a single system for the      smallest and the largest pH values necessary. Also you must specify: <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: monospace;">ipXi[2]</span>      - precision of inverse titration in the same units as the titrant addition      (e.g. 1e-9 moles); <br>      <span style="font-family: monospace;">iNu[1]</span>&nbsp; - precision of      the deviation function result (<span style="font-family: monospace;">cNu</span>)      with respect to the calculated parameter (e.g. 0.01 pH unit).<br>    </div>    <p>When you calculate the Process Simulator, an inverse modelling problem is      solved for and the resulting SysEq record is saved to the database for      each simulation point. Then the program will proceed to the next point (if      there are any left). <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h4><a name="PROCES_SPECIAL_SEQREACT"></a>1.2.2. Single flow-through (SFTR)      reactor</h4>    <p>The stepwise "single flow-through reactor" (SFTR) is a suitable for      simulation of irreversible processes such as weathering, infiltration      metasomatosis, evaporation of seawater, reaction of fluid with basalt,      etc. </p>    <p>The idea behind it is that a given mass of the aqueous (fluid) phase of a      certain initial composition is added to the "reactor" where it      equilibrates at given T, P with a known mass of solids (i.e. certain      fluid/solid mass ratio) of a given bulk composition. &nbsp;After the local      equilibrium has been achieved, at the next step the reacted fluid is      removed and replaced with the same mass of "fresh" fluid, which then      equilibrates with the rock already altered at the previous step, an so on.      In this "leaching" mode, it is convenient to observe how the phase      composition of reacted rock changes via progressive alteration by "fresh"      fluid. Another possible mode is "flushing", when the aqueous fluid gets      more and more reacted with portions of "fresh" rock at progressing steps.      In this "flushing" mode, you can observe how the fluid composition evolves      during the progressive reaction with fresh rock. </p>    <p>To facilitate "sequential flow-through reactor" modelling, we have      included the 'R' mode of process simulation (activated during remake of      the Process record). Details on creating and running such simulators <a href="#PROCES_MWIZARD">are
        given here</a>. In another, GEM2MT module, more sophisticated      simulations of rock alteration can be performed, such as "sequential      reactor chain" or "box-flux chain", or even 1-D advection-diffusion      reactive transport simulations.<br>      <br>    </p>    <hr style="width: 100%; height: 2px;">    <h4><a name="PROCES_SPECIAL_LIPPMANN"></a>1.2.3. Lippmann diagrams<br>    </h4>    <p>Lippmann diagrams are helpful in establishing equilibrium compositions of      a binary solid solution and aqueous electrolyte phases as function of mole      fractions (in solid and in aqueous phase). Even though such diagrams are      not required for solving equilibria in GEM codes, Lippmann diagrams are      still helpful in visualizing behavior of binary solid solution - aqueous      solution (SSAS) systems. <br>    </p>    <h4>Process Simulator for compositional dependence in the binary SSAS system      <br>    </h4>    <p>To construct a Lippmann diagram, one first has to generate enough SSAS      equilibrium points covering the whole range of solid phase compositions.      100 points (with a step 1-2% in solid mole fraction) are usually      sufficient. In principle, a direct titration script like that shown below      for the regular binary (Ca,Mn)CO3 system with <span style="font-style: italic;">a</span>      = 1.9&nbsp; at S/L = 0.2 mol solid per 1 kg H<sub>2</sub>O can do the job:      <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">cNu
        =: iNu[0] + iNu[2]*J;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CaCO3}] =:        (cNu&gt;0? cNu*0.2/100; 1e-6);</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{MnCO3}] =:        (cNu&lt;100? (100-cNu)*0.2/100; 1e-6);</span><br>    </div>    <p>The conditional math script operators check for zero mole fractions and,      if so, assign trace additions of end-member stoichiometries to prevent      degeneration of the system.&nbsp; This script (to be put in the <span style="font-family: monospace;">"P_expr"</span>      field) generates 51 points using the <span style="font-family: monospace;">"iNu"</span>      iterator loaded with 0; 100; 2 to produce 2% steps in solid mole fraction      scale. This control script can be implemented in 'S' process simulation      mode. <br>    </p>    <p>The Process Wizard creates the 'L'-type simulator for Lippmann diagrams      using a more advanced control script that produces nicer diagrams (<a href="#WZSTEP_2">details
        here</a>).&nbsp; <br>    </p>    <h4>Data Samplers for constructing Lippmann diagrams</h4>    The Lippmann diagram actually is a superposition of two plots where the same    ordinate value called "total solubility product" is plotted against two    different abscissas: the end-member mole fraction in solid solution    ("solidus") and the ionic mole fraction in aqueous phase ("solutus"). Any    horizontal line connecting a point on "solidus" with a point on "solutus"    defines a SSAS equilibrium state. <br>    <br>    Note that the GEM-Selektor Graphics Dialog can now plot several ordinates    (lines) against several abscissas. So, the correct Lippmann diagram    (consisting of two curves) can be produced in one run. During remake of the    Proces record, two columns must be allocated in the <span style="font-family: monospace;">xp</span>    (abscissa) and two columns in the <span style="font-family: monospace;">yp</span>    (ordinate) tables. <br>    <br>    The first part of the sampling script (to be put into <span style="font-family: monospace;">"pGexpr"</span>    field ) calculates the "solidus" curve of the Lippmann diagram: <br>    <p style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Lippmann diagram - solidus </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;&nbsp;        xp[J][0] =: Wxx[{rhodochrosite}]; </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;&nbsp;        yp[J][0] =: lg( my[{CO3-2}]*gamma[{CO3-2}] * </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; &nbsp;        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ( my[{Ca+2}]*gamma[{Ca+2}] +&nbsp;        my[{Mn+2}]*gamma[{Mn+2}] )); </span><br>    </p>    <p>The second part of the sampling script calculates the "solutus" curve of      the Lippmann diagram:<br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Lippmann diagram - solutus </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; xp[J][1]        =: my[{Mn+2}]*gamma[{Mn+2}] / ( my[{Ca+2}]*gamma[{Ca+2}] + </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
my[{Mn+2}]
        * gamma[{Mn+2}] ); </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; yp[J][1]        =: lg( my[{CO3-2}]*gamma[{CO3-2}] * </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; &nbsp;        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ( my[{Ca+2}]*gamma[{Ca+2}] +        my[{Mn+2}]*gamma[{Mn+2}] )); </span><br>    </div>    <p>After running the calculation, the Lippmann diagram can be plotted using      the Graphics Dialog (do not forget to select the abscissa index 0 for the      first curve and 1 for the second curve).</p>    <p> The Process Wizard in 'L' mode generates one sampling script (<a href="#WZSTEP_3">details
        here</a>) that produces both solidus and solutus curves in one      simulation run. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h2><a name="PROCES_MWIZARD"></a>2. Process Module Create/Remake Wizard<br>    </h2>    <p>Process Simulator is a tool for automation of 'batch' calculation of many      equilibrium states, as well as sampling and plotting of results. In this      way, irreversible (geo)chemical processes (mixing, dissolution, hydration,      titration, corrosion, weathering) can be simulated, and respective      diagrams plotted.</p>    <p>The Process record can be configured to perform specific scenarios. To      tell it what input data to modify and what output data to sample and plot,      two scripts, 'P_expr' and 'pgExpr', respectively, are needed. Simple      scripts can be easily produced using selection dialogs on the next pages      of this wizard.</p>    <p>Any process simulator belongs to one of three types: </p>    <ol>      <li>'<span style="font-weight: bold;">Sequential'</span>: only input GEM        parameters are modified independently of the output values (modes P, S,        L); </li>      <li>'<span style="font-weight: bold;">Reciprocal</span>': the next step        depends on some GEM output parameters (e.g. pH) from the previous step        (mode R,S); </li>      <li>'<span style="font-weight: bold;">Inverse</span>': the GEM input is        automatically adjusted to obtain some prescribed values of GEM output,        e.g. pH (modes G, T).</li>    </ol>    <p> To create/modify a Process record, turn GEM-Selektor into "Equilibria      Calculation" mode, open a modeling project, and click on a "Process" icon      on the left side of the main frame window. This opens the Process window.      There, click on "Create ..." toolbar button or select a "Record" "Create"      menu command (alternatively, select one Process record and click on      "New/Clone" button). You will see a list of SysEq records; select there a      parent SysEq record for this process simulator, and clock "Ok"This opens a      Process record key form. Fill out necessary fields of the new <a href="gdb_rkey.html#DBM_Proces">Process
        record key</a>.&nbsp; The record key dialog should look like this: </p>    <br>    <img style="width: 456px; height: 387px;" alt="ProcessRecordKeyDialog1.png"      src="ProcessRecordKeyDialog1.png"><br>    <br>    <p>Only two last record key fields can be edited; the first 8 fields are      taken from the parent SysEq record key. <br>    </p>    <p>After the user clicks "Ok", the <a href="gm_proces.html#WZSTEP_1">Process
        Wizard Step 1</a> window appears.</p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_1"></a>2.1. Process Wizard Step 1 - Process Simulator      Configuration<br>    </h3>    <p>Here, the user must choose one of the available simulation modes:</p>    <ul>      <li><a href="#PROCESS_P_MODE">"P" &nbsp;&nbsp; Sequential temperature          and/or pressure change at fixed bulk composition</a> </li>      <li><a href="#PROCESS_S_MODE">"S" &nbsp;&nbsp; Direct sequential change of          bulk composition and/or constraints (default)</a></li>      <li><a href="#PROCESS_G_MODE">"G" &nbsp; Batch inverse titration sequence          for incremented pH values etc.</a></li>      <li><a href="#PROCESS_T_MODE">"T" &nbsp; One arbitrary inverse titration          calculation as defined in Process control script</a> </li>      <li><a href="#PROCESS_R_MODE">"R" &nbsp; Single flow-through reactor          (SFTR) simulation using equilibrium compositions of phases</a> </li>      <li><a href="#PROCESS_L_MODE">"L" &nbsp; Lippmann diagram for a binary          solid solution</a></li>    </ul>    <p>Contents and actions at the following steps will depend on the selected      mode. We recommend that the mode symbol is also entered in the last field      of the Process record key.&nbsp; </p>    <h4><a name="PROCESS_P_MODE"></a>"P" mode: &nbsp; Sequential temperature      and/or pressure change at fixed bulk composition</h4>    <p> This is the simplest possible process simulation, as it does not change      the system recipe, just changes temperature and/or pressure. Convenient to      plot simple P-T phase- and speciation diagrams, as well as a (binodal)      solvus in a system containing phases-solutions with miscibility      gaps.&nbsp; <br>    </p>    <h4><a name="PROCESS_S_MODE"></a>"<b>S</b>" mode:&nbsp;&nbsp; Direct      sequential change of bulk composition and/or metastability constraints      (default)</h4>    <p>This mode implies that the next step of the process simulation does not      depend on any calculated properties of the system in equilibrium state      obtained at the previous step. Can also include simultaneous temperature      and/or pressure changes. In this mode, a great variety of irreversible      reaction extent models such as direct titrations, mixing, evaporation,      rock dissolution/weathering, etc. can be simulated. Such simulations can      also depend on time and on calculated speciation (activities) from      previous step, as required in modeling kinetically controlled mineral      dissolution or precipitation. <br>    </p>    <h4><a name="PROCESS_G_MODE"></a>"<span style="font-weight: bold;">G</span>"      mode:&nbsp; Batch inverse titration sequence for incremented pH values      etc. </h4>    <p>Inverse process simulation means that some GEM input parameters for the      current step depends on some just calculated GEM output from the previous      step, and one or more GEM output parameters must be closed to a prescribed      value for this step. Typical example is the calculation of pH-solubility      diagrams that must cover a given pH range (e.g. from 3 to 13) at a given      step (e.g. 0.5 pH units). Because pH cannot be set as input in GEM task,      the user must define parts of the system recipe, such as additions of acid      or base, that can change the calculated pH. The program will do trial      calculations adjusting the addition of acid or base until the calculated      pH matches the prescribed pH within a given tolerance (e.g. 0.01) and the      simulation point is accepted, then will proceed to the next prescribed pH      value. This kind of adjustment is performed by a built-in "Golden section"      algorithm for parametric minimization of the difference between the      calculated and the prescribed target value (pH).&nbsp; <br>    </p>    <h4><a name="PROCESS_T_MODE"></a>"T" mode:&nbsp; One arbitrary inverse      titration calculation as defined in Process control script</h4>    <p>This variant of inverse simulation is used when a system recipe,      temperature or pressure need to be adjusted to produce in GEM calculation      one or more output parameters close to prescribed values such as      composition of a multi-component phase or concentrations of dissolved      species in the aqueous phase. In this case, parametric minimization with      the "Golden section" algorithm is also used with the more complex target      function provided in the process control script. &nbsp; <br>    </p>    <h4><a name="PROCESS_R_MODE"></a>"R" mode:&nbsp; Single flow-through reactor      (SFTR) simulation using equilibrium compositions of phases</h4>    <div class="moz-cite-prefix">This mode, which is the simplest implementation      of reactive transport on a qualitative level, has two main scenarios:      "Flushing" and "Leaching". <br>    </div>    <div class="moz-cite-prefix"><br>    </div>    <div class="moz-cite-prefix">In the "Flushing" mode, at each pass (i.e.      Process step), one can follow how the fluid part evolves while reacting      with the "fresh" solid part of constant composition (usually taken from a      Compos record). This can be imagined as a beaker with given initial amount      and composition of fluid, where at every pass, a dialysis bag with      (crushed) fresh rock of a given mass is immersed and kept until      equilibration, then removed and thrown away. In this scenario, the amount      of fluid may evolve upon reaction with fresh rock bags, e.g. the amount of      fluid decreases from pass to pass due to its consumption to hydration of      anhydrous minerals. If each next bag contains the same amount of fresh      rock as the previous one, this will result in an increasing solid/fluid      mass ratio. Alternatively, one can demand that, to keep a constant      solid/fluid mass ratio s/f = const, the mass of each next bag with rock      must be equal to m_fluid * s/f (where m_fluid is the mass of fluid taken      from the previous step). <br>    </div>    <div class="moz-cite-prefix"><br>    </div>    <div class="moz-cite-prefix">In the "Leaching" mode, at each pass (i.e.      Process step), one can follow how the solid part evolves while reacting      with the "fresh" fluid of constant composition (usually taken from a      Compos record). This can be imagined as a beaker with given initial amount      and composition of the rock, where at every pass, a portion of "fresh"      fluid of a given mass is added and kept until equilibration, then the      reacted fluid is removed and thrown away, but the reacted rock is used in      the next pass (to react with next portion of the fresh fluid). In this      scenario, the amount of solid may evolve upon reaction with portions of      fresh fluid, e.g. the amount of solid part decreases from pass to pass due      to dissolution of its minerals and the cumulative fluid/solid mass ratio      increases. If each next portion of fresh fluid has the same composition      and mass as the previous one, this will result in a lower s/f mass ratio      in the beaker at each next pass. Alternatively, one can demand that, to      keep a constant s/f mass ratio in the beaker s/f = const, the mass of each      next portion of replacing fresh fluid must be equal to m_solid / s/f      (where m_solid is the mass of solid taken from the previous pass (step)).</div>    <p></p>    <p>More versatile and more quantitative reactive transport models can be set      up in the <a href="gm_gem2mt.html">GEM2MT module</a>. One of those - the      'S' mode implementing a 1-D chain sequence of reactors ("sequential      reactors") is a useful generalization of the above SFTR scheme. Sequential      reactors are frequently used for simulation of rock alteration zones      developed in various cases of water-rock or fluid-rock interaction. <br>    </p>    <h4><a name="PROCESS_L_MODE"></a> "L" mode:&nbsp; Lippmann diagram for a      binary solid solution</h4>    <p>Lippmann diagram is a useful tool to visualize aqueous solubility of the      binary non-ideal solid solution system. In fact, this is a superposition      of two plots of the same function called "Lippmann total solubility      product" SigmaPi against mole fraction of one substituting species in the      solid phase (solidus) and ionic activity (or mole) fraction in the aqueous      phase (solutus). Since SigmaPi can be directly computed from GEM output      (aqueous speciation) either in activity or in (total) molality scale, any      kind of Lippmann diagram can be computed and plotted in a straightforward      way just by changing the proportion of substituting species in the bulk      system composition. This is done by process control and data sampling      scripts automatically generated by the Process wizard.&nbsp; <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_2"></a>2.2. Process Wizard Step 2 - Process Simulation      Controls<br>    </h3>    <p>At this step, the user has to define how the chemical system definition      will be changed from one simulation step to another. Many such changes can      be accommodated into process iterators shown in the upper part of this      wizard page; the default contents in iterators can be changed here or      later on in the 'Controls' page of the Process module window. </p>    <br>    <table style="text-align: right; width: 882px; height: 113px;" cellspacing="2"      cellpadding="2"      border="1">      <tbody>        <tr>          <td style="text-align: center;"><br>          </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iTm_0">iTm</a><br>          </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iV_0">iV</a>&nbsp;&nbsp;&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iP_0">iP</a>&nbsp;&nbsp;&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iTC_0">iTC</a>&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iNv_0">iNv</a>&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iTau_0">iTau</a>&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#ipXi_0">ipXi</a>&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#iNu_0">iNu</a>&nbsp;&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#ipH_0">ipH</a>&nbsp;
            <br> </td>          <td style="text-align: center; font-family: Courier New,Courier,monospace;"><a              href="#ipe_0">ipe</a>&nbsp;&nbsp;
            <br> </td>        </tr>        <tr>          <td style="text-align: center;">From<br>          </td>          <td style="vertical-align: top; font-family: monospace;">1000<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">1<br>          </td>          <td style="vertical-align: top; font-family: monospace;">25<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>        </tr>        <tr>          <td style="text-align: center;">Until<br>          </td>          <td style="vertical-align: top; font-family: monospace;">1200<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">1<br>          </td>          <td style="vertical-align: top; font-family: monospace;">25<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>        </tr>        <tr>          <td style="text-align: center;">Step<br>          </td>          <td style="vertical-align: top; font-family: monospace;">1<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>          <td style="vertical-align: top; font-family: monospace;">0<br>          </td>        </tr>      </tbody>    </table>    <br>    <p>The first five iterators define how the last five fields of the <a href="gems_rekey.html#DBM_SysEq">record
        key</a> for the generated SysEq records will change from one step to      another. At least one of these iterators must have 'Step' not equal to      zero; setting Step equal to zero disables any iterator. The last five      iterators can be used in defining how the GEM input parameters will be      changed, and how prescribed output values (pH, pe) will be defined for      each step of the simulation. Click on the iterator name to learn more      about it. <br>    </p>    <p>Other contents in this wizard page depend on the selected mode of the      process simulation. Usually, there are three data fields (from left to      right): <br>    </p>    <ul>      <li>Selection list of properties</li>      <li>Selection list of property items </li>      <li>Control script view field&nbsp; </li>    </ul>    <p>The two selection lists facilitate creation of a simple process control      script, which is completely functional, i.e. it can be executed without      any further editing.&nbsp; Later on, this script can be edited, modified      or extended in the 'Controls' page of the Process module window.</p>    <p>Proceed here to the chosen simulation mode:</p>    <table style="text-align: left; width: 980px; height: 35px;" cellspacing="2"      cellpadding="2"      border="1">      <tbody>        <tr>          <td style="vertical-align: top;">&nbsp;<a href="#PROCESS_P_MODE_S_2"><span                style="font-weight: bold;">P</span>              (TP change only)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_S_MODE_S_2"><span style="font-weight: bold;">S</span>              (sequential path)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_G_MODE_S_2"><span style="font-weight: bold;">G</span>              (batch inverse titration)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_T_MODE_S_2"><span style="font-weight: bold;">T</span>              (single inverse titration)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_R_MODE_S_2"><span style="font-weight: bold;">R</span>              (reaction extent)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_L_MODE_S_2"><span style="font-weight: bold;">L</span>              (Lippmann diagram)</a><br>          </td>        </tr>      </tbody>    </table>    &nbsp; <br>    <h4><a name="PROCESS_P_MODE_S_2"></a>"P" mode: &nbsp; Sequential temperature      and/or pressure change at fixed bulk composition, step 2<br>    </h4>    <p>In this mode, only temperature and/or pressure can be changed between      steps, but not the system recipe. There are three options visible as      radio-buttons below the process iterator table, one of which should be      selected: <br>    </p>    <ul>      <li>No script</li>      <li>User-defined script</li>      <li>PT phase diagram</li>    </ul>    <p>Regardless of the selected option, set Step in the iTm iterator to 0, and      check iP and iTC iterators for the range (From-Until) and for Step. In the      simplest case (only temperature change), the iterators should look like      those shown below: <br>    </p>    <br>    <img style="width: 748px; height: 108px;" alt="ProcessWizardStepIteratorsPmode1.png"      src="ProcessWizardStepIteratorsPmode1.png"><br>    <br>    <p>The iTC iterator will produce 201 steps with temperature from 0 to 200 <sup>o</sup>C;
      all other increments in iterators are disabled; pressure will be constant      1 bar. The SysEq keys will all have the CSD variant field set to 1000. <br>    </p>    <p>In the <span style="text-decoration: underline;">"No script" option</span>,      only the iTC and iP iterators will be used by the program to change      temperature and/or pressure between steps, starting from the "From" value,      incrementing by "Step" value for the next iteration, until the "Until"      value is reached, or the ordered number of steps nPV (see <a href="#WZSTEP_4">wizard
        step 4</a><a href="#WZSTEP_4">)</a> is executed, whatever comes first.      In the following example, 201 simulation steps will be performed at J=0,      cP=1 bar, cTC = 0 C; J=1, cP=2 bar, cTC = 1 C; ....; J=200; cP=201 bar,      cTC = 200 C. <br>    </p>    <br>    <img style="width: 336px; height: 148px;" alt="ProcessWizardStepIteratorsPmode2.png"      src="ProcessWizardStepIteratorsPmode2.png"><br>    <br>    <p>However, if the Step in iP iterator is set to 10 instead of 1 then only      21 simulation steps will be done at J=0, cP=1 bar, cTC = 0 C; J=1, cP=11      bar, cTC = 1 C; ....; J=20; cP=201 bar, cTC = 20 C. <br>    </p>    <p>This means that the functional P,T path where P depends on T cannot be      set with this option, with one exception: if all fields in the iP iterator      are set to 0 then the actual equilibria calculations in the aquatic system      will be performed at Psat(H<sub>2</sub>O)g , i.e. at saturated vapor      pressure at a given step temperature.&nbsp; </p>    <p>In the <span style="text-decoration: underline;">"User-defined script"        option</span>, the iP and iTC iterators should be set in the same way as      in the "No script" option, but the actual change of current cP and cTC      values will be defined in the process control script to be supplied by the      user after this wizard is finished. If the script is already available      (e.g. during remake) and should be retained then simply click "Next&gt;"      to proceed to the next wizard page. Such control script usually contains      operators like <br>    </p>    <p style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">cTC
        =: iTC[0] + J*iTC[2]; </span><br>    </p>    <p>This operator actually does the same as the iterator itself; however,      because the script interpreter is executed later than the iterator is      incremented, the cTC value will be overwritten by the script operator. For      instance, to define a P,T path, the pressure dependence can be added in      various forms, e.g. parabolic: <br>    </p>    <p style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">cP
        =: 1 + 2 * cTC + 0.01 * cTC^2;</span><span style="font-family: monospace;">      </span><br>    </p>    <p>Here, <span style="font-family: Courier New,Courier,monospace;">'J'</span>      is the simulation step index, automatically incremented by the program      from 0 with step of 1. <br>    </p>    <p>In the "<span style="text-decoration: underline;">PT phase diagram</span>"      option, you can plot simple phase diagrams over a P,T grid. To do this,      set intervals and steps in both iP and iTC iterators, for example as shown      below:<br>    </p>    &nbsp;<br>    <img style="width: 350px; height: 107px;" alt="ProcessWizardStepIteratorsPmode3.png"      src="ProcessWizardStepIteratorsPmode3.png"><br>    <br>    <p>In total, this will produce a grid of 41 * 41 = 1681 (P,T) points with      help of the script that you can see now in the control script view field:      <br>    </p>    <br>    <img style="width: 286px; height: 149px;" alt="ProcessWizardStepIteratorsPmode4.png"      src="ProcessWizardStepIteratorsPmode4.png"><br>    <br>    <p>This script does not need modification, it stores generated temperature      and pressure values into (automatically allocated) vP and vT work data      vectors. To plot the diagram, you still need to select at least two phases      in the selection list, for instance:<br>    </p>    <br>    <img style="width: 213px; height: 147px;" alt="ProcessWizardStepIteratorsPmode5.png"      src="ProcessWizardStepIteratorsPmode5.png"><br>    &nbsp; <br>    <p>The program will automatically create the sampling script to prepare the      diagram (seen on the next wizard page that you can simply skip). The      script looks like this: <br>    </p>    <br>    <img style="width: 370px; height: 127px;" alt="ProcessWizardStepIteratorsPmode6.png"      src="ProcessWizardStepIteratorsPmode6.png"><br>    <br>    <p>For each phase, the script contains one operator that checks if the phase      is present in the mass balance. If yes then it writes the pressure in MPa,      otherwise the "empty" value in the array of results having the temperature      as abscissa. After running the process simulator and plotting the results,      you should see a diagram like this: <br>    </p>    <br>    <br>    <img style="width: 445px; height: 348px;" alt="ProcessWizardStepIteratorsPmode7.png"      src="ProcessWizardStepIteratorsPmode7.png"><br>    <br>    <p>For plotting more complex diagrams, the sampling script needs to be      modified later to include all possible combinations of phases as separate      ordinates.</p>    <br>    <h4><a name="PROCESS_S_MODE_S_2"></a>"<b>S</b>" mode:&nbsp;&nbsp; Direct      sequential change of bulk composition and/or metastability constraints      (default), step 2<br>    </h4>    <p>In this mode, several variants can be automatically configured by      selecting one of the following radio-buttons:&nbsp; <br>    </p>    <ul>      <li>Titration cNu linear (default) </li>      <li>Diagram logD vs linear x</li>      <li>Titration cpXi logarithmic</li>      <li>Diagram logKd vs log(m)</li>    </ul>    <p>Below these entries, three fields are visible: the list of properties      (Compos, DComp, ... ); the list of entries in the selected property; and      the control script template. The script template cannot be edited      directly; it will show different scripts depending on the selected      variant, properties and items.&nbsp;</p>    <p>To set up titrations, select items from 'Compos', 'DComp', 'IComp' or      'Phase' lists to change the system composition, and/or select items from      'DC-lower' or 'DC-upper' properties to change metastability constraints. <br>    </p>    <p><span style="text-decoration: underline;">Titration cNu linear</span> can      be used for setting up various scenarios of direct titration, oxidation,      reduction, dilution, mixing, etc. (usually at constant temperature and      pressure) where the output diagrams can be represented as linear functions      of the titrant(s) amount(s). This variant relies on the current titration      extent <a href="#cNu">cNu</a> controlled by the <a href="#iNu_0">iNu</a>      iterator.&nbsp; &nbsp; <br>    </p>    <p>Thus, for a new titration simulation, first set up the interval and the      step in iNu iterator (the Step can also be negative, in which case From      must be greater than Until). If composition of the system will change, set      also the iTm iterator to the same number of steps as in the iNu. If      metastability constraints will vary then set the iNv iterator to the same      number of steps as in the iNu. </p>    <p>Now, select a property (e.g. 'Compos') and click on its items to set them      as titrants. Note that the units of measurement for titrant additions will      be taken over from the parent SysEq record ('g' grams for 'Compos' and      'Phase', 'M' moles for 'DComp' and 'IComp'). Optionally, you can set also      metastability constaints on calculate amounts (in 'M' moles) of some      dependent components using 'DC-upper' or 'DC-lower' properties. Each item      selection adds an operator to the control script visible on the right      side, for instance:&nbsp; &nbsp; &nbsp; &nbsp; </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">modC[J]
        =: cNu;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CdCO3}] =:        cNu * 1;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CaCO3}] =:        cNu * 1;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">dul_[{Arg}] =:        cNu * 1;</span><br style="font-family: monospace;">    </div>    <p>The operators contain a default multiplier *1 which can be changed to      other number or function of other data objects by editing the script later      on in the Controls page of the Process window. After selecting all      necessary titrants, proceed to the next wizard page (Step 3) to select      items that will be sampled and plotted as results. </p>    <p>In the case of remaking the process record, edit or click nothing on this      wizard page, just click "Next&gt;" to proceed (existing control script      will be retained).</p>    <p><span style="text-decoration: underline;">Diagram logD vs linear x</span>      is convenient to see how the distribution coefficient D and partition      coefficient Kd of a given (minor) component change with the mole fraction      x of this component in a binary solid solution phase. The solid solution      phase composition will be varied by the <a href="#cNu">cNu</a> process      variable that should run between 0 and 1 in at least 20 steps, as set in      the <a href="#iNu_0">iNu</a> iterator. <br>    </p>    <p>After setting the iNu iterator, select 'DComp' in the list of properties,      and&nbsp; select first minor, then select host solid solution end member      in the list of property items. In the control script field, two operators      should appear (assuming minor end member SrCO<sub>3</sub> strontianite      (Str) and host end member CaCO<sub>3</sub> aragonite (Arg)):&nbsp; <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">xd_[{Str}]
        =: cNu * 1;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xd_[{Arg}] =: 1        - cNu * 1;</span><span style="font-family: monospace;">&nbsp; </span>&nbsp;
      </div>    <p>Now, select 'Molality' in the list of properties, and select first the      minor ion (Sr+2) then the host ion (Ca+2) in the list of property items.      This will create a sampling script similar to that shown below, which will      be visible in Process wizard Step3 page but needs no changes there, so      that page should be just skipped. <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Abscissa - mole fraction of ML in solid solution</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xp[J] =:        Wxx[{Str}];</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ log(Kd(Host))        in kgH2O</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][0] =: lg(        Wxx[{Arg}] / my[{Ca+2}] );</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ log(Kd(Minor))        in kgH2O</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][1] =: lg(        Wxx[{Str}] / my[{Sr+2}] );</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ log(D),        dimensionless</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ yp[J][2] =:        lg( Wxx[{Str}] / my[{Sr+2}] / (Wxx[{Arg}] / my[{Ca+2}]) );</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][2] =:        yp[J][1] - yp[J][0];</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ Done</span><br>    </div>    <p>In this script, the abscissa is set to the mole fraction of minor end      member (Str); as ordinates, two partition coefficients are calculated in      decimal logarithmic scale, then the distribution coefficient of Sr in      aragonite is obtained as the ratio of partition coefficients (difference      in logarithmic scale). <br>    </p>    <p>Note&nbsp; that, if in the parent system (SysEq record), the involved      elements (Sr and Ca) are introduced only through stoichiometries of solid      solution end members (in this example, Str and Arg), the first and the      last system generated by the control script will fail in GEM calculation      because of zero total amount of Sr and Ca in the system bulk composition.      The simplest way to prevent this is to set very small "background" amounts      (1e-9 mol) of Sr and Ca in the parent system recipe either using Compos      (xa_ vector) or IComp (bi_ vector) entries.&nbsp; &nbsp; <br>    </p>    <p><span style="text-decoration: underline;">Titration cpXi logarithmic</span>      is convenient for simulating various isotherms where the addition of      titrant reaches trace amounts. The logarithmic titration is set using the      <a href="#ipXi_0">ipXi</a> iterator supposed to keep 'From', 'Until' and      'Step' values of pXi = -log<sub>10</sub>Xi, where Xi is the process extent      parameter. <br>    </p>    <p>For instance, if Cd must be added to the rest of system at increasing      amounts starting from 1e-9 up to 0.1 moles, the ipXi iterator can contain      9 in 'From', 1 in 'Until' and -0.2 in 'Step', which will produce 41      simulation steps. During simulation, the cpXi variable will get values of      9; 8.8; 8.6; ... and the cXi variable - values 10<sup>-9</sup>; 10<sup>-8.8</sup>;      10<sup>-8.6</sup>; ...&nbsp; automatically. <br>    </p>    <p>Now, select a property (e.g. 'Compos') and click on its items to set them      as titrants. Note that the units of measurement for titrant additions will      be taken over from the parent SysEq record ('g' grams for 'Compos' and      'Phase', 'M' moles for 'DComp' and 'IComp'). The control script will      appear like this: <br>    </p>    <div style="margin-left: 40px; font-family: monospace;"><span style="font-family: Courier New,Courier,monospace;">modC[J]
        =: cpXi;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CdCO3}] =:        cXi * 1;</span><br>    </div>    <p>The multiplier *1 can be changed by editing the control script later in      the Process Controls window page. After selecting all necessary titrants,      proceed to the next wizard page (Step 3) to select items that will be      sampled and plotted as results; choose there modC[J] with pXi values as      abscissa, and any desired concentrations or amounts as ordinates.&nbsp; </p>    <p><span style="text-decoration: underline;">Diagram logKd vs log(m)</span>      is typically used in plotting sorption isotherms expressed as logKd values      of a trace element sorbed on solid(s), shown against the logarithm of      total dissolved molality of trace element in aqueous solution.&nbsp;</p>    <p>As in the case of logD diagram vs linear x, the logarithmic addition of      trace component is set using the <a href="gm_proces.html#ipXi_0">ipXi</a>      iterator supposed to keep 'From', 'Until' and 'Step' values of pXi = -log<sub>10</sub>Xi,
      where Xi is the process extent parameter. </p>    <p>After setting the ipXi values, select Trace and Host compositions from      the 'Compos' list (e.g. "CdCO3" and "CaCO3"); the control script like this      will appear: <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">modC[J]
        =: cpXi;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CdCO3}] =:        cXi * 1;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xa_[{CaCO3}] =:        1 - cXi * 1;</span><br>    </div>    <p>Note that, if cpXi is greater than 2, the variation of Trace component      will have almost no effect on the addition of Host component; the latter      can simply be kept constant by modifying the last operator later on.      Proceed with clicking on 'Sorbed' property, then selecting Trace (Cd) and      Host (Ca) elements from the 'Sorbed' list items.&nbsp; This will result in      a sampling script similar to this, which will be visible in the next      wizard page that has to be simply skipped.&nbsp; <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Abscissa - log total molality of Trace element</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xp[J] =:        lgm_t[{Cd}];</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$        lg(Concentration of Trace element sorbed)</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][0] =: lg(        bXs[{Cd}]/( bXs[{Cd}]+ bXs[{Ca}]) );</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ lg(Kd(Trace        element))</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][1] =: lg(        bXs[{Cd}]/( bXs[{Cd}]+ bXs[{Ca}])/m_t[{Cd}] );</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ lg(D)        Trace-Host</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">yp[J][2] =:        yp[J][1] - lg( bXs[{Ca}]/( bXs[{Cd}]+ bXs[{Ca}])/m_t[{Ca}] );</span><br        style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ Done</span><br>    </div>    <p>This script sets the abscissa as decimal logarithm of total dissolved      molality of Trace element, then ordinates as logarithms of solid Trace      concentration (mole fraction); Trace element Kd; and Trace-Host      distribution coefficient as ratio of Trace and Host Kd's. </p>    <br>    <h4><a name="PROCESS_G_MODE_S_2"></a>"<span style="font-weight: bold;">G</span>"      mode:&nbsp; Batch inverse titration sequence for incremented pH values      etc, step 2 </h4>    <p>Inverse titration means finding such GEM input parameters that bring a      GEM-calculated output parameter such as pH close to its prescribed value.      This "parametric adjustment" is performed by the built-in "Golden section"      algorithm. <br>    </p>    <p>In this page, you can set up a sequence of inverse titration calculations      in two variants: <br>    </p>    <ul>      <li>Property-vs-pH diagram</li>      <li>Constant-pH isotherm diagram</li>    </ul>    <p><span style="text-decoration: underline;">Property-vs-pH diagram</span>&nbsp;

      is a typical way to visualize how aqueous or surface speciation, as well      as mineral solubility, depend on pH in aqueous solution. The difficulty in      straightforward GEM calculation of such diagrams lies in the fact that pH      can only be changed by addition of acid or base; to reach a given pH      value, these additions are initially unknown and can change from large to      very small depending on the system composition and presence of internal      buffers. Some pH values can be out of reach. For this reason, first the      parent system needs to be investigated in order to find out the realistic      pH range and how much acid should be added to reach the lowest, and how      much base - the highest pH value in this region. Then you can proceed with      setting up the G-type simulator to produce the property-pH diagram.&nbsp;      &nbsp; <br>    </p>    <p>The pH interval and pH step must be given in the <a href="#ipH_0">ipH</a>      iterator. Other iterators typically should be set as shown below.&nbsp;</p>    <br>    <img style="width: 750px; height: 108px;" alt="ProcessWizardStepIteratorsGmode1.png"      src="ProcessWizardStepIteratorsGmode1.png"><br>    <br>    <p>The iTm iterator should be consistent with the number of pH points as      given by the ipH iterator. The ipXi iterator controls the additions of      acid and base titrants: negative number in 'From' is the maximum addition      of acid, positive number in 'Until' is the maximum addition of base, and      the 'Step' value contains the smallest possible increment of titrant (1e-9      or 1e-10 mol). These values are used by the built-in "Golden section"      algorithm that seeks for the addition of acid or base such that the      GEM-calculated value of pH differs from the prescribed value less than      given in the iNu 'From' field. The iNu 'From' value contains the tolerance      to which the calculated pH will be adjusted to current cpH value. Other      iterators should be left disabled. <br>    </p>    <p>Now, select the acid and the base from the 'AcidBase' property items      list, which results in the following control script visible on the right      side (assuming that HCl is the acid and NaOH is the base): <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        pH sequence of inverse titrations</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">if ( Next=1)        begin </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; cNu =:        cpH-pH; end </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">if (Next=2)        begin </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;        xa_[{NaOH}] =: ((cEh &lt; 0)? 1e-9: cEh);</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;        xa_[{HCl}] =: ((0-cEh &lt; 0)? 1e-9: 0-cEh);</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp; modC[J]        =: cEh;</span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;"> &nbsp;end </span><br        style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ modC[J]: acid        or base addition</span><br>    </div>    <p>Proceed to the next wizard page (Step 3) to select items that will be      sampled and plotted as results; right-click and choose there pH as      abscissa, and left-click to select any desired concentrations or amounts      as ordinates.&nbsp; </p>    <p><span style="text-decoration: underline;">Constant-pH isotherm diagram</span>      is a good tool to model sorption or uptake isotherms measured in pH-stat      controlled or pH-buffered experimental systems. I fact, this variant is a      similar inverse titration sequence, enhanced with another titration that      changes the addition of minor component of interest.&nbsp; <br>    </p>    <p>To set up a claculation of constant-pH isotherm, first you have to set      the iTm, ipXi, iNu iterators as shown above, then set the ipH iterator to      the same value in 'From' and 'Until' fields and zero 'Step'. Select the      acid and the base from the 'AcidBase' property items list. In addition,      set the ipe iterator, in this case supposed to keep 'From', 'Until' and      'Step' values of cpe = -log<sub>10</sub>pe, where pe is the process extent      parameter. When all this is set up properly, the control script should      look like this (assuming that trace element is Zn taken from Compos list      as ZnO): <br>    </p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">$      pH sequence of inverse titrations<br>      if ( Next=1) begin <br>      &nbsp; cNu =: cpH-pH; end <br>      if (Next=2) begin <br>      &nbsp; xa_[{NaOH}] =: ((cEh &lt; 0)? 1e-9: cEh);<br>      &nbsp; xa_[{HCl}] =: ((0-cEh &lt; 0)? 1e-9: 0-cEh);<br>      &nbsp; modC[J] =: cEh;<br>      &nbsp;&nbsp; xa_[{ZnO}] =: 10^cpe;<br>      &nbsp;end <br>      $ modC[J]: acid or base addition</div>    <p>Now, select an aqueous species of trace element in the 'Molality'      property items list for the abscissa, then select one or more sorbed      species of this trace element from the 'Sorbed' property items list. This      will result in a script like this, which will be visible in the next      wizard page that is simply to be skipped.&nbsp;&nbsp;</p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">xp[J]=:
        lg(my[{Zn+2}] + my[{ZnO2-2}] + my[{ZnO2H-}] + my[{ZnO@}] + my[{ZnOH+}]);<br>        $ ... more molalities of M aqueous complexes can be added <br>        cTau =: 0.001;<br>        $ Change the above to assign a real sorbent mass in kg<br>        &nbsp;yp[J][0]=: (x[{=SsOZn+}]&gt; 0? <br>        &nbsp;&nbsp; lg(x[{=SsOZn+}]/cTau) : empty() ); <br>        &nbsp;yp[J][1]=: (x[{=SsOZnOH@}]&gt; 0? <br>        &nbsp;&nbsp; lg(x[{=SsOZnOH@}]/cTau) : empty() ); <br>        &nbsp;yp[J][2]=: (x[{=SvOZn+}]&gt; 0? <br>        &nbsp;&nbsp; lg(x[{=SvOZn+}]/cTau) : empty() ); <br>        &nbsp;yp[J][3]=: (x[{ClayZn@}]&gt; 0? <br>        &nbsp;&nbsp; lg(x[{ClayZn@}]/cTau) : empty() ); <br>        $ log total M sorbed in mol/kg <br>        &nbsp;yp[J][4] =: lg(( x[{=SsOZn+}] + x[{=SsOZnOH@}] + x[{=SvOZn+}] +        x[{ClayZn@}])/cTau); <br>        $ log Kd <br>        &nbsp;yp[J][5] =:&nbsp; yp[J][4]- xp[J];<br>      </span><span style="font-family: Courier New,Courier,monospace;"></span></div>    <p>In this example, the abscissa is made of total molality of Zn aqueous      complexes, and ordinates correspond to adsorbed Zn species concentrations,      followed by total adsorbed Zn concentration per 1 kg of the sorbent      (montmorillonite) and Zn distribution coefficient. &nbsp; <br>    </p>    <p> Please, select the titrant from 'Compos', 'DComp' or 'IComp' list; then      select 'pH' in 'Other items', set ipH[1] = 0, and skip the next wizard      page.</p>    <h4><a name="PROCESS_T_MODE_S_2"></a>"T" mode:&nbsp; One arbitrary inverse      titration calculation as defined in Process control script, step 2<br>    </h4>    <p>This mode of inverse simulation is used when a system recipe, temperature      or pressure need to be adjusted to produce in GEM calculation one or more      output parameters (not only pH) close to prescribed values of e.g. gas      fugacity, solid solution composition, or molality of aqueous species. In      this case, parametric minimization with the "Golden section" algorithm is      implemented directly in the control script, which also can be augmented      with a more complex target function. <br>    </p>    <p>So far, only a 'Single inverse titration' variant is implemented; other      variants may be added in future.<br>    </p>    <p>For example, let a parent system containing carbonate minerals, aqueous      solution, 1e-3 mol CO<sub>2</sub> and 1e-3 mol O<sub>2</sub> at ambient      conditions (1 bar, 25 C) calculates with the resulting pH = 7.8. How much      CO<sub>2</sub> should be added to the system to bring the equilibrium      fugacity of CO<sub>2</sub>,gas&nbsp; to log<sub>10</sub>f(CO<sub>2</sub>)      = -13.0 with a tolerance of 0.01 pH units? </p>    <p>To set up the inverse calculation, first select a GEM input parameter      from 'Compos', 'DComp', 'IComp', 'DCg0in' list; set its initial increment      in iNu[0] (default 0.01); if an increase of this input decreases a GEM      output parameter, set iNu[1] to -1 ('acid'), otherwise to +1 ('base'). In      this example, select "CO2" from the 'Compos' list,&nbsp; and set iNu[1]=      -1. <br>    </p>    <p>Then select the GEM output parameter in 'lga' or 'Other items'; set its      prescribed value in ipH[0], set ipH[1] = 0 and a tolerance for matching      the output parameter in ipH[2] = 0.01; and skip the next wizard page. In      this example, select "CO2" in 'lga' property item list, and set ipH[0] =      -13. <br>    </p>    <p>Now, the iterators should look like shown below: <br>    </p>    <br>    <img style="width: 746px; height: 105px;" alt="ProcessWizardStep2IteratorsTmode1.png"      src="ProcessWizardStep2IteratorsTmode1.png"><br>    <br>    <p>The control script on the right side should look like this: &nbsp; <br>    </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Difference between given and computed output value <br>        &nbsp;cpH =: (ipH[0]-lga[{CO2}])*sign(ipH[0])*sign(iNu[1]); <br>        if( NeIt[1] = 0 ) <br>        &nbsp; begin <br>        &nbsp;&nbsp;&nbsp; ipH[1]=: cpH; cNu=: iNu[0]*sign(iNu[0]); <br>        &nbsp;&nbsp;&nbsp; iNu[2]=: xa_[{CO2}]; modC[0] =: cNu; <br>        &nbsp; end <br>        $ Recalculation of increment size at the sign inversion <br>        &nbsp;cNu =: ( ( cpH * ipH[1] ) &lt;= 0 ? modC[0]*0.382 : modC[0] ); <br>        &nbsp;ipH[1] =: cpH; modC[0] =: cNu; <br>        $ Calculation of new value of input parameter <br>        &nbsp;iNu[2] =: iNu[2] + cNu*sign(cpH); <br>        &nbsp;xa_[{CO2}] =: iNu[2]; <br>        $ Check for convergence <br>        &nbsp;Next =: ( (abs(cpH)&lt;ipH[2])|(J&gt;99)? 0: 1 ); <br>        $ End of script</span><span style="font-family: Courier New,Courier,monospace;">      </span></div>    <p>This script uses only iNu and ipH iterators (with cNu and cpH work      cells). It stores in modC[0] the current input increment size, and stops      after 100 iterations to prevent infinite loop. The script can be modified      and extended by the user later on. The output values are sampled by the      (automatically created) script: <br>    </p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">xp[0]
      =: lga[{CO2}]; <br>      yp[0][0] =: xa_[{CO2}];&nbsp; <br>      yp[0][1] =: lga[{CO2}] - ipH[0];</div>    <p>So, the result - the amount of CO2 to be added to system recipe for      obtaining log<sub>10</sub>f(CO<sub>2</sub>) = -13.0 - can be found after      calculation in the yp[0] cell in the Results page of the Process window.      In this example, it is negative - xa_[{CO2}] = -0.01854 mol. <br>    </p>    <p>Alternatively, the addition of base (e.g. CaO) can be used instead of      subtracting CO2 from the system. In this case, after selecting CaO as      'Compos' input, only the iNu[1] = 1 must be set. &nbsp; <br>    </p>    <br>    <h4><a name="PROCESS_R_MODE_S_2"></a>"R" mode:&nbsp; Stepwise flow-through      reactor scheme, uses equilibrium bulk compositions of phases, step 2<br>    </h4>    <p>In this mode, a stepwise change of the equilibrium speciation in the      system can be simulated with two scenarios: <br <="" p="">    </p>    <ul>      <li>'Flushing', where the fluid part of the system evolves while reacting        at each step with the same "fresh" solid part; </li>      <li>'Leaching', where the solid part of the system changes at each step        while reacting with the constant "fresh" fluid part. </li>    </ul>    <p> The source of constant initial composition of the solid or the fluid      part can be: </p>    <ul>      <li>in equilibrium speciation for another system (SysEq source) </li>      <li>in a Compos record prepared in advance in the project database (Compos        source). </li>    </ul>    <p>Accordingly, there are four variants of 'sequential reactors' simulation,      one of which should be selected: </p>    <ul>      <li>Flushing: SysEq source</li>      <li>Flushing: Compos source</li>      <li>Leaching: SysEq source</li>      <li>Leaching: Compos source</li>    </ul>    <p>With process iterators, you can set number of steps (in 'iTm'), pressure      ('iP'), temperature ('iTC'), solid/fluid (s/f) ratio ('ipe'). </p>    <p>In the "Leaching" mode, you can set a constant or variable mass of solid      (g) put in the reactor at the current step using 'iNu' iterator, and/or      solid/fluid mass ratio set in the 'ipe' iterator. If both 'iNu' and 'ipe'      iterators are not set (contain all zeros) then the total mass of solids      and mass of the aqueous phase calculated at the previous step will be      taken, and adjusted to solid/fluid mass ratio evaluated at the first      process step.</p>    <p>In the "Flushing" mode, you can set a constant or variable mass of      aqueous fluid (g) put in the reactor at current step using 'iNu' iterator,      and/or solid/fluid mass ratio set in the 'ipe' iterator. If both 'iNu' and      'ipe' iterators are not set (contain all zeros) then the total mass of      solids and mass of the aqueous phase calculated at the previous step will      be taken, and adjusted to solid/fluid mass ratio evaluated at the first      process step. </p>    <p></p>    <p> </p>    <p>To set a constant-composition source of solid ('Flushing') or fluid      ('Leaching'), select either from the Compos property items list. Then, if      needed, zero off other recipe inputs by selecting the respective Compos,      DComp, IComp property list entries, except the previously selected source      Compos item. For example, if "Fluid" and "Rock" records are available in      the&nbsp; Compos database and both were used to set up a parent SysEq      record for the Process, then for 'Flushing' mark first "Rock" to add, then      "Fluid" to zero off in the system recipe, and for "Leaching" - the other      way round: mark first "Fluid" to add, then "Rock" to zero off in the      system recipe. </p>    <p>To use another SysEq record as a constant source, first 'remake' the      parent SysEq and check whether the link to another SysEq is set, and 'xp_'      array and 'MbXs' data object is allocated. Then, back in this Process      wizard step, if needed, zero off all recipe inputs already covered in      source fluid or solid compositions by selecting the respective Compos,      DComp, IComp property list entries.&nbsp;</p>    <p>When done, proceed to the next wizard page and select what to plot: in      the 'Flushing' mode, usually some properties of aqueous speciation against      the solid/water ratio; in the 'Leaching' mode, some properties (masses,      volumes) of solid phases (as ordinates) against the water/solid ratio (use      modC as abscissa). </p>    <h4 style=" text-decoration: underline;">Flushing: SysEq source</h4>    <p>&lt;<span style="color: rgb(204, 0, 0);">text to be added later</span>&gt;</p>    <h4><span style="text-decoration: underline;">Flushing: Compos source</span>    </h4>    <p>Assuming that "Seawater" composition was equilibrated with "Rock"      composition in the parent system, and we would like to follow how the      seawater evolves in flow-through reactor upon reaction with next portions      of "fresh" rock at certain solid/water mass ratio, the Process wizard will      generate a control script like this: </p>    <div style="margin-left: 40px;">      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Fluid-rock interaction (Flushing, Compos source for solid)</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          cNu is mass of evolving aqueous fluid in flow-through reactor</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Comment out a line below to take the mass of fluid if iNu is set </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          cNu =: phM[{aq_gen}]; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          xp_[{aq_gen}] =: cNu; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Stop, if no fluid is left </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          Next =: ( cNu &gt; 0? 1: 0 ); </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          if(Next &gt; 0) begin </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          cpe is the solid/fluid mass ratio </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Comment out a line below to take the s/f ratio if ipe is set </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          cpe =: (J&gt;0? cpe: pmXs/cNu);</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Comment out a line below for constant amount of fresh solid as in          parent system </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          xa_[{R_Basalt}] =: cNu*cpe; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Cumulative reacted solid/fluid ratio (linear) </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          modC[J] =: ( J&gt;0 ? modC[J-1]+cpe : cpe );</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          modC[J] =: cpe*cNu;</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">end
          </span></p><span style="font-family: Courier New,Courier,monospace;">      </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Check below that the entry for fluid composition in the parent </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          system recipe is set to zero, e.g. as </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          xa_[{F_Seawater}] =: 0; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Clean up the rest of the system recipe </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">xa_[{F_Seawater}]
          =: 0;</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          end of script </span><span style="font-family: Courier New,Courier,monospace;"></span><br>      </p>    </div>    <p>To follow how the composition of aqueous phase changes between simulation      steps (reactors), you can create the following sampling script in the next      Process wizard page: </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">xp[J]
        =: modC[J];<br>        yp[J][0] =: pmXs/1000;<br>        yp[J][1] =: IS;<br>        yp[J][2] =: pH;<br>        yp[J][3] =: pe;<br>        yp[J][4] =: phM[{aq_gen}]/1000;<br>        yp[J][5] =: lgm_t[{C}];<br>        yp[J][6] =: lgm_t[{Ca}];<br>        yp[J][7] =: lgm_t[{Cl}];<br>        yp[J][8] =: lgm_t[{Fe}];<br>        yp[J][9] =: lgm_t[{K}];<br>        yp[J][10] =: lgm_t[{Mg}];<br>        yp[J][11] =: lgm_t[{Na}];<br>        yp[J][12] =: lgm_t[{S}];<br>      </span></div>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;"></span><span        style="font-family: Courier New,Courier,monospace;"></span>.................<br>    </div>    <p>This simulation will normally result in a steady decrease of the mass of      aqueous phase <span style="font-family: Courier New,Courier,monospace;">phM[{aq_gen}]
        </span>over many steps because of formation of hydrated minerals out of      unhydrous (igneous) minerals from the fresh rock. This is a realistic      scenario; however, if you wish to keep a fixed solid/water mass ratio in      the flow-through reactor upon all steps, then enter the mass of aqueous      phase (e.g. 100 g) into the iNu[0] and iNu[1] cells, and the desired      solid/water ratio (e.g. 0.1) into ipe[0] and ipe[1] cells, and modify the      control script as follows: </p>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Fluid-rock interaction (Flushing, Compos source for solid)</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        cNu is mass of evolving aqueous fluid in flow-through reactor</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below to take the mass of fluid if iNu is set </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        $ cNu =: phM[{aq_gen}]; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        xp_[{aq_gen}] =: cNu; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Stop, if no fluid is left </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        Next =: ( cNu &gt; 0? 1: 0 ); </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        if(Next &gt; 0) begin </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        cpe is the solid/fluid mass ratio </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below to take the s/f ratio if ipe is set </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        $ cpe =: (J&gt;0? cpe: pmXs/cNu);</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below for constant amount of fresh solid as in parent        system </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        xa_[{R_Basalt}] =: cNu*cpe; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Cumulative reacted solid/fluid ratio (linear) </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        modC[J] =: ( J&gt;0 ? modC[J-1]+cpe : cpe );</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        modC[J] =: cpe*cNu;</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">end
        </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Check below that the entry for fluid composition in the parent </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        system recipe is set to zero, e.g. as </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        xa_[{F_Seawater}] =: 0; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Clean up the rest of the system recipe </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">xa_[{F_Seawater}]
        =: 0;</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        end of script</span></p>    <div class="moz-cite-prefix"><br>    </div>    <div class="moz-cite-prefix">To obtain a "flushing_rc" case (constant      addition of fresh solid as in the parent system), comment out one line as      follows:</div>    <div class="moz-cite-prefix">      <blockquote type="cite">        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            Comment out a line below to take the s/f ratio if ipe is set </tt></p>        <tt> </tt>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>            cpe =: (J&gt;0? cpe: pmXs/cNu);</tt></p>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            Comment out a line below for constant amount of fresh solid as in            parent system </tt></p>        <tt> </tt>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            xa_[{R_Basalt}] =: cNu*cpe; </tt></p>      </blockquote>      To obtain a "flushing_csf" case (with s/f ratio set in the ipe iterator),      set the first two fields of that iterator to desired s/f ratio and comment      out a different line as follows:</div>    <div class="moz-cite-prefix">      <blockquote type="cite">        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            Comment out a line below to take the s/f ratio if ipe is set </tt></p>        <tt> </tt>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            cpe =: (J&gt;0? cpe: pmXs/cNu);</tt></p>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>$            Comment out a line below for constant amount of fresh solid as in            parent system </tt></p>        <tt> </tt>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><tt>            xa_[{R_Basalt}] =: cNu*cpe; </tt></p>      </blockquote>    </div>    <div class="moz-cite-prefix">It makes no sense to comment out both operators      simultaneously.</div>    <p>The results of "Flushing" simulations look better when plotted against      the cumulative solid/water ratio in linear scale. However, you can easily      modify the control script to produce modC values for abscissa in      logarithmic scale (as it is done by default in "Leaching" mode scripts).</p>    <p> </p>    <span style="font-family: Courier New,Courier,monospace;"></span>    <h4 style=" text-decoration: underline;">Leaching: SysEq source</h4>    <p>&lt;<span style="color: rgb(204, 0, 0);">text to be added later</span>&gt;</p>    <p><br>    </p>    <h4><u>Leaching: Compos source </u></h4>    <p>Starting from a parent system consisting of "Rock" and "Seawater"      equilibrated at certain fluid/rock ratio (e.g. 10), the stepwise      flow-through reactor will evolve the rock like being placed in a "dialysis      bag" with reacted fluid removed and replaced by the same amount of fresh      "Seawater" composition at each next step. To simulate this 'Leaching'      process, the following control script will be generated by the Process      wizard: </p>    <span style="font-family: Courier New,Courier,monospace;"></span>    <div style="margin-left: 40px;">      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Fluid-rock interaction (Leaching, Compos sources) </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          cNu is mass of evolving solids in a single flow-through reactor (g) </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Comment off one line below to take the mass of solids from iNu          iterator, if set </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          cNu =: pmXs; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          MbXs =: cNu; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Stop, if no solids or no fluid are left </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          Next =: ( cNu&gt;0 &amp; phM[{aq_gen}]&gt;0 ? 1: 0 ); </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">if(Next
          &gt; 0) begin </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          cpe is the solid/fluid mass ratio (from the equilibrated system) </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Comment out a line below to take the s/f ratio if ipe is set </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          cpe =: (J&gt;0? cpe: cNu/phM[{aq_gen}]);</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span> <span        style="font-family: Courier New,Courier,monospace;">      </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          xa_[{F_Seawater}] =: cNu/cpe; </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Cumulative reacted fluid/solid ratio (log10 scale) </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          modC[J] =: ( J&gt;0? 10^(modC[J-1])+1/cpe: 1/cpe ); </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;"></span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">          modC[J] =: lg(modC[J]);</span></p>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          modC[J] =: lg( 1/cpe *J );</span></p>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$$
          Cumulative reacted fluid/solid ratio in linear scale</span><br>        <span style="font-family: Courier New,Courier,monospace;">$ modC[J] =: </span><span          style="font-family: Courier New,Courier,monospace;">(          J&gt;0? modC[J-1]+1/cpe: 1/cpe );</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">end
          </span></p><span style="font-family: Courier New,Courier,monospace;">      </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Check below that the entry for rock composition in the parent </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          system recipe is set to zero, e.g. as</span><span style="font-family: Courier New,Courier,monospace;">          xa_[{Fresh_Solid}] =: 0; </span> <span style="font-family: Courier New,Courier,monospace;">        </span> </p>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          Clean up the rest of the system recipe </span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">xa_[{R_Basalt}]
          =: 0;</span></p>      <span style="font-family: Courier New,Courier,monospace;"> </span>      <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span          style="font-family: Courier New,Courier,monospace;">$          end of script</span></p>    </div>    <p>Here we assumed that <span style="font-family: monospace;">F_Seawater</span>      is the Compos name for the fresh fluid, and R_Basalt is the Compos name      for the fresh solid.</p>    <p>To follow how the amounts and composition of solid phases evolve, you can      create the following sampling script in the next Process wizard page: </p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">xp[J]
      =: modC[J];<br>      yp[J][0] =: phM[{Calcite}];<br>      yp[J][1] =: phM[{Dolomite}];<br>      yp[J][2] =: phM[{Magnesite}];<br>      yp[J][3] =: phM[{Quartz}];<br>      yp[J][4] =: phM[{Hematite}];<br>      yp[J][5] =: phM[{Magnetite}];<br>      yp[J][6] =: phM[{Anhydrite}];<br>      yp[J][7] =: phM[{Pyrite}];<br>      yp[J][8] =: pmXs/1000;<br>      ................<br>    </div>    <p>This script collects the amounts of minerals and their total mass (pmXs)      in kg, until it detects that all the rock is dissolved (leached out) and      stops. To prevent the decrease of the total mass of solids in the      flow-through reactor, enter the mass of solids (rock) (e.g. 100 g) into      the iNu[0] and iNu[1] cells, and the desired water/solid mass ratio (e.g.      10) into ipe[0] and ipe[1] cells, and modify the control script as      follows:</p>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Fluid-rock interaction (Leaching, Compos sources) </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        cNu is mass of evolving solids in flow-through reactor (g) </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below to take the mass of solids if iNu is set </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        $ cNu =: pmXs; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        MbXs =: cNu; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Stop, if no solids or no fluid are left </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        Next =: ( cNu&gt;0 &amp; phM[{aq_gen}]&gt;0 ? 1: 0 ); </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">if(Next
        &gt; 0) begin </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        cpe is the solid/fluid mass ratio (from equilibrated parent system) </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below to take the s/f ratio if ipe is set </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        cpe =: (J&gt;0? cpe: cNu/phM[{aq_gen}]);</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Comment out a line below to add fresh fluid constantly as in parent        system </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        $ xa_[{F_Seawater}] =: cNu/cpe; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Cumulative reacted fluid/solid ratio (log10 scale) </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        modC[J] =: ( J&gt;0? 10^(modC[J-1])+1/cpe: 1/cpe ); </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        modC[J] =: lg( 1/cpe *J ); </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">        modC[J] =: lg(modC[J]); </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">end
        </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Check below that the entry for rock composition in the parent </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        system recipe is set to zero, e.g. as </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        xa_[{R_Basalt}] =: 0; </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        Clean up the rest of the system recipe </span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">xa_[{R_Basalt}]
        =: 0;</span></p>    <div style="margin-left: 40px;"> </div>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;">$        end of script</span></p>    <p style="margin: 0px 0px 0px 40px; text-indent: 0px;"><span style="font-family: Courier New,Courier,monospace;"><br>      </span></p>    <div class="moz-cite-prefix">To obtain a "leaching_rc" case (constant      addition of fresh fluid as in the parent system), comment out one line as      follows:</div>    <div class="moz-cite-prefix">      <blockquote type="cite">        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            Comment out a line below to take the s/f ratio if ipe is set </span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">            cpe =: (J&gt;0? cpe: cNu/phM[{aq_gen}]);</span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            Comment out a line below to add fresh fluid constantly as in parent            system </span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            xa_[{F_Seawater}] =: cNu/cpe;</span><tt> </tt></p>      </blockquote>      To obtain a "leaching_csf" case (with s/f ratio set in the ipe iterator),      set the first two fields of that iterator to desired s/f ratio and comment      out a different line as follows:</div>    <div class="moz-cite-prefix">      <blockquote type="cite">        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            Comment out a line below to take the s/f ratio if ipe is set </span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            cpe =: (J&gt;0? cpe: cNu/phM[{aq_gen}]);</span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">$            Comment out a line below to add fresh fluid constantly as in parent            system </span></p>        <span style="font-family: Courier New,Courier,monospace;"> </span>        <p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span            style="font-family: Courier New,Courier,monospace;">            xa_[{F_Seawater}] =: cNu/cpe; </span></p>      </blockquote>    </div>    <div class="moz-cite-prefix">It makes no sense to comment out both operators      simultaneously.</div>    <p></p>    <p> The results of "Leaching" simulations look better when plotted against      the cumulative water/solid ratio in logarithmic scale, especially after      customization to "cumulative plot" (in this case, disable the line "<span        style="font-family: Courier New,Courier,monospace;">yp[J][8]
        =: pmXs/1000;</span>" in the sampling script or change it to "<span style="font-family: Courier New,Courier,monospace;">yp[J][8]
        =: empty();</span>"). However, you can easily modify the control script      to produce modC values for abscissa in a linear scale (as it is done by      default in "Leaching" mode scripts). </p>    <p> </p>    <h4><a name="PROCESS_L_MODE_S_2"></a>"L" mode:&nbsp; Lippmann diagram for a      binary solid solution, step 2<br>    </h4>    <p>Lippmann diagram is a convenient visualization of aqueous solubility of      the binary non-ideal solid solution system.&nbsp;</p>    <p>In this page, you can set up two variants of Lippmann diagrams: </p>    <ul>      <li>Ion-activity Lippmann diagram</li>      <li>Total-scale Lippmann diagram</li>    </ul>    <p>In the 'classic' <span style="text-decoration: underline;">Ion-activity        Lippmann diagram</span>, the total solubility product SigmaPi is      calculated as the sum of aqueous activities of substituting ions times the      activity of the common counterions, for example in the (Ba,Sr)SO<sub>4</sub>      system, SigmaPi = ( {Ba<sup>+2</sup>} + {Sr<sup>+2</sup>} ) * {SO<sub>4</sub><sup>-2</sup>}.
      The log<sub>10</sub>SigmaPi function is plotted against two composition      variables: mole fraction <span style="font-style: italic;">x</span> of      e.g. SrSO<sub>4</sub> end member in solid solution - the 'solidus' curve,      and ion-activity fraction in the aqueous solution <span style="font-style: italic;">x</span><sub>aq</sub>&nbsp;
      = {Sr<sup>+2</sup>}/({Ba<sup>+2</sup>}+{Sr<sup>+2</sup>}) - the 'solutus'      curve. <br>    </p>    <p>To construct a 'classic' Lippmann diagram, first select a binary solid      solution in 'Phases' property item list, then, in the 'AqIons' property      item list, select a common counterion; then select substituting ion1, ion2      in the same order as end members in the selected solid solution phase. For      the above example, select the "BaSrSO4" phase, then "Ba+2" and "Sr+2"      ions.&nbsp; The necessary process iterators will be set up automatically      (can be adjusted later in the Process window, as described below).&nbsp;      Now, you should see an automatically created simulation control script: <br>    </p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">if(cXi
      &lt; 0.5) begin<br>      &nbsp;&nbsp; xd_[{Brt}] =: 1-cXi; xd_[{Cls}] =: cXi;<br>      &nbsp;&nbsp; modC[J] =: cXi;<br>      &nbsp; end <br>      if( cXi &gt;= 0.5 &amp; cXi &lt;= 2 ) begin<br>      &nbsp;&nbsp; xd_[{Brt}] =: 0.5; xd_[{Cls}] =: 0.5; <br>      &nbsp;&nbsp; modC[J] =: 0.5;<br>      &nbsp; end <br>      if(cXi &gt; 2) begin <br>      &nbsp;&nbsp; xd_[{Brt}] =: 1/cXi; xd_[{Cls}] =: 1-1/cXi; <br>      &nbsp;&nbsp; modC[J] =: 1-1/cXi;<br>      &nbsp; end&nbsp; <br>    </div>    <p>By manipulating with additions of end-member stoichiometries to the      system recipe (driven by the ipXi iterator with 'From' -5 'Until' +5      'Step' 0.1 by default), this script generates 101 steps covering the whole      range of mole fractions of the substituting ions. In this example, "Brt"      is barite BaSO<sub>4</sub>, and "Cls" is celestite SrSO<sub>4</sub> end      member.&nbsp; </p>    <p>The Lippmann diagram itself will be calculated and plotted with help of      an automatically created sampling script:</p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">      $ Abscissa - Solidus <br>      xp[J][0] =: Wxx[{Cls}]; <br>      $ Abscissa - Solutus <br>      xp[J][1] =: 10^lga[{Sr+2}] / ( 10^lga[{Ba+2}] + 10^lga[{Sr+2}] );<br>      $ Ordinates - log10 of Lippmann's total solubility product <br>      yp[J][0] =: lga[{SO4-2}] + lg( 10^lga[{Ba+2}] +&nbsp; 10^lga[{Sr+2}] );<br>      yp[J][1] =: yp[J][0];<br>      <br>    </div>    <p>&nbsp;This script usually needs no editing, hence the "Step 3" page of      Process Wizard should be simply skipped by clicking the "Next&gt;" button      twice.&nbsp; <br>    </p>    <p>When the solubility products of solid solution end members are very      different, it may happen that the "solidus" or "solutus" curve does not      reach one of the edges of the diagram. To fix this, just try to shift the      composition interval in the ipXi iterator in the Controls page of the      Process window; for example, set it as 'From' -4 'Until' +6 'Step' 0.1, or      'From' -6 'Until' +4 'Step' 0.1, whatever works, and re-run/replot the      diagram.&nbsp; &nbsp; </p>    <p>The <span style="text-decoration: underline;">Total-scale Lippmann        diagram</span> may be very convenient in interpreting the experimental      solubility data in the systems where end members have complex      stoichiometry (e.g. LDH phases, clays) and/or the substituting ions have      different aqueos complexation patterns or are prone to hydrolysis,      oligomerization, etc. The 'total-scale' solubility product SigmaPiT is      calculated as the sum of total dissolved molalities of substituting      elements times the total molality of the common 'counter-element', for      example in the (Ba,Sr)SO<sub>4</sub> system, SigmaPiT = ( <span style="font-style: italic;">m</span>(Ba)
      + <span style="font-style: italic;">m</span>(Sr) ) * <span style="font-style: italic;">m</span>(S}.
      The log<sub>10</sub>SigmaPiT function is plotted against two composition      variables: mole fraction <span style="font-style: italic;">x</span> of      e.g. SrSO<sub>4</sub> end member in solid solution - the 'solidus' curve,      and total molality fraction in the aqueous solution <span style="font-style: italic;">x</span><sub>aqT</sub>&nbsp;
      = <span style="font-style: italic;">m</span>(Sr)/(<span style="font-style: italic;">m</span>(Ba)+<span        style="font-style: italic;">m</span>(Sr))
      - the 'solutus' curve. Because all three parameters contain directly      measurable data, the experimental data can be easily converted to SigmaPiT      scale and plotted over the calculated diagram.&nbsp; <br>    </p>    <p>To construct a total-scale Lippmann diagram,&nbsp; select a binary solid      solution in 'Phases' property item list. Then in the 'AqElements' property      item list, select a common 'counterionic' element; then the 'substituting'      ionic1, ionic2 elements in the order given by end members in the selected      solid solution Phase. In this example, select the "BaSrSO4" phase, then      "Ba" and "Sr" elements. The process iterators will be set up automatically      (can be adjusted later in the Process window).&nbsp; Now, you should see      an automatically created simulation control script, the same as for the      ion-activity Lippmann diagram variant (see above). The total-scale      Lippmann diagram itself will be calculated and plotted with help of a      different automatically created sampling script:<br>    </p>    <div style="margin-left: 40px; font-family: Courier New,Courier,monospace;">      $ Abscissa - solidus <br>      xp[J][0] =: bXs[{Sr}] / ( bXs[{Sr}] + bXs[{Ca}] );&nbsp; <br>      $ Abscissa - solutus<br>      xp[J][1] =: m_t[{Sr}] / ( m_t[{Ba}] + m_t[{Sr}] ); <br>      $ Ordinates - log10 of total dissolved elements product <br>      yp[J][0] =: lg( m_t[{S}] ) + lg( m_t[{Ba}] +&nbsp; m_t[{Sr}] );<br>      yp[J][1] =: yp[J][0];<br>    </div>    <p> A feature of this sampling script is that it calculates the mole      fraction for the 'solidus' curve not as the mole fraction of a solid      solution end member, but as the element fraction in the total composition      of the solid part of the system. This has an advantage when e.g. two solid      solution phases are included in the system in order to reproduce a      miscibility gap. In this case, only stable part of the Lippmann diagram      will be visible. If this way of calculation of the solid mole fraction is      inappropriate for your given system, the operator for <span style="font-family: monospace;">xp[J][0]</span>      can be replaced with <span style="font-family: Courier New,Courier,monospace;">xp[J][0]
        =: Wxx[{Cls}];</span>&nbsp; later on by editing the script in the      Process window.&nbsp;</p>    <p>The sampling script usually needs no editing, hence the "Step 3" page of      Process Wizard should be simply skipped by clicking the "Next&gt;" button      twice. &nbsp; </p>    <p style="font-family: Helvetica,Arial,sans-serif;"> </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_3"></a>2.3. Process Wizard Step 3 - Selection of items      to sample / plot<br>    </h3>    <p>Proceed here to the chosen simulation mode:</p>    <br>    <table style="text-align: left; width: 980px; height: 35px;" cellspacing="2"      cellpadding="2"      border="1">      <tbody>        <tr>          <td style="vertical-align: top;">&nbsp;<a href="#PROCESS_P_MODE_S_3"><span                style="font-weight: bold;">P</span>              (TP change only)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_S_MODE_S_3"><span style="font-weight: bold;">S</span>              (sequential path)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_G_MODE_S_3"><span style="font-weight: bold;">G</span>              (batch inverse titration)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_T_MODE_S_3"><span style="font-weight: bold;">T</span>              (single inverse titration)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_R_MODE_S_3"><span style="font-weight: bold;">R</span>              (reaction extent)</a><br>          </td>          <td style="vertical-align: top;"><a href="#PROCESS_L_MODE_S_3"><span style="font-weight: bold;">L</span>              (Lippmann diagram)</a><br>          </td>        </tr>      </tbody>    </table>    <br>    <p>In this wizard page, three areas appear: "Property", "Item Selection",      and "Sampling Script". The latter may contain (already created) script      that needs no modification, in which case this wizard page should be      skipped by clicking "Next&gt;" or "&lt;Back" buttons. Otherwise, upon      clicking on a chosen property and then on its items, the respective      operators will appear as being added to the sampling script. By      unselecting items, the respective operators will be removed. <br>    </p>    <p>By default, selecting any item creates an assignment operator of the form      <span style="font-family: Courier New,Courier,monospace;">yp[J][i] =:        &lt;Property&gt;[{&lt;Item&gt;}];</span>,&nbsp; where 'i' is the      ordinate index, automatically incremented from 0. Choosing from 'Scalars'      property may add operators like <span style="font-family: Courier New,Courier,monospace;">yp[J][i]
        =: &lt;Item&gt;;</span>&nbsp; or&nbsp; <span style="font-family: Courier New,Courier,monospace;">yp[J][i]
        =: &lt;Item&gt;[J];</span>, depending on the item selected.&nbsp;</p>    <p>The very first operator in the auto-assembled sampling script will      be&nbsp; <span style="font-family: Courier New,Courier,monospace;">xp[J]        =: J;</span>, which copies simulation step index into the 'abscissa'      vector xp. However, any other property item can be set as abscissa      instead, if it is right-clicked in the "Item Selection" list. This shows a      small menu where "Abscissa" should be selected, which replaces the topmost      operator by&nbsp; <span style="font-family: Courier New,Courier,monospace;">xp[J]
        =: </span><span style="font-family: Courier New,Courier,monospace;">&lt;Property&gt;[{&lt;Item&gt;}];</span>&nbsp;
      or &nbsp;&nbsp; <span style="font-family: Courier New,Courier,monospace;">xp[J]
        =: &lt;Item&gt;;</span>&nbsp; or&nbsp; <span style="font-family: Courier New,Courier,monospace;">xp[J]
        =: &lt;Item&gt;[J];</span>.</p>    <p>Another option available through the right-click on an item in "Item      Selection" list is "Calculator". This opens the GEMS Data Object Cell      Calculator dialog, where you can type a value of the second operand,      select the operation, and click "Ok-Do it!". For example, choosing "cTC"      item and typing an increment 273.15 with '+' (addition) operation will      result in a script operator&nbsp; <span style="font-family: Courier New,Courier,monospace;">yp[J][i]
        =: cTC+273.15;</span> .&nbsp; If, for "my" property, "SiO2@" item, you      select on Calculator the "log" operation,&nbsp; the following script      operator will be added:&nbsp; <span style="font-family: Courier New,Courier,monospace;">yp[J][2]
        =: ( my[{SiO2@}] &gt; 0. ? lg(my[{SiO2@}]) : empty() ); </span>In a      situation when logarithm is taken from zero, this prevents the error by      assigning the empty() value instead. </p>    <p> If you click on a property in "Property" list, the respective tooltip is      shown in the lower left part of the wizard page. For the "Scalars"      property items, the tooltips can be obtained by hovering the cursor over      the item name (without clicking it) for one or two seconds. Most of these      properties and items are also accessible in GEM-Selektor module or      submodule windows and pages. More information on them can be found using      "Index" in the Help Window. <br>    </p>    <h4><a name="PROCESS_P_MODE_S_3"></a>"P" mode: &nbsp; Sequential temperature      and/or pressure change at fixed bulk composition, step 3<br>    </h4>    <p> </p>    <p style="font-family: Helvetica,Arial,sans-serif;"> </p>    <p>In the "<span style="text-decoration: underline;">PT phase diagram</span>"      variant, the sampling script is automatically created. Just skip this      wizard page by clicking 'Next&gt;". </p>    <p>In other variants, choose temperature (cT, cTC) or pressure (Cp) from      'Scalars' list as abscissa (by right-click menu). Then select properties      and items of interest from the property item selection list.&nbsp; <br>    </p>    <h4><a name="PROCESS_S_MODE_S_3"></a>"<b>S</b>" mode:&nbsp;&nbsp; Direct      sequential change of bulk composition and/or metastability constraints      (default), step 3<br>    </h4>    <p>In the "<span style="text-decoration: underline;">Diagram logD vs linear        x</span>"&nbsp; or "<span style="text-decoration: underline;">Diagram        logKd vs log(m)</span>"&nbsp; variants, the sampling script is      automatically created. Just skip this wizard page by clicking 'Next&gt;".    </p>    <p> In the "<span style="text-decoration: underline;">Titration cNu linear</span>"      or "<span style="text-decoration: underline;">Titration cpXi logarithmic</span>"      variants, choose "modC" item from the 'Scalar' property list as abscissa      (by right-click menu). Then select properties and items of interest from      the property item selection list. <br>    </p>    <h4><a name="PROCESS_G_MODE_S_3"></a>"<span style="font-weight: bold;">G</span>"      mode:&nbsp; Batch inverse titration sequence for incremented pH values      etc, step 3</h4>    <p>In the "<span style="text-decoration: underline;">Constant-pH isotherm        diagram</span>" variant, the sampling script has been defined      previously, so this wizard page can be skipped by clicking "Next&gt;". <br>    </p>    <p>In the "<span style="text-decoration: underline;">Property-vs-pH diagram</span>"      variant, choose "pH" item from the 'Scalar' property list as abscissa (by      right-click menu). Then select properties and items of interest from the      property item selection list. </p>    <h4><a name="PROCESS_T_MODE_S_3"></a>"T" mode:&nbsp; One arbitrary inverse      titration calculation as defined in Process control script, step 3<br>    </h4>    <p>The sampling script was automatically created. Just skip this wizard page      by clicking 'Next&gt;". </p>    <h4><a name="PROCESS_R_MODE_S_3"></a>"R" mode:&nbsp; Stepwise flow-through      reactor scheme, uses equilibrium bulk compositions of phases, step 3</h4>    <p>Choose "modC" item from the 'Scalar' property list as abscissa (by      right-click menu). Then:<br>    </p>    <p>In 'Flushing' modes, select properties of aqueous phase from the property      item selection list. <br>    </p>    <p>In 'Leaching' modes, select properties of solid phases from the property      item selection list. </p>    <h4><a name="PROCESS_L_MODE_S_3"></a>"L" mode:&nbsp; Lippmann diagram      (transposed) for a binary solid solution, step 3</h4>    <p>The sampling script was automatically created. Just skip this wizard page      by clicking 'Next&gt;". </p>    <br>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_4"></a>2.4. Process Wizard Step 4 - Important data      object dimensions<br>    </h3>    <p> The spin boxes visible on this wizard page define the dynamic memory      configuration of the process simulator. </p>    <p><span style="text-decoration: underline;">Dimensions of sampled and        experimental data </span> </p>    <p> nPS - Number of steps (1 to 9999 ) to be performed in this simulation      (default: 21); also length of the '<a href="#xp">xp</a>' vector and number      of rows in the '<a href="#yp">yp</a>' table. <br>    </p>    <div style="margin-left: 40px;">This counter defines how many process      simulation steps (at most) can be performed. Its current value can be seen      in "Config" page of the Process window as the Ntxi[1] data field. The      actual number of steps executed can be less depending on contents of the      iterators and on logical conditions in the control script.&nbsp; In some      cases, the Process Wizard can derive this setting from values in iterators      and the chosen process type. However, it is recommended to check this      setting when you see this wizard page.&nbsp; <br>    </div>    <p> Number of '<a href="#modC">modC</a>' array columns (1 to 40, 0 - not      used) to store process control values; number of rows will be nPS.</p>    <div style="margin-left: 40px;">This optional array is often used by the      simulation control script 'P_expr' to store values to be used as abscissa      in the sampling script, or to keep additions of titrants in inverse      titrations. Here you can set the number of columns (must be consistent      with the control script).&nbsp; <br>    </div>    <p> Number of columns in the '<a href="#yp">yp</a>' table (1 to 200) to keep      the simulated data sampled by the '<a href="#pgExpr">pgExpr'</a> script;      number of rows will be nPS.&nbsp;</p>    <div style="margin-left: 40px;">This array is always used by the sampling      script to store the results that will be plotted as symbols and/or curves      in the Graph dialog. Here, you can set how many 'curves' will be sampled      and stored in this process simulator.&nbsp; <br>    </div>    <p> Number of rows in the <a href="#xEp">xEp</a>, <a href="#yEp">yEp</a>      arrays for experimental data (optional) <br>    </p>    <div style="margin-left: 40px;">If there is a need to plot some experimental      data over the modeled curves, they can be entered later on into these      arrays. This setting tells how many experimental points will be plotted      (default: 0, not plotted). <br>    </div>    <p>Number of columns in the xEp, yEp arrays for experimental data (optional)      <br>    </p>    <div style="margin-left: 40px;">And this setting tells how many properties      per experimental point will be entered and plotted (default: 1).<br>      <br>    </div>    <p><span style="text-decoration: underline;">Optional data vectors&nbsp;</span>      (of length nPS) can be used for accumulating current process control      values for all steps performed. </p>    <p>Allocation of optional data vectors (checkboxes):&nbsp; </p>    <p style="margin-left: 40px;">CSD variant # ('vTm'):&nbsp; to store system      recipe variant numbers from 'cTm'.<br>    </p>    <p style="margin-left: 40px;">Volume V, dm<sup>3</sup> ('vV'): to store      system volume constraints from 'cV' (can be typically used to store any      intermediate data).<br>    </p>    <p style="margin-left: 40px;">Pressure P, bar ('vP'): to store system      pressures from 'cP'.<br>    </p>    <p style="margin-left: 40px;">Temperature T ('vT'): to store system      temperatures from 'cT'.<br>    </p>    <p style="margin-left: 40px;">Constraints # ('vNV'): to store system      constraints variant numbers fron 'cNV'.&nbsp; </p>    <p style="margin-left: 40px;">Process extent Nu ('vNu'): to store linear      process extent variable values from 'cNu'. </p>    <p style="margin-left: 40px;">Process extent pXi ('vpXi'):&nbsp; to store      logarithmic process extent variable values from 'cpXi'. </p>    <p style="margin-left: 40px;">Kinetic parameters ('vKin'): to store kinetic      control parameter values (under construction).<br>    </p>    <p style="margin-left: 40px;">Time Tau ('vTau'): to store 'real' time values      from 'cTau'. <br>    </p>    <p>Any of these optional data vectors related to current value of the      inactive iterator can also be used in the control and sampling script for      keeping arbitrary intermediate values. <br>    </p>    <p>The assignment such as "vT[J] =: cT;" in the control or sampling script      will override any value in an optional data vector such as vT[J] that was      automatically copied by the process simulator. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_5"></a>2.5. Process Wizard Step 5 - Additional options <br>    </h3>    <p> On this page, some options of the Process simulator operation can be      changed (for specific cases). Optional modes of operation can be changed      in checkboxes:&nbsp; </p>    <p> Use 'P_expr' simulation control script (can be turned off in P      simulation mode).</p>    <div style="margin-left: 40px;">The 'P_expr' simulation control script must      be used in most cases except the P mode (e.g., if temperature is changed      using iTC iterator, but the system recipe remains constant). </div>    <p> Save generated SysEq records to the project data base (always saved in G      and&nbsp; T modes) <br>    </p>    <div style="margin-left: 40px;">Saving process-generated SysEq records may      be necessary for subsequent sampling of results by GtDemo module or for      troubleshooting, but may dramatically increase the size of project      database. This flag has no effect on reciprocal and inverse titrations,      where optimized SysEq records are always saved.</div>    <p> Use time dependent calculations and plotting mode (for kinetics      simulations, reserved)</p>    <div style="margin-left: 40px;">This option is reserved for future versions.      <br>    </div>    <p> Use Smart Initial Approximation of GEM IPM algorithm for faster      calculations (on your discretion)</p>    <div style="margin-left: 40px;">Usage of the Smart Initial Approximation      (SIA) can greatly accelerate GEM calculations (<a href="gems_ipm.html#MULTI_GEMIPM3">more
        ...</a>) such as many process simulation steps for a large chemical      system. However, the SIA mode cannot guarantee that correct phase      assemblage will always be found. To check, we recommend to run GEM first      without using SIA and then using SIA. If the obtained curves are identical      (simulation results very similar) then SIA can be used in this type of the      modeling scenario. <br>    </div>    <p> Use a stepwise mode of Process simulation (for troubleshooting purposes)    </p>    <div style="margin-left: 40px;">In stepwise mode, when the simulation runs,      below the progress bar visible in lower part of the main frame window, the      "Step", "Resume", "Cancel" and "Break" buttons appear. Click on "Step"      performs the next simulation step and waits until any of four buttons is      clicked. During this time, you can examine any windows available in      GEM-Selektor. "Resume" leaves the stepwise mode that can be entered again      using the "Break" button. "Cancel" terminates process simulation after the      current step. This mode is useful for troubleshooting purposes or      debugging the process control script.<br>    </div>    <p>More optional settings on this wizard page may be added in future      versions.</p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="WZSTEP_6"></a>2.6. Process Wizard Step 6 - Final settings and      comments<br>    </h3>    <p>Optional spinbox: Set here the number of links to SDref source of data      and bibliography records (default 0). </p>    <div style="margin-left: 40px;"> This option lets the user to allocate one      or more links to SDref records (available or to be created in the modeling      project database) with descriptions of sources of data or bibliographic      references.&nbsp; </div>    <p> More optional settings on this wizard page may be added in future      versions. </p>    <p> The typical process simulation workflow is briefly described that occurs      after the Process wizard is finished.<br>    </p>    <p> (1) 'Controls' page of the Process window will appear. Fill out comments      in 'PEname' and 'PEnote' lines. Check the process iterators for correct      ranges and increments. </p>    <p> (2) Modify the simulation control script '<a href="#P_expr">P_expr</a>',      if necessary. Some example scritps can be found in help pages or via the      'Help' 'Scripts' menu command. Check also the sampling script in      'Sampling' page of the process window. </p>    <p> (3) Click on 'Calculate' toolbar button to start the simulation; for the      first time, do not use the graphic output. If error messages appear, check      and fix the scripts or iterators and try the calculation again. After the      simulation has finished, look at sampled results in '<a href="#xp">xp</a>'      and '<a href="#yp">yp</a>' fields on 'Results' page (can be copy-pasted to      commercial spreadsheets). </p>    <p> (4) Check and edit the axis and ordinate (plot) names, and click on the      'Plot data' toolbar button to see a customizable Graph Dialog. To plot      experimental data over simulated curves (for visual fitting), close the      Graph dialog, enter data into '<a href="#xEp">xEp</a>' and '<a href="#yEp">yEp</a>'      fields on 'Results' page, then open the Graph dialog again and customize      the plot.<span style="font-family: Helvetica,Arial,sans-serif;"></span></p>    <p><span style="font-family: Helvetica,Arial,sans-serif;"></span></p>    <span style="font-family: Helvetica,Arial,sans-serif;"><br>    </span>    <hr style="width: 100%; height: 2px;">    <h2><a name="PROCES_MWINDOW"></a>3. Process Module Window</h2>    <p>This window opens when the 'Process' module is selected in the      'Equilibria Calculation' mode of GEM-Selektor. The Process window has four      pages - 'Controls', 'Sampling', 'Results' and 'Config' - that provide      access to all relevant data used in process simulations. </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="MWPAGE_1"></a>3.1. Proces Window 'Controls' Page<br>    </h3>    <p>This page contains two comment lines (<a href="#PeName">PeName</a> and <a        href="#PeNote">PeNote</a>)      that identify the simulation task; it is highly recommended to write these      comments because the first one will be displayed on the plots in      GraphDialog, and because these comments are helpful in remembering after a      while what was the purpose of this simulation.&nbsp;&nbsp;</p>    <p>Below comment lines, optional fields <a href="#PSDref">PSDref</a> and <a        href="#PSDval">PSDval</a>      can be visible with links to <a href="gm_sdref.html">SDref records</a>      with bibliographic data source information.&nbsp;</p>    <p>The main part of this page is a table widget composed of process      iterators iTm, iV, iP, iTC, iNv, iTau, ipXi, iNu, ipH, ipe (the first      three rows '0' From, '1' Until, '2' Step) with the respective current      values (the fourth 'cTm' row). These iterators control process variables      to be changed incrementally, and the number of simulation steps to be      performed. The iterators can also be edited in <a href="#WZSTEP_2">Step 2        Process Wizard page</a>. <br>    </p>    <p>Below the table widget, usually a multi-line text editor field '<a href="#P_expr">P_expr</a>'      is visible. This field contains the simulation control script that tells      the program which data objects and how to change between simulation steps      according to or in addition to what is prescribed in the process      iterators. The process Wizard can generate many kinds of 'initial' scripts      that can be edited further in this page, if necessary. <br>    </p>    <p>Finally, if allocated, the <a href="#modC">modC</a> array appears to the      right of the control script. Most scripts collect information into this      array and use it in the 'sampling' script to collect simulation results.      The modC array (as other arrays) can be re-allocated in Process wizard      upon remake of the Process record. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><span style="font-family: Helvetica,Arial,sans-serif;"><a name="MWPAGE_2"></a></span>3.2.
      Proces Window 'Sampling' Page<br>    </h3>    <p>This page contains process simulation step and size counters, current      values for the iterators, and the '<a href="#pgExpr">PgExpr</a>'      multi-line text editor field with the data sampling script. This script is      always present to tell the program which data objects to sample,      re-calculate, and write the results into the 'xp' (abscissa) vector and      'yp' (ordinates) table (both accessible in the 'Results' page). The      initial sampling scripts can be generated by the Process Wizard and      modified as needed in this page. <br>    </p>    <p>Typically, the current iterator value cells cTau, cpXi, cXi, cNu, cpH,      cpe, cEh, cT are used in sampling scripts together with the process step      index 'J'. The 'Next' cell, if contains 1, lets the next simulation step      to be performed. If this cell is set to 0 (automatically by iterators, or      by a conditional operator in the control script) then the simulation is      finished, i.e. the next step is not performed.</p>    <p>The 'pSTkey' field contains the SysEq record key of the currently      processed GEM task (even if the record will not be actually saved to      database). &nbsp; &nbsp; <br>      <span style="font-family: Helvetica,Arial,sans-serif;"></span></p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="MWPAGE_3"></a>3.3. Proces Window 'Results' Page<br>    </h3>    <p>This page displays a table widget composed of the '<a href="#xp">xp</a>'      (abscissa) vector - the first column - and the '<a href="#yp">yp</a>'      (ordinates) data table - all columns to the right. In these arrays, the      simulation results will be collected by the sampling script 'PgExpr' (see      the 'Sampling' page). The uppermost row contains labels (names) for the      abscissa axis and the ordinates, which can be edited any time. Together      with the 'Py_Nam' cell (the ordinate axis label), these labels will be      displayed in the plot on the Graph Dialog, invoked by clicking on the      "Plot data..." upper toolbar button.&nbsp;</p>    <p>Using the righ-click menu, all or part of the table widget can be      selected, copy-pasted to another (spreadsheet or text editor) program, or      cleaned (i.e. filled with 'empty' values). <br>    </p>    <p>If allocated, the '<a href="#xEp">xEp</a>', '<a href="#yEp">yEp</a>'      arrays for experimental data (to be plotted over the simulation results)      will be visible to the right of the large table widget. If necessary,      enter or copy-paste the data into the 'xEp', 'yEp' fields. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><span style="font-family: Helvetica,Arial,sans-serif;"><a name="MWPAGE_4"></a></span>3.4.
      Proces Window 'Config' Page<br>    </h3>    <p>This page contains technical information used in the process simulator      task, which can be useful for troubleshooting. It also contains a 'PeStl'      list of generated SysEq record keys. If SysEq records were saved in the      project database, they can be used by the <a href="gm_gtdemo.html">GtDemo        module</a> to sample and plot additional simulation results.</p>    <p>The current dimensionality of 'yp', 'xp', 'yEp', 'xEp' arrays can be seen      in the 'pDimXY' and 'pDimEf' cells. The arrays can be re-allocated in the      Process Wizard while remaking the Process record.<br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h2><font face="Helvetica, Arial, sans-serif"><a name="PROCES_DETAILS"></a>4.
        Details on Process Simulations</font></h2>    <p>To create a new Process Simulator, first make sure that the "parent"      SysEq record has been created, calculated and saved in the database. Then      switch to the "Process" window and select the "Record" "Create" menu      command. A list of available SysEq records will appear; find there the      "parent" record (suppose, its key is <tt>"TestProject:G:TestSystem:1:0:1:25:0:"</tt>),
select
      it and press the "Ok" button (or double-click on the selected record key).      In the appearing "Process: Please, enter a new key" dialog, fill out the      last two fields of the new Process record key (e.g. as <tt>"...:Titration1:S:"</tt>).
      Press "Ok" when ready.&nbsp;<br>      &nbsp; <br>      Now, the <a href="#PROCES_MWIZARD">Process Wizard</a> appears; choose the      process type and follow wizard steps. When the wizard is finished, you      will be back to 'Controls' page of the <a href="#PROCES_MWINDOW">Process        window.</a> Check information there, edit comments and scripts, if      necessary, and click 'Calculate' upper toolbar button to start simulation.      In the newly-created Process record, first time do not select the graphics      output mode. When the simulation is finished, proceed to 'Results' page      where the results will be collected. Plot the graph by clicking "Plot      data..." upper toolbar button.&nbsp; <br>    </p>    <p>The Process Simulator can be re-configured at any time by executing a      "Record" "Remake" menu command or "Remake..." upper toolbar button. This      brings you again into Process Wizard. If there is no need to change      control and sampling scripts, simply skip the respective steps by clicking      "Next &gt;".&nbsp; &nbsp; <br>    </p>    <p>Alternatively, as usual in GEM-Selektor, you can "clone" a new Process      record from an existing one. After selection of a "parent" SysEq record      key and typing in the Process ID and type, this will lead you into the      "Remake" mode and in Process Wizard.&nbsp; </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_DETAILS_ITERATORS"></a>4.1. Setting up the Process      iterators</h3>    <p>In the 'Controls' page of the Process window, the process simulation can      be set up using one or more of column vectors ("iterators")&nbsp; <tt>"iTm",
"iV",
        "iP", "iTC", "iNv", "iTau", "ipXi", "iNu", "ipH", "ipe"</tt> (scan them      with mouse pointer and read tooltips). Each iterator has the following      structure: </p>    <blockquote style="font-family: Courier New,Courier,monospace;">      <p>first cell&nbsp; [0]&nbsp; start value&nbsp; 'From'<br>        second cell [1]&nbsp; limiting value 'Until' <br>        third cell&nbsp; [2]&nbsp; increment 'Step' (or 0 for no change) </p>    </blockquote>    <p>The first five iterators are automatically used by the program to      assemble the last five fields of the generated SysEq record keys. Make      sure that the respective values will not exceed length limits of <a href="gems_rekey.html#DBM_SysEq">SysEq
        record key format</a>. In the&nbsp; <tt>"iTm"</tt> specification, it is      wise to put increment larger than 1 (at best, 5 or 10) if the process      simulation will change bulk composition of the system. This may give you a      possibility later on for producing more points in the most interesting      parts of the sequence (e.g., near a redox barrier).</p>    All iterators have their counterparts - the work cells&nbsp;<tt> "cTm",      "cV", "cP", "cT", "cTC", "cNv", "cTau", "cpXi", "cXi", "cNu", "cpH",      "cpe", "cEh"</tt>, and the Process index cell <tt>&nbsp;"J"</tt>, visible    on 'Controls' and 'Sampling' pages of the Process window. The process    simulation begins when you press the "Calculation" button on the upper    toolbar (or execute the "Record" "Calculate" menu command). At this point,    the index cell <tt>"J"</tt> contains 0 and the work cells are loaded with    the respective start values from the iterators.&nbsp; <br>    &nbsp; <br>    The <tt>"Next"</tt> data cell contains 1, which means that the next process    point will be simulated. When the&nbsp;<tt>"Next"</tt> cell contains 0, the    simulation is finished. This will happen automatically when the pre-defined    limit is achieved in any of the work cells connected to iterators; the    current point index <tt>"J"</tt> will be greater or equal than the total    input number of points to generate; or the&nbsp;<tt>"Next"</tt> cell will be    set to 0 in the <tt>"P_expr"</tt> math script. Note that the program will    first increment the iterator work cells and then execute Math Scripts, first    &nbsp;the <tt>control script "P_expr"</tt> and next, after calculating the    equilibrium state, - the <tt>sampling "pgExpr"</tt><tt> </tt>math script.    This means that the <a href="g_mscript.html">math scripts</a> may override    the default effect of iterators if they change contents of any work cells    listed above. After the equilibrium point is computed and the control <tt>"P_expr"</tt><tt>    </tt>math script is executed, the next SysEq record key will be assembled,    put in the <tt>"PeStl"</tt> list (seen on Page 3 of the Process window),    and the record will be saved into the database if the &nbsp;<tt>PePsts[4]</tt>    flag is turned on. If the&nbsp;<tt>"Next"</tt> cell contains 1, the program    will proceed to the next simulation point.&nbsp;    <p>Now, let us come back to Page 1 of the "Process" window. We recommend at      once to fill out the <tt>"PeName", "PeNote", "PSDref",</tt> and&nbsp; <tt>"PSDval"</tt>      comment fields in such a way that after a month or two you could still      easily recall what this process simulator is doing. Creation of a "process      simulation log page" would be highly recommended at this point. To do      this, type in the <tt>"PSDref"</tt> field a new <a href="gdb_rkey.html#dbm_SDref">SDref
        record key</a> like this: <tt>"process_{name}:{year}:log:"</tt>, where      <tt>{name}</tt> stands for the process ID (see field 8 of the <a href="gems_rekey.html#DBM_Process">Process
        record key</a>), and <tt>{year}</tt> is the current year. Press <tt>Enter</tt>      and then <tt>F2</tt>. This will open a "SDref" window, which you can fill      out and save the new <a href="gm_sdref.html">SDref record</a> into your      project database file. In the <tt>"SDabst"</tt> editor field on Page 2,      you can now describe why and how did you create the process definition,      what it is supposed to do and what results are to be sampled. This      description can be continued in the future every time when you access the      Process record and press <tt>F2 </tt>after clicking on the <tt>"PSDref"</tt>      field.&nbsp; <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_SIMULATION_SCRIPT"></a>4.2. Writing Simulation Control      Math Scripts<br>    </h3>    <p>To specify a change in the bulk composition or other input parameters of      the chemical system, you have to enter a control <a href="gmscript.html">script</a>      into the <a href="#P_expr"><tt>P_expr</tt></a> text editor field in the      'Controls' page of Process window. <br>    </p>    <p>Many control scripts are automatically created by the Process Wizard (in      "create" or "remake" mode). Otherwise, you can use the <a href="g_mscript.html#MS_LIBRARY">template
        math script library</a>, accessible via the "Help" "Script" menu command      (or <tt>F3</tt> hot key). Upon that, you will see a list of available      template scripts (record keys with math scripts for the <tt>P_expr</tt>      field start with <tt>"mscript-titr..."</tt>). Select the appropriate one      and press "Ok". In the appearing SDref module window, the template script      is provided on Page 2. Read the comments, then mark the script text using      the mouse drag, copy it (<tt>Ctrl-C</tt>), switch to Page 1 of the Process      window, click on the <tt>P_expr</tt> field and paste the text (<tt>Ctrl-V</tt>).
      <br> </p>    <p>Now, you can edit the script according to your own idea about controlling      the process simulation (you can open the "Single Thermodynamic System"      dialog to look in parallel for correct data object labels and names of      PCO, species, and phases). After you have edited the script (but before      trying calculations), save the Process record to database. <br>    </p>    <p>All Process work cells and corresponding iterators, as well as most data      objects visible in the "System" window pages, can be used as variables in      the process control script expressions to describe changes in the system      along the process path. The control script usually looks like this (see      also template math scripts): </p>    <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;">$        Change in Ca/Si bulk ratio in the system </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">cNu =: iNu[0] +        J*iNu[2]; </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xd_[{quartz}] =:        cNu; </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">xd_[{portlandite}]
        =: 1-cNu; </span><br style="font-family: Courier New,Courier,monospace;">      <span style="font-family: Courier New,Courier,monospace;">$ end</span><br>    </div>    <p> The script is run automatically to change bulk composition in SysEq      records when each next point&nbsp; (indexed with <tt>J</tt>) is generated      during&nbsp; the process simulation. The first and the last line are      comments. The second line calculates the current number of moles of added      quartz stoichiometry by incrementing within <tt>"iNu"</tt> iterator      (supposed to be set up by the user). The third line copies it into an      element of <tt>"xd_"</tt> vector that corresponds to quartz (see "DComp"      page of the "System" window). The fourth line calculates the number of      moles of portlandite stoichiometry and assigns it to the respective      element of the <tt>"xd_"</tt> vector.&nbsp; There are many alternative      ways to specify the same process simulation in writing math scripts, with      almost no creativity limits.&nbsp; </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_SAMPLING_SCRIPT"></a>4.3. Writing Process Data Sampling      Math Scritps<br>    </h3>    <p>To tell the program what results and data to sample and plot, proceed to      'Sampling' page of the Process window, and type a data sampling script      into the <tt>"pgExpr"</tt> editor field (Process Wizard creates sampling      scripts in many cases). Just as in the case of the <tt>"P_expr"</tt>      simulation script, you can pick up and paste a template math script from      the library (look for SDref record keys beginning with <tt>"mscript-plot..."</tt>).
      <br> </p>    <p>All sampling scripts must fill out the <tt>"xp"</tt> vector (abscissa)      and the <tt>"yp"</tt> table (ordinates, or plot lines) with some GEM IPM      results, one line per process step (indexed with <tt>"J"</tt>). The <tt>"xp"</tt>      and <tt>"yp"</tt> data objects are accessible on the 'Results' page of      the "Process" window. After editing the sampling <a href="g_mscript.html">script</a>,      save the Process record again. <br>    </p>    <p>If the empirical data are to be plotted, you can remake the Process      record, allocate xEp and yEp arrays with desired dimensions, then change      to the 'Results' page of the Process window, and type the data into<tt>        "xEp"</tt> and <tt>"yEp"</tt> fields. Also, edit the plot (column)      names in the <tt>"pY_nam", "pX_nam", "pLnam"</tt> and <tt>"pLnamE"</tt>      fields (these will appear on the graph dialog and printouts of the      results). <br>    </p>    <p>The results can be plotted (by clicking "Plot data..." upper toolbar      button) or copy-pasted to another program using the right-click menu. <br>    </p>    &nbsp; <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCESS_DETAILS_RUN"></a> 4.4. Running Process Simulators<br>    </h3>    <p>To start the process simulation, press the "Re-calculate record data"      toolbar button (or execute the "Record" "Calculate" menu command). The      program may ask you to save the Process record into the database (this      will do no harm but may save your work if later on some problems happen      with calculations). If the sampling/plotting mode is invoked, you will see      a small "Use graphic window" question dialog, otherwise calculations will      start immediately. <br>    </p>    <p>If you respond with "No" to the "Use graphic window" question then a      progress bar will appear in the main frame below the Process window (below      the bar, several more buttons will be visible in 'stepwise' mode). In      normal simulation mode, a red button 'Stop' will appear to the left of      progress bar; clicking on that button will cancel the simulation. When the      simulation is finished successfully, you will see a message "Finished Ok"      in the title line of the window. &nbsp;<br>    </p>    <p>If there are syntax errors in the math scripts, the program will display      an error message, followed by a yet unprocessed part of the math script      text. If this happens then press "Ok", fix the error, and start the      Process calculation again. <br>    </p>    <p>If you run a process simulator with the sampling/plotting mode invoked      for the first time, we recommend to run it without using the graphic      window because the plots on the graphic dialog are not yet customized.      After this is done (see next section), you can run the process simulator      using the graphic window. In this case, newly-calculated plots will be      displayed as scattered dots over the previously existing plots.&nbsp;</p>    <p>The Process calculations may take time if the system is large or the      process generates many points (depending on the processor performance).      When all equilibria are computed, you can see a list of generated SysEq      records on "Config" and sampled results on the "Results" page of the      Process window. <br>    </p>    <br>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCESS__DETAILS_PLOT"></a>4.5. Plotting and Exporting Results    </h3>    <p>Click on the "Plot data..." toolbar button (or execute the "Record"      "Plot" menu command) to display the Graph dialog with plotted results and      empirical data points, if provided. Now, the graph colors, lines, scales,      symbols etc. can be customized ("Customize..." button) and later on saved      in the Process record. &nbsp;The plot names from the legend can be dragged      and dropped on the plot lines in the graphic image by using the left mouse      button. Note that if you close the graph dialog and open it again (or      customize it), you will have to drag-and-drop the legend names again. The      picture can be saved into a file (png, jpg or bmp) by clicking a "Save      Image..." button, or printed on a system printer ("Print..." button). We      recommend saving the plots into .png files.&nbsp;<br>      <br>      The process simulation results (with or without scripts) can also be      printed into an ASCII file using the "Print" toolbar button on the      "Process" window and selecting an appropriate printing script from the      appearing list. <br>      &nbsp; <br>      The process simulation can always be re-run after some input parameters of      either the "parent" SysEq record or the process simulator (e.g. process      iterators, <span style="font-family: monospace;">modC</span> array      values, math scripts, etc.) have been changed. When re-running the      simulation with an already customized graph, you can click "Yes" on the      "Use graphic window?" dialog. This will display the graph with previous      calculation results; new results will appear progressively as dots of the      same color as lines, step by step, until the whole calculation is      completed. If you wish to retain the newly calculated results then close      the graph dialog and save the Process record (if you now open the graph,      only new results will be shown as lines); otherwise, do not save the      record and load it again from the database to discard the newly-calculated      results. This mode is especially good for fitting some input model      parameters against experimental (e.g. titration) data.&nbsp; <br>    </p>    <br>    <hr width="100%" size="2">    <h2><a name="PROCES_DATA"></a>5. Proces Window Data Entries</h2>    <dl>      <dt><br>      </dt>      <dt><a name="PeName"></a><big><b><tt><big>PeName</big> </tt></b></big>-        Comment line for the full name of this Process Simulator definition </dt>      <dd> This string (up to 70 characters) should be entered by the user for        identification of this Process record and the simulation task, best        during creation or remake.&nbsp;It will appear on the plot and in the        text printouts.</dd>      <dd>&nbsp;<br>      </dd>      <dt> <a name="PeNote"></a><big><b><big><tt>PeNote</tt></big></b></big> -        Comment line for optional enhancement of the <span style="font-family: monospace;">PeName</span>        line&nbsp;</dt>      <dd>&nbsp;&nbsp;&nbsp; &nbsp; This string (up to 70 characters) can also        be entered to enhance identification of the process simulator.<br>      </dd>      <dd><br>      </dd>      <dt> <a name="P_expr"></a><big><big style="font-weight: bold;"><tt>P_expr</tt></big></big><b><big><tt>            </tt></big></b>- Process simulation control script</dt>      <dd>Equations (operators) in this <a href="g_mscript.html">math script</a>        text are supposed to alter certain input data fields (seen in "System"        window pages) for calculation of a sequence of equilibrium states. Some        additional restrictions may apply depending on the process type. The        equations are recalculated at every step (point, iteration, <span style="font-family: monospace;">"J"</span>        index) of the process simulation. If the math script contains a        conditional expression which sets the <span style="font-family: monospace;">"Next"</span>        variable to 0 then the process simulation will be finished when <span style="font-family: monospace;">Next</span>        becomes equal to 0, otherwise it will stop when a prescribed maximum        number of iterations (or the upper limit in any of the process iterators        <span style="font-family: monospace;">"iTm",</span> ...) is reached. </dd>      <dd> To save the user's time, the Process (remake) Wizard can        automatically generate various control scripts that can be immediately        executed (and can be edited/ improved here, when needed). Alternatively,        to facilitate writing of scripts, a template math script library is        provided (see <a href="#PROCESS_SIM_MATH_SCRIPT">"Writing Process          Simulation Math Scripts"</a> chapter).</dd>      <dd> <br>      </dd>    </dl>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_DATA_ITERATORS"></a>5.1 Input Process Iterators</h3>    <p> Many variants of the process simulation can be set up using one or more      of column vectors ("iterators")&nbsp; <tt>"iTm", "iV", "iP", "iTC",        "iNv", "iTau", "ipXi", "iNu", "ipH", "ipe"</tt>. &nbsp;See more about      that in <a href="#PROCESS_SIM_ITERATORS">"Setting up the Process        iterators"</a> chapter.</p>    <dl>      <dt> <a name="iTm_0"></a><b><big><tt><big>iTm[0]</big> </tt></big></b>-&nbsp;
SysEq
        VarCSD number: start value </dt>      <dd>This iterator defines values in the VarCSD field of newly generated <a          href="gems_rekey.html#DBM_SysEq">SysEq
          record keys</a> to store process simulation results. Recommended        values are 100 &nbsp;(200, 300, ...) or 1000 (2000, 3000, ...).<br>        <span style="color: rgb(204, 0, 0);">Important! </span>Always check and        edit this iterator before running the new process simulation, to prevent        accidental overwriting of previously calculated and saved SysEq records        in the project database. </dd>      <dd>New SysEq record keys are generated using VarCSD numbers from the        current <span style="font-family: monospace;">"cTm"</span> cell, which        is automatically changed by the program as: <span style="font-family: monospace;">cTm
          =: iTm[0] + J * iTm[2]; </span>if not overridden by the<span style="font-family: monospace;">          P_expr </span>math script.<span style="font-family: monospace;">&nbsp;</span>      </dd>      <dd> <br>      </dd>      <dt><a name="iTm_1"></a><b><big><tt><big>iTm[1]</big> </tt></big></b>-        SysEq VarCSD number: end value</dt>      <dd>This integer value defines the end point of the process simulation,        which continues as long as <span style="font-family: monospace;">cTm          &lt;= iTm[1]</span> <span style="font-family: monospace;">and J &lt;          Ntxi[1].</span>&nbsp;&nbsp; <br>      </dd>      <dd>If <span style="font-family: monospace;">&nbsp;iTm[1] &lt; iTm[0] </span>then<span          style="font-family: monospace;">          iTm[2] </span>must be negative (decreasing order of VarCSD        numbering).&nbsp; &nbsp;</dd>      <dd><br>      </dd>      <dt>&nbsp;<a name="iTm_2"></a><b><big><tt><big>iTm[2]</big> </tt></big></b>-        SysEq VarCSD number: step value</dt>      <dd>This integer value defines how the system VarCSD number is incremented        (can also be negative). Minimum absolute value is 1, recommended values        are between 2 and 10 - this allows to insert some additional SysEq        records into the process-generated sequence later on.<br>        &nbsp; </dd>      <dt><a name="cTm"></a><b><big><tt><big>cTm</big> </tt></big></b>- Current        SysEq VarCSD variant number </dt>      <dd>Current CSD variant number for <a href="gems_rekey.html#DBM_SysEq">SysEq
          record key</a> to be generated on <span style="font-family: monospace;">J</span>-th
        process iteration. Incremented automatically according to the values        provided in the <span style="font-family: monospace;">"<a href="#iTm_0">iTm</a>"</span>        iterator; can also be set in the <span style="font-family: monospace;">P_expr</span>        math script.</dd>      <dd>&nbsp; </dd>      <dt><b><big><tt><a name="iV_0"></a><big>iV[0]</big> </tt></big></b>-<b><i>          </i></b>SysEq Volume constraint (dm3): start value </dt>      <dd> &nbsp; &nbsp; &nbsp;Default value of this <a href="gems_rekey.html#DBM_SysEq">SysEq
          record key</a> field for GEM calculations is 0 (unconstrained volume),        except rare special cases.&nbsp; </dd>      <dd><br>      </dd>      <dt><a name="iV_1"></a><b><big><tt><big>iV[1]</big> </tt></big></b>-        SysEq Volume constraint: &nbsp;end value</dt>      <dd>&nbsp; It is recommended to leave this real number at the default        value (0).<br>        &nbsp;<br>      </dd>      <dt> <a name="iV_2"></a><b><big><tt><big>iV[2]</big> </tt></big></b>-        SysEq Volume constraint: increment</dt>      <dd> &nbsp; It is recommended to leave this increment at the default value        (0). <br>      </dd>      <dd> &nbsp;<br>      </dd>      <dt><a name="cV"></a><b><big><tt><big>cV</big> </tt></big></b>- Current        SysEq Volume constraint (default 0). </dt>      <dd> &nbsp; In most cases, must be 0 (unconstrained volume).</dd>      <dd>&nbsp;<br>      </dd>      <dt><a name="iP_0"></a><b><big><tt><big>iP[0]</big> </tt></big></b>-        Pressure of interest P, bar: start (real) value </dt>      <dd> &nbsp;This iterator defines how the system pressure will be specified        in <a href="gems_rekey.html#DBM_SysEq">SysEq record keys</a> generated        by the process simulator. Ambient pressure is 1 bar (default). Pressure        set to 0 means Psat(H<sub>2</sub>O) - saturated water vapor pressure -        and will be actually calculated from temperature.&nbsp; <br>      </dd>      <dd>If you wish to keep the pressure P constant then set &nbsp;<span style="font-family: monospace;">iP[0]
          =</span> P; <span style="font-family: monospace;">iP[1] =</span> P;<span          style="font-family: monospace;">          iP[2] =</span> 0. </dd>      <dd> At the beginning of process simulation, <span style="font-family: monospace;">cP</span>        is automatically set equal to <span style="font-family: monospace;">iP[0]</span>.<br>        &nbsp; <br>      </dd>      <dt> <a name="iP_1"></a><b><big><tt><big>iP[1]</big> </tt></big></b>-        &nbsp;Pressure of interest&nbsp; P, bar: end value</dt>      <dd> &nbsp; This real value (default 1 bar) defines the end point of the        process simulation, which continues as long as <span style="font-family: monospace;">cP
          &lt;= iP[1]</span> <span style="font-family: monospace;">and J &lt;          Ntxi[1].</span>&nbsp;&nbsp; <br>      </dd>      <dd>If <span style="font-family: monospace;">&nbsp;iP[1] &lt; iP[0] </span>then<span          style="font-family: monospace;">          iP[2] </span>must be negative (decreasing pressure in the process        simulation). <br>      </dd>      <dd> <br>      </dd>      <dt> <a name="iP_2"></a><b><big><tt><big>iP[2]</big> </tt></big></b>-        Pressure of interest P, bar: step value</dt>      <dd>&nbsp; This real value defines how pressure will be (linearly)        incremented in the process simulation. Default is 0 (constant pressure);        otherwise the program will change the &nbsp;<span style="font-family: monospace;">cP</span>        &nbsp;cell according to a given non-zero value.</dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="cP"></a><b><big><tt><big>cP</big> </tt></big></b>- Current        Pressure of interest P (bar). </dt>      <dd> Current pressure P to set in a <span style="font-family: monospace;">J</span>-th
        generated SysEq record key. Automatic Initialization: <span style="font-family: monospace;">cP
          =: iP[0]</span>. Can be incremented in the control&nbsp; <span style="font-family: monospace;"><a            href="#P_expr">P_expr</a>        </span>math script expressions; if not changed in script and <span style="font-family: monospace;">iP[2]
          &lt;&gt; 0</span> then automatically <span style="font-family: monospace;">cP
          = ip[0] + J*iP[2]</span> . </dd>      <dd><br>      </dd>      <dt><a name="iTC_0"></a><b><big><tt><big>iTC[0]</big> </tt></big></b>-&nbsp;
Temperature
        of interest TC, centigrade: start value </dt>      <dd>&nbsp;This real value (default 25 C, ambient temperature) defines how        the system temperature will be specified in <a href="gems_rekey.html#DBM_SysEq">SysEq
          record keys</a> generated by the process simulator.</dd>      <dd>If you wish to keep temperature (TC) constant then set <span style="font-family: monospace;">iTC[0]
          =: </span>TC; <span style="font-family: monospace;">iTC[1] =:</span>        TC; <span style="font-family: monospace;">iTC[2] =:</span> 0.</dd>      <dd><br>      </dd>      <dt> <a name="iTC_1"></a><b><big><tt><big>iTC[1]</big> </tt></big></b>-        Temperature of interest TC, centigrade: end value&nbsp;</dt>      <dd> &nbsp; This real value (default 25 C) defines the end point of the        process simulation, which continues as long as <span style="font-family: monospace;">cTC
          &lt;= iTC[1]</span> <span style="font-family: monospace;">and J &lt;          Ntxi[1].</span>&nbsp; &nbsp;<br>        &nbsp; <br>      </dd>      <dd>If <span style="font-family: monospace;">&nbsp;iTC[1] &lt; iTC[0] </span>then<span          style="font-family: monospace;">          iTC[2] </span>must be negative (decreasing pressure in the process        simulation).</dd>      <dd>&nbsp;&nbsp;</dd>      <dt> <a name="iTC_2"></a><b><big><tt><big>iTC[2]</big> </tt></big></b>-        Temperature of interest TC, centigrade: step value</dt>      <dd>This real value defines how temperature will be (linearly) incremented        in the process simulation. Default is 0 (constant temperature);        otherwise the program will change the &nbsp;<span style="font-family: monospace;">cTC</span>        &nbsp;cell according to a given non-zero value.</dd>      <dd>&nbsp;</dd>      <dt><a name="cTC"></a><b><big><tt><big>cTC</big> </tt></big></b>- Current        temperature of interest TC &nbsp;(centigrade)<br>      </dt>      <dd>&nbsp; Current temperature cTC to set in a <span style="font-family: monospace;">J</span>-th
        generated SysEq record key. Automatic initialization: <span style="font-family: monospace;">cTC
          =: iTC[0]</span>. &nbsp;Can be incremented in the <a href="#P_expr"><span            style="font-family: monospace;">P_expr</span></a>        math script expressions; if not and<span style="font-family: monospace;">          iTC[2] &lt;&gt; 0</span> then automatically <span style="font-family: monospace;">cTC
          = iTC[0] + J*iTC[2]</span>.</dd>      <dd>&nbsp;&nbsp;&nbsp; <br>      </dd>      <a name="cT"></a><b><big><tt><big>cT</big> </tt></big></b>- Current      temperature of interest T (Kelvin)<br>      <dd>This work cell is automatically calculated as &nbsp;<span style="font-family: monospace;">cT
          =: cTC + 273.15 </span>&nbsp;at each process simulation step in order        to facilitate writing of <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        data sampling math scripts.</dd>      <dd>&nbsp;<br>      </dd>      <dt><b><big><tt><a name="iNv_0"></a><big>iNv[0]</big> </tt></big></b>-        SysEq VarCon number: start value </dt>      <dd> &nbsp; &nbsp;This iterator defines integer values in the VarTD field        of newly generated <a href="gdb_rkey.html#dbm_SysEq">SysEq record keys</a>        to store process simulation results. Default value is 0. Recommended        values are 10 &nbsp;(20, 30, ...) or 100 (200, 300, ...).</dd>      <dd>Important! Always check and edit this iterator before running the new        process simulation, to prevent accidental overwriting of previously        calculated SysEq records.&nbsp; <br>      </dd>      <dd>New SysEq record keys are generated using TD variant numbers from the        current <span style="font-family: monospace;">"cNv"</span> cell, which        is automatically changed by the program as: <span style="font-family: monospace;">cNv
          =: iNv[0] + J * iNv[2], </span>if not overridden by the<span style="font-family: monospace;">          P_expr </span>math script.<br>        <span style="font-family: monospace;"></span></dd>      <dd> &nbsp; <br>      </dd>      <dt> <a name="iNv_1"></a><big><b><tt><big>iNv[1]</big> </tt></b></big>-        SysEq VarCon number: end value</dt>      <dd> &nbsp; This integer value defines the end point of the process        simulation, which continues as long as <span style="font-family: monospace;">cNv
          &lt;= iNv[1]</span> <span style="font-family: monospace;">and J &lt;          Ntxi[1].</span>&nbsp; &nbsp;<br>        &nbsp; <br>      </dd>      <dd>If <span style="font-family: monospace;">&nbsp;iNv[1] &lt; iNv[0] </span>then<span          style="font-family: monospace;">          iNv[2] </span>must be negative (decreasing order of TD variant        numbering).&nbsp; &nbsp;</dd>      <dd>&nbsp;&nbsp;</dd>      <dt> <a name="iNv_2"></a><b><big><tt><big>iNv[2]</big> </tt></big></b>-        SysEq VarCon number: step value</dt>      <dd> &nbsp; This integer value defines how the system TD variant number is        incremented (can also be negative). Usually 0 is set (TD variant number        does not change). In the case if the <span style="font-family: monospace;">P_expr</span>        script changes some kinetic constraints or <span style="font-family: monospace;">gEx</span>        increments to input thermodynamic data,&nbsp; the recommended values are        between 1 and 10.</dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="cNV"></a><b><big><tt><big>cNV</big> </tt></big></b>- Current        SysEq VarCon number </dt>      <dd> Current VarTD number for <a href="gdb_rkey.html#dbm_SysEq">SysEq          record key</a> to be generated on <span style="font-family: monospace;">J</span>-th
        process iteration. Incremented automatically according to the values        provided in the <span style="font-family: monospace;">"<a href="gm_proces.html#iNv_0">iNv</a>"</span>        iterator; can also be set in the <span style="font-family: monospace;">P_expr</span>        math script.<br>        &nbsp;<br>      </dd>      <dt><a name="iTau_0"></a><b><big><tt><big>iTau[0]</big> </tt></big></b>&nbsp;-
Real
        time (tau), arbitrary units: start value </dt>      <dd> This iterator can be optionally used in simulations of        kinetically-dependent mass transfer processes that depend on the real        time. Usually, such processes (e.g. mineral dissolution) also depend on        the output GEM parameters such as pH, ion activities, etc. The <span style="font-family: monospace;">"<a            href="#P_expr">P_expr</a>"</span>        math script in such cases must define the mole quantity of a        kinetically-retarded species as a function of time, pH, ... and use this        quantity for setting the upper- (<a href="gems_bcc.html#dul_"><span style="font-family: monospace;">dul_</span></a>),
        the lower (<a href="gems_bcc.html#dll_"><span style="font-family: monospace;">dll_</span></a>)        or both metastability restrictions (seen on the DComp page of the        "System" window).&nbsp; The "iTau" iterator defines a linear (or        logarithmic, depending on how the math script is written) sequence of        time points at which the partial equilibrium states must be        calculated.&nbsp; <br>      </dd>      <dd>Default value is 0.&nbsp;&nbsp; &nbsp; </dd>      <dd>&nbsp; <br>      </dd>      <dt> <a name="iTau_1"></a><b><big><tt><big>iTau[1]</big> </tt></big></b>-        Real time (tau): end value</dt>      <dd> &nbsp; This real value defines the end time point of        kinteically-dependent simulation. Default value is 0.&nbsp;</dd>      <dd>The simulation continues as long as <span style="font-family: monospace;">cTau
          &lt;= iTau[1]</span> <span style="font-family: monospace;">and J &lt;          Ntxi[1].</span></dd>      <dd>&nbsp;<br>      </dd>      <dt> <a name="iTau_2"></a><b><big><tt><big>iTau[2]</big> </tt></big></b>-        Real time (tau): step value</dt>      <dd> &nbsp; This positive real value defines how the real time is        incremented in the kinetically-dependent simulation. Default value is 0.</dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="cTau"></a><b><big><tt><big>cTau</big> </tt></big></b>-        Current real time (tau) </dt>      <dd> This cell contains a current real time value during        kinetically-dependent simulations. Automatic initialization: <span style="font-family: monospace;">cTau
          =: iTau[0]</span>. The cell content can also be set in the <span style="font-family: monospace;">"<a            href="#P_expr">P_expr</a>"</span>        math script operators. If not, the program will set&nbsp; <span style="font-family: monospace;">cTau
          =: iTau[0] + J*iTau[2]</span> on a <span style="font-family: monospace;">J</span>-th
        step. If time is considered in logarithmic scale then an expression <span          style="font-family: monospace;">"10^cTau"</span>        must be used as a time variable in the process simulation math script        operators. <br>        <br>      </dd>      <dt><a name="ipXi_0"></a><b><big><tt><big>ipXi[0]</big> </tt></big></b>-        Process extent parameter pXi = -log(Xi): start value </dt>      <dd>&nbsp;&nbsp; This iterator can be used for automatic calculation of        the "reaction-extent" ("process-extent") parameter <span style="font-family: monospace;">cpXi</span>        = -log(Xi), if the latter is not calculated in the <span style="font-family: monospace;">"<a            href="#P_expr">P_expr</a>"</span>        control script. The <span style="font-family: monospace;">ipXi</span>        cells can also be used as work cells in arbitrary math scripts.        &nbsp;Default value is 0.&nbsp; </dd>      <dd><span style="font-weight: bold;">&nbsp; </span><span style="font-weight: bold; text-decoration: underline;"><br>          Attention:</span> In the case of an <a href="glossary.html#DT_titration_inverse">inverse
          titration</a> sequence (the <a href="#PePsts_11"><span style="font-family: monospace;">PePsts[11]</span></a>        flag set to <span style="font-family: monospace;">'+'</span>), this        iterator must contain the interval of minimum-maximum values and minimal        addition of the titrant (see also the <a href="#INV_TITR_SEQ">"Inverse          titration sequence" section</a>). </dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="ipXi_1"></a><b><big><tt><big>ipXi[1]</big> </tt></big></b>-        Process extent parameter pXi: end value</dt>      <dd>&nbsp; This real value defines the end "reaction-extent" point of the        process simulation (if not specified otherwise in the <span style="font-family: monospace;">P_expr</span>        math script). <br>      </dd>      <dd>Default value is 0. <br>      </dd>      <dd><span style="font-weight: bold; text-decoration: underline;">Attention:</span>        In the case of an inverse titration sequence (the <a href="gm_proces.html#PePsts_11"><span            style="font-family: monospace;">PePsts[11]</span></a>        flag set to <span style="font-family: monospace;">'+'</span>), this        cell must contain the maximum possible addition of titrant.&nbsp;</dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="ipXi_2"></a><b><big><tt><big>ipXi[2]</big> </tt></big></b>-        Process extent parameter pXi: step value</dt>      <dd> &nbsp; This real value contains a (logarithmic) step of the        "reaction-extent" variable pXi. Default value is 0. <br>        &nbsp; <br>        <span style="font-weight: bold; text-decoration: underline;">Attention:</span>        In the case of an inverse titration sequence, this cell must contain the        minimal addition of the titrant (usually 1e-10 mol).&nbsp; <br>        &nbsp; <br>      </dd>      <dt><a name="cpXi"></a><b><big><tt><big>cpXi</big> </tt></big></b>-        Current pXi = -log(Xi), where Xi stands for a logarithmic "reaction        extent" variable</dt>      <dd>&nbsp;This cell is automatically initialized as <span style="font-family: monospace;">cpXi
          =: ipXi[0]</span> when<span style="font-family: monospace;"> J </span>=        0. <br>      </dd>      <dd>If not set in <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        math script operators, the <span style="font-family: monospace;">cpXi </span>cell
        is incremented automatically as&nbsp; <span style="font-family: monospace;">cpXi
          =: ipXi[0] + J*ipXi[2]</span>. <br>        &nbsp; <br>      </dd>      <dt><a name="cXi"></a><b><big><tt><big>cXi</big> </tt></big></b>- Current        Xi = 10^(-cpXi) - the "reaction extent" variable</dt>      <dd>&nbsp;This work cell can be used in the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        or <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        math scripts; usually assigned as <span style="font-family: monospace;">cXi
          =: 10^-cpXi</span>. <br>      </dd>      <dd>&nbsp; <br>        &nbsp; <br>      </dd>      <dt><a name="iNu_0"></a><b><big><tt><big>iNu[0]</big> </tt></big></b>-        Factor of the process extent Nu: start value </dt>      <dd>&nbsp;This iterator can define changes in the "process extent factor"        cXi = cNu * 10^(-cpXi) (has to be written explicitly in the P_expr        control script). <br>      </dd>      <dd>Default value is 0.&nbsp;&nbsp;</dd>      <dd>&nbsp;<br>      </dd>      <dt><a name="iNu_1"></a><big><b><big><tt>iNu[1]</tt></big></b></big> -        Factor of the process extent Nu: end value</dt>      <dd>&nbsp; This real value may set up an upper boundary of the "process        extent" factor cNu. &nbsp;Default value is 0.&nbsp;</dd>      <dd><span style="font-weight: bold; text-decoration: underline;">Attention:</span>        If an <a href="#INV_TITR_SEQ">inverse titration sequence </a>(<a href="#PePsts_11"><span            style="font-family: monospace;">PePsts[11]</span></a>        set to <span style="font-family: monospace;">'+'</span>) is specified        then <span style="font-family: monospace;">iNu[1]</span> must contain        the precision of the parametric deviation function (for pH, usually        0.01).</dd>      <dd><br>      </dd>      <dt><a name="iNu_2"></a><b><big><tt><big>iNu[2]</big> </tt></big></b>-        Factor of the process extent Nu: step value &nbsp;</dt>      <dd>&nbsp; This real value defines a step size for a increment of the        "process extent" factor cNu. Default value is 0.<br>        &nbsp; <br>      </dd>      <dt><a name="cNu"></a><b><big><tt><big>cNu</big> </tt></big></b>- Current        Nu - the process extent factor </dt>      <dd>&nbsp; This work cell is automatically initialized as <span style="font-family: monospace;">cNu
          =: iNu[0]</span>. If not assigned in the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        control script, <span style="font-family: monospace;">cNu</span> will        be automatically incremented as <span style="font-family: monospace;">cNu
          =: iNu[0] + iNu[2]</span>. <br>        &nbsp; <br>        <span style="font-weight: bold; text-decoration: underline; color: rgb(204, 0, 0);">Attention:</span>        If an<a href="#INV_TITR_SEQ"> inverse titration sequence</a> is        performed then the <span style="font-family: monospace;">cNu</span>        cell must be explicitly assigned with the current value of the deviation        function on iterations of the built-in "golden section" procedure.        Example: <span style="font-family: monospace;">cNu =: cpH - pH;</span>        in the <span style="font-family: monospace;">P_expr</span> math script.</dd>      <dd>&nbsp; &nbsp; <br>      </dd>      <dt><a name="ipH_0"></a><b><big><tt><big>ipH[0]</big> </tt></big></b>-        Prescribed pH sequence (for inverse titrations): start value </dt>      <dd>&nbsp; This iterator can be used for generating a sequence of        equilibria that produce pre-defined values pH (or another output        parameter of equilibrium state) by solving a <a href="#INV_TITR_SEQ">sequence
          of GEM inverse titration problems</a>. <br>      </dd>      <dd>In cases of forward modelling, these cells can be used as work        variables in <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        or <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        math scripts. Default value is 0.&nbsp;&nbsp;</dd>      <dd> <br>      </dd>      <dt><a name="ipH_1"></a><b><big><tt><big>ipH[1]</big> </tt></big></b>-        &nbsp;Prescribed pH sequence: end value</dt>      <dd> &nbsp; This real value sets the upper limit to pH (or another        parameter) sequence. Default value is 0.&nbsp;</dd>      <dd> &nbsp;<br>      </dd>      <dt> <a name="ipH_2"></a><tt><big><b><big>ipH[2]</big></b></big> </tt>-        Prescribed pH sequence: step size</dt>      <dd> &nbsp; This real value defines a step size for incrementing pH        (usually in a sequence of inverse titrations). Default is 0. Recommended        step sizes for pH are 0.1; 0.2; 0.5, depending on the pH interval.</dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="cpH"></a><b><big><tt><big>cpH</big> </tt></big></b>- Current        pH at J-th inverse titration point </dt>      <dd>&nbsp;&nbsp; This work cell is automatically initialized as&nbsp; <span          style="font-family: monospace;">cpH
          =: ipH[0]</span>. If not written in the <span style="font-family: monospace;">P_expr</span>        math script, the <span style="font-family: monospace;">cpH</span> value        is automatically incremented as&nbsp; <span style="font-family: monospace;">cpH
          =: ipH[0] + J*ipH[2]</span>. See also a section about the<a href="#INV_TITR_SEQ">          inverse titration sequence</a>. <br>      </dd>      <dd>&nbsp; </dd>      <dt><a name="ipe_0"></a><b><big><tt><big>ipe[0]</big> </tt></big></b>-        Prescribed pe values for the inverse titration sequence: start value </dt>      <dd>This iterator can be used for generating a sequence of equilibria that        produce pre-defined values of pe (or another output parameter of        equilibrium state) by solving a <a href="gm_proces.html#INV_TITR_SEQ">sequence
          of GEM inverse titration problems</a>. <br>      </dd>      <dd>In cases of forward modelling, these cells can be used as work        variables in <a href="gm_proces.html#P_expr"><span style="font-family: monospace;">P_expr</span></a>        or <a href="gm_proces.html#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        math scripts. Default value is 0.</dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="ipe_1"></a><b><big><tt><big>ipe[1]</big> </tt></big></b>-        &nbsp;Prescribed pe values: end value </dt>      <dd>&nbsp;This real value sets the upper limit to pe sequence. Default        value is 0.&nbsp;</dd>      <dd> &nbsp;</dd>      <dt> <a name="ipe_2"></a><b><big><tt><big>ipe[2]</big> </tt></big></b>-        Prescribed pe sequence: step size</dt>      <dd>This real value defines a step size for incrementing pe (in a sequence        of inverse titrations). <br>      </dd>      <dd>Default value is 0. Recommended step sizes for pe are 0.5 or 1.0,        depending on the total pe interval. </dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="cpe"></a><b><big><tt><big>cpe</big> </tt></big></b>- Current        pe at J-th inverse titration point&nbsp; </dt>      <dd>This work cell is automatically initialized as&nbsp; <span style="font-family: monospace;">cpe
          =: ipe[0]</span>. If not written in the <span style="font-family: monospace;">P_expr</span>        math script, the <span style="font-family: monospace;">cpe</span> value        is automatically incremented as&nbsp; <span style="font-family: monospace;">cpe
          =: ipe[0] + J*ipe[2]</span>. <br>      </dd>      <dd>In the&nbsp;<a href="file:///E:/gems2html/program/doc/html/gm_proces.html#INV_TITR_SEQ">          inverse titration sequence</a> math script, the operator &nbsp;<span style="font-family: monospace;">cNu
          =: cpH - pH;</span> must be replaced by <span style="font-family: monospace;">cNu
          =: cpe - pe;</span>. &nbsp; </dd>      <dd> <br>      </dd>      <dt><a name="cEh"></a><b><big><tt><big>cEh</big> </tt></big></b>- Current        Eh value </dt>      <dd>&nbsp;This work cell, analogous to <a href="#cpH"><span style="font-family: monospace;">cpH</span></a>,        can contain the current prescribed value of Eh (in V), if assigned in        the process control or sampling script. &nbsp; <br>        <span style="font-weight: bold; text-decoration: underline;">Attention:</span>        During calculation of <a href="#INV_TITR_SEQ">inverse titration          sequences</a>, this cell holds the current amount of titrant set by        the built-in "golden section" algorithm.<br>        &nbsp; <br>      </dd>      <dt><a name="NeIt_0"></a><big><b><big><tt>NeIt[0]</tt></big></b></big> -        Max. number of iterations allowed (<span style="font-family: monospace;">&gt;=
          Ntxi[1]</span>; for inverse titrations, <span style="font-family: monospace;">&gt;
          Ntxi[1]*15</span>)</dt>      <dd>This counter is necessary to prevent infinite cycling in case of        incorrect specification of controlling parameters. <br>      </dd>      <dd>Default value is 9999. The process simulation will stop with a warning        message when the <span style="font-family: monospace;">NeIt[0]</span>        limit is reached.<br>        &nbsp; <br>      </dd>      <dt><a name="NeIt_1"></a><big><b><big><tt>NeIt[1]</tt></big></b></big> -        Number of completed main steps in the process simulation </dt>      <dd>This field contains the number of completed main iterations of the        process simulator, which is equal to the current index of processed        SysEq record key and the <span style="font-family: monospace;">J</span>        index used in math scripts&nbsp; (<span style="font-family: monospace;">          J =: NeIt[1]</span> ).<br>        &nbsp; <br>      </dd>      <dt><a name="Next"></a><b><big><tt><big>Next</big> </tt></big></b>- A        flag to continue (1) or finish (0) main process simulation steps</dt>      <dd>This flag is automatically set to 1 at the start of the process        simulation and to 0 when a maximum number of allowed iterations has been        achieved, or one of iterator's limits reached. Simulation will also stop        if <span style="font-family: monospace;">Next</span> is set to 0 in any        of the math script expressions.<br>        &nbsp; <br>      </dd>      <dt><a name="I"></a><b><big><tt><big>I</big> </tt></big></b>- Internal        index in an inverse titration sequence step </dt>      <dd>This index controls iterations of the "golden section" procedure in a        sequence of inverse titration problems. <br>      </dd>      <dd>In a single inverse titration, it must be incremented in the math        script text. <br>      </dd>      <dd>In other cases, the <span style="font-family: monospace;">I</span>        cell can be used as a work variable. <br>        &nbsp; </dd>      <dt> <a name="J"></a><b><big><tt><big>J</big> </tt></big></b>-        &nbsp;Process simulation main step index</dt>      <dd>This&nbsp; index is automatically incremented (from 0 to <tt><a href="#Ntxi_1">Ntxi[1]</a>-1</tt>)        when the next process simulation point is to be performed. <br>      </dd>      <dd>This index is automatically changed by the program. <br>      </dd>      <dd>You can use it in math scripts, but you should not modify the&nbsp; <span          style="font-family: monospace;">J</span>        value, as it may cause an unpredictable behavior of the process        simulator.<br>        &nbsp; <br>      </dd>      <dt><a name="cnrk"></a><big><b><big><tt>Jp</tt></big></b></big> - Current        index of the processed SysEq in the record key list</dt>      <dd>This index is incremented automatically (usually in parallel with the        <span style="font-family: monospace;">J</span> index). Can be used on        the right side of math script operators.&nbsp; <br>      </dd>      <dd> <br>      </dd>    </dl>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_DATA_OPTIONAL"></a>5.2. Optional Data Vectors</h3>    <p> &nbsp;These optional dynamic data objects are not used by default, but      any of them can be allocated (using the respective flag) during creation      or remake of the Process record. The first three objects are used      commonly, other can help for debugging- or data sampling purposes.&nbsp; </p>    <dl>      <dt> <a name="PSDref"></a><big><b><big><tt>PSDref</tt></big></b></big>        -&nbsp;List of SDref keys to data sources</dt>      <dd>&nbsp; This list can contain one or more <a href="gdb_rkey.html#dbm_SDref">SDref
          record keys</a> (in packed format) referencing to bibliography or your        comments to this process simulator definition. Allocated if the&nbsp; <span          style="font-family: monospace;">PeDim1[4]&nbsp;</span>        counter is set to a positive number upon remake or create. &nbsp;</dd>      <dd> &nbsp;</dd>      <dt> <a name="PSDval"></a><big><b><big><tt>PSDval</tt></big></b></big> -        List of short comments to SDref &nbsp;keys in the PSDref list. </dt>      <dd>&nbsp; This list of comments is allocated if the <span style="font-family: monospace;">PeDim1[4]</span>        counter is set to a positive number of lines in the <a href="#PSDref"><span            style="font-family: monospace;">PSDref</span></a>        list.&nbsp;</dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="modC"></a><big><b><big><tt>modC</tt></big></b></big> - Array        of the process simulation parameters </dt>      <dd>This optional vector or matrix can contain data used in specification        of the process simulation model by the control script expressions. <br>      </dd>      <dd>Each row in this array corresponds to one step in the main process        simulation sequence (indexed by a <a href="#J"><span style="font-family: monospace;">J</span></a>        index). <br>        In the<a href="#P_expr"><span style="font-family: monospace;"> P_expr</span></a>        or <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        script, refer to this array as <span style="font-family: monospace;">modC[J][0]</span><span          style="font-family: monospace;">,          modC[J][1], ... </span>depending on how many columns were specified        in the <span style="font-family: monospace;"><a href="#PeDim1_1">PeDim1[1]</a>        </span>counter. <br>      </dd>      <dd>The&nbsp;<span style="font-family: monospace;"></span>number of rows        is automatically set equal to <span style="font-family: monospace;">Ntxi[1]</span>        on remake. &nbsp; &nbsp; </dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="vTm"></a><b><big><tt>vTm</tt></big></b> - Optional vector to        collect VarCSD ( <a href="#cTm"><span style="font-family: monospace;">cTm</span></a>        ) numbers from main process simulaion steps&nbsp;&nbsp; <br>      </dt>      <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_0"><span style="font-family: monospace;">PePvv[0]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).<br>      </dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the CSD variant number will be stored        automatically as <span style="font-family: monospace;">vTm[J] =: cTm;</span><br>        &nbsp; <br>      </dd>      <dt><a name="vNV"></a><b><tt><big>vNV</big></tt></b> - Optional vector of        VarCon (<a href="#cNV"><span style="font-family: monospace;">cNV</span></a>)        numbers from main process simulation steps </dt>      <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_1"><span style="font-family: monospace;">PePvv[1]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the VarTD number will be stored        automatically as <span style="font-family: monospace;">vNV[J] =: cNV; </span></dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="vP"></a><b><big><tt>vP</tt></big></b> - Optional vector of        Pressure values (<a href="#cP"><span style="font-family: monospace;">cP</span></a>)        from main process simulation steps </dt>      <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_2"><span style="font-family: monospace;">PePvv[2]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the pressure values (in bar) will be stored        automatically as <span style="font-family: monospace;">vP[J] =: cP;</span></dd>      <dd><span style="font-family: monospace;">&nbsp;&nbsp; <br>        </span></dd>      <dt><a name="vV"></a><b><big><tt>vV</tt></big></b> - Optional vector of        Volume constraint (<a href="#cV"><span style="font-family: monospace;">cV</span></a>)        values from main process simulation steps</dt>      <dd> This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_3"><span style="font-family: monospace;">PePvv[3]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the pressure values (in bar) will be stored        automatically as <span style="font-family: monospace;">vV[J] =: cV;</span></dd>      <dd>&nbsp;<br>      </dd>      <dt><a name="vT"></a><b><big><tt>vT</tt></big></b> - Optional vector of        Temperatures (<a href="#cTC"><span style="font-family: monospace;">cTC</span></a>)        from main process simulation steps </dt>      <dd> This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_4"><span style="font-family: monospace;">PePvv[4]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard). </dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the temperature values (in Centigrade) will        be stored automatically as <span style="font-family: monospace;">vT[J]          =: cTC;</span></dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="vTau"></a><b><big><tt>vTau</tt></big></b> - Optional vector        of Tau (physical time, <a href="#cTau"><span style="font-family: monospace;">cTau</span></a>)        values from main process simulation steps </dt>      <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_5"><span style="font-family: monospace;">PePvv[5]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>We recommend always to allocate it if the process simulator involves        kinetic dependencies. <br>      </dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the time values (in bar) will be stored        automatically as <span style="font-family: monospace;">vTau[J] =: cTau;<br>          &nbsp;<br>        </span></dd>      <dt><a name="vpXi"></a><b><big><tt>vpXi</tt></big></b> - Optional vector        of pXi (-log process extent <span style="font-family: monospace;"><a href="#cpXi">cpXi</a>)</span>        values from main process simulation steps </dt>      <dd>This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_6"><span style="font-family: monospace;">PePvv[6]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the time values (in bar) will be stored        automatically as <span style="font-family: monospace;">vpXi[J] =: cpXi;<br>          &nbsp; <br>        </span></dd>      <dt><a name="vNu"></a><b><big><tt>vNu</tt></big></b> - Optional vector of        Nu (process extent factor <a href="#cNu"><span style="font-family: monospace;">cNu</span></a>)        values from main process simulation steps </dt>      <dd> This&nbsp; vector of length <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        is allocated if the <a href="#PePvv_7"><span style="font-family: monospace;">PePvv[7]</span></a>        flag is turned on <span style="font-family: monospace;">"+" </span>(can
        be done on remake in the Process Wizard).</dd>      <dd>If not specified otherwise in the&nbsp; <a href="#P_expr"><span style="font-family: monospace;">P_expr
            </span></a>math script, the time values (in bar) will be stored        automatically as <span style="font-family: monospace;">vNu[J] =: cNu;</span></dd>      <dd> &nbsp; <br>      </dd>      <dt> <a name="vKin"></a><b><big><tt>vKin</tt></big></b> - Optional array        of parameters for kinetic dependencies </dt>      <dd>This work array for kinetic parameters will be created upon remake if        the <a href="#PePvv_8"><span style="font-family: monospace;">PePvv[8]</span></a>        flag is turned on (<span style="font-family: monospace;">'+'</span>) and        &nbsp;<a href="#PeDim1_3"><span style="font-family: monospace;">PeDim1[3]</span></a>        (number of rows) and <a href="#PeDim1_4"><span style="font-family: monospace;">PeDim1[4]
            </span></a>(number of columns) are set to positive numbers. <br>      </dd>      <dd>This data object may be used in <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        and/or <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        math scripts for implementation of advanced kinetically-dependent        process simulators. </dd>      <dd> &nbsp;<br>      </dd>      <dt> <a name="PeStl"></a><big><b><big><tt>PeStl</tt></big></b></big>        -&nbsp;List of generated SysEq record keys</dt>      <dd>&nbsp;This list of process-generated <a href="gems_rekey.html#DBM_SysEq">SysEq
          record keys</a> &nbsp;(in packed format) is automatically created        &nbsp;during &nbsp;process simulations.&nbsp; <br>      </dd>      <dd>The list can help in identifying &nbsp;a particular SysEq record that        &nbsp;has to be examined in detail (e.g. for debugging purposes). <br>      </dd>      <dd>Note that this list contains fictive SysEq record keys if the <a href="#PePsts_4"><span            style="font-family: monospace;">PePsts[4]</span></a>        &nbsp;flag is switched off ('-') and saving of SysEq records to database        is disabled.&nbsp; </dd>      <dd> &nbsp;<br>      </dd>      <dt> <a name="pSTkey"></a><b><big><tt><big>pSTkey</big> -&nbsp;</tt></big></b>        Current SysEq record key</dt>      <dd>This field displays the last processed <a href="gdb_rkey.html#dbm_SysEq">SysEq
          record key</a> generated from the <a href="gdb_rkey.html#dbm_Proces">Process
          record key</a> and current contents of the <span style="font-family: monospace;">&nbsp;<a            href="#cTm">cTm</a>,          <a href="#cV">cV</a>, <a href="#cP">cP</a>,<a href="#cTC">cTC</a>, <a            href="#cNV">cNV</a>        </span>cells. &nbsp; &nbsp; <br>      </dd>      <dd> <br>      </dd>    </dl>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_DATA_SAMPLING"></a>5.3. Data Objects for      Sampling/Plotting of Results&nbsp;</h3>    <p> &nbsp;The data objects listed below appear when the data      sampling/plotting mode is activated during create/remake of the process      simulator by setting the flag &nbsp;<a href="#PePsts_6"><span style="font-family: monospace;">PePsts[6]</span></a>      on (<span style="font-family: monospace;">'+'</span>).&nbsp; </p>    <dl>      <dt><a name="pgExpr"></a><big><b><big><tt>pgExpr</tt></big></b></big> -        Script for sampling of results during the process simulation<br>      </dt>      <dd>Equations in this <a href="g_mscript.html">script</a> text provide        power and flexibility in extracting any input or output numerical data        and perform various calculations before plotting results or exporting        them for use in other programs. Many variants of the sampling script can        be automatically generated in the Process Wizard. To facilitate writing        of data sampling math scripts, a <a href="gmscript.html#MS_LIBRARY">template
          library</a> is also provided (see also <a href="#PROCESS_SAMPL_MATH_SCRIPT">"Writing
          process data sampling math scripts"</a> chapter).<br>        The minimum possible set of <span style="font-family: monospace;">&nbsp;pGexpr</span>&nbsp;
        script expressions for data sampling has the following form: </dd>    </dl>    <dl style="margin-left: 40px;">      <dd><samp><tt>xp[J] =: &lt;expression&gt;;</tt></samp></dd>      <dd><samp><tt>yp[J][0] =: &lt;expression&gt;;</tt></samp></dd>      <dd><samp><tt>. . .</tt></samp></dd>      <dd><samp><tt>yp[J][n] =: &lt;expression&gt;;</tt></samp></dd>    </dl>    <dl>      <dd>here, &nbsp;<span style="font-family: monospace;">n</span> stands for        the last valid index of columns in the data sampling array <a href="#yp"><span            style="font-family: monospace;">yp</span></a>;        &nbsp;<span style="font-family: monospace;">&lt;expression&gt;</span>        must contain some labels of data objects visible on the EqDemo window        pages. Arbitrary expressions for intermediate calculations can also be        specified. Lists of (visible and hidden) data objects that can be used        in Process math scripts are provided in a <a href="mscr_dod.html">separate
          file</a>. <br>        &nbsp; <br>      </dd>      <dt><a name="xp"></a><big><b><big><tt>xp</tt></big></b></big> -&nbsp;        Vector-column of abscissa x</dt>      <dd>This vector-column (of dimension <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>)        will be used as an abscissa (x axis) for plotting the sampled data. <br>      </dd>      <dd>Contents of this vector must be filled out in the&nbsp; <a href="#pgExpr"><span            style="font-family: monospace;">pgExpr</span></a>&nbsp;
        sampling script, to be executed during the process simulation. <br>      </dd>      <dd>The contents can be copy-pasted to another place or program using the        right-click menu. <br>      </dd>      <dd>&nbsp; <br>      </dd>      <dt> <a name="yp"></a><big><big><b><tt>yp</tt></b></big></big> - Data        table of ordinate(s)&nbsp; y</dt>      <dd>Each column of the <span style="font-family: monospace;">yp</span>        sampled data table will be plotted as a separate curve. &nbsp;Number of        columns in the <span style="font-family: monospace;">yp</span> table        can be set in the <a href="#pDimXY_1"><span style="font-family: monospace;">pDimXY[1]</span></a>        counter upon remake/create of the Process record. Number of rows is set        from <a href="#pDimXY_0"><span style="font-family: monospace;">pDimXY[0]</span></a>        counter which, in turn, automatically equals <span style="font-family: monospace;">Ntxi[1]</span>        counter. <br>      </dd>      <dd>Contents of this table must be filled out in the&nbsp; <a href="file:///Users/kulik/Developer/upgrade/GEMS-GUI/Resources/doc/html/gm_proces.html#pgExpr"><span            style="font-family: monospace;">pgExpr</span></a>&nbsp;
        sampling script, to be executed during the process simulation. </dd>      <dd>The contents can be copy-pasted to another place or program using the        right-click menu.&nbsp; <br>        &nbsp; &nbsp;</dd>      <dt><a name="xEp"></a><big><b><big><tt>xEp</tt></big></b></big> -        Vector-column of abscissa for empirical data xE</dt>      <dd> In this vector-column, the user can enter empirical (experimental)        data that will be used as an abscissa for plotting empirical (scattered)        points on the graph. The number of elements in the <span style="font-family: monospace;">xEp</span>        vector can be defined in the <span style="font-family: monospace;"><a href="#pDimEf_0">pDimEf[0]</a>        </span>counter in Process Wizard upon remake/create of the Process        record. </dd>      <dd>&nbsp; <br>      </dd>      <dt><a name="yEp"></a><big><b><big><tt>yEp</tt></big></b></big> -        Vector-column (or table) of ordinate(s) for empirical data yE</dt>      <dd>Here, the user can enter empirical (experimental) data to be used as        ordinate(s) for plotting empirical (scattered) points on the graph. The        number of lines (ordinates) can be defined in the <a href="#pDimEf_1"><span            style="font-family: monospace;">pDimEf[1]</span></a>        counter and that of points - in the <a href="#pDimEf_0"><span style="font-family: monospace;">pDimEf[0]</span></a>        counter in Process Wizard upon remake/create of the Process record.<br>        &nbsp; <br>      </dd>      <dt><a name="pX_Nam"></a><big><b><big><tt>pX_Nam</tt></big></b></big>        -&nbsp; Abscissa name (for the graph)</dt>      <dd>Here, the user should type a short name (up to 8 characters) for the        abscissa axis that will be shown on the graph. Typical examples: <span          style="font-family: monospace;">"pH",
          "log M", "Mol.Fr.%"</span>. Ideally, the abscissa name should include        units of measurement.&nbsp; <br>        &nbsp; <br>      </dd>      <dt><a name="pY_Nam"></a><big><b style="font-weight: bold;"><big><tt>pY_Nam</tt></big></b><span            style="font-weight: bold;">          </span></big>-&nbsp; Ordinate name (for the graph)</dt>      <dd> &nbsp; &nbsp; Here, the user should type a short name (up to 8        characters) for the ordinate axis to be shown on the graph. Typical        examples: <span style="font-family: monospace;">"log M", "Molal", "log          a"</span>. Ideally, the ordinate name should define units of        measurement because names of the plot lines can be given separately in        the <a href="#pLnam"><span style="font-family: monospace;">pLnam</span></a>        list.&nbsp;</dd>      <dd> <br>      </dd>      <dt> <tt><b><big><a name="pLnam"></a><big>pLnam</big>&nbsp;</big></b></tt>        - List of names of curves (columns in the <a href="#yp"><span style="font-family: monospace;">yp</span></a>        array)<b><i> </i></b></dt>      <dd>&nbsp; Here, the user should enter names of columns (plot lines)        corresponding to columns in the <a href="#yp"><span style="font-family: monospace;">yp</span></a>        (sampled data) table. The names must not exceed 8 characters. They will        be displayed on the graph legend together with coloured symbols and plot        lines. From there, you can drag-and-drop the names onto the graph field        (see also the <a href="#PROCESS_PLOT_EXPORT">"Plotting and exporting          results" chapter</a>). <br>      </dd>      <dd>Number of elements in this list is defined in the <a href="#PeDim1_0"><span            style="font-family: monospace;">PeDim1[0]</span></a>        counter.</dd>      <dd>&nbsp;&nbsp; </dd>      <dt> <a name="pLnamE"></a><big><b><big><tt>pLnamE</tt></big></b></big>        -&nbsp; List of names of columns in the <a href="#yEp"><span style="font-family: monospace;">yEp</span></a>        array of empirical data</dt>      <dd>&nbsp; Enter here the name(s) of column(s) in the yEp array of        empirical data. Similar to names in the pLnam list, these will also be        displayed on the graph legend. Number of elements in this list is        defined in the <a href="#pDimEf_1"><span style="font-family: monospace;">pDimEf[1]</span></a>        counter.&nbsp;</dd>      <dd> &nbsp;</dd>    </dl>    <hr style="width: 100%; height: 2px;">    <h3><a name="PROCES_DATA_CONFIG"></a>5.4. Data fields that can be changed      only through create/remake Process Wizard</h3>    <dl>      <dt><a name="pDimXY_0"></a><b><big><tt><big>pDimXY[0]</big> -</tt></big></b><big><tt>          </tt></big>Number of rows in xp, yp arrays (simulated points to be        sampled)</dt>      <dd>&nbsp; This counter contains the number of rows for allocation of the        <a href="#xp"><span style="font-family: monospace;">xp</span></a> and <a          href="#yp"><span            style="font-family: monospace;">yp</span></a>        arrays. Usually, there is no need to set it during creation of a new        Process record: the number will be automatically copied from the <a href="#Ntxi_1"><span            style="font-family: monospace;">Ntxi[1]</span></a>        counter. &nbsp;However, it is good to check this counter upon remake        because it must be that <span style="font-family: monospace;">pDimXY[0]          &gt;= Ntxi[1]</span>.&nbsp; <br>      </dd>      <dd> &nbsp;<br>      </dd>      <dt> <a name="pDimXY_1"></a><big><b><big><tt>pDimXY[1]</tt></big></b></big><b><i>          </i></b>- Number of columns in the yp table (plot lines)</dt>      <dd>&nbsp; If the data sampling/plotting mode of process simulation is        activated (flag <span style="font-family: monospace;"><a href="#PePsts_6">PePsts[6]</a>          = '+'</span>) then the user must enter here the number of columns in        the <a href="#yp"><span style="font-family: monospace;">yp</span></a>        table (or plot lines to be shown on the graph). Recommended number of        lines lies between 1 and 3. <br>      </dd>      <dd>If you need to sample/plot more output parameters then better create        one or more <a href="gm_gtdemo.html">GtDemo data samplers</a> connected        to this process simulation.&nbsp;</dd>      <dd> <br>      </dd>      <dt> <a name="pDimEf_0"></a><big><b><big><tt>pDimEf[0]</tt></big></b></big>        - Number of points&nbsp;of input empirical data (rows in <a href="#xEp"><span            style="font-family: monospace;">xEp</span></a>        and <a href="#yEp"><span style="font-family: monospace;">yEp</span></a>        arrays).&nbsp;</dt>      <dd> &nbsp; This is the number of empirical data points to be shown as        scattered symbols on the graph together with the simulated lines.&nbsp;        <br>      </dd>      <dd> <br>      </dd>      <dt> <a name="pDimEf_1"></a><big><b><big><tt>pDimEf[1]</tt></big></b></big>        - Number of parameters in the input empirical data (columns in the <a href="#yEp"><span            style="font-family: monospace;">yEp</span></a>        array).</dt>      <dd> &nbsp;This is the number of empirical parameters to be shown as        different scattered symbols on the graph together with the simulated        lines. <br>      </dd>      <dd>In most cases, this number is 1, seldomly 2 or 3.&nbsp;</dd>      <dd>Dimensions of input empirical data: number of parameters (columns in        yEp array)</dd>      <dd>&nbsp;<br>      </dd>      <dt> <a name="PePsts_0"></a><big><b><big><tt>PePsts[0]</tt></big></b></big>        - Process Simulation status: 0/5-indefinite; 1/6-start; 2/7-run; 4/9-end      </dt>      <dd> This flag shows the process simulation status flag that controls        operation of the Process module. <br>      </dd>      <dd>In the usual (non-stepwise mode), the flag takes the following values:      </dd>      <dd>0 &nbsp; indefinite <br>        1 &nbsp; start of process simulation <br>        2 &nbsp; progress or the process simulation <br>        4 &nbsp; process simulation finished </dd>      <dd> <br>        The "stepwise" calculation mode is performed when the PePsts[0] flag has        one of the following values: <br>      </dd>      <dd><br>        5&nbsp;&nbsp; indefinite (stepwise) <br>        6 &nbsp; start of stepwise process simulation <br>        7 &nbsp; progress of stepwise process simulation <br>        9 &nbsp; stepwise process simulation finished </dd>      <dd>There is no need to&nbsp; manually change this field, except when you        want to run a previously "non-stepwise" process in the "stepwise mode. <br>      </dd>      <dd>To do this, just remake the Process record and start the simulation by        pressing the "Calculate" button. <br>      </dd>      <dd>In the other way round, you can convert the process simulator to        "non-stepwise" mode (runs faster, but cannot be stopped or executed        step-by-step).&nbsp; <br>      </dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="PePsts_1"></a><big><b><big><tt>PePsts[1]</tt></big></b></big>        - Is T,P,V of the system changing in the process (+ -)?</dt>      <dd> This flag incicates that temperature T, pressure P or volume        constraint V of the system will be changed in the process simulation.        Default is off ('-'). If the flag is set on, the respective iterator (<span          style="font-family: monospace;"><a            href="#iTC_0">iTC</a>,          <a href="#iV_0">iP</a></span> or <a href="#iV_0"><span style="font-family: monospace;">iV</span></a>)        must have a non-zero step size.</dd>      <dd>&nbsp; &nbsp; <br>      </dd>      <dt><a name="PePsts_2"></a><big><tt><b><big>PePsts[2]</big></b></tt></big>        - Is there a change in the bulk composition of the system (+ -)? </dt>      <dd> This flag indicates that <a href="glossary.html#DT_CSD">CSD</a>        (bulk composition) will be changed during the process simulation.        Default is on ('+'). If the flag is set on then the iterator <a href="#iTm_0"><span            style="font-family: monospace;">iTm</span></a>        must specify a non-zero step size.</dd>      <dd>&nbsp; &nbsp; </dd>      <dt> <a name="PePsts_3"></a><big><b><big><tt>PePsts[3]</tt></big></b></big>        - Are there changes in constraints or metastability parameters (+        -)?&nbsp;</dt>      <dd>&nbsp;This flag indicates that some metastability constriants or <a href="gems_bcc.html#gEx_"><span            style="font-family: monospace;">gEx</span></a>_        increments will be changed in the process simulation. Default is off        &nbsp;('-'). If the flag is set on then the iterator <a href="#iNv_0"><span            style="font-family: monospace;">iNv</span></a>        must specify a non-zero step size. If a real-time kinetics are to be        simulated then also the <a href="#iTau_0"><span style="font-family: monospace;">iTau</span></a>        iterator must specify a non-zero time step. </dd>      <dd><br>      </dd>      <dt><a name="PePsts_4"></a><big><tt><b><big>PePsts[4]</big></b></tt></big>        - Save generated SysEq records to database (+ -)? </dt>      <dd> &nbsp; &nbsp;This flag defines whether SysEq records generated on        main process simulation steps will be saved into the project database        ('+') or not ('-'). Default value is on ('+'). Note that if saving of        SysEq records is disabled by setting this flag off ('-') then you will        not be able to perform additional sampling of results by creating GtDemo        data samplers; however, process simulation will be performed much        faster, only fictive SysEq record keys will be written into the <a href="#PeStl"><span            style="font-family: monospace;">PeStl</span></a><span          style="font-family: monospace;">        </span>list. </dd>      <dd>&nbsp; &nbsp;</dd>      <dt> <a name="PePsts_5"></a><big><b><big><tt>PePsts[5]</tt></big></b></big>        - Is this a Sequential Reactor simulation (+ -)? </dt>      <dd> This flag sets up a "sequential reactor" modeling sequence, in which        the bulk composition of the system at the current (J-th) step is        calculated using equilibrium bulk compositions of phases from the        previous (J-1) simulation step. Default value is off ('-').&nbsp; <br>      </dd>      <dd>If this flag is turned on ('+') then the <span style="font-family: monospace;"><a            href="#PePsts_2">PePsts[2]</a>,          <a href="#PePsts_4">PePsts[4]</a> </span>and <a href="#PePsts_7"><span            style="font-family: monospace;">PePsts[7]</span></a>        flags must also be turned on. The "parent" SysEq record for this process        simulation must be configured with&nbsp; the <a href="gems_bcc.html#xp_"><span            style="font-family: monospace;">xp_</span></a>        vector allocated (<a href="gems_bcc.html#SyPvec_3"><span style="font-family: monospace;">SyPvec[3]</span></a>        flag switched on). See <a href="#SEQUENTIAL_REACTORS">example</a>. <br>        &nbsp; <br>      </dd>      <dt><a name="PePsts_6"></a><big><big style="font-weight: bold;"><span style="font-family: monospace;">PePsts[6]</span></big></big>        - Data sampling/plotting mode of process simulation&nbsp; (+ -)? </dt>      <dd>&nbsp;&nbsp; This flag activates the data sampling/plotting mode of        the process simulation. Default value is off ('-'). If this flag is set        on ('+') then you will have to enter (into <a href="#pDimXY_1"><span style="font-family: monospace;">pDimXY[1]</span></a>        counter) the number of columns to be sampled into the <a href="#yp"><span            style="font-family: monospace;">yp</span></a>        table; optionally, the dimensionality of empirical data arrays ( <a href="#pDimEf_0"><span            style="font-family: monospace;">pDimEf[0]</span></a>        and <a href="#pDimEf_1"><span style="font-family: monospace;">pDimEf[1]</span></a>        counters); and, after remake is finished, in any case type a data        sampling math scritpt into the <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        text editor field. <br>      </dd>      <dd>See more in the <a href="#PROCESS_PLOT_EXPORT">"Plotting and          exporting results" chapter</a>. <br>      </dd>      <dd>&nbsp;<br>      </dd>      <dt> <a name="PePsts_7"></a><tt><b><big>PePsts[7]</big></b></tt> - Does        Process simulation depend on the output GEM parameters (pH, Eh etc.) (+        -)? </dt>      <dd>This flag (if turned on) ensures that the process simulation is        performed in stepwise-reentrant mode because the math scripts refer to        some GEM IPM output parameters (such as activities, fugacities,        speciation, equilibrium composition of phases, pH, pe, Eh etc.)&nbsp;        Typical examples are inverse titrations and sequential reactors.</dd>      <dd> Default value is off ('-'). <br>      </dd>      <dd><br>      </dd>      <dt><a name="PePsts_8"></a><big><b><big><tt>PePsts[8]</tt></big></b></big>        - Is this a single inverse titration problem (+ -)? </dt>      <dd>This mode permits the user to create customary inverse titration        simulators by writing a special <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        math script (<a href="#PePsts_10"><span style="font-family: monospace;">PePsts[10]</span></a>        flag must also be turned on). The <span style="font-family: monospace;">"I</span>"        index must be used in some equations to count iterations and stop when        its limit is reached, to prevent infinite cycling. See also<a href="#INVERSE_TITRATION">          examples</a>. Default value of this flag is off ('-'). &nbsp; </dd>      <dd>If this flag (<span style="font-family: monospace;">PePsts[8]</span>)        &nbsp;is on then flags <span style="font-family: monospace;">PePsts[2],          PePsts[4], PePsts[7], PePsts[10]</span> must be switched on; however,        the flag <a href="#PePsts_11"><span style="font-family: monospace;">PePsts[11]</span></a>        must be turned&nbsp; off. </dd>      <dd><br>      </dd>      <dt><a name="PePsts_9"></a><b><big><tt>PePsts[9]</tt></big></b> - Flag for        kinetic-dependent&nbsp; modes of process simulation (+ -) &nbsp;-        reserved &nbsp;</dt>      <dd>&nbsp; &nbsp; &nbsp; <br>      </dd>      <dd>&nbsp; &nbsp;<br>      </dd>      <dt> <a name="PePsts_10"></a><big><b><big><tt>PePsts[10]</tt></big></b></big>        - Is a math script to be specified in this process simulator definition        (+ -)? </dt>      <dd> This flag defines whether the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        math script will be used for controlling the process simulation. If this        flag is turned on ('+', default) then the math script must contain        operators that &nbsp;describe how some GEM IPM input parameters will be        changed on <span style="font-family: monospace;">J</span>-th main        simulation step (more in the <a href="#PROCESS_SIM_MATH_SCRIPT">"Writing
          process simulation math scritps" chapter</a>).&nbsp;&nbsp; <br>      </dd>      <dd>This flag can be turned off ('-') in cases when only temperature or        pressure will be changed in the simulation, but the bulk composition        will remain constant (then the iterators <a href="#iP_0"><span style="font-family: monospace;">iP</span></a>        or <a href="#iTC_0"><span style="font-family: monospace;">iTC</span></a>        must be set properly to describe the changes). <br>      </dd>      <dd> <br>      </dd>      <dt> <a name="PePsts_11"></a><big><big><b><tt>PePsts[11]</tt></b></big></big>        - Is this a sequence of inverse titration points (+ -)? </dt>      <dd>This flag (if turned on '+') defines simulation of a sequence of        inverse titration points by invoking a built-in "golden section" 1-D        parametric minimization algorithm. See more in the "Inverse titration        sequence" section. For this mode, set <span style="font-family: monospace;">NeIt[0]
          &gt; Ntxi[1]*15</span>;&nbsp; <br>        flags <span style="font-family: monospace;">PePsts[2], PePsts[7],          PePsts[10]</span> must be turned on, but flag <span style="font-family: monospace;">PePsts[8]</span>        must be turned off.&nbsp; &nbsp; <br>        Default value of this flag is off ('-'). <br>        &nbsp; &nbsp;<br>      </dd>      <dt> <a name="PePvv_0"></a><b><big><tt>PePvv[0]</tt></big></b> - Flag for        allocation of an optional <span style="font-family: monospace;">vTm</span>        vector (+ - *) </dt>      <dd> &nbsp; The <a href="#vTm"><span style="font-family: monospace;">vTm</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default). <br>        &nbsp; <br>      </dd>      <dt><a name="PePvv_1"></a><big><b><tt>PePvv[1]</tt></b></big> - Flag for        allocation of an optional <span style="font-family: monospace;">vNV</span>        vector (+ - *)</dt>      <dd> &nbsp;The <a href="#vNV"><span style="font-family: monospace;">vNV</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default). </dd>      <dt><a name="PePvv_2"></a><big><b><tt>PePvv[2]</tt></b></big> - Flag for        allocation of an otpional <span style="font-family: monospace;">vP</span>        vector (+ - *)</dt>      <dd> &nbsp;The <a href="#vP"><span style="font-family: monospace;">vP</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default).&nbsp;&nbsp; <br>      </dd>      <dt> <a name="PePvv_3"></a><big><b><tt>PePvv[3]</tt></b></big> - Flag for        allocation of an optional <span style="font-family: monospace;">vT</span>        vector (+ - *)</dt>      <dd> &nbsp;The <a href="#vT"><span style="font-family: monospace;">vT</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default). </dd>      <dt><a name="PePvv_4"></a><b><tt><big>PePvv[4]</big> </tt></b>- Flag for        allocation of an optional <span style="font-family: monospace;">vV</span>        vector (+ - *)</dt>      <dd> The <a href="#vV"><span style="font-family: monospace;">vV</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default). <br>      </dd>      <dt><a name="PePvv_5"></a><big><b><tt>PePvv[5]</tt></b></big> - Flag for        allocation of an optional <span style="font-family: monospace;">vTau</span>        vector (+ - *)</dt>      <dd> &nbsp; The <a href="#vTau"><span style="font-family: monospace;">vTau</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default).&nbsp; <br>      </dd>      <dt><a name="PePvv_6"></a><big><b><tt>PePvv[6]</tt></b></big> - Flag for        allocation of an optional <span style="font-family: monospace;">vpXi</span>        vector (+ - *)</dt>      <dd>&nbsp; The <a href="#vpXi"><span style="font-family: monospace;">vpXi</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default).&nbsp; <br>      </dd>      <dt><a name="PePvv_7"></a><big><b><tt>PePvv[7]</tt></b></big> - Flag for        allocation of an optional <span style="font-family: monospace;">vNu</span>        vector (+ - *)</dt>      <dd> The <a href="#vNu"><span style="font-family: monospace;">vNu</span></a>        vector will be allocated if this flag is turned on ('+' or '*'),        otherwise this vector will be deallocated (default).<br>        &nbsp; <br>      </dd>      <dt><a name="PePvv_8"></a><b><tt><big>PePvv[8]</big> </tt></b>- Flag for        allocation of an optional <span style="font-family: monospace;">vKin</span>        array (+ - *) </dt>      <dd>&nbsp; This flag controls allocation of a kinetic parameters        array&nbsp;<span style="font-family: monospace;"> <a href="#vKin">vKin</a></span>.        Default value is off ('-'). If the flag is set on ('+' or '*') then        the&nbsp; non-zero dimensions must be entered into <a href="#PeDim1_2"><span            style="font-family: monospace;">PeDim1[2]</span></a>        (number of rows) and <a href="#PeDim1_3"><span style="font-family: monospace;">PeDim1[3]</span></a>        (number of columns) counters.<br>        &nbsp;&nbsp; </dd>      <dt><a name="PePvv_9"></a><big><b><tt>PePvv[9]</tt></b></big> - Flag for        allocation of the process simulation parameters array <span style="font-family: monospace;">modC</span>        (+ - *) </dt>      <dd>This flag controls allocation of the <a href="#modC"><span style="font-family: monospace;">modC</span></a>        array, which in many cases is useful for entering or collecting some        important parameters that control the process simulation. The <span style="font-family: monospace;">modC</span>        array is also used in some <a href="gmscript.html#MS_LIBRARY">template          math scripts</a>. The default flag is off ('-'). If the flag is on        ('+') then the number of columns in the <span style="font-family: monospace;">modC</span>        array must be given in the <a href="#PeDim1_1"><span style="font-family: monospace;">PeDim1[1]</span></a>        counter (<span style="font-family: monospace;"></span>number of lines is        automatically set equal to <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>).</dd>      <dd>&nbsp;&nbsp;&nbsp; </dd>      <dt> <a name="PePvv_10"></a><b><tt><big>PePvv[10]</big> -</tt></b> Use        previous SysEq result (+) or Simplex initial approximation (-)? </dt>      <dd>This flag (if turned on, '+') permits to use the previous result of        calculation of equilibrium state (at J-1 process main step) as an        initial approximation for the J-th process simulation main step - the        so-called SIA mode of GEM IPM algorithm. <br>      </dd>      <dd>This can greatly accelerate extensive simulations, although it is        safer to use the automatic IPM Simplex initial approximation (AIA) at        all process main steps. Default flag is off ('-').</dd>      <dd><br>      </dd>      <dt><a name="PePvv_11"></a><b><tt><big>PePvv[11]</big> </tt></b>- Show        experimental data points in the data sampling/plotting mode (+ -)? </dt>      <dd>&nbsp;&nbsp; This flag (if turned on '+') causes the GraphDialog        module to display data entered into the <a href="#xEp"><span style="font-family: monospace;">xEp</span></a>        and <a href="#yEp"><span style="font-family: monospace;">yEp</span></a>        arrays as scattered symbols on top of the simulated lines. Default flag        is off ('-'). <br>      </dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="Ntxi_0"></a><b><big><tt>Ntxi[0]</tt></big></b> - Maximum        number of time steps in mass transport simulation involving real time        (reserved for future versions)</dt>      <dd>&nbsp;&nbsp;</dd>      <dd> &nbsp; <br>      </dd>      <dt><a name="Ntxi_1"></a><b><big><tt><big>Ntxi[1]</big> </tt></big></b>-        Maximum number of main process simulation steps (important!)&nbsp; </dt>      <dd> &nbsp; &nbsp;This counter defines how many main process simulation        steps (indexed by <span style="font-family: monospace;">J</span>) can        at most be performed. This counter must always be set upon creation or        remake of the Process record because it is necessary for allocation of        many dynamic data objects such as <span style="font-family: monospace;"><a            href="#xp">xp</a>,          <a href="#yp">yp</a>, <a href="#modC">modC</a></span>. However, the        actual number of performed steps can be less than <span style="font-family: monospace;">Ntxi[1]</span>        depending on the process iterators or conditions in the <a href="#P_expr"><span            style="font-family: monospace;">P_expr</span></a>        math script. <br>      </dd>      <dd>Default counter is 1. <br>      </dd>      <dt><a name="PeDim1_0"></a><big><big><b><tt>PeDim1[0]</tt></b></big></big>        -&nbsp; Dimensionality of the SyEq record key list (<a href="#PeStl"><span            style="font-family: monospace;">PeStl</span></a>)</dt>      <dd> &nbsp;<br>      </dd>      <dt> <a name="PeDim1_1"></a><big><big><b><tt>PeDim1[1]</tt></b></big></big>        - Number of columns in the <a href="#modC"><span style="font-family: monospace;">modC</span></a>        array</dt>      <dd> &nbsp;&nbsp; &nbsp;</dd>      <dt> <a name="PeDim1_2"></a><b><tt><big>PeDim1[2]</big> </tt></b>-        Number of rows in the <a href="#vKin"><span style="font-family: monospace;">vKin</span></a>        array</dt>      <dd> &nbsp;&nbsp; <br>      </dd>      <dt> <a name="PeDim1_3"></a><b><tt><big>PeDim1[3]</big> </tt></b>-        Number of columns in the <a href="#vKin"><span style="font-family: monospace;">vKin</span></a>        array</dt>      <dd> &nbsp;&nbsp;</dd>      <dt> <a name="PeDim1_4"></a><big><big><b><tt>PeDim1[4]</tt></b></big></big>        - Number of entries in <a href="#PSDref"><span style="font-family: monospace;">PSDref</span></a>        and <a href="#PSDval"><span style="font-family: monospace;">PSDval</span></a>        list&nbsp; <br>      </dt>      <dd> <br>      </dd>    </dl>    <h3>Data Objects Reserved For Future Versions</h3>    <dl>      <dt> <a name="pGDkey"></a><b><tt>pSYkey</tt></b> - internal&nbsp; </dt>      <dd><br>      </dd>      <dt><a name="pSLkey"></a><b><tt>pTPkey</tt></b> - internal&nbsp; <br>      </dt>      <dd><br>      </dd>      <dt> <a name="PeTprn"></a><b><tt>PeTprn</tt></b> - internal</dt>      <dd>&nbsp; <br>      </dd>    </dl>    <hr width="100%" size="2">    <h2><a name="PROCES_ERRORS"></a> 6. Warnings and error messages</h2>    <dl>      <dt><b><big><tt>E00PErem: </tt></big></b>Inconsistent dimensions in        Process data structure.</dt>      <dd>&nbsp; Some counters are not set consistent to other. <br>      </dd>      <dd>Remake the Process record and check the counters in the Process        Wizard.<br>        &nbsp;<br>      </dd>      <dt><b><big><tt>E01PErem: </tt></big></b>Invalid Process Simulation mode.</dt>      <dd>&nbsp; Some flags defining simulation modes are inconsistent. <br>      </dd>      <dd>Remake the record and check the settings in Process Wizard.<br>        &nbsp;<br>      </dd>      <dt><b><big><tt>W02PErem: </tt></big></b>Inconsistent maximum number of        simulation steps! <br>      </dt>      <dd>&nbsp; The <a href="#Ntxi_1"><span style="font-family: monospace;">Ntxi[1]</span></a>        counter contains 0 or a negative value. <br>      </dd>      <dd>Remake the record and set the iterators and numbers in Process        Wizard.&nbsp; <br>        &nbsp;<br>      </dd>      <dt><b><big><tt>E03PErem: </tt></big></b>Attempt to access corrupted        dynamic memory.</dt>      <dd> &nbsp;&nbsp; Internal error (memory corruption). Please, report it to        developers. <br>        &nbsp; &nbsp;<br>      </dd>      <dt><b><big><tt>E04PErem: </tt></big></b>Attempt to allocate corrupted        dynamic memory.</dt>      <dd>&nbsp;&nbsp; Internal error (dynamic memory corruption). Please,        report it to developers.<br>        &nbsp; &nbsp;<br>      </dd>      <dt><b><big><tt>E05PErem: </tt></big></b>Attempt to free corrupted        dynamic memory.</dt>      <dd>Internal error (dynamic memory corruption). Please, report it to        developers.<br>        &nbsp;<br>      </dd>      <dt><b><big><tt>E06PErem: </tt></big></b>Dynamic memory corruption in        Process data structure.</dt>      <dd> &nbsp;Internal error (dynamic memory corruption). Please, report it        to developers.<br>        &nbsp;<br>      </dd>      <dt><b><big><tt>E07PErem: </tt></big></b>Wrong SysEq record key (no        system)!</dt>      <dd>&nbsp;Perhaps, the "parent" SysEq record was occasionally deleted. <br>      </dd>      <dd>Please, restore it and calculate the process simulation again.        &nbsp;&nbsp; <br>        &nbsp; &nbsp;</dd>      <dt><b><big><tt>E08PErem: </tt></big></b>Wrong SysEq record key (another        Modelling Project)!</dt>      <dd>The "parent" <a href="gm_syseq.html">SysEq record</a> has been copied        from another project database. <br>      </dd>      <dd>Please, rename it (in the "Database Management" mode of GEM-Selektor),        then check and calculate it, then remake this Process record and try        running the process simulation again. &nbsp; &nbsp;&nbsp; <br>        <br>      </dd>      <dt><b><big><tt>E09PErem: </tt></big></b>Please, do it in the Equilibria        Calculation mode!</dt>      <dd>&nbsp; You have attempted to remake the Process simulator in "Database        Management" mode. <br>      </dd>      <dd>Please, open the<a href="gm_project.html"> modeling project </a>and        then&nbsp; remake this Process record.<br>        &nbsp; &nbsp;</dd>      <dt><b><big><tt>E93MSTran:&nbsp; </tt></big></b>Error in analyzing        Process simulation control script:&nbsp;</dt>      <dd>&nbsp; Syntax error(s) were detected during pre-processing or        translation of text in the <a href="#P_expr"><span style="font-family: monospace;">P_expr</span></a>        math script. The remaining (not yet processed) part of the script will        be shown after the error message in order to help in localizing the        error. <br>        To correct the script, press "Ok" to close the error message, examine        the <a href="g_mscript.html">math script syntax</a> in the <a href="#P_expr"><span            style="font-family: monospace;">P_expr</span></a>        field, fix the error (or data object label, or phase/species name), save        the Process record to database, and calculate the simulation        again.&nbsp; <br>      </dd>      <dd> &nbsp; &nbsp;</dd>      <dt><big><b><tt>E94MSTran: </tt></b></big>Error in analyzing Process        sampling math script:</dt>      <dd> &nbsp;Syntax error(s) were detected during pre-processing or        translation of text in the <a href="#pgExpr"><span style="font-family: monospace;">pGexpr</span></a>        math script. The remaining (not yet processed) part of the script will        be printed after the error message in order to help in localizing the        error. </dd>      <dd> To correct the script, press "Ok" to close the error message, examine        the <a href="g_mscript.html">math script syntax</a> in the <a href="#pgExpr"><span            style="font-family: monospace;">pGexpr</span></a>        field, fix the error (or data object label, or phase/species name), save        the Process record to database and calculate the simulation again.<br>        &nbsp; </dd>      <dt><b><big><tt>E00PEexec: </tt></big></b>Process simulation cancelled by        the user.</dt>      <dd>&nbsp;&nbsp; The user has cancelled the continuous or stepwise process        simulation. <br>        &nbsp; <br>      </dd>      <dt><b><big><tt>W01PEexec: </tt></big></b>GoldenSection(): No result in        specified interval! Change interval!&nbsp;</dt>      <dd>&nbsp;&nbsp; The built-in "golden section" algorithm could not        converge in one of the inverse titration sequence steps. <br>        Check and extend the titrant additions interval in the <a href="#ipXi_0"><span            style="font-family: monospace;">ipXi</span></a>        iterator. Sometimes, the "golden section" algorithm cannot converge        because the titrant addition precision value <a href="#ipXi_2"><span style="font-family: monospace;">ipXi[2]</span></a>        is too large; in this case, decrease it by 1-2 orders of        magnitude.&nbsp; &nbsp;&nbsp; <br>        &nbsp; </dd>      <dt><b><big><tt>E02PEexec: </tt></big></b>Please, do it in the Equlibria        Calculations mode of GEM-Selektor!&nbsp;</dt>      <dd>&nbsp;&nbsp; You have attempted to calculate the Process record in        "Database management" mode. <br>      </dd>      <dd>Switch to the Equlibria Calculations mode and try again.<br>        &nbsp;&nbsp;&nbsp;</dd>      <dt><b><big><tt>E00PSexec: </tt></big></b>No print script format text in        this record &nbsp; &nbsp;&nbsp;</dt>      <dd>&nbsp;&nbsp; The SDref record selected when printing the Process        record data contains no print format script (or print script for another        record type.)&nbsp; <br>      </dd>      <dd>Switch to "Database Management" mode, open the SDref window, and check        the record with selected print script. <br>        &nbsp; <br>      </dd>    </dl>    <hr width="100%" size="2"><tt>Last modified: 28 May 2020 DK </tt><tt> </tt>    <p><tt>End of file</tt> <br>      &nbsp; </p>    <br>    <br>    <br>  </body></html>